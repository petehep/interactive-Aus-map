(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Qh(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var mw={exports:{}},Xh={},_w={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ku=Symbol.for("react.element"),iC=Symbol.for("react.portal"),rC=Symbol.for("react.fragment"),sC=Symbol.for("react.strict_mode"),oC=Symbol.for("react.profiler"),aC=Symbol.for("react.provider"),lC=Symbol.for("react.context"),uC=Symbol.for("react.forward_ref"),cC=Symbol.for("react.suspense"),hC=Symbol.for("react.memo"),dC=Symbol.for("react.lazy"),bg=Symbol.iterator;function fC(t){return t===null||typeof t!="object"?null:(t=bg&&t[bg]||t["@@iterator"],typeof t=="function"?t:null)}var gw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yw=Object.assign,vw={};function ba(t,e,n){this.props=t,this.context=e,this.refs=vw,this.updater=n||gw}ba.prototype.isReactComponent={};ba.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ba.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ww(){}ww.prototype=ba.prototype;function Qp(t,e,n){this.props=t,this.context=e,this.refs=vw,this.updater=n||gw}var Xp=Qp.prototype=new ww;Xp.constructor=Qp;yw(Xp,ba.prototype);Xp.isPureReactComponent=!0;var Ng=Array.isArray,Ew=Object.prototype.hasOwnProperty,Yp={current:null},Tw={key:!0,ref:!0,__self:!0,__source:!0};function Sw(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Ew.call(e,i)&&!Tw.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var d=Array(u),f=0;f<u;f++)d[f]=arguments[f+2];r.children=d}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:ku,type:t,key:o,ref:a,props:r,_owner:Yp.current}}function pC(t,e){return{$$typeof:ku,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ku}function mC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Og=/\/+/g;function Bd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mC(""+t.key):e.toString(36)}function Bc(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ku:case iC:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Bd(a,0):i,Ng(r)?(n="",t!=null&&(n=t.replace(Og,"$&/")+"/"),Bc(r,e,n,"",function(f){return f})):r!=null&&(Jp(r)&&(r=pC(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Og,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Ng(t))for(var u=0;u<t.length;u++){o=t[u];var d=i+Bd(o,u);a+=Bc(o,e,n,d,r)}else if(d=fC(t),typeof d=="function")for(t=d.call(t),u=0;!(o=t.next()).done;)o=o.value,d=i+Bd(o,u++),a+=Bc(o,e,n,d,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function gc(t,e,n){if(t==null)return t;var i=[],r=0;return Bc(t,i,"","",function(o){return e.call(n,o,r++)}),i}function _C(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},jc={transition:null},gC={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:jc,ReactCurrentOwner:Yp};function Iw(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:gc,forEach:function(t,e,n){gc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gc(t,function(){e++}),e},toArray:function(t){return gc(t,function(e){return e})||[]},only:function(t){if(!Jp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ne.Component=ba;Ne.Fragment=rC;Ne.Profiler=oC;Ne.PureComponent=Qp;Ne.StrictMode=sC;Ne.Suspense=cC;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gC;Ne.act=Iw;Ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=yw({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Yp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)Ew.call(e,d)&&!Tw.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){u=Array(d);for(var f=0;f<d;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:ku,type:t.type,key:r,ref:o,props:i,_owner:a}};Ne.createContext=function(t){return t={$$typeof:lC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aC,_context:t},t.Consumer=t};Ne.createElement=Sw;Ne.createFactory=function(t){var e=Sw.bind(null,t);return e.type=t,e};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(t){return{$$typeof:uC,render:t}};Ne.isValidElement=Jp;Ne.lazy=function(t){return{$$typeof:dC,_payload:{_status:-1,_result:t},_init:_C}};Ne.memo=function(t,e){return{$$typeof:hC,type:t,compare:e===void 0?null:e}};Ne.startTransition=function(t){var e=jc.transition;jc.transition={};try{t()}finally{jc.transition=e}};Ne.unstable_act=Iw;Ne.useCallback=function(t,e){return pn.current.useCallback(t,e)};Ne.useContext=function(t){return pn.current.useContext(t)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};Ne.useEffect=function(t,e){return pn.current.useEffect(t,e)};Ne.useId=function(){return pn.current.useId()};Ne.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};Ne.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};Ne.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};Ne.useMemo=function(t,e){return pn.current.useMemo(t,e)};Ne.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};Ne.useRef=function(t){return pn.current.useRef(t)};Ne.useState=function(t){return pn.current.useState(t)};Ne.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};Ne.useTransition=function(){return pn.current.useTransition()};Ne.version="18.3.1";_w.exports=Ne;var G=_w.exports;const ar=pw(G);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yC=G,vC=Symbol.for("react.element"),wC=Symbol.for("react.fragment"),EC=Object.prototype.hasOwnProperty,TC=yC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SC={key:!0,ref:!0,__self:!0,__source:!0};function Cw(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)EC.call(e,i)&&!SC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:vC,type:t,key:o,ref:a,props:r,_owner:TC.current}}Xh.Fragment=wC;Xh.jsx=Cw;Xh.jsxs=Cw;mw.exports=Xh;var S=mw.exports,Af={},kw={exports:{}},Dn={},Pw={exports:{}},Aw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,_e){var te=Z.length;Z.push(_e);e:for(;0<te;){var me=te-1>>>1,we=Z[me];if(0<r(we,_e))Z[me]=_e,Z[te]=we,te=me;else break e}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var _e=Z[0],te=Z.pop();if(te!==_e){Z[0]=te;e:for(var me=0,we=Z.length,Ae=we>>>1;me<Ae;){var Fe=2*(me+1)-1,F=Z[Fe],ne=Fe+1,ue=Z[ne];if(0>r(F,te))ne<we&&0>r(ue,F)?(Z[me]=ue,Z[ne]=te,me=ne):(Z[me]=F,Z[Fe]=te,me=Fe);else if(ne<we&&0>r(ue,te))Z[me]=ue,Z[ne]=te,me=ne;else break e}}return _e}function r(Z,_e){var te=Z.sortIndex-_e.sortIndex;return te!==0?te:Z.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],f=[],_=1,y=null,w=3,T=!1,A=!1,N=!1,U=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Z){for(var _e=n(f);_e!==null;){if(_e.callback===null)i(f);else if(_e.startTime<=Z)i(f),_e.sortIndex=_e.expirationTime,e(d,_e);else break;_e=n(f)}}function H(Z){if(N=!1,b(Z),!A)if(n(d)!==null)A=!0,ze($);else{var _e=n(f);_e!==null&&Mt(H,_e.startTime-Z)}}function $(Z,_e){A=!1,N&&(N=!1,P(C),C=-1),T=!0;var te=w;try{for(b(_e),y=n(d);y!==null&&(!(y.expirationTime>_e)||Z&&!V());){var me=y.callback;if(typeof me=="function"){y.callback=null,w=y.priorityLevel;var we=me(y.expirationTime<=_e);_e=t.unstable_now(),typeof we=="function"?y.callback=we:y===n(d)&&i(d),b(_e)}else i(d);y=n(d)}if(y!==null)var Ae=!0;else{var Fe=n(f);Fe!==null&&Mt(H,Fe.startTime-_e),Ae=!1}return Ae}finally{y=null,w=te,T=!1}}var Q=!1,R=null,C=-1,x=5,O=-1;function V(){return!(t.unstable_now()-O<x)}function z(){if(R!==null){var Z=t.unstable_now();O=Z;var _e=!0;try{_e=R(!0,Z)}finally{_e?M():(Q=!1,R=null)}}else Q=!1}var M;if(typeof k=="function")M=function(){k(z)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,An=Ze.port2;Ze.port1.onmessage=z,M=function(){An.postMessage(null)}}else M=function(){U(z,0)};function ze(Z){R=Z,Q||(Q=!0,M())}function Mt(Z,_e){C=U(function(){Z(t.unstable_now())},_e)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){A||T||(A=!0,ze($))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(Z){switch(w){case 1:case 2:case 3:var _e=3;break;default:_e=w}var te=w;w=_e;try{return Z()}finally{w=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,_e){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var te=w;w=Z;try{return _e()}finally{w=te}},t.unstable_scheduleCallback=function(Z,_e,te){var me=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?me+te:me):te=me,Z){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=te+we,Z={id:_++,callback:_e,priorityLevel:Z,startTime:te,expirationTime:we,sortIndex:-1},te>me?(Z.sortIndex=te,e(f,Z),n(d)===null&&Z===n(f)&&(N?(P(C),C=-1):N=!0,Mt(H,te-me))):(Z.sortIndex=we,e(d,Z),A||T||(A=!0,ze($))),Z},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(Z){var _e=w;return function(){var te=w;w=_e;try{return Z.apply(this,arguments)}finally{w=te}}}})(Aw);Pw.exports=Aw;var IC=Pw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CC=G,Mn=IC;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xw=new Set,Yl={};function co(t,e){ya(t,e),ya(t+"Capture",e)}function ya(t,e){for(Yl[t]=e,t=0;t<e.length;t++)xw.add(e[t])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xf=Object.prototype.hasOwnProperty,kC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mg={},Dg={};function PC(t){return xf.call(Dg,t)?!0:xf.call(Mg,t)?!1:kC.test(t)?Dg[t]=!0:(Mg[t]=!0,!1)}function AC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xC(t,e,n,i){if(e===null||typeof e>"u"||AC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xt[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xt[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xt[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xt[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xt[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xt[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xt[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xt[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xt[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var em=/[\-:]([a-z])/g;function tm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(em,tm);Xt[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(em,tm);Xt[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(em,tm);Xt[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xt[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Xt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xt[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function nm(t,e,n,i){var r=Xt.hasOwnProperty(e)?Xt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xC(e,n,r,i)&&(n=null),i||r===null?PC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var yr=CC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yc=Symbol.for("react.element"),$o=Symbol.for("react.portal"),Ko=Symbol.for("react.fragment"),im=Symbol.for("react.strict_mode"),Rf=Symbol.for("react.profiler"),Rw=Symbol.for("react.provider"),Lw=Symbol.for("react.context"),rm=Symbol.for("react.forward_ref"),Lf=Symbol.for("react.suspense"),bf=Symbol.for("react.suspense_list"),sm=Symbol.for("react.memo"),Lr=Symbol.for("react.lazy"),bw=Symbol.for("react.offscreen"),Vg=Symbol.iterator;function gl(t){return t===null||typeof t!="object"?null:(t=Vg&&t[Vg]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,jd;function Pl(t){if(jd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jd=e&&e[1]||""}return`
`+jd+t}var Hd=!1;function Wd(t,e){if(!t||Hd)return"";Hd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var d=`
`+r[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{Hd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pl(t):""}function RC(t){switch(t.tag){case 5:return Pl(t.type);case 16:return Pl("Lazy");case 13:return Pl("Suspense");case 19:return Pl("SuspenseList");case 0:case 2:case 15:return t=Wd(t.type,!1),t;case 11:return t=Wd(t.type.render,!1),t;case 1:return t=Wd(t.type,!0),t;default:return""}}function Nf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ko:return"Fragment";case $o:return"Portal";case Rf:return"Profiler";case im:return"StrictMode";case Lf:return"Suspense";case bf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Lw:return(t.displayName||"Context")+".Consumer";case Rw:return(t._context.displayName||"Context")+".Provider";case rm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sm:return e=t.displayName||null,e!==null?e:Nf(t.type)||"Memo";case Lr:e=t._payload,t=t._init;try{return Nf(t(e))}catch{}}return null}function LC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nf(e);case 8:return e===im?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function is(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Nw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bC(t){var e=Nw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vc(t){t._valueTracker||(t._valueTracker=bC(t))}function Ow(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Nw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function lh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Of(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=is(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mw(t,e){e=e.checked,e!=null&&nm(t,"checked",e,!1)}function Mf(t,e){Mw(t,e);var n=is(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Df(t,e.type,n):e.hasOwnProperty("defaultValue")&&Df(t,e.type,is(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ug(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Df(t,e,n){(e!=="number"||lh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Al=Array.isArray;function la(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+is(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Vf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Al(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:is(n)}}function Dw(t,e){var n=is(e.value),i=is(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Bg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wc,zw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wc=wc||document.createElement("div"),wc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NC=["Webkit","ms","Moz","O"];Object.keys(Vl).forEach(function(t){NC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vl[e]=Vl[t]})});function Uw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vl.hasOwnProperty(t)&&Vl[t]?(""+e).trim():e+"px"}function Fw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Uw(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var OC=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uf(t,e){if(e){if(OC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Ff(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bf=null;function om(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jf=null,ua=null,ca=null;function jg(t){if(t=xu(t)){if(typeof jf!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=nd(e),jf(t.stateNode,t.type,e))}}function Bw(t){ua?ca?ca.push(t):ca=[t]:ua=t}function jw(){if(ua){var t=ua,e=ca;if(ca=ua=null,jg(t),e)for(t=0;t<e.length;t++)jg(e[t])}}function Hw(t,e){return t(e)}function Ww(){}var qd=!1;function qw(t,e,n){if(qd)return t(e,n);qd=!0;try{return Hw(t,e,n)}finally{qd=!1,(ua!==null||ca!==null)&&(Ww(),jw())}}function eu(t,e){var n=t.stateNode;if(n===null)return null;var i=nd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Hf=!1;if(cr)try{var yl={};Object.defineProperty(yl,"passive",{get:function(){Hf=!0}}),window.addEventListener("test",yl,yl),window.removeEventListener("test",yl,yl)}catch{Hf=!1}function MC(t,e,n,i,r,o,a,u,d){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(_){this.onError(_)}}var zl=!1,uh=null,ch=!1,Wf=null,DC={onError:function(t){zl=!0,uh=t}};function VC(t,e,n,i,r,o,a,u,d){zl=!1,uh=null,MC.apply(DC,arguments)}function zC(t,e,n,i,r,o,a,u,d){if(VC.apply(this,arguments),zl){if(zl){var f=uh;zl=!1,uh=null}else throw Error(ee(198));ch||(ch=!0,Wf=f)}}function ho(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hg(t){if(ho(t)!==t)throw Error(ee(188))}function UC(t){var e=t.alternate;if(!e){if(e=ho(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Hg(r),t;if(o===i)return Hg(r),e;o=o.sibling}throw Error(ee(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function Zw(t){return t=UC(t),t!==null?$w(t):null}function $w(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$w(t);if(e!==null)return e;t=t.sibling}return null}var Kw=Mn.unstable_scheduleCallback,Wg=Mn.unstable_cancelCallback,FC=Mn.unstable_shouldYield,BC=Mn.unstable_requestPaint,Pt=Mn.unstable_now,jC=Mn.unstable_getCurrentPriorityLevel,am=Mn.unstable_ImmediatePriority,Qw=Mn.unstable_UserBlockingPriority,hh=Mn.unstable_NormalPriority,HC=Mn.unstable_LowPriority,Xw=Mn.unstable_IdlePriority,Yh=null,Li=null;function WC(t){if(Li&&typeof Li.onCommitFiberRoot=="function")try{Li.onCommitFiberRoot(Yh,t,void 0,(t.current.flags&128)===128)}catch{}}var mi=Math.clz32?Math.clz32:ZC,qC=Math.log,GC=Math.LN2;function ZC(t){return t>>>=0,t===0?32:31-(qC(t)/GC|0)|0}var Ec=64,Tc=4194304;function xl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=xl(u):(o&=a,o!==0&&(i=xl(o)))}else a=n&~r,a!==0?i=xl(a):o!==0&&(i=xl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-mi(e),r=1<<n,i|=t[n],e&=~r;return i}function $C(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-mi(o),u=1<<a,d=r[a];d===-1?(!(u&n)||u&i)&&(r[a]=$C(u,e)):d<=e&&(t.expiredLanes|=u),o&=~u}}function qf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yw(){var t=Ec;return Ec<<=1,!(Ec&4194240)&&(Ec=64),t}function Gd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mi(e),t[e]=n}function QC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-mi(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function lm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-mi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Qe=0;function Jw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var e0,um,t0,n0,i0,Gf=!1,Sc=[],Wr=null,qr=null,Gr=null,tu=new Map,nu=new Map,Nr=[],XC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qg(t,e){switch(t){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":tu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(e.pointerId)}}function vl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=xu(e),e!==null&&um(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function YC(t,e,n,i,r){switch(e){case"focusin":return Wr=vl(Wr,t,e,n,i,r),!0;case"dragenter":return qr=vl(qr,t,e,n,i,r),!0;case"mouseover":return Gr=vl(Gr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return tu.set(o,vl(tu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,nu.set(o,vl(nu.get(o)||null,t,e,n,i,r)),!0}return!1}function r0(t){var e=js(t.target);if(e!==null){var n=ho(e);if(n!==null){if(e=n.tag,e===13){if(e=Gw(n),e!==null){t.blockedOn=e,i0(t.priority,function(){t0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Bf=i,n.target.dispatchEvent(i),Bf=null}else return e=xu(n),e!==null&&um(e),t.blockedOn=n,!1;e.shift()}return!0}function Gg(t,e,n){Hc(t)&&n.delete(e)}function JC(){Gf=!1,Wr!==null&&Hc(Wr)&&(Wr=null),qr!==null&&Hc(qr)&&(qr=null),Gr!==null&&Hc(Gr)&&(Gr=null),tu.forEach(Gg),nu.forEach(Gg)}function wl(t,e){t.blockedOn===e&&(t.blockedOn=null,Gf||(Gf=!0,Mn.unstable_scheduleCallback(Mn.unstable_NormalPriority,JC)))}function iu(t){function e(r){return wl(r,t)}if(0<Sc.length){wl(Sc[0],t);for(var n=1;n<Sc.length;n++){var i=Sc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Wr!==null&&wl(Wr,t),qr!==null&&wl(qr,t),Gr!==null&&wl(Gr,t),tu.forEach(e),nu.forEach(e),n=0;n<Nr.length;n++)i=Nr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Nr.length&&(n=Nr[0],n.blockedOn===null);)r0(n),n.blockedOn===null&&Nr.shift()}var ha=yr.ReactCurrentBatchConfig,fh=!0;function ek(t,e,n,i){var r=Qe,o=ha.transition;ha.transition=null;try{Qe=1,cm(t,e,n,i)}finally{Qe=r,ha.transition=o}}function tk(t,e,n,i){var r=Qe,o=ha.transition;ha.transition=null;try{Qe=4,cm(t,e,n,i)}finally{Qe=r,ha.transition=o}}function cm(t,e,n,i){if(fh){var r=Zf(t,e,n,i);if(r===null)nf(t,e,i,ph,n),qg(t,i);else if(YC(r,t,e,n,i))i.stopPropagation();else if(qg(t,i),e&4&&-1<XC.indexOf(t)){for(;r!==null;){var o=xu(r);if(o!==null&&e0(o),o=Zf(t,e,n,i),o===null&&nf(t,e,i,ph,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else nf(t,e,i,null,n)}}var ph=null;function Zf(t,e,n,i){if(ph=null,t=om(i),t=js(t),t!==null)if(e=ho(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Gw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ph=t,null}function s0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jC()){case am:return 1;case Qw:return 4;case hh:case HC:return 16;case Xw:return 536870912;default:return 16}default:return 16}}var Br=null,hm=null,Wc=null;function o0(){if(Wc)return Wc;var t,e=hm,n=e.length,i,r="value"in Br?Br.value:Br.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Wc=r.slice(t,1<i?1-i:void 0)}function qc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ic(){return!0}function Zg(){return!1}function Vn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ic:Zg,this.isPropagationStopped=Zg,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ic)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ic)},persist:function(){},isPersistent:Ic}),e}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dm=Vn(Na),Au=yt({},Na,{view:0,detail:0}),nk=Vn(Au),Zd,$d,El,Jh=yt({},Au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==El&&(El&&t.type==="mousemove"?(Zd=t.screenX-El.screenX,$d=t.screenY-El.screenY):$d=Zd=0,El=t),Zd)},movementY:function(t){return"movementY"in t?t.movementY:$d}}),$g=Vn(Jh),ik=yt({},Jh,{dataTransfer:0}),rk=Vn(ik),sk=yt({},Au,{relatedTarget:0}),Kd=Vn(sk),ok=yt({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),ak=Vn(ok),lk=yt({},Na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uk=Vn(lk),ck=yt({},Na,{data:0}),Kg=Vn(ck),hk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fk[t])?!!e[t]:!1}function fm(){return pk}var mk=yt({},Au,{key:function(t){if(t.key){var e=hk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fm,charCode:function(t){return t.type==="keypress"?qc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_k=Vn(mk),gk=yt({},Jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qg=Vn(gk),yk=yt({},Au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fm}),vk=Vn(yk),wk=yt({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ek=Vn(wk),Tk=yt({},Jh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Sk=Vn(Tk),Ik=[9,13,27,32],pm=cr&&"CompositionEvent"in window,Ul=null;cr&&"documentMode"in document&&(Ul=document.documentMode);var Ck=cr&&"TextEvent"in window&&!Ul,a0=cr&&(!pm||Ul&&8<Ul&&11>=Ul),Xg=" ",Yg=!1;function l0(t,e){switch(t){case"keyup":return Ik.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qo=!1;function kk(t,e){switch(t){case"compositionend":return u0(e);case"keypress":return e.which!==32?null:(Yg=!0,Xg);case"textInput":return t=e.data,t===Xg&&Yg?null:t;default:return null}}function Pk(t,e){if(Qo)return t==="compositionend"||!pm&&l0(t,e)?(t=o0(),Wc=hm=Br=null,Qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a0&&e.locale!=="ko"?null:e.data;default:return null}}var Ak={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ak[t.type]:e==="textarea"}function c0(t,e,n,i){Bw(i),e=mh(e,"onChange"),0<e.length&&(n=new dm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Fl=null,ru=null;function xk(t){E0(t,0)}function ed(t){var e=Jo(t);if(Ow(e))return t}function Rk(t,e){if(t==="change")return e}var h0=!1;if(cr){var Qd;if(cr){var Xd="oninput"in document;if(!Xd){var ey=document.createElement("div");ey.setAttribute("oninput","return;"),Xd=typeof ey.oninput=="function"}Qd=Xd}else Qd=!1;h0=Qd&&(!document.documentMode||9<document.documentMode)}function ty(){Fl&&(Fl.detachEvent("onpropertychange",d0),ru=Fl=null)}function d0(t){if(t.propertyName==="value"&&ed(ru)){var e=[];c0(e,ru,t,om(t)),qw(xk,e)}}function Lk(t,e,n){t==="focusin"?(ty(),Fl=e,ru=n,Fl.attachEvent("onpropertychange",d0)):t==="focusout"&&ty()}function bk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ed(ru)}function Nk(t,e){if(t==="click")return ed(e)}function Ok(t,e){if(t==="input"||t==="change")return ed(e)}function Mk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yi=typeof Object.is=="function"?Object.is:Mk;function su(t,e){if(yi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!xf.call(e,r)||!yi(t[r],e[r]))return!1}return!0}function ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iy(t,e){var n=ny(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ny(n)}}function f0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?f0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function p0(){for(var t=window,e=lh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lh(t.document)}return e}function mm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Dk(t){var e=p0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&f0(n.ownerDocument.documentElement,n)){if(i!==null&&mm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=iy(n,o);var a=iy(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Vk=cr&&"documentMode"in document&&11>=document.documentMode,Xo=null,$f=null,Bl=null,Kf=!1;function ry(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kf||Xo==null||Xo!==lh(i)||(i=Xo,"selectionStart"in i&&mm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Bl&&su(Bl,i)||(Bl=i,i=mh($f,"onSelect"),0<i.length&&(e=new dm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Xo)))}function Cc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},Yd={},m0={};cr&&(m0=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function td(t){if(Yd[t])return Yd[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in m0)return Yd[t]=e[n];return t}var _0=td("animationend"),g0=td("animationiteration"),y0=td("animationstart"),v0=td("transitionend"),w0=new Map,sy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(t,e){w0.set(t,e),co(e,[t])}for(var Jd=0;Jd<sy.length;Jd++){var ef=sy[Jd],zk=ef.toLowerCase(),Uk=ef[0].toUpperCase()+ef.slice(1);us(zk,"on"+Uk)}us(_0,"onAnimationEnd");us(g0,"onAnimationIteration");us(y0,"onAnimationStart");us("dblclick","onDoubleClick");us("focusin","onFocus");us("focusout","onBlur");us(v0,"onTransitionEnd");ya("onMouseEnter",["mouseout","mouseover"]);ya("onMouseLeave",["mouseout","mouseover"]);ya("onPointerEnter",["pointerout","pointerover"]);ya("onPointerLeave",["pointerout","pointerover"]);co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));co("onBeforeInput",["compositionend","keypress","textInput","paste"]);co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function oy(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,zC(i,e,void 0,t),t.currentTarget=null}function E0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],d=u.instance,f=u.currentTarget;if(u=u.listener,d!==o&&r.isPropagationStopped())break e;oy(r,u,f),o=d}else for(a=0;a<i.length;a++){if(u=i[a],d=u.instance,f=u.currentTarget,u=u.listener,d!==o&&r.isPropagationStopped())break e;oy(r,u,f),o=d}}}if(ch)throw t=Wf,ch=!1,Wf=null,t}function at(t,e){var n=e[ep];n===void 0&&(n=e[ep]=new Set);var i=t+"__bubble";n.has(i)||(T0(e,t,2,!1),n.add(i))}function tf(t,e,n){var i=0;e&&(i|=4),T0(n,t,i,e)}var kc="_reactListening"+Math.random().toString(36).slice(2);function ou(t){if(!t[kc]){t[kc]=!0,xw.forEach(function(n){n!=="selectionchange"&&(Fk.has(n)||tf(n,!1,t),tf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kc]||(e[kc]=!0,tf("selectionchange",!1,e))}}function T0(t,e,n,i){switch(s0(e)){case 1:var r=ek;break;case 4:r=tk;break;default:r=cm}n=r.bind(null,e,n,t),r=void 0,!Hf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function nf(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;a=a.return}for(;u!==null;){if(a=js(u),a===null)return;if(d=a.tag,d===5||d===6){i=o=a;continue e}u=u.parentNode}}i=i.return}qw(function(){var f=o,_=om(n),y=[];e:{var w=w0.get(t);if(w!==void 0){var T=dm,A=t;switch(t){case"keypress":if(qc(n)===0)break e;case"keydown":case"keyup":T=_k;break;case"focusin":A="focus",T=Kd;break;case"focusout":A="blur",T=Kd;break;case"beforeblur":case"afterblur":T=Kd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=$g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=rk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=vk;break;case _0:case g0:case y0:T=ak;break;case v0:T=Ek;break;case"scroll":T=nk;break;case"wheel":T=Sk;break;case"copy":case"cut":case"paste":T=uk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Qg}var N=(e&4)!==0,U=!N&&t==="scroll",P=N?w!==null?w+"Capture":null:w;N=[];for(var k=f,b;k!==null;){b=k;var H=b.stateNode;if(b.tag===5&&H!==null&&(b=H,P!==null&&(H=eu(k,P),H!=null&&N.push(au(k,H,b)))),U)break;k=k.return}0<N.length&&(w=new T(w,A,null,n,_),y.push({event:w,listeners:N}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",w&&n!==Bf&&(A=n.relatedTarget||n.fromElement)&&(js(A)||A[hr]))break e;if((T||w)&&(w=_.window===_?_:(w=_.ownerDocument)?w.defaultView||w.parentWindow:window,T?(A=n.relatedTarget||n.toElement,T=f,A=A?js(A):null,A!==null&&(U=ho(A),A!==U||A.tag!==5&&A.tag!==6)&&(A=null)):(T=null,A=f),T!==A)){if(N=$g,H="onMouseLeave",P="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(N=Qg,H="onPointerLeave",P="onPointerEnter",k="pointer"),U=T==null?w:Jo(T),b=A==null?w:Jo(A),w=new N(H,k+"leave",T,n,_),w.target=U,w.relatedTarget=b,H=null,js(_)===f&&(N=new N(P,k+"enter",A,n,_),N.target=b,N.relatedTarget=U,H=N),U=H,T&&A)t:{for(N=T,P=A,k=0,b=N;b;b=Bo(b))k++;for(b=0,H=P;H;H=Bo(H))b++;for(;0<k-b;)N=Bo(N),k--;for(;0<b-k;)P=Bo(P),b--;for(;k--;){if(N===P||P!==null&&N===P.alternate)break t;N=Bo(N),P=Bo(P)}N=null}else N=null;T!==null&&ay(y,w,T,N,!1),A!==null&&U!==null&&ay(y,U,A,N,!0)}}e:{if(w=f?Jo(f):window,T=w.nodeName&&w.nodeName.toLowerCase(),T==="select"||T==="input"&&w.type==="file")var $=Rk;else if(Jg(w))if(h0)$=Ok;else{$=bk;var Q=Lk}else(T=w.nodeName)&&T.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&($=Nk);if($&&($=$(t,f))){c0(y,$,n,_);break e}Q&&Q(t,w,f),t==="focusout"&&(Q=w._wrapperState)&&Q.controlled&&w.type==="number"&&Df(w,"number",w.value)}switch(Q=f?Jo(f):window,t){case"focusin":(Jg(Q)||Q.contentEditable==="true")&&(Xo=Q,$f=f,Bl=null);break;case"focusout":Bl=$f=Xo=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,ry(y,n,_);break;case"selectionchange":if(Vk)break;case"keydown":case"keyup":ry(y,n,_)}var R;if(pm)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Qo?l0(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(a0&&n.locale!=="ko"&&(Qo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Qo&&(R=o0()):(Br=_,hm="value"in Br?Br.value:Br.textContent,Qo=!0)),Q=mh(f,C),0<Q.length&&(C=new Kg(C,t,null,n,_),y.push({event:C,listeners:Q}),R?C.data=R:(R=u0(n),R!==null&&(C.data=R)))),(R=Ck?kk(t,n):Pk(t,n))&&(f=mh(f,"onBeforeInput"),0<f.length&&(_=new Kg("onBeforeInput","beforeinput",null,n,_),y.push({event:_,listeners:f}),_.data=R))}E0(y,e)})}function au(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mh(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=eu(t,n),o!=null&&i.unshift(au(t,o,r)),o=eu(t,e),o!=null&&i.push(au(t,o,r))),t=t.return}return i}function Bo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ay(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,d=u.alternate,f=u.stateNode;if(d!==null&&d===i)break;u.tag===5&&f!==null&&(u=f,r?(d=eu(n,o),d!=null&&a.unshift(au(n,d,u))):r||(d=eu(n,o),d!=null&&a.push(au(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Bk=/\r\n?/g,jk=/\u0000|\uFFFD/g;function ly(t){return(typeof t=="string"?t:""+t).replace(Bk,`
`).replace(jk,"")}function Pc(t,e,n){if(e=ly(e),ly(t)!==e&&n)throw Error(ee(425))}function _h(){}var Qf=null,Xf=null;function Yf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jf=typeof setTimeout=="function"?setTimeout:void 0,Hk=typeof clearTimeout=="function"?clearTimeout:void 0,uy=typeof Promise=="function"?Promise:void 0,Wk=typeof queueMicrotask=="function"?queueMicrotask:typeof uy<"u"?function(t){return uy.resolve(null).then(t).catch(qk)}:Jf;function qk(t){setTimeout(function(){throw t})}function rf(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),iu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);iu(e)}function Zr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oa=Math.random().toString(36).slice(2),Ai="__reactFiber$"+Oa,lu="__reactProps$"+Oa,hr="__reactContainer$"+Oa,ep="__reactEvents$"+Oa,Gk="__reactListeners$"+Oa,Zk="__reactHandles$"+Oa;function js(t){var e=t[Ai];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hr]||n[Ai]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cy(t);t!==null;){if(n=t[Ai])return n;t=cy(t)}return e}t=n,n=t.parentNode}return null}function xu(t){return t=t[Ai]||t[hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function nd(t){return t[lu]||null}var tp=[],ea=-1;function cs(t){return{current:t}}function ut(t){0>ea||(t.current=tp[ea],tp[ea]=null,ea--)}function st(t,e){ea++,tp[ea]=t.current,t.current=e}var rs={},on=cs(rs),In=cs(!1),Qs=rs;function va(t,e){var n=t.type.contextTypes;if(!n)return rs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Cn(t){return t=t.childContextTypes,t!=null}function gh(){ut(In),ut(on)}function hy(t,e,n){if(on.current!==rs)throw Error(ee(168));st(on,e),st(In,n)}function S0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ee(108,LC(t)||"Unknown",r));return yt({},n,i)}function yh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rs,Qs=on.current,st(on,t),st(In,In.current),!0}function dy(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=S0(t,e,Qs),i.__reactInternalMemoizedMergedChildContext=t,ut(In),ut(on),st(on,t)):ut(In),st(In,n)}var tr=null,id=!1,sf=!1;function I0(t){tr===null?tr=[t]:tr.push(t)}function $k(t){id=!0,I0(t)}function hs(){if(!sf&&tr!==null){sf=!0;var t=0,e=Qe;try{var n=tr;for(Qe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}tr=null,id=!1}catch(r){throw tr!==null&&(tr=tr.slice(t+1)),Kw(am,hs),r}finally{Qe=e,sf=!1}}return null}var ta=[],na=0,vh=null,wh=0,$n=[],Kn=0,Xs=null,nr=1,ir="";function Os(t,e){ta[na++]=wh,ta[na++]=vh,vh=t,wh=e}function C0(t,e,n){$n[Kn++]=nr,$n[Kn++]=ir,$n[Kn++]=Xs,Xs=t;var i=nr;t=ir;var r=32-mi(i)-1;i&=~(1<<r),n+=1;var o=32-mi(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,nr=1<<32-mi(e)+r|n<<r|i,ir=o+t}else nr=1<<o|n<<r|i,ir=t}function _m(t){t.return!==null&&(Os(t,1),C0(t,1,0))}function gm(t){for(;t===vh;)vh=ta[--na],ta[na]=null,wh=ta[--na],ta[na]=null;for(;t===Xs;)Xs=$n[--Kn],$n[Kn]=null,ir=$n[--Kn],$n[Kn]=null,nr=$n[--Kn],$n[Kn]=null}var On=null,Nn=null,ft=!1,fi=null;function k0(t,e){var n=Xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,On=t,Nn=Zr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,On=t,Nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xs!==null?{id:nr,overflow:ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,On=t,Nn=null,!0):!1;default:return!1}}function np(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ip(t){if(ft){var e=Nn;if(e){var n=e;if(!fy(t,e)){if(np(t))throw Error(ee(418));e=Zr(n.nextSibling);var i=On;e&&fy(t,e)?k0(i,n):(t.flags=t.flags&-4097|2,ft=!1,On=t)}}else{if(np(t))throw Error(ee(418));t.flags=t.flags&-4097|2,ft=!1,On=t}}}function py(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;On=t}function Ac(t){if(t!==On)return!1;if(!ft)return py(t),ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yf(t.type,t.memoizedProps)),e&&(e=Nn)){if(np(t))throw P0(),Error(ee(418));for(;e;)k0(t,e),e=Zr(e.nextSibling)}if(py(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nn=Zr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nn=null}}else Nn=On?Zr(t.stateNode.nextSibling):null;return!0}function P0(){for(var t=Nn;t;)t=Zr(t.nextSibling)}function wa(){Nn=On=null,ft=!1}function ym(t){fi===null?fi=[t]:fi.push(t)}var Kk=yr.ReactCurrentBatchConfig;function Tl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function xc(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function my(t){var e=t._init;return e(t._payload)}function A0(t){function e(P,k){if(t){var b=P.deletions;b===null?(P.deletions=[k],P.flags|=16):b.push(k)}}function n(P,k){if(!t)return null;for(;k!==null;)e(P,k),k=k.sibling;return null}function i(P,k){for(P=new Map;k!==null;)k.key!==null?P.set(k.key,k):P.set(k.index,k),k=k.sibling;return P}function r(P,k){return P=Xr(P,k),P.index=0,P.sibling=null,P}function o(P,k,b){return P.index=b,t?(b=P.alternate,b!==null?(b=b.index,b<k?(P.flags|=2,k):b):(P.flags|=2,k)):(P.flags|=1048576,k)}function a(P){return t&&P.alternate===null&&(P.flags|=2),P}function u(P,k,b,H){return k===null||k.tag!==6?(k=df(b,P.mode,H),k.return=P,k):(k=r(k,b),k.return=P,k)}function d(P,k,b,H){var $=b.type;return $===Ko?_(P,k,b.props.children,H,b.key):k!==null&&(k.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Lr&&my($)===k.type)?(H=r(k,b.props),H.ref=Tl(P,k,b),H.return=P,H):(H=Yc(b.type,b.key,b.props,null,P.mode,H),H.ref=Tl(P,k,b),H.return=P,H)}function f(P,k,b,H){return k===null||k.tag!==4||k.stateNode.containerInfo!==b.containerInfo||k.stateNode.implementation!==b.implementation?(k=ff(b,P.mode,H),k.return=P,k):(k=r(k,b.children||[]),k.return=P,k)}function _(P,k,b,H,$){return k===null||k.tag!==7?(k=Zs(b,P.mode,H,$),k.return=P,k):(k=r(k,b),k.return=P,k)}function y(P,k,b){if(typeof k=="string"&&k!==""||typeof k=="number")return k=df(""+k,P.mode,b),k.return=P,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case yc:return b=Yc(k.type,k.key,k.props,null,P.mode,b),b.ref=Tl(P,null,k),b.return=P,b;case $o:return k=ff(k,P.mode,b),k.return=P,k;case Lr:var H=k._init;return y(P,H(k._payload),b)}if(Al(k)||gl(k))return k=Zs(k,P.mode,b,null),k.return=P,k;xc(P,k)}return null}function w(P,k,b,H){var $=k!==null?k.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return $!==null?null:u(P,k,""+b,H);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case yc:return b.key===$?d(P,k,b,H):null;case $o:return b.key===$?f(P,k,b,H):null;case Lr:return $=b._init,w(P,k,$(b._payload),H)}if(Al(b)||gl(b))return $!==null?null:_(P,k,b,H,null);xc(P,b)}return null}function T(P,k,b,H,$){if(typeof H=="string"&&H!==""||typeof H=="number")return P=P.get(b)||null,u(k,P,""+H,$);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case yc:return P=P.get(H.key===null?b:H.key)||null,d(k,P,H,$);case $o:return P=P.get(H.key===null?b:H.key)||null,f(k,P,H,$);case Lr:var Q=H._init;return T(P,k,b,Q(H._payload),$)}if(Al(H)||gl(H))return P=P.get(b)||null,_(k,P,H,$,null);xc(k,H)}return null}function A(P,k,b,H){for(var $=null,Q=null,R=k,C=k=0,x=null;R!==null&&C<b.length;C++){R.index>C?(x=R,R=null):x=R.sibling;var O=w(P,R,b[C],H);if(O===null){R===null&&(R=x);break}t&&R&&O.alternate===null&&e(P,R),k=o(O,k,C),Q===null?$=O:Q.sibling=O,Q=O,R=x}if(C===b.length)return n(P,R),ft&&Os(P,C),$;if(R===null){for(;C<b.length;C++)R=y(P,b[C],H),R!==null&&(k=o(R,k,C),Q===null?$=R:Q.sibling=R,Q=R);return ft&&Os(P,C),$}for(R=i(P,R);C<b.length;C++)x=T(R,P,C,b[C],H),x!==null&&(t&&x.alternate!==null&&R.delete(x.key===null?C:x.key),k=o(x,k,C),Q===null?$=x:Q.sibling=x,Q=x);return t&&R.forEach(function(V){return e(P,V)}),ft&&Os(P,C),$}function N(P,k,b,H){var $=gl(b);if(typeof $!="function")throw Error(ee(150));if(b=$.call(b),b==null)throw Error(ee(151));for(var Q=$=null,R=k,C=k=0,x=null,O=b.next();R!==null&&!O.done;C++,O=b.next()){R.index>C?(x=R,R=null):x=R.sibling;var V=w(P,R,O.value,H);if(V===null){R===null&&(R=x);break}t&&R&&V.alternate===null&&e(P,R),k=o(V,k,C),Q===null?$=V:Q.sibling=V,Q=V,R=x}if(O.done)return n(P,R),ft&&Os(P,C),$;if(R===null){for(;!O.done;C++,O=b.next())O=y(P,O.value,H),O!==null&&(k=o(O,k,C),Q===null?$=O:Q.sibling=O,Q=O);return ft&&Os(P,C),$}for(R=i(P,R);!O.done;C++,O=b.next())O=T(R,P,C,O.value,H),O!==null&&(t&&O.alternate!==null&&R.delete(O.key===null?C:O.key),k=o(O,k,C),Q===null?$=O:Q.sibling=O,Q=O);return t&&R.forEach(function(z){return e(P,z)}),ft&&Os(P,C),$}function U(P,k,b,H){if(typeof b=="object"&&b!==null&&b.type===Ko&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case yc:e:{for(var $=b.key,Q=k;Q!==null;){if(Q.key===$){if($=b.type,$===Ko){if(Q.tag===7){n(P,Q.sibling),k=r(Q,b.props.children),k.return=P,P=k;break e}}else if(Q.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Lr&&my($)===Q.type){n(P,Q.sibling),k=r(Q,b.props),k.ref=Tl(P,Q,b),k.return=P,P=k;break e}n(P,Q);break}else e(P,Q);Q=Q.sibling}b.type===Ko?(k=Zs(b.props.children,P.mode,H,b.key),k.return=P,P=k):(H=Yc(b.type,b.key,b.props,null,P.mode,H),H.ref=Tl(P,k,b),H.return=P,P=H)}return a(P);case $o:e:{for(Q=b.key;k!==null;){if(k.key===Q)if(k.tag===4&&k.stateNode.containerInfo===b.containerInfo&&k.stateNode.implementation===b.implementation){n(P,k.sibling),k=r(k,b.children||[]),k.return=P,P=k;break e}else{n(P,k);break}else e(P,k);k=k.sibling}k=ff(b,P.mode,H),k.return=P,P=k}return a(P);case Lr:return Q=b._init,U(P,k,Q(b._payload),H)}if(Al(b))return A(P,k,b,H);if(gl(b))return N(P,k,b,H);xc(P,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,k!==null&&k.tag===6?(n(P,k.sibling),k=r(k,b),k.return=P,P=k):(n(P,k),k=df(b,P.mode,H),k.return=P,P=k),a(P)):n(P,k)}return U}var Ea=A0(!0),x0=A0(!1),Eh=cs(null),Th=null,ia=null,vm=null;function wm(){vm=ia=Th=null}function Em(t){var e=Eh.current;ut(Eh),t._currentValue=e}function rp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function da(t,e){Th=t,vm=ia=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sn=!0),t.firstContext=null)}function Jn(t){var e=t._currentValue;if(vm!==t)if(t={context:t,memoizedValue:e,next:null},ia===null){if(Th===null)throw Error(ee(308));ia=t,Th.dependencies={lanes:0,firstContext:t}}else ia=ia.next=t;return e}var Hs=null;function Tm(t){Hs===null?Hs=[t]:Hs.push(t)}function R0(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Tm(e)):(n.next=r.next,r.next=n),e.interleaved=n,dr(t,i)}function dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var br=!1;function Sm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $r(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,We&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,dr(t,n)}return r=i.interleaved,r===null?(e.next=e,Tm(i)):(e.next=r.next,r.next=e),i.interleaved=e,dr(t,n)}function Gc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,lm(t,n)}}function _y(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sh(t,e,n,i){var r=t.updateQueue;br=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var d=u,f=d.next;d.next=null,a===null?o=f:a.next=f,a=d;var _=t.alternate;_!==null&&(_=_.updateQueue,u=_.lastBaseUpdate,u!==a&&(u===null?_.firstBaseUpdate=f:u.next=f,_.lastBaseUpdate=d))}if(o!==null){var y=r.baseState;a=0,_=f=d=null,u=o;do{var w=u.lane,T=u.eventTime;if((i&w)===w){_!==null&&(_=_.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var A=t,N=u;switch(w=e,T=n,N.tag){case 1:if(A=N.payload,typeof A=="function"){y=A.call(T,y,w);break e}y=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=N.payload,w=typeof A=="function"?A.call(T,y,w):A,w==null)break e;y=yt({},y,w);break e;case 2:br=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,w=r.effects,w===null?r.effects=[u]:w.push(u))}else T={eventTime:T,lane:w,tag:u.tag,payload:u.payload,callback:u.callback,next:null},_===null?(f=_=T,d=y):_=_.next=T,a|=w;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;w=u,u=w.next,w.next=null,r.lastBaseUpdate=w,r.shared.pending=null}}while(!0);if(_===null&&(d=y),r.baseState=d,r.firstBaseUpdate=f,r.lastBaseUpdate=_,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Js|=a,t.lanes=a,t.memoizedState=y}}function gy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ee(191,r));r.call(i)}}}var Ru={},bi=cs(Ru),uu=cs(Ru),cu=cs(Ru);function Ws(t){if(t===Ru)throw Error(ee(174));return t}function Im(t,e){switch(st(cu,e),st(uu,t),st(bi,Ru),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zf(e,t)}ut(bi),st(bi,e)}function Ta(){ut(bi),ut(uu),ut(cu)}function b0(t){Ws(cu.current);var e=Ws(bi.current),n=zf(e,t.type);e!==n&&(st(uu,t),st(bi,n))}function Cm(t){uu.current===t&&(ut(bi),ut(uu))}var _t=cs(0);function Ih(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var of=[];function km(){for(var t=0;t<of.length;t++)of[t]._workInProgressVersionPrimary=null;of.length=0}var Zc=yr.ReactCurrentDispatcher,af=yr.ReactCurrentBatchConfig,Ys=0,gt=null,Dt=null,Ht=null,Ch=!1,jl=!1,hu=0,Qk=0;function Jt(){throw Error(ee(321))}function Pm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yi(t[n],e[n]))return!1;return!0}function Am(t,e,n,i,r,o){if(Ys=o,gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zc.current=t===null||t.memoizedState===null?eP:tP,t=n(i,r),jl){o=0;do{if(jl=!1,hu=0,25<=o)throw Error(ee(301));o+=1,Ht=Dt=null,e.updateQueue=null,Zc.current=nP,t=n(i,r)}while(jl)}if(Zc.current=kh,e=Dt!==null&&Dt.next!==null,Ys=0,Ht=Dt=gt=null,Ch=!1,e)throw Error(ee(300));return t}function xm(){var t=hu!==0;return hu=0,t}function Pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?gt.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function ei(){if(Dt===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=Ht===null?gt.memoizedState:Ht.next;if(e!==null)Ht=e,Dt=t;else{if(t===null)throw Error(ee(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Ht===null?gt.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function du(t,e){return typeof e=="function"?e(t):e}function lf(t){var e=ei(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=Dt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,d=null,f=o;do{var _=f.lane;if((Ys&_)===_)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var y={lane:_,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(u=d=y,a=i):d=d.next=y,gt.lanes|=_,Js|=_}f=f.next}while(f!==null&&f!==o);d===null?a=i:d.next=u,yi(i,e.memoizedState)||(Sn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,gt.lanes|=o,Js|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uf(t){var e=ei(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);yi(o,e.memoizedState)||(Sn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function N0(){}function O0(t,e){var n=gt,i=ei(),r=e(),o=!yi(i.memoizedState,r);if(o&&(i.memoizedState=r,Sn=!0),i=i.queue,Rm(V0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,fu(9,D0.bind(null,n,i,r,e),void 0,null),Wt===null)throw Error(ee(349));Ys&30||M0(n,e,r)}return r}function M0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function D0(t,e,n,i){e.value=n,e.getSnapshot=i,z0(e)&&U0(t)}function V0(t,e,n){return n(function(){z0(e)&&U0(t)})}function z0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yi(t,n)}catch{return!0}}function U0(t){var e=dr(t,1);e!==null&&_i(e,t,1,-1)}function yy(t){var e=Pi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:du,lastRenderedState:t},e.queue=t,t=t.dispatch=Jk.bind(null,gt,t),[e.memoizedState,t]}function fu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function F0(){return ei().memoizedState}function $c(t,e,n,i){var r=Pi();gt.flags|=t,r.memoizedState=fu(1|e,n,void 0,i===void 0?null:i)}function rd(t,e,n,i){var r=ei();i=i===void 0?null:i;var o=void 0;if(Dt!==null){var a=Dt.memoizedState;if(o=a.destroy,i!==null&&Pm(i,a.deps)){r.memoizedState=fu(e,n,o,i);return}}gt.flags|=t,r.memoizedState=fu(1|e,n,o,i)}function vy(t,e){return $c(8390656,8,t,e)}function Rm(t,e){return rd(2048,8,t,e)}function B0(t,e){return rd(4,2,t,e)}function j0(t,e){return rd(4,4,t,e)}function H0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function W0(t,e,n){return n=n!=null?n.concat([t]):null,rd(4,4,H0.bind(null,e,t),n)}function Lm(){}function q0(t,e){var n=ei();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function G0(t,e){var n=ei();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Z0(t,e,n){return Ys&21?(yi(n,e)||(n=Yw(),gt.lanes|=n,Js|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sn=!0),t.memoizedState=n)}function Xk(t,e){var n=Qe;Qe=n!==0&&4>n?n:4,t(!0);var i=af.transition;af.transition={};try{t(!1),e()}finally{Qe=n,af.transition=i}}function $0(){return ei().memoizedState}function Yk(t,e,n){var i=Qr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},K0(t))Q0(e,n);else if(n=R0(t,e,n,i),n!==null){var r=fn();_i(n,t,i,r),X0(n,e,i)}}function Jk(t,e,n){var i=Qr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(K0(t))Q0(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,yi(u,a)){var d=e.interleaved;d===null?(r.next=r,Tm(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=R0(t,e,r,i),n!==null&&(r=fn(),_i(n,t,i,r),X0(n,e,i))}}function K0(t){var e=t.alternate;return t===gt||e!==null&&e===gt}function Q0(t,e){jl=Ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function X0(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,lm(t,n)}}var kh={readContext:Jn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},eP={readContext:Jn,useCallback:function(t,e){return Pi().memoizedState=[t,e===void 0?null:e],t},useContext:Jn,useEffect:vy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$c(4194308,4,H0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $c(4194308,4,t,e)},useInsertionEffect:function(t,e){return $c(4,2,t,e)},useMemo:function(t,e){var n=Pi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Pi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Yk.bind(null,gt,t),[i.memoizedState,t]},useRef:function(t){var e=Pi();return t={current:t},e.memoizedState=t},useState:yy,useDebugValue:Lm,useDeferredValue:function(t){return Pi().memoizedState=t},useTransition:function(){var t=yy(!1),e=t[0];return t=Xk.bind(null,t[1]),Pi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=gt,r=Pi();if(ft){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Wt===null)throw Error(ee(349));Ys&30||M0(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,vy(V0.bind(null,i,o,t),[t]),i.flags|=2048,fu(9,D0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Pi(),e=Wt.identifierPrefix;if(ft){var n=ir,i=nr;n=(i&~(1<<32-mi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=hu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Qk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tP={readContext:Jn,useCallback:q0,useContext:Jn,useEffect:Rm,useImperativeHandle:W0,useInsertionEffect:B0,useLayoutEffect:j0,useMemo:G0,useReducer:lf,useRef:F0,useState:function(){return lf(du)},useDebugValue:Lm,useDeferredValue:function(t){var e=ei();return Z0(e,Dt.memoizedState,t)},useTransition:function(){var t=lf(du)[0],e=ei().memoizedState;return[t,e]},useMutableSource:N0,useSyncExternalStore:O0,useId:$0,unstable_isNewReconciler:!1},nP={readContext:Jn,useCallback:q0,useContext:Jn,useEffect:Rm,useImperativeHandle:W0,useInsertionEffect:B0,useLayoutEffect:j0,useMemo:G0,useReducer:uf,useRef:F0,useState:function(){return uf(du)},useDebugValue:Lm,useDeferredValue:function(t){var e=ei();return Dt===null?e.memoizedState=t:Z0(e,Dt.memoizedState,t)},useTransition:function(){var t=uf(du)[0],e=ei().memoizedState;return[t,e]},useMutableSource:N0,useSyncExternalStore:O0,useId:$0,unstable_isNewReconciler:!1};function hi(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sd={isMounted:function(t){return(t=t._reactInternals)?ho(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=fn(),r=Qr(t),o=lr(i,r);o.payload=e,n!=null&&(o.callback=n),e=$r(t,o,r),e!==null&&(_i(e,t,r,i),Gc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=fn(),r=Qr(t),o=lr(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=$r(t,o,r),e!==null&&(_i(e,t,r,i),Gc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fn(),i=Qr(t),r=lr(n,i);r.tag=2,e!=null&&(r.callback=e),e=$r(t,r,i),e!==null&&(_i(e,t,i,n),Gc(e,t,i))}};function wy(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!su(n,i)||!su(r,o):!0}function Y0(t,e,n){var i=!1,r=rs,o=e.contextType;return typeof o=="object"&&o!==null?o=Jn(o):(r=Cn(e)?Qs:on.current,i=e.contextTypes,o=(i=i!=null)?va(t,r):rs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sd,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function Ey(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&sd.enqueueReplaceState(e,e.state,null)}function op(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Sm(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Jn(o):(o=Cn(e)?Qs:on.current,r.context=va(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(sp(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&sd.enqueueReplaceState(r,r.state,null),Sh(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Sa(t,e){try{var n="",i=e;do n+=RC(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function cf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ap(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var iP=typeof WeakMap=="function"?WeakMap:Map;function J0(t,e,n){n=lr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Ah||(Ah=!0,gp=i),ap(t,e)},n}function eE(t,e,n){n=lr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ap(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ap(t,e),typeof i!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Ty(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new iP;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=gP.bind(null,t,e,n),e.then(t,t))}function Sy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Iy(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=lr(-1,1),e.tag=2,$r(n,e,1))),n.lanes|=1),t)}var rP=yr.ReactCurrentOwner,Sn=!1;function hn(t,e,n,i){e.child=t===null?x0(e,null,n,i):Ea(e,t.child,n,i)}function Cy(t,e,n,i,r){n=n.render;var o=e.ref;return da(e,r),i=Am(t,e,n,i,o,r),n=xm(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,fr(t,e,r)):(ft&&n&&_m(e),e.flags|=1,hn(t,e,i,r),e.child)}function ky(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Um(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,tE(t,e,o,i,r)):(t=Yc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:su,n(a,i)&&t.ref===e.ref)return fr(t,e,r)}return e.flags|=1,t=Xr(o,i),t.ref=e.ref,t.return=e,e.child=t}function tE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(su(o,i)&&t.ref===e.ref)if(Sn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Sn=!0);else return e.lanes=t.lanes,fr(t,e,r)}return lp(t,e,n,i,r)}function nE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(sa,bn),bn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,st(sa,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,st(sa,bn),bn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,st(sa,bn),bn|=i;return hn(t,e,r,n),e.child}function iE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lp(t,e,n,i,r){var o=Cn(n)?Qs:on.current;return o=va(e,o),da(e,r),n=Am(t,e,n,i,o,r),i=xm(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,fr(t,e,r)):(ft&&i&&_m(e),e.flags|=1,hn(t,e,n,r),e.child)}function Py(t,e,n,i,r){if(Cn(n)){var o=!0;yh(e)}else o=!1;if(da(e,r),e.stateNode===null)Kc(t,e),Y0(e,n,i),op(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Jn(f):(f=Cn(n)?Qs:on.current,f=va(e,f));var _=n.getDerivedStateFromProps,y=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||d!==f)&&Ey(e,a,i,f),br=!1;var w=e.memoizedState;a.state=w,Sh(e,i,a,r),d=e.memoizedState,u!==i||w!==d||In.current||br?(typeof _=="function"&&(sp(e,n,_,i),d=e.memoizedState),(u=br||wy(e,n,u,i,w,d,f))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),a.props=i,a.state=d,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,L0(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:hi(e.type,u),a.props=f,y=e.pendingProps,w=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Jn(d):(d=Cn(n)?Qs:on.current,d=va(e,d));var T=n.getDerivedStateFromProps;(_=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==y||w!==d)&&Ey(e,a,i,d),br=!1,w=e.memoizedState,a.state=w,Sh(e,i,a,r);var A=e.memoizedState;u!==y||w!==A||In.current||br?(typeof T=="function"&&(sp(e,n,T,i),A=e.memoizedState),(f=br||wy(e,n,f,i,w,A,d)||!1)?(_||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,A,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,A,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=A),a.props=i,a.state=A,a.context=d,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),i=!1)}return up(t,e,n,i,o,r)}function up(t,e,n,i,r,o){iE(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&dy(e,n,!1),fr(t,e,o);i=e.stateNode,rP.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Ea(e,t.child,null,o),e.child=Ea(e,null,u,o)):hn(t,e,u,o),e.memoizedState=i.state,r&&dy(e,n,!0),e.child}function rE(t){var e=t.stateNode;e.pendingContext?hy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hy(t,e.context,!1),Im(t,e.containerInfo)}function Ay(t,e,n,i,r){return wa(),ym(r),e.flags|=256,hn(t,e,n,i),e.child}var cp={dehydrated:null,treeContext:null,retryLane:0};function hp(t){return{baseLanes:t,cachePool:null,transitions:null}}function sE(t,e,n){var i=e.pendingProps,r=_t.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),st(_t,r&1),t===null)return ip(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=ld(a,i,0,null),t=Zs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=hp(n),e.memoizedState=cp,t):bm(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return sP(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var d={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Xr(r,d),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Xr(u,o):(o=Zs(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?hp(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=cp,i}return o=t.child,t=o.sibling,i=Xr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function bm(t,e){return e=ld({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rc(t,e,n,i){return i!==null&&ym(i),Ea(e,t.child,null,n),t=bm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sP(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=cf(Error(ee(422))),Rc(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=ld({mode:"visible",children:i.children},r,0,null),o=Zs(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ea(e,t.child,null,a),e.child.memoizedState=hp(a),e.memoizedState=cp,o);if(!(e.mode&1))return Rc(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(ee(419)),i=cf(o,i,void 0),Rc(t,e,a,i)}if(u=(a&t.childLanes)!==0,Sn||u){if(i=Wt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,dr(t,r),_i(i,t,r,-1))}return zm(),i=cf(Error(ee(421))),Rc(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=yP.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Nn=Zr(r.nextSibling),On=e,ft=!0,fi=null,t!==null&&($n[Kn++]=nr,$n[Kn++]=ir,$n[Kn++]=Xs,nr=t.id,ir=t.overflow,Xs=e),e=bm(e,i.children),e.flags|=4096,e)}function xy(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),rp(t.return,e,n)}function hf(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function oE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(hn(t,e,i.children,n),i=_t.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xy(t,n,e);else if(t.tag===19)xy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(st(_t,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ih(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),hf(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ih(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}hf(e,!0,n,null,o);break;case"together":hf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Js|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=Xr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function oP(t,e,n){switch(e.tag){case 3:rE(e),wa();break;case 5:b0(e);break;case 1:Cn(e.type)&&yh(e);break;case 4:Im(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;st(Eh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(st(_t,_t.current&1),e.flags|=128,null):n&e.child.childLanes?sE(t,e,n):(st(_t,_t.current&1),t=fr(t,e,n),t!==null?t.sibling:null);st(_t,_t.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return oE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),st(_t,_t.current),i)break;return null;case 22:case 23:return e.lanes=0,nE(t,e,n)}return fr(t,e,n)}var aE,dp,lE,uE;aE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dp=function(){};lE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ws(bi.current);var o=null;switch(n){case"input":r=Of(t,r),i=Of(t,i),o=[];break;case"select":r=yt({},r,{value:void 0}),i=yt({},i,{value:void 0}),o=[];break;case"textarea":r=Vf(t,r),i=Vf(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=_h)}Uf(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Yl.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var d=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&d!==u&&(d!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(o||(o=[]),o.push(f,n)),n=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Yl.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&at("scroll",t),o||u===d||(o=[])):(o=o||[]).push(f,d))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};uE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Sl(t,e){if(!ft)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function en(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function aP(t,e,n){var i=e.pendingProps;switch(gm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(e),null;case 1:return Cn(e.type)&&gh(),en(e),null;case 3:return i=e.stateNode,Ta(),ut(In),ut(on),km(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ac(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fi!==null&&(wp(fi),fi=null))),dp(t,e),en(e),null;case 5:Cm(e);var r=Ws(cu.current);if(n=e.type,t!==null&&e.stateNode!=null)lE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return en(e),null}if(t=Ws(bi.current),Ac(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Ai]=e,i[lu]=o,t=(e.mode&1)!==0,n){case"dialog":at("cancel",i),at("close",i);break;case"iframe":case"object":case"embed":at("load",i);break;case"video":case"audio":for(r=0;r<Rl.length;r++)at(Rl[r],i);break;case"source":at("error",i);break;case"img":case"image":case"link":at("error",i),at("load",i);break;case"details":at("toggle",i);break;case"input":zg(i,o),at("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},at("invalid",i);break;case"textarea":Fg(i,o),at("invalid",i)}Uf(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&Pc(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Pc(i.textContent,u,t),r=["children",""+u]):Yl.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&at("scroll",i)}switch(n){case"input":vc(i),Ug(i,o,!0);break;case"textarea":vc(i),Bg(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=_h)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Ai]=e,t[lu]=i,aE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ff(n,i),n){case"dialog":at("cancel",t),at("close",t),r=i;break;case"iframe":case"object":case"embed":at("load",t),r=i;break;case"video":case"audio":for(r=0;r<Rl.length;r++)at(Rl[r],t);r=i;break;case"source":at("error",t),r=i;break;case"img":case"image":case"link":at("error",t),at("load",t),r=i;break;case"details":at("toggle",t),r=i;break;case"input":zg(t,i),r=Of(t,i),at("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=yt({},i,{value:void 0}),at("invalid",t);break;case"textarea":Fg(t,i),r=Vf(t,i),at("invalid",t);break;default:r=i}Uf(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?Fw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&zw(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Jl(t,d):typeof d=="number"&&Jl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Yl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&at("scroll",t):d!=null&&nm(t,o,d,a))}switch(n){case"input":vc(t),Ug(t,i,!1);break;case"textarea":vc(t),Bg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+is(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?la(t,!!i.multiple,o,!1):i.defaultValue!=null&&la(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=_h)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return en(e),null;case 6:if(t&&e.stateNode!=null)uE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Ws(cu.current),Ws(bi.current),Ac(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ai]=e,(o=i.nodeValue!==n)&&(t=On,t!==null))switch(t.tag){case 3:Pc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ai]=e,e.stateNode=i}return en(e),null;case 13:if(ut(_t),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ft&&Nn!==null&&e.mode&1&&!(e.flags&128))P0(),wa(),e.flags|=98560,o=!1;else if(o=Ac(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[Ai]=e}else wa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;en(e),o=!1}else fi!==null&&(wp(fi),fi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||_t.current&1?Vt===0&&(Vt=3):zm())),e.updateQueue!==null&&(e.flags|=4),en(e),null);case 4:return Ta(),dp(t,e),t===null&&ou(e.stateNode.containerInfo),en(e),null;case 10:return Em(e.type._context),en(e),null;case 17:return Cn(e.type)&&gh(),en(e),null;case 19:if(ut(_t),o=e.memoizedState,o===null)return en(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Sl(o,!1);else{if(Vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ih(t),a!==null){for(e.flags|=128,Sl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return st(_t,_t.current&1|2),e.child}t=t.sibling}o.tail!==null&&Pt()>Ia&&(e.flags|=128,i=!0,Sl(o,!1),e.lanes=4194304)}else{if(!i)if(t=Ih(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Sl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ft)return en(e),null}else 2*Pt()-o.renderingStartTime>Ia&&n!==1073741824&&(e.flags|=128,i=!0,Sl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Pt(),e.sibling=null,n=_t.current,st(_t,i?n&1|2:n&1),e):(en(e),null);case 22:case 23:return Vm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?bn&1073741824&&(en(e),e.subtreeFlags&6&&(e.flags|=8192)):en(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function lP(t,e){switch(gm(e),e.tag){case 1:return Cn(e.type)&&gh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ta(),ut(In),ut(on),km(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cm(e),null;case 13:if(ut(_t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));wa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ut(_t),null;case 4:return Ta(),null;case 10:return Em(e.type._context),null;case 22:case 23:return Vm(),null;case 24:return null;default:return null}}var Lc=!1,rn=!1,uP=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ra(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){St(t,e,i)}else n.current=null}function fp(t,e,n){try{n()}catch(i){St(t,e,i)}}var Ry=!1;function cP(t,e){if(Qf=fh,t=p0(),mm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,f=0,_=0,y=t,w=null;t:for(;;){for(var T;y!==n||r!==0&&y.nodeType!==3||(u=a+r),y!==o||i!==0&&y.nodeType!==3||(d=a+i),y.nodeType===3&&(a+=y.nodeValue.length),(T=y.firstChild)!==null;)w=y,y=T;for(;;){if(y===t)break t;if(w===n&&++f===r&&(u=a),w===o&&++_===i&&(d=a),(T=y.nextSibling)!==null)break;y=w,w=y.parentNode}y=T}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xf={focusedElem:t,selectionRange:n},fh=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var N=A.memoizedProps,U=A.memoizedState,P=e.stateNode,k=P.getSnapshotBeforeUpdate(e.elementType===e.type?N:hi(e.type,N),U);P.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(H){St(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return A=Ry,Ry=!1,A}function Hl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&fp(e,n,o)}r=r.next}while(r!==i)}}function od(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function pp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cE(t){var e=t.alternate;e!==null&&(t.alternate=null,cE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ai],delete e[lu],delete e[ep],delete e[Gk],delete e[Zk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hE(t){return t.tag===5||t.tag===3||t.tag===4}function Ly(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_h));else if(i!==4&&(t=t.child,t!==null))for(mp(t,e,n),t=t.sibling;t!==null;)mp(t,e,n),t=t.sibling}function _p(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(_p(t,e,n),t=t.sibling;t!==null;)_p(t,e,n),t=t.sibling}var Gt=null,di=!1;function xr(t,e,n){for(n=n.child;n!==null;)dE(t,e,n),n=n.sibling}function dE(t,e,n){if(Li&&typeof Li.onCommitFiberUnmount=="function")try{Li.onCommitFiberUnmount(Yh,n)}catch{}switch(n.tag){case 5:rn||ra(n,e);case 6:var i=Gt,r=di;Gt=null,xr(t,e,n),Gt=i,di=r,Gt!==null&&(di?(t=Gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Gt.removeChild(n.stateNode));break;case 18:Gt!==null&&(di?(t=Gt,n=n.stateNode,t.nodeType===8?rf(t.parentNode,n):t.nodeType===1&&rf(t,n),iu(t)):rf(Gt,n.stateNode));break;case 4:i=Gt,r=di,Gt=n.stateNode.containerInfo,di=!0,xr(t,e,n),Gt=i,di=r;break;case 0:case 11:case 14:case 15:if(!rn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&fp(n,e,a),r=r.next}while(r!==i)}xr(t,e,n);break;case 1:if(!rn&&(ra(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){St(n,e,u)}xr(t,e,n);break;case 21:xr(t,e,n);break;case 22:n.mode&1?(rn=(i=rn)||n.memoizedState!==null,xr(t,e,n),rn=i):xr(t,e,n);break;default:xr(t,e,n)}}function by(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uP),e.forEach(function(i){var r=vP.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ci(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Gt=u.stateNode,di=!1;break e;case 3:Gt=u.stateNode.containerInfo,di=!0;break e;case 4:Gt=u.stateNode.containerInfo,di=!0;break e}u=u.return}if(Gt===null)throw Error(ee(160));dE(o,a,r),Gt=null,di=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(f){St(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fE(e,t),e=e.sibling}function fE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ci(e,t),ki(t),i&4){try{Hl(3,t,t.return),od(3,t)}catch(N){St(t,t.return,N)}try{Hl(5,t,t.return)}catch(N){St(t,t.return,N)}}break;case 1:ci(e,t),ki(t),i&512&&n!==null&&ra(n,n.return);break;case 5:if(ci(e,t),ki(t),i&512&&n!==null&&ra(n,n.return),t.flags&32){var r=t.stateNode;try{Jl(r,"")}catch(N){St(t,t.return,N)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&Mw(r,o),Ff(u,a);var f=Ff(u,o);for(a=0;a<d.length;a+=2){var _=d[a],y=d[a+1];_==="style"?Fw(r,y):_==="dangerouslySetInnerHTML"?zw(r,y):_==="children"?Jl(r,y):nm(r,_,y,f)}switch(u){case"input":Mf(r,o);break;case"textarea":Dw(r,o);break;case"select":var w=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?la(r,!!o.multiple,T,!1):w!==!!o.multiple&&(o.defaultValue!=null?la(r,!!o.multiple,o.defaultValue,!0):la(r,!!o.multiple,o.multiple?[]:"",!1))}r[lu]=o}catch(N){St(t,t.return,N)}}break;case 6:if(ci(e,t),ki(t),i&4){if(t.stateNode===null)throw Error(ee(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(N){St(t,t.return,N)}}break;case 3:if(ci(e,t),ki(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{iu(e.containerInfo)}catch(N){St(t,t.return,N)}break;case 4:ci(e,t),ki(t);break;case 13:ci(e,t),ki(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Mm=Pt())),i&4&&by(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(rn=(f=rn)||_,ci(e,t),rn=f):ci(e,t),ki(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!_&&t.mode&1)for(oe=t,_=t.child;_!==null;){for(y=oe=_;oe!==null;){switch(w=oe,T=w.child,w.tag){case 0:case 11:case 14:case 15:Hl(4,w,w.return);break;case 1:ra(w,w.return);var A=w.stateNode;if(typeof A.componentWillUnmount=="function"){i=w,n=w.return;try{e=i,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(N){St(i,n,N)}}break;case 5:ra(w,w.return);break;case 22:if(w.memoizedState!==null){Oy(y);continue}}T!==null?(T.return=w,oe=T):Oy(y)}_=_.sibling}e:for(_=null,y=t;;){if(y.tag===5){if(_===null){_=y;try{r=y.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,d=y.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=Uw("display",a))}catch(N){St(t,t.return,N)}}}else if(y.tag===6){if(_===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(N){St(t,t.return,N)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;_===y&&(_=null),y=y.return}_===y&&(_=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:ci(e,t),ki(t),i&4&&by(t);break;case 21:break;default:ci(e,t),ki(t)}}function ki(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hE(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Jl(r,""),i.flags&=-33);var o=Ly(t);_p(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=Ly(t);mp(t,u,a);break;default:throw Error(ee(161))}}catch(d){St(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hP(t,e,n){oe=t,pE(t)}function pE(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var r=oe,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Lc;if(!a){var u=r.alternate,d=u!==null&&u.memoizedState!==null||rn;u=Lc;var f=rn;if(Lc=a,(rn=d)&&!f)for(oe=r;oe!==null;)a=oe,d=a.child,a.tag===22&&a.memoizedState!==null?My(r):d!==null?(d.return=a,oe=d):My(r);for(;o!==null;)oe=o,pE(o),o=o.sibling;oe=r,Lc=u,rn=f}Ny(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,oe=o):Ny(t)}}function Ny(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||od(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!rn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:hi(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&gy(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gy(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var _=f.memoizedState;if(_!==null){var y=_.dehydrated;y!==null&&iu(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}rn||e.flags&512&&pp(e)}catch(w){St(e,e.return,w)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function Oy(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function My(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{od(4,e)}catch(d){St(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){St(e,r,d)}}var o=e.return;try{pp(e)}catch(d){St(e,o,d)}break;case 5:var a=e.return;try{pp(e)}catch(d){St(e,a,d)}}}catch(d){St(e,e.return,d)}if(e===t){oe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,oe=u;break}oe=e.return}}var dP=Math.ceil,Ph=yr.ReactCurrentDispatcher,Nm=yr.ReactCurrentOwner,Yn=yr.ReactCurrentBatchConfig,We=0,Wt=null,Nt=null,Kt=0,bn=0,sa=cs(0),Vt=0,pu=null,Js=0,ad=0,Om=0,Wl=null,Tn=null,Mm=0,Ia=1/0,er=null,Ah=!1,gp=null,Kr=null,bc=!1,jr=null,xh=0,ql=0,yp=null,Qc=-1,Xc=0;function fn(){return We&6?Pt():Qc!==-1?Qc:Qc=Pt()}function Qr(t){return t.mode&1?We&2&&Kt!==0?Kt&-Kt:Kk.transition!==null?(Xc===0&&(Xc=Yw()),Xc):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:s0(t.type)),t):1}function _i(t,e,n,i){if(50<ql)throw ql=0,yp=null,Error(ee(185));Pu(t,n,i),(!(We&2)||t!==Wt)&&(t===Wt&&(!(We&2)&&(ad|=n),Vt===4&&Or(t,Kt)),kn(t,i),n===1&&We===0&&!(e.mode&1)&&(Ia=Pt()+500,id&&hs()))}function kn(t,e){var n=t.callbackNode;KC(t,e);var i=dh(t,t===Wt?Kt:0);if(i===0)n!==null&&Wg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Wg(n),e===1)t.tag===0?$k(Dy.bind(null,t)):I0(Dy.bind(null,t)),Wk(function(){!(We&6)&&hs()}),n=null;else{switch(Jw(i)){case 1:n=am;break;case 4:n=Qw;break;case 16:n=hh;break;case 536870912:n=Xw;break;default:n=hh}n=TE(n,mE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mE(t,e){if(Qc=-1,Xc=0,We&6)throw Error(ee(327));var n=t.callbackNode;if(fa()&&t.callbackNode!==n)return null;var i=dh(t,t===Wt?Kt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Rh(t,i);else{e=i;var r=We;We|=2;var o=gE();(Wt!==t||Kt!==e)&&(er=null,Ia=Pt()+500,Gs(t,e));do try{mP();break}catch(u){_E(t,u)}while(!0);wm(),Ph.current=o,We=r,Nt!==null?e=0:(Wt=null,Kt=0,e=Vt)}if(e!==0){if(e===2&&(r=qf(t),r!==0&&(i=r,e=vp(t,r))),e===1)throw n=pu,Gs(t,0),Or(t,i),kn(t,Pt()),n;if(e===6)Or(t,i);else{if(r=t.current.alternate,!(i&30)&&!fP(r)&&(e=Rh(t,i),e===2&&(o=qf(t),o!==0&&(i=o,e=vp(t,o))),e===1))throw n=pu,Gs(t,0),Or(t,i),kn(t,Pt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:Ms(t,Tn,er);break;case 3:if(Or(t,i),(i&130023424)===i&&(e=Mm+500-Pt(),10<e)){if(dh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){fn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Jf(Ms.bind(null,t,Tn,er),e);break}Ms(t,Tn,er);break;case 4:if(Or(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-mi(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=Pt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*dP(i/1960))-i,10<i){t.timeoutHandle=Jf(Ms.bind(null,t,Tn,er),i);break}Ms(t,Tn,er);break;case 5:Ms(t,Tn,er);break;default:throw Error(ee(329))}}}return kn(t,Pt()),t.callbackNode===n?mE.bind(null,t):null}function vp(t,e){var n=Wl;return t.current.memoizedState.isDehydrated&&(Gs(t,e).flags|=256),t=Rh(t,e),t!==2&&(e=Tn,Tn=n,e!==null&&wp(e)),t}function wp(t){Tn===null?Tn=t:Tn.push.apply(Tn,t)}function fP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!yi(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Or(t,e){for(e&=~Om,e&=~ad,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mi(e),i=1<<n;t[n]=-1,e&=~i}}function Dy(t){if(We&6)throw Error(ee(327));fa();var e=dh(t,0);if(!(e&1))return kn(t,Pt()),null;var n=Rh(t,e);if(t.tag!==0&&n===2){var i=qf(t);i!==0&&(e=i,n=vp(t,i))}if(n===1)throw n=pu,Gs(t,0),Or(t,e),kn(t,Pt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ms(t,Tn,er),kn(t,Pt()),null}function Dm(t,e){var n=We;We|=1;try{return t(e)}finally{We=n,We===0&&(Ia=Pt()+500,id&&hs())}}function eo(t){jr!==null&&jr.tag===0&&!(We&6)&&fa();var e=We;We|=1;var n=Yn.transition,i=Qe;try{if(Yn.transition=null,Qe=1,t)return t()}finally{Qe=i,Yn.transition=n,We=e,!(We&6)&&hs()}}function Vm(){bn=sa.current,ut(sa)}function Gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Hk(n)),Nt!==null)for(n=Nt.return;n!==null;){var i=n;switch(gm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&gh();break;case 3:Ta(),ut(In),ut(on),km();break;case 5:Cm(i);break;case 4:Ta();break;case 13:ut(_t);break;case 19:ut(_t);break;case 10:Em(i.type._context);break;case 22:case 23:Vm()}n=n.return}if(Wt=t,Nt=t=Xr(t.current,null),Kt=bn=e,Vt=0,pu=null,Om=ad=Js=0,Tn=Wl=null,Hs!==null){for(e=0;e<Hs.length;e++)if(n=Hs[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Hs=null}return t}function _E(t,e){do{var n=Nt;try{if(wm(),Zc.current=kh,Ch){for(var i=gt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ch=!1}if(Ys=0,Ht=Dt=gt=null,jl=!1,hu=0,Nm.current=null,n===null||n.return===null){Vt=1,pu=e,Nt=null;break}e:{var o=t,a=n.return,u=n,d=e;if(e=Kt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,_=u,y=_.tag;if(!(_.mode&1)&&(y===0||y===11||y===15)){var w=_.alternate;w?(_.updateQueue=w.updateQueue,_.memoizedState=w.memoizedState,_.lanes=w.lanes):(_.updateQueue=null,_.memoizedState=null)}var T=Sy(a);if(T!==null){T.flags&=-257,Iy(T,a,u,o,e),T.mode&1&&Ty(o,f,e),e=T,d=f;var A=e.updateQueue;if(A===null){var N=new Set;N.add(d),e.updateQueue=N}else A.add(d);break e}else{if(!(e&1)){Ty(o,f,e),zm();break e}d=Error(ee(426))}}else if(ft&&u.mode&1){var U=Sy(a);if(U!==null){!(U.flags&65536)&&(U.flags|=256),Iy(U,a,u,o,e),ym(Sa(d,u));break e}}o=d=Sa(d,u),Vt!==4&&(Vt=2),Wl===null?Wl=[o]:Wl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var P=J0(o,d,e);_y(o,P);break e;case 1:u=d;var k=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof k.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Kr===null||!Kr.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=eE(o,u,e);_y(o,H);break e}}o=o.return}while(o!==null)}vE(n)}catch($){e=$,Nt===n&&n!==null&&(Nt=n=n.return);continue}break}while(!0)}function gE(){var t=Ph.current;return Ph.current=kh,t===null?kh:t}function zm(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Wt===null||!(Js&268435455)&&!(ad&268435455)||Or(Wt,Kt)}function Rh(t,e){var n=We;We|=2;var i=gE();(Wt!==t||Kt!==e)&&(er=null,Gs(t,e));do try{pP();break}catch(r){_E(t,r)}while(!0);if(wm(),We=n,Ph.current=i,Nt!==null)throw Error(ee(261));return Wt=null,Kt=0,Vt}function pP(){for(;Nt!==null;)yE(Nt)}function mP(){for(;Nt!==null&&!FC();)yE(Nt)}function yE(t){var e=EE(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?vE(t):Nt=e,Nm.current=null}function vE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lP(n,e),n!==null){n.flags&=32767,Nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,Nt=null;return}}else if(n=aP(n,e,bn),n!==null){Nt=n;return}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=t}while(e!==null);Vt===0&&(Vt=5)}function Ms(t,e,n){var i=Qe,r=Yn.transition;try{Yn.transition=null,Qe=1,_P(t,e,n,i)}finally{Yn.transition=r,Qe=i}return null}function _P(t,e,n,i){do fa();while(jr!==null);if(We&6)throw Error(ee(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(QC(t,o),t===Wt&&(Nt=Wt=null,Kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bc||(bc=!0,TE(hh,function(){return fa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Yn.transition,Yn.transition=null;var a=Qe;Qe=1;var u=We;We|=4,Nm.current=null,cP(t,n),fE(n,t),Dk(Xf),fh=!!Qf,Xf=Qf=null,t.current=n,hP(n),BC(),We=u,Qe=a,Yn.transition=o}else t.current=n;if(bc&&(bc=!1,jr=t,xh=r),o=t.pendingLanes,o===0&&(Kr=null),WC(n.stateNode),kn(t,Pt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Ah)throw Ah=!1,t=gp,gp=null,t;return xh&1&&t.tag!==0&&fa(),o=t.pendingLanes,o&1?t===yp?ql++:(ql=0,yp=t):ql=0,hs(),null}function fa(){if(jr!==null){var t=Jw(xh),e=Yn.transition,n=Qe;try{if(Yn.transition=null,Qe=16>t?16:t,jr===null)var i=!1;else{if(t=jr,jr=null,xh=0,We&6)throw Error(ee(331));var r=We;for(We|=4,oe=t.current;oe!==null;){var o=oe,a=o.child;if(oe.flags&16){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var f=u[d];for(oe=f;oe!==null;){var _=oe;switch(_.tag){case 0:case 11:case 15:Hl(8,_,o)}var y=_.child;if(y!==null)y.return=_,oe=y;else for(;oe!==null;){_=oe;var w=_.sibling,T=_.return;if(cE(_),_===f){oe=null;break}if(w!==null){w.return=T,oe=w;break}oe=T}}}var A=o.alternate;if(A!==null){var N=A.child;if(N!==null){A.child=null;do{var U=N.sibling;N.sibling=null,N=U}while(N!==null)}}oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,oe=a;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Hl(9,o,o.return)}var P=o.sibling;if(P!==null){P.return=o.return,oe=P;break e}oe=o.return}}var k=t.current;for(oe=k;oe!==null;){a=oe;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,oe=b;else e:for(a=k;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:od(9,u)}}catch($){St(u,u.return,$)}if(u===a){oe=null;break e}var H=u.sibling;if(H!==null){H.return=u.return,oe=H;break e}oe=u.return}}if(We=r,hs(),Li&&typeof Li.onPostCommitFiberRoot=="function")try{Li.onPostCommitFiberRoot(Yh,t)}catch{}i=!0}return i}finally{Qe=n,Yn.transition=e}}return!1}function Vy(t,e,n){e=Sa(n,e),e=J0(t,e,1),t=$r(t,e,1),e=fn(),t!==null&&(Pu(t,1,e),kn(t,e))}function St(t,e,n){if(t.tag===3)Vy(t,t,n);else for(;e!==null;){if(e.tag===3){Vy(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Kr===null||!Kr.has(i))){t=Sa(n,t),t=eE(e,t,1),e=$r(e,t,1),t=fn(),e!==null&&(Pu(e,1,t),kn(e,t));break}}e=e.return}}function gP(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=fn(),t.pingedLanes|=t.suspendedLanes&n,Wt===t&&(Kt&n)===n&&(Vt===4||Vt===3&&(Kt&130023424)===Kt&&500>Pt()-Mm?Gs(t,0):Om|=n),kn(t,e)}function wE(t,e){e===0&&(t.mode&1?(e=Tc,Tc<<=1,!(Tc&130023424)&&(Tc=4194304)):e=1);var n=fn();t=dr(t,e),t!==null&&(Pu(t,e,n),kn(t,n))}function yP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wE(t,n)}function vP(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),wE(t,n)}var EE;EE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||In.current)Sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Sn=!1,oP(t,e,n);Sn=!!(t.flags&131072)}else Sn=!1,ft&&e.flags&1048576&&C0(e,wh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Kc(t,e),t=e.pendingProps;var r=va(e,on.current);da(e,n),r=Am(null,e,i,t,r,n);var o=xm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cn(i)?(o=!0,yh(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Sm(e),r.updater=sd,e.stateNode=r,r._reactInternals=e,op(e,i,t,n),e=up(null,e,i,!0,o,n)):(e.tag=0,ft&&o&&_m(e),hn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Kc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=EP(i),t=hi(i,t),r){case 0:e=lp(null,e,i,t,n);break e;case 1:e=Py(null,e,i,t,n);break e;case 11:e=Cy(null,e,i,t,n);break e;case 14:e=ky(null,e,i,hi(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hi(i,r),lp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hi(i,r),Py(t,e,i,r,n);case 3:e:{if(rE(e),t===null)throw Error(ee(387));i=e.pendingProps,o=e.memoizedState,r=o.element,L0(t,e),Sh(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Sa(Error(ee(423)),e),e=Ay(t,e,i,n,r);break e}else if(i!==r){r=Sa(Error(ee(424)),e),e=Ay(t,e,i,n,r);break e}else for(Nn=Zr(e.stateNode.containerInfo.firstChild),On=e,ft=!0,fi=null,n=x0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wa(),i===r){e=fr(t,e,n);break e}hn(t,e,i,n)}e=e.child}return e;case 5:return b0(e),t===null&&ip(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Yf(i,r)?a=null:o!==null&&Yf(i,o)&&(e.flags|=32),iE(t,e),hn(t,e,a,n),e.child;case 6:return t===null&&ip(e),null;case 13:return sE(t,e,n);case 4:return Im(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ea(e,null,i,n):hn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hi(i,r),Cy(t,e,i,r,n);case 7:return hn(t,e,e.pendingProps,n),e.child;case 8:return hn(t,e,e.pendingProps.children,n),e.child;case 12:return hn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,st(Eh,i._currentValue),i._currentValue=a,o!==null)if(yi(o.value,a)){if(o.children===r.children&&!In.current){e=fr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var d=u.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=lr(-1,n&-n),d.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var _=f.pending;_===null?d.next=d:(d.next=_.next,_.next=d),f.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),rp(o.return,n,e),u.lanes|=n;break}d=d.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ee(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),rp(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}hn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,da(e,n),r=Jn(r),i=i(r),e.flags|=1,hn(t,e,i,n),e.child;case 14:return i=e.type,r=hi(i,e.pendingProps),r=hi(i.type,r),ky(t,e,i,r,n);case 15:return tE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:hi(i,r),Kc(t,e),e.tag=1,Cn(i)?(t=!0,yh(e)):t=!1,da(e,n),Y0(e,i,r),op(e,i,r,n),up(null,e,i,!0,t,n);case 19:return oE(t,e,n);case 22:return nE(t,e,n)}throw Error(ee(156,e.tag))};function TE(t,e){return Kw(t,e)}function wP(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(t,e,n,i){return new wP(t,e,n,i)}function Um(t){return t=t.prototype,!(!t||!t.isReactComponent)}function EP(t){if(typeof t=="function")return Um(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rm)return 11;if(t===sm)return 14}return 2}function Xr(t,e){var n=t.alternate;return n===null?(n=Xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yc(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Um(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ko:return Zs(n.children,r,o,e);case im:a=8,r|=8;break;case Rf:return t=Xn(12,n,e,r|2),t.elementType=Rf,t.lanes=o,t;case Lf:return t=Xn(13,n,e,r),t.elementType=Lf,t.lanes=o,t;case bf:return t=Xn(19,n,e,r),t.elementType=bf,t.lanes=o,t;case bw:return ld(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rw:a=10;break e;case Lw:a=9;break e;case rm:a=11;break e;case sm:a=14;break e;case Lr:a=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Xn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Zs(t,e,n,i){return t=Xn(7,t,i,e),t.lanes=n,t}function ld(t,e,n,i){return t=Xn(22,t,i,e),t.elementType=bw,t.lanes=n,t.stateNode={isHidden:!1},t}function df(t,e,n){return t=Xn(6,t,null,e),t.lanes=n,t}function ff(t,e,n){return e=Xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function TP(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gd(0),this.expirationTimes=Gd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fm(t,e,n,i,r,o,a,u,d){return t=new TP(t,e,n,u,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Xn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sm(o),t}function SP(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$o,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function SE(t){if(!t)return rs;t=t._reactInternals;e:{if(ho(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(Cn(n))return S0(t,n,e)}return e}function IE(t,e,n,i,r,o,a,u,d){return t=Fm(n,i,!0,t,r,o,a,u,d),t.context=SE(null),n=t.current,i=fn(),r=Qr(n),o=lr(i,r),o.callback=e??null,$r(n,o,r),t.current.lanes=r,Pu(t,r,i),kn(t,i),t}function ud(t,e,n,i){var r=e.current,o=fn(),a=Qr(r);return n=SE(n),e.context===null?e.context=n:e.pendingContext=n,e=lr(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=$r(r,e,a),t!==null&&(_i(t,r,a,o),Gc(t,r,a)),a}function Lh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bm(t,e){zy(t,e),(t=t.alternate)&&zy(t,e)}function IP(){return null}var CE=typeof reportError=="function"?reportError:function(t){console.error(t)};function jm(t){this._internalRoot=t}cd.prototype.render=jm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));ud(t,e,null,null)};cd.prototype.unmount=jm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;eo(function(){ud(null,t,null,null)}),e[hr]=null}};function cd(t){this._internalRoot=t}cd.prototype.unstable_scheduleHydration=function(t){if(t){var e=n0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nr.length&&e!==0&&e<Nr[n].priority;n++);Nr.splice(n,0,t),n===0&&r0(t)}};function Hm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Uy(){}function CP(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Lh(a);o.call(f)}}var a=IE(e,i,t,0,null,!1,!1,"",Uy);return t._reactRootContainer=a,t[hr]=a.current,ou(t.nodeType===8?t.parentNode:t),eo(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Lh(d);u.call(f)}}var d=Fm(t,0,!1,null,null,!1,!1,"",Uy);return t._reactRootContainer=d,t[hr]=d.current,ou(t.nodeType===8?t.parentNode:t),eo(function(){ud(e,d,n,i)}),d}function dd(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var d=Lh(a);u.call(d)}}ud(e,a,t,r)}else a=CP(n,e,t,r,i);return Lh(a)}e0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xl(e.pendingLanes);n!==0&&(lm(e,n|1),kn(e,Pt()),!(We&6)&&(Ia=Pt()+500,hs()))}break;case 13:eo(function(){var i=dr(t,1);if(i!==null){var r=fn();_i(i,t,1,r)}}),Bm(t,1)}};um=function(t){if(t.tag===13){var e=dr(t,134217728);if(e!==null){var n=fn();_i(e,t,134217728,n)}Bm(t,134217728)}};t0=function(t){if(t.tag===13){var e=Qr(t),n=dr(t,e);if(n!==null){var i=fn();_i(n,t,e,i)}Bm(t,e)}};n0=function(){return Qe};i0=function(t,e){var n=Qe;try{return Qe=t,e()}finally{Qe=n}};jf=function(t,e,n){switch(e){case"input":if(Mf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=nd(i);if(!r)throw Error(ee(90));Ow(i),Mf(i,r)}}}break;case"textarea":Dw(t,n);break;case"select":e=n.value,e!=null&&la(t,!!n.multiple,e,!1)}};Hw=Dm;Ww=eo;var kP={usingClientEntryPoint:!1,Events:[xu,Jo,nd,Bw,jw,Dm]},Il={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PP={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zw(t),t===null?null:t.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||IP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{Yh=Nc.inject(PP),Li=Nc}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kP;Dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hm(e))throw Error(ee(200));return SP(t,e,null,n)};Dn.createRoot=function(t,e){if(!Hm(t))throw Error(ee(299));var n=!1,i="",r=CE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Fm(t,1,!1,null,null,n,!1,i,r),t[hr]=e.current,ou(t.nodeType===8?t.parentNode:t),new jm(e)};Dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=Zw(e),t=t===null?null:t.stateNode,t};Dn.flushSync=function(t){return eo(t)};Dn.hydrate=function(t,e,n){if(!hd(e))throw Error(ee(200));return dd(null,t,e,!0,n)};Dn.hydrateRoot=function(t,e,n){if(!Hm(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=CE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=IE(e,null,t,1,n??null,r,!1,o,a),t[hr]=e.current,ou(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new cd(e)};Dn.render=function(t,e,n){if(!hd(e))throw Error(ee(200));return dd(null,t,e,!1,n)};Dn.unmountComponentAtNode=function(t){if(!hd(t))throw Error(ee(40));return t._reactRootContainer?(eo(function(){dd(null,null,t,!1,function(){t._reactRootContainer=null,t[hr]=null})}),!0):!1};Dn.unstable_batchedUpdates=Dm;Dn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!hd(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return dd(t,e,n,!1,i)};Dn.version="18.3.1-next-f1338f8080-20240426";function kE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kE)}catch(t){console.error(t)}}kE(),kw.exports=Dn;var PE=kw.exports,Fy=PE;Af.createRoot=Fy.createRoot,Af.hydrateRoot=Fy.hydrateRoot;function Wm(t,e){const n=G.useRef(e);G.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function AE(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const xE=1;function RE(t){return Object.freeze({__version:xE,map:t})}function fd(t,e){return Object.freeze({...t,...e})}const qm=G.createContext(null),Gm=qm.Provider;function Ma(){const t=G.useContext(qm);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Zm(t){function e(n,i){const{instance:r,context:o}=t(n).current;return G.useImperativeHandle(i,()=>r),n.children==null?null:ar.createElement(Gm,{value:o},n.children)}return G.forwardRef(e)}function LE(t){function e(n,i){const[r,o]=G.useState(!1),{instance:a}=t(n,o).current;G.useImperativeHandle(i,()=>a),G.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?PE.createPortal(n.children,u):null}return G.forwardRef(e)}function $m(t){function e(n,i){const{instance:r}=t(n).current;return G.useImperativeHandle(i,()=>r),null}return G.forwardRef(e)}function bE(t){return function(n){const i=Ma(),r=t(n,i),{instance:o}=r.current,a=G.useRef(n.position),{position:u}=n;return G.useEffect(function(){return o.addTo(i.map),function(){o.remove()}},[i.map,o]),G.useEffect(function(){u!=null&&u!==a.current&&(o.setPosition(u),a.current=u)},[o,u]),r}}function pd(t,e){const n=G.useRef();G.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Lu(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function NE(t,e){return function(i,r){const o=Ma(),a=t(Lu(i,o),o);return Wm(o.map,i.attribution),pd(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var Ep={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(ns,function(n){var i="1.9.4";function r(s){var l,h,p,g;for(h=1,p=arguments.length;h<p;h++){g=arguments[h];for(l in g)s[l]=g[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(h.call(arguments)):arguments)}}var u=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,h){var p,g,E,D;return D=function(){p=!1,g&&(E.apply(h,g),g=!1)},E=function(){p?g=arguments:(s.apply(h,arguments),setTimeout(D,l),p=!0)},E}function _(s,l,h){var p=l[1],g=l[0],E=p-g;return s===p&&h?s:((s-g)%E+E)%E+g}function y(){return!1}function w(s,l){if(l===!1)return s;var h=Math.pow(10,l===void 0?6:l);return Math.round(s*h)/h}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function A(s){return T(s).split(/\s+/)}function N(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var h in l)s.options[h]=l[h];return s.options}function U(s,l,h){var p=[];for(var g in s)p.push(encodeURIComponent(h?g.toUpperCase():g)+"="+encodeURIComponent(s[g]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function k(s,l){return s.replace(P,function(h,p){var g=l[p];if(g===void 0)throw new Error("No value provided for variable "+h);return typeof g=="function"&&(g=g(l)),g})}var b=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function H(s,l){for(var h=0;h<s.length;h++)if(s[h]===l)return h;return-1}var $="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Q(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function C(s){var l=+new Date,h=Math.max(0,16-(l-R));return R=l+h,window.setTimeout(s,h)}var x=window.requestAnimationFrame||Q("RequestAnimationFrame")||C,O=window.cancelAnimationFrame||Q("CancelAnimationFrame")||Q("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function V(s,l,h){if(h&&x===C)s.call(l);else return x.call(window,a(s,l))}function z(s){s&&O.call(window,s)}var M={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:d,throttle:f,wrapNum:_,falseFn:y,formatNum:w,trim:T,splitWords:A,setOptions:N,getParamString:U,template:k,isArray:b,indexOf:H,emptyImageUrl:$,requestFn:x,cancelFn:O,requestAnimFrame:V,cancelAnimFrame:z};function Ze(){}Ze.extend=function(s){var l=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,p=o(h);p.constructor=l,l.prototype=p;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(l[g]=this[g]);return s.statics&&r(l,s.statics),s.includes&&(An(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?o(h.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,D=p._initHooks.length;E<D;E++)p._initHooks[E].call(this)}},l},Ze.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},Ze.mergeOptions=function(s){return r(this.prototype.options,s),this},Ze.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function An(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=b(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ze={on:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=A(s);for(var g=0,E=s.length;g<E;g++)this._on(s[g],l,h)}return this},off:function(s,l,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=A(s);for(var g=arguments.length===1,E=0,D=s.length;E<D;E++)g?this._off(s[E]):this._off(s[E],l,h)}return this},_on:function(s,l,h,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,h)===!1){h===this&&(h=void 0);var g={fn:l,ctx:h};p&&(g.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(g)}},_off:function(s,l,h){var p,g,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(g=0,E=p.length;g<E;g++)p[g].fn=y;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var D=this._listens(s,l,h);if(D!==!1){var j=p[D];this._firingCount&&(j.fn=y,this._events[s]=p=p.slice()),p.splice(D,1)}}},fire:function(s,l,h){if(!this.listens(s,h))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var g=this._events[s];if(g){this._firingCount=this._firingCount+1||1;for(var E=0,D=g.length;E<D;E++){var j=g[E],W=j.fn;j.once&&this.off(s,W,j.ctx),W.call(j.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,l,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var g=l;typeof l!="function"&&(p=!!l,g=void 0,h=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,g,h)!==!1)return!0;if(p){for(var D in this._eventParents)if(this._eventParents[D].listens(s,l,h,p))return!0}return!1},_listens:function(s,l,h){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;h===this&&(h=void 0);for(var g=0,E=p.length;g<E;g++)if(p[g].fn===l&&p[g].ctx===h)return g;return!1},once:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=A(s);for(var g=0,E=s.length;g<E;g++)this._on(s[g],l,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};ze.addEventListener=ze.on,ze.removeEventListener=ze.clearAllEventListeners=ze.off,ze.addOneTimeEventListener=ze.once,ze.fireEvent=ze.fire,ze.hasEventListeners=ze.listens;var Mt=Ze.extend(ze);function Z(s,l,h){this.x=h?Math.round(s):s,this.y=h?Math.round(l):l}var _e=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(s){return this.clone()._add(te(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(te(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Z(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Z(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(s){s=te(s);var l=s.x-this.x,h=s.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(s){return s=te(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=te(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function te(s,l,h){return s instanceof Z?s:b(s)?new Z(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Z(s.x,s.y):new Z(s,l,h)}function me(s,l){if(s)for(var h=l?[s,l]:s,p=0,g=h.length;p<g;p++)this.extend(h[p])}me.prototype={extend:function(s){var l,h;if(!s)return this;if(s instanceof Z||typeof s[0]=="number"||"x"in s)l=h=te(s);else if(s=we(s),l=s.min,h=s.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return te((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return te(this.min.x,this.max.y)},getTopRight:function(){return te(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,h;return typeof s[0]=="number"||s instanceof Z?s=te(s):s=we(s),s instanceof me?(l=s.min,h=s.max):l=h=s,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=we(s);var l=this.min,h=this.max,p=s.min,g=s.max,E=g.x>=l.x&&p.x<=h.x,D=g.y>=l.y&&p.y<=h.y;return E&&D},overlaps:function(s){s=we(s);var l=this.min,h=this.max,p=s.min,g=s.max,E=g.x>l.x&&p.x<h.x,D=g.y>l.y&&p.y<h.y;return E&&D},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,h=this.max,p=Math.abs(l.x-h.x)*s,g=Math.abs(l.y-h.y)*s;return we(te(l.x-p,l.y-g),te(h.x+p,h.y+g))},equals:function(s){return s?(s=we(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function we(s,l){return!s||s instanceof me?s:new me(s,l)}function Ae(s,l){if(s)for(var h=l?[s,l]:s,p=0,g=h.length;p<g;p++)this.extend(h[p])}Ae.prototype={extend:function(s){var l=this._southWest,h=this._northEast,p,g;if(s instanceof F)p=s,g=s;else if(s instanceof Ae){if(p=s._southWest,g=s._northEast,!p||!g)return this}else return s?this.extend(ne(s)||Fe(s)):this;return!l&&!h?(this._southWest=new F(p.lat,p.lng),this._northEast=new F(g.lat,g.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),h.lat=Math.max(g.lat,h.lat),h.lng=Math.max(g.lng,h.lng)),this},pad:function(s){var l=this._southWest,h=this._northEast,p=Math.abs(l.lat-h.lat)*s,g=Math.abs(l.lng-h.lng)*s;return new Ae(new F(l.lat-p,l.lng-g),new F(h.lat+p,h.lng+g))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof F||"lat"in s?s=ne(s):s=Fe(s);var l=this._southWest,h=this._northEast,p,g;return s instanceof Ae?(p=s.getSouthWest(),g=s.getNorthEast()):p=g=s,p.lat>=l.lat&&g.lat<=h.lat&&p.lng>=l.lng&&g.lng<=h.lng},intersects:function(s){s=Fe(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),g=s.getNorthEast(),E=g.lat>=l.lat&&p.lat<=h.lat,D=g.lng>=l.lng&&p.lng<=h.lng;return E&&D},overlaps:function(s){s=Fe(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),g=s.getNorthEast(),E=g.lat>l.lat&&p.lat<h.lat,D=g.lng>l.lng&&p.lng<h.lng;return E&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Fe(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Fe(s,l){return s instanceof Ae?s:new Ae(s,l)}function F(s,l,h){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,h!==void 0&&(this.alt=+h)}F.prototype={equals:function(s,l){if(!s)return!1;s=ne(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+w(this.lat,s)+", "+w(this.lng,s)+")"},distanceTo:function(s){return xe.distance(this,ne(s))},wrap:function(){return xe.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,h=l/Math.cos(Math.PI/180*this.lat);return Fe([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new F(this.lat,this.lng,this.alt)}};function ne(s,l,h){return s instanceof F?s:b(s)&&typeof s[0]!="object"?s.length===3?new F(s[0],s[1],s[2]):s.length===2?new F(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new F(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new F(s,l,h)}var ue={latLngToPoint:function(s,l){var h=this.projection.project(s),p=this.scale(l);return this.transformation._transform(h,p)},pointToLatLng:function(s,l){var h=this.scale(l),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(l.min,h),g=this.transformation.transform(l.max,h);return new me(p,g)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?_(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?_(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new F(h,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),h=this.wrapLatLng(l),p=l.lat-h.lat,g=l.lng-h.lng;if(p===0&&g===0)return s;var E=s.getSouthWest(),D=s.getNorthEast(),j=new F(E.lat-p,E.lng-g),W=new F(D.lat-p,D.lng-g);return new Ae(j,W)}},xe=r({},ue,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var h=Math.PI/180,p=s.lat*h,g=l.lat*h,E=Math.sin((l.lat-s.lat)*h/2),D=Math.sin((l.lng-s.lng)*h/2),j=E*E+Math.cos(p)*Math.cos(g)*D*D,W=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*W}}),et=6378137,nt={R:et,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),g=Math.sin(p*l);return new Z(this.R*s.lng*l,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(s){var l=180/Math.PI;return new F((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=et*Math.PI;return new me([-s,-s],[s,s])}()};function Ge(s,l,h,p){if(b(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=h,this._d=p}Ge.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Z((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Oe(s,l,h,p){return new Ge(s,l,h,p)}var Me=r({},xe,{code:"EPSG:3857",projection:nt,transformation:function(){var s=.5/(Math.PI*nt.R);return Oe(s,.5,-s,.5)}()}),Ce=r({},Me,{code:"EPSG:900913"});function it(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function ke(s,l){var h="",p,g,E,D,j,W;for(p=0,E=s.length;p<E;p++){for(j=s[p],g=0,D=j.length;g<D;g++)W=j[g],h+=(g?"L":"M")+W.x+" "+W.y;h+=l?de.svg?"z":"x":""}return h||"M0 0"}var $e=document.documentElement.style,ot="ActiveXObject"in window,At=ot&&!document.addEventListener,_n="msLaunchUri"in navigator&&!("documentMode"in document),zn=Fn("webkit"),Ei=Fn("android"),ii=Fn("android 2")||Fn("android 3"),gs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ys=Ei&&Fn("Google")&&gs<537&&!("AudioNode"in window),Et=!!window.opera,xt=!_n&&Fn("chrome"),ji=Fn("gecko")&&!zn&&!Et&&!ot,vs=!xt&&Fn("safari"),ws=Fn("phantom"),Es="OTransition"in $e,Hi=navigator.platform.indexOf("Win")===0,Ts=ot&&"transition"in $e,X="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ii,re="MozPerspective"in $e,ce=!window.L_DISABLE_3D&&(Ts||X||re)&&!Es&&!ws,ae=typeof orientation<"u"||Fn("mobile"),fe=ae&&zn,Le=ae&&X,rt=!window.PointerEvent&&window.MSPointerEvent,Be=!!(window.PointerEvent||rt),gn="ontouchstart"in window||!!window.TouchEvent,ri=!window.L_NO_TOUCH&&(gn||Be),Un=ae&&Et,yo=ae&&ji,wr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ut=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",y,l),window.removeEventListener("testPassiveEventSupport",y,l)}catch{}return s}(),yn=function(){return!!document.createElement("canvas").getContext}(),vo=!!(document.createElementNS&&it("svg").createSVGRect),qt=!!vo&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Wu=!vo&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Ss=navigator.platform.indexOf("Mac")===0,Is=navigator.platform.indexOf("Linux")===0;function Fn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var de={ie:ot,ielt9:At,edge:_n,webkit:zn,android:Ei,android23:ii,androidStock:ys,opera:Et,chrome:xt,gecko:ji,safari:vs,phantom:ws,opera12:Es,win:Hi,ie3d:Ts,webkit3d:X,gecko3d:re,any3d:ce,mobile:ae,mobileWebkit:fe,mobileWebkit3d:Le,msPointer:rt,pointer:Be,touch:ri,touchNative:gn,mobileOpera:Un,mobileGecko:yo,retina:wr,passiveEvents:Ut,canvas:yn,svg:vo,vml:Wu,inlineSvg:qt,mac:Ss,linux:Is},Wi=de.msPointer?"MSPointerDown":"pointerdown",qu=de.msPointer?"MSPointerMove":"pointermove",Gu=de.msPointer?"MSPointerUp":"pointerup",Cs=de.msPointer?"MSPointerCancel":"pointercancel",wo={touchstart:Wi,touchmove:qu,touchend:Gu,touchcancel:Cs},Eo={touchstart:So,touchmove:To,touchend:To,touchcancel:To},si={},oi=!1;function Zu(s,l,h){return l==="touchstart"&&Ku(),Eo[l]?(h=Eo[l].bind(this,h),s.addEventListener(wo[l],h,!1),h):(console.warn("wrong event specified:",l),y)}function $u(s,l,h){if(!wo[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(wo[l],h,!1)}function Wa(s){si[s.pointerId]=s}function qa(s){si[s.pointerId]&&(si[s.pointerId]=s)}function Ga(s){delete si[s.pointerId]}function Ku(){oi||(document.addEventListener(Wi,Wa,!0),document.addEventListener(qu,qa,!0),document.addEventListener(Gu,Ga,!0),document.addEventListener(Cs,Ga,!0),oi=!0)}function To(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in si)l.touches.push(si[h]);l.changedTouches=[l],s(l)}}function So(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&pt(l),To(s,l)}function Qu(s){var l={},h,p;for(p in s)h=s[p],l[p]=h&&h.bind?h.bind(s):h;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Za=200;function ks(s,l){s.addEventListener("dblclick",l);var h=0,p;function g(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var D=sl(E);if(!(D.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!D.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var j=Date.now();j-h<=Za?(p++,p===2&&l(Qu(E))):p=1,h=j}}}return s.addEventListener("click",g),{dblclick:l,simDblclick:g}}function qi(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Ps=Zi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),As=Zi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),$a=As==="webkitTransition"||As==="OTransition"?As+"End":"transitionend";function Ka(s){return typeof s=="string"?document.getElementById(s):s}function Er(s,l){var h=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[l]:null}return h==="auto"?null:h}function De(s,l,h){var p=document.createElement(s);return p.className=l||"",h&&h.appendChild(p),p}function tt(s){var l=s.parentNode;l&&l.removeChild(s)}function xs(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Gi(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Tr(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Qa(s,l){if(s.classList!==void 0)return s.classList.contains(l);var h=Bn(s);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function Pe(s,l){if(s.classList!==void 0)for(var h=A(l),p=0,g=h.length;p<g;p++)s.classList.add(h[p]);else if(!Qa(s,l)){var E=Bn(s);Xa(s,(E?E+" ":"")+l)}}function ht(s,l){s.classList!==void 0?s.classList.remove(l):Xa(s,T((" "+Bn(s)+" ").replace(" "+l+" "," ")))}function Xa(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function Bn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Tt(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Io(s,l)}function Io(s,l){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Zi(s){for(var l=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in l)return s[h];return!1}function Ti(s,l,h){var p=l||new Z(0,0);s.style[Ps]=(de.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function Ee(s,l){s._leaflet_pos=l,de.any3d?Ti(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function jn(s){return s._leaflet_pos||new Z(0,0)}var ai,li,Ya;if("onselectstart"in document)ai=function(){ge(window,"selectstart",pt)},li=function(){Ye(window,"selectstart",pt)};else{var Sr=Zi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ai=function(){if(Sr){var s=document.documentElement.style;Ya=s[Sr],s[Sr]="none"}},li=function(){Sr&&(document.documentElement.style[Sr]=Ya,Ya=void 0)}}function Ja(){ge(window,"dragstart",pt)}function el(){Ye(window,"dragstart",pt)}var Co,tl;function $i(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(xn(),Co=s,tl=s.style.outlineStyle,s.style.outlineStyle="none",ge(window,"keydown",xn))}function xn(){Co&&(Co.style.outlineStyle=tl,Co=void 0,tl=void 0,Ye(window,"keydown",xn))}function nl(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function ko(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Xu={__proto__:null,TRANSFORM:Ps,TRANSITION:As,TRANSITION_END:$a,get:Ka,getStyle:Er,create:De,remove:tt,empty:xs,toFront:Gi,toBack:Tr,hasClass:Qa,addClass:Pe,removeClass:ht,setClass:Xa,getClass:Bn,setOpacity:Tt,testProp:Zi,setTransform:Ti,setPosition:Ee,getPosition:jn,get disableTextSelection(){return ai},get enableTextSelection(){return li},disableImageDrag:Ja,enableImageDrag:el,preventOutline:$i,restoreOutline:xn,getSizedParentNode:nl,getScale:ko};function ge(s,l,h,p){if(l&&typeof l=="object")for(var g in l)il(s,g,l[g],h);else{l=A(l);for(var E=0,D=l.length;E<D;E++)il(s,l[E],h,p)}return this}var Hn="_leaflet_events";function Ye(s,l,h,p){if(arguments.length===1)Yu(s),delete s[Hn];else if(l&&typeof l=="object")for(var g in l)rl(s,g,l[g],h);else if(l=A(l),arguments.length===2)Yu(s,function(j){return H(l,j)!==-1});else for(var E=0,D=l.length;E<D;E++)rl(s,l[E],h,p);return this}function Yu(s,l){for(var h in s[Hn]){var p=h.split(/\d/)[0];(!l||l(p))&&rl(s,p,null,null,h)}}var Wn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function il(s,l,h,p){var g=l+d(h)+(p?"_"+d(p):"");if(s[Hn]&&s[Hn][g])return this;var E=function(j){return h.call(p||s,j||window.event)},D=E;!de.touchNative&&de.pointer&&l.indexOf("touch")===0?E=Zu(s,l,E):de.touch&&l==="dblclick"?E=ks(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Wn[l]||l,E,de.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(j){j=j||window.event,ol(s,j)&&D(j)},s.addEventListener(Wn[l],E,!1)):s.addEventListener(l,D,!1):s.attachEvent("on"+l,E),s[Hn]=s[Hn]||{},s[Hn][g]=E}function rl(s,l,h,p,g){g=g||l+d(h)+(p?"_"+d(p):"");var E=s[Hn]&&s[Hn][g];if(!E)return this;!de.touchNative&&de.pointer&&l.indexOf("touch")===0?$u(s,l,E):de.touch&&l==="dblclick"?qi(s,E):"removeEventListener"in s?s.removeEventListener(Wn[l]||l,E,!1):s.detachEvent("on"+l,E),s[Hn][g]=null}function qn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Ir(s){return il(s,"wheel",qn),this}function Cr(s){return ge(s,"mousedown touchstart dblclick contextmenu",qn),s._leaflet_disable_click=!0,this}function pt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Rn(s){return pt(s),qn(s),this}function sl(s){if(s.composedPath)return s.composedPath();for(var l=[],h=s.target;h;)l.push(h),h=h.parentNode;return l}function Po(s,l){if(!l)return new Z(s.clientX,s.clientY);var h=ko(l),p=h.boundingClientRect;return new Z((s.clientX-p.left)/h.x-l.clientLeft,(s.clientY-p.top)/h.y-l.clientTop)}var dt=de.linux&&de.chrome?window.devicePixelRatio:de.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ju(s){return de.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/dt:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function ol(s,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var ec={__proto__:null,on:ge,off:Ye,stopPropagation:qn,disableScrollPropagation:Ir,disableClickPropagation:Cr,preventDefault:pt,stop:Rn,getPropagationPath:sl,getMousePosition:Po,getWheelDelta:Ju,isExternalTarget:ol,addListener:ge,removeListener:Ye},al=Mt.extend({run:function(s,l,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=jn(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var h=this._startPos.add(this._offset.multiplyBy(s));l&&h._round(),Ee(this._el,h),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),be=Mt.extend({options:{crs:Me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=N(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ne(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=As&&de.any3d&&!de.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ge(this._proxy,$a,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ne(s),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=r({animate:h.animate},h.zoom),h.pan=r({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(de.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(de.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,h){var p=this.getZoomScale(l),g=this.getSize().divideBy(2),E=s instanceof Z?s:this.latLngToContainerPoint(s),D=E.subtract(g).multiplyBy(1-1/p),j=this.containerPointToLatLng(g.add(D));return this.setView(j,l,{zoom:h})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Fe(s);var h=te(l.paddingTopLeft||l.padding||[0,0]),p=te(l.paddingBottomRight||l.padding||[0,0]),g=this.getBoundsZoom(s,!1,h.add(p));if(g=typeof l.maxZoom=="number"?Math.min(l.maxZoom,g):g,g===1/0)return{center:s.getCenter(),zoom:g};var E=p.subtract(h).divideBy(2),D=this.project(s.getSouthWest(),g),j=this.project(s.getNorthEast(),g),W=this.unproject(D.add(j).divideBy(2).add(E),g);return{center:W,zoom:g}},fitBounds:function(s,l){if(s=Fe(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=te(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new al,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Pe(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,h){if(h=h||{},h.animate===!1||!de.any3d)return this.setView(s,l,h);this._stop();var p=this.project(this.getCenter()),g=this.project(s),E=this.getSize(),D=this._zoom;s=ne(s),l=l===void 0?D:l;var j=Math.max(E.x,E.y),W=j*this.getZoomScale(D,l),Y=g.distanceTo(p)||1,se=1.42,ye=se*se;function Re(Lt){var _c=Lt?-1:1,JI=Lt?W:j,eC=W*W-j*j+_c*ye*ye*Y*Y,tC=2*JI*ye*Y,Fd=eC/tC,Lg=Math.sqrt(Fd*Fd+1)-Fd,nC=Lg<1e-9?-18:Math.log(Lg);return nC}function un(Lt){return(Math.exp(Lt)-Math.exp(-Lt))/2}function Bt(Lt){return(Math.exp(Lt)+Math.exp(-Lt))/2}function Zn(Lt){return un(Lt)/Bt(Lt)}var wn=Re(0);function Fo(Lt){return j*(Bt(wn)/Bt(wn+se*Lt))}function KI(Lt){return j*(Bt(wn)*Zn(wn+se*Lt)-un(wn))/ye}function QI(Lt){return 1-Math.pow(1-Lt,1.5)}var XI=Date.now(),xg=(Re(1)-wn)/se,YI=h.duration?1e3*h.duration:1e3*xg*.8;function Rg(){var Lt=(Date.now()-XI)/YI,_c=QI(Lt)*xg;Lt<=1?(this._flyToFrame=V(Rg,this),this._move(this.unproject(p.add(g.subtract(p).multiplyBy(KI(_c)/Y)),D),this.getScaleZoom(j/Fo(_c),D),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),Rg.call(this),this},flyToBounds:function(s,l){var h=this._getBoundsCenterZoom(s,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(s){return s=Fe(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,Fe(s));return h.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var h=te(l.paddingTopLeft||l.padding||[0,0]),p=te(l.paddingBottomRight||l.padding||[0,0]),g=this.project(this.getCenter()),E=this.project(s),D=this.getPixelBounds(),j=we([D.min.add(h),D.max.subtract(p)]),W=j.getSize();if(!j.contains(E)){this._enforcingBounds=!0;var Y=E.subtract(j.getCenter()),se=j.extend(E).getSize().subtract(W);g.x+=Y.x<0?-se.x:se.x,g.y+=Y.y<0?-se.y:se.y,this.panTo(this.unproject(g),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=l.divideBy(2).round(),g=h.divideBy(2).round(),E=p.subtract(g);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),h=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,s):navigator.geolocation.getCurrentPosition(l,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,h=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,h=s.coords.longitude,p=new F(l,h),g=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var D=this.getBoundsZoom(g);this.setView(p,E.maxZoom?Math.min(D,E.maxZoom):D)}var j={latlng:p,bounds:g,timestamp:s.timestamp};for(var W in s.coords)typeof s.coords[W]=="number"&&(j[W]=s.coords[W]);this.fire("locationfound",j)}},addHandler:function(s,l){if(!l)return this;var h=this[s]=new l(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),tt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)tt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=De("div",h,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new Ae(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,h){s=Fe(s),h=te(h||[0,0]);var p=this.getZoom()||0,g=this.getMinZoom(),E=this.getMaxZoom(),D=s.getNorthWest(),j=s.getSouthEast(),W=this.getSize().subtract(h),Y=we(this.project(j,p),this.project(D,p)).getSize(),se=de.any3d?this.options.zoomSnap:1,ye=W.x/Y.x,Re=W.y/Y.y,un=l?Math.max(ye,Re):Math.min(ye,Re);return p=this.getScaleZoom(un,p),se&&(p=Math.round(p/(se/100))*(se/100),p=l?Math.ceil(p/se)*se:Math.floor(p/se)*se),Math.max(g,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var h=this._getTopLeftPoint(s,l);return new me(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(s)/h.scale(l)},getScaleZoom:function(s,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var p=h.zoom(s*h.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ne(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(te(s),l)},layerPointToLatLng:function(s){var l=te(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ne(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ne(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Fe(s))},distance:function(s,l){return this.options.crs.distance(ne(s),ne(l))},containerPointToLayerPoint:function(s){return te(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return te(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(te(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ne(s)))},mouseEventToContainerPoint:function(s){return Po(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Ka(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ge(l,"scroll",this._onScroll,this),this._containerId=d(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&de.any3d,Pe(s,"leaflet-container"+(de.touch?" leaflet-touch":"")+(de.retina?" leaflet-retina":"")+(de.ielt9?" leaflet-oldie":"")+(de.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Er(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ee(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Pe(s.markerPane,"leaflet-zoom-hide"),Pe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,h){Ee(this._mapPane,new Z(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var g=this._zoom!==l;this._moveStart(g,h)._move(s,l)._moveEnd(g),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,h,p){l===void 0&&(l=this._zoom);var g=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((g||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Ee(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var l=s?Ye:ge;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),de.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var h=[],p,g=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,D=!1;E;){if(p=this._targets[d(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){D=!0;break}if(p&&p.listens(l,!0)&&(g&&!ol(E,s)||(h.push(p),g))||E===this._container)break;E=E.parentNode}return!h.length&&!D&&!g&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var h=s.type;h==="mousedown"&&$i(l),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,h){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var g=this._findEventTargets(s,l);if(h){for(var E=[],D=0;D<h.length;D++)h[D].listens(l,!0)&&E.push(h[D]);g=E.concat(g)}if(g.length){l==="contextmenu"&&pt(s);var j=g[0],W={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Y=j.getLatLng&&(!j._radius||j._radius<=10);W.containerPoint=Y?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(s),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=Y?j.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(D=0;D<g.length;D++)if(g[D].fire(l,W,!0),W.originalEvent._stopped||g[D].options.bubblingMouseEvents===!1&&H(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return jn(this._mapPane)||new Z(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var h=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var h=this.getSize()._divideBy(2);return this.project(s,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return we([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,h){if(!h)return s;var p=this.project(s,l),g=this.getSize().divideBy(2),E=new me(p.subtract(g),p.add(g)),D=this._getBoundsOffset(E,h,l);return Math.abs(D.x)<=1&&Math.abs(D.y)<=1?s:this.unproject(p.add(D),l)},_limitOffset:function(s,l){if(!l)return s;var h=this.getPixelBounds(),p=new me(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,h){var p=we(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),g=p.min.subtract(s.min),E=p.max.subtract(s.max),D=this._rebound(g.x,-E.x),j=this._rebound(g.y,-E.y);return new Z(D,j)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),h=this.getMaxZoom(),p=de.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var h=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var s=this._proxy=De("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var h=Ps,p=this._proxy.style[h];Ti(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){tt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Ti(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),g=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(g)?!1:(V(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,Pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ao(s,l){return new be(s,l)}var vn=Ze.extend({options:{position:"topright"},initialize:function(s){N(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Pe(l,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(tt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ln=function(s){return new vn(s)};be.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",h=this._controlContainer=De("div",l+"control-container",this._container);function p(g,E){var D=l+g+" "+l+E;s[g+E]=De("div",D,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)tt(this._controlCorners[s]);tt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ll=vn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,l,h){N(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return vn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(d(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=De("div",s),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Cr(l),Ir(l);var p=this._section=De("section",s+"-list");h&&(this._map.on("click",this.collapse,this),ge(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=De("a",s+"-toggle",l);g.href="#",g.title="Layers",g.setAttribute("role","button"),ge(g,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){pt(E),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=De("div",s+"-base",p),this._separator=De("div",s+"-separator",p),this._overlaysList=De("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&d(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(a(function(p,g){return this.options.sortFunction(p.layer,g.layer,p.name,g.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;xs(this._baseLayersList),xs(this._overlaysList),this._layerControlInputs=[];var s,l,h,p,g=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,g+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&g>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(d(s.target)),h=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(s,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var l=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+d(this),h),this._layerControlInputs.push(p),p.layerId=d(s.layer),ge(p,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(g);var D=s.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,h,p=[],g=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],h=this._getLayer(l.layerId).layer,l.checked?p.push(h):l.checked||g.push(h);for(E=0;E<g.length;E++)this._map.hasLayer(g[E])&&this._map.removeLayer(g[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,h,p=this._map.getZoom(),g=s.length-1;g>=0;g--)l=s[g],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ge(s,"click",pt),this.expand();var l=this;setTimeout(function(){Ye(s,"click",pt),l._preventClick=!1})}}),Od=function(s,l,h){return new ll(s,l,h)},Ki=vn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",h=De("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,h,p,g){var E=De("a",h,p);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),Cr(E),ge(E,"click",Rn),ge(E,"click",g,this),ge(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";ht(this._zoomInButton,l),ht(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Pe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Pe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});be.mergeOptions({zoomControl:!0}),be.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ki,this.addControl(this.zoomControl))});var tc=function(s){return new Ki(s)},xo=vn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",h=De("div",l),p=this.options;return this._addScales(p,l+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,h){s.metric&&(this._mScale=De("div",l,h)),s.imperial&&(this._iScale=De("div",l,h))},_update:function(){var s=this._map,l=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/s)},_updateImperial:function(s){var l=s*3.2808399,h,p,g;l>5280?(h=l/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(g=this._getRoundNum(l),this._updateScale(this._iScale,g+" ft",g/l))},_updateScale:function(s,l,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),h=s/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),Ro=function(s){return new xo(s)},nc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',kr=vn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(de.inlineSvg?nc+" ":"")+"Leaflet</a>"},initialize:function(s){N(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=De("div","leaflet-control-attribution"),Cr(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});be.mergeOptions({attributionControl:!0}),be.addInitHook(function(){this.options.attributionControl&&new kr().addTo(this)});var Md=function(s){return new kr(s)};vn.Layers=ll,vn.Zoom=Ki,vn.Scale=xo,vn.Attribution=kr,ln.layers=Od,ln.zoom=tc,ln.scale=Ro,ln.attribution=Md;var Ln=Ze.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ln.addTo=function(s,l){return s.addHandler(l,this),this};var Rs={Events:ze},ul=de.touch?"touchstart mousedown":"mousedown",ui=Mt.extend({options:{clickTolerance:3},initialize:function(s,l,h,p){N(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=h},enable:function(){this._enabled||(ge(this._dragStartTarget,ul,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ui._dragging===this&&this.finishDrag(!0),Ye(this._dragStartTarget,ul,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Qa(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){ui._dragging===this&&this.finishDrag();return}if(!(ui._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(ui._dragging=this,this._preventOutline&&$i(this._element),Ja(),ai(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,h=nl(this._element);this._startPoint=new Z(l.clientX,l.clientY),this._startPos=jn(this._element),this._parentScale=ko(h);var p=s.type==="mousedown";ge(document,p?"mousemove":"touchmove",this._onMove,this),ge(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Z(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,pt(s),this._moved||(this.fire("dragstart"),this._moved=!0,Pe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Ee(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){ht(document.body,"leaflet-dragging"),this._lastTarget&&(ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ye(document,"mousemove touchmove",this._onMove,this),Ye(document,"mouseup touchend touchcancel",this._onUp,this),el(),li();var l=this._moved&&this._moving;this._moving=!1,ui._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Lo(s,l,h){var p,g=[1,4,2,8],E,D,j,W,Y,se,ye,Re;for(E=0,se=s.length;E<se;E++)s[E]._code=Si(s[E],l);for(j=0;j<4;j++){for(ye=g[j],p=[],E=0,se=s.length,D=se-1;E<se;D=E++)W=s[E],Y=s[D],W._code&ye?Y._code&ye||(Re=Ft(Y,W,ye,l,h),Re._code=Si(Re,l),p.push(Re)):(Y._code&ye&&(Re=Ft(Y,W,ye,l,h),Re._code=Si(Re,l),p.push(Re)),p.push(W));s=p}return s}function bo(s,l){var h,p,g,E,D,j,W,Y,se;if(!s||s.length===0)throw new Error("latlngs not passed");c(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ye=ne([0,0]),Re=Fe(s),un=Re.getNorthWest().distanceTo(Re.getSouthWest())*Re.getNorthEast().distanceTo(Re.getNorthWest());un<1700&&(ye=No(s));var Bt=s.length,Zn=[];for(h=0;h<Bt;h++){var wn=ne(s[h]);Zn.push(l.project(ne([wn.lat-ye.lat,wn.lng-ye.lng])))}for(j=W=Y=0,h=0,p=Bt-1;h<Bt;p=h++)g=Zn[h],E=Zn[p],D=g.y*E.x-E.y*g.x,W+=(g.x+E.x)*D,Y+=(g.y+E.y)*D,j+=D*3;j===0?se=Zn[0]:se=[W/j,Y/j];var Fo=l.unproject(te(se));return ne([Fo.lat+ye.lat,Fo.lng+ye.lng])}function No(s){for(var l=0,h=0,p=0,g=0;g<s.length;g++){var E=ne(s[g]);l+=E.lat,h+=E.lng,p++}return ne([l/p,h/p])}var Oo={__proto__:null,clipPolygon:Lo,polygonCenter:bo,centroid:No};function cl(s,l){if(!l||!s.length)return s.slice();var h=l*l;return s=rc(s,h),s=ic(s,h),s}function hl(s,l,h){return Math.sqrt(Gn(s,l,h,!0))}function Qi(s,l,h){return Gn(s,l,h)}function ic(s,l){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,g=new p(h);g[0]=g[h-1]=1,Mo(s,g,l,0,h-1);var E,D=[];for(E=0;E<h;E++)g[E]&&D.push(s[E]);return D}function Mo(s,l,h,p,g){var E=0,D,j,W;for(j=p+1;j<=g-1;j++)W=Gn(s[j],s[p],s[g],!0),W>E&&(D=j,E=W);E>h&&(l[D]=1,Mo(s,l,h,p,D),Mo(s,l,h,D,g))}function rc(s,l){for(var h=[s[0]],p=1,g=0,E=s.length;p<E;p++)sc(s[p],s[g])>l&&(h.push(s[p]),g=p);return g<E-1&&h.push(s[E-1]),h}var dl;function Ls(s,l,h,p,g){var E=p?dl:Si(s,h),D=Si(l,h),j,W,Y;for(dl=D;;){if(!(E|D))return[s,l];if(E&D)return!1;j=E||D,W=Ft(s,l,j,h,g),Y=Si(W,h),j===E?(s=W,E=Y):(l=W,D=Y)}}function Ft(s,l,h,p,g){var E=l.x-s.x,D=l.y-s.y,j=p.min,W=p.max,Y,se;return h&8?(Y=s.x+E*(W.y-s.y)/D,se=W.y):h&4?(Y=s.x+E*(j.y-s.y)/D,se=j.y):h&2?(Y=W.x,se=s.y+D*(W.x-s.x)/E):h&1&&(Y=j.x,se=s.y+D*(j.x-s.x)/E),new Z(Y,se,g)}function Si(s,l){var h=0;return s.x<l.min.x?h|=1:s.x>l.max.x&&(h|=2),s.y<l.min.y?h|=4:s.y>l.max.y&&(h|=8),h}function sc(s,l){var h=l.x-s.x,p=l.y-s.y;return h*h+p*p}function Gn(s,l,h,p){var g=l.x,E=l.y,D=h.x-g,j=h.y-E,W=D*D+j*j,Y;return W>0&&(Y=((s.x-g)*D+(s.y-E)*j)/W,Y>1?(g=h.x,E=h.y):Y>0&&(g+=D*Y,E+=j*Y)),D=s.x-g,j=s.y-E,p?D*D+j*j:new Z(g,E)}function c(s){return!b(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function m(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),c(s)}function v(s,l){var h,p,g,E,D,j,W,Y;if(!s||s.length===0)throw new Error("latlngs not passed");c(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=ne([0,0]),ye=Fe(s),Re=ye.getNorthWest().distanceTo(ye.getSouthWest())*ye.getNorthEast().distanceTo(ye.getNorthWest());Re<1700&&(se=No(s));var un=s.length,Bt=[];for(h=0;h<un;h++){var Zn=ne(s[h]);Bt.push(l.project(ne([Zn.lat-se.lat,Zn.lng-se.lng])))}for(h=0,p=0;h<un-1;h++)p+=Bt[h].distanceTo(Bt[h+1])/2;if(p===0)Y=Bt[0];else for(h=0,E=0;h<un-1;h++)if(D=Bt[h],j=Bt[h+1],g=D.distanceTo(j),E+=g,E>p){W=(E-p)/g,Y=[j.x-W*(j.x-D.x),j.y-W*(j.y-D.y)];break}var wn=l.unproject(te(Y));return ne([wn.lat+se.lat,wn.lng+se.lng])}var I={__proto__:null,simplify:cl,pointToSegmentDistance:hl,closestPointOnSegment:Qi,clipSegment:Ls,_getEdgeIntersection:Ft,_getBitCode:Si,_sqClosestPointOnSegment:Gn,isFlat:c,_flat:m,polylineCenter:v},B={project:function(s){return new Z(s.lng,s.lat)},unproject:function(s){return new F(s.y,s.x)},bounds:new me([-180,-90],[180,90])},q={R:6378137,R_MINOR:6356752314245179e-9,bounds:new me([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,h=this.R,p=s.lat*l,g=this.R_MINOR/h,E=Math.sqrt(1-g*g),D=E*Math.sin(p),j=Math.tan(Math.PI/4-p/2)/Math.pow((1-D)/(1+D),E/2);return p=-h*Math.log(Math.max(j,1e-10)),new Z(s.lng*l*h,p)},unproject:function(s){for(var l=180/Math.PI,h=this.R,p=this.R_MINOR/h,g=Math.sqrt(1-p*p),E=Math.exp(-s.y/h),D=Math.PI/2-2*Math.atan(E),j=0,W=.1,Y;j<15&&Math.abs(W)>1e-7;j++)Y=g*Math.sin(D),Y=Math.pow((1-Y)/(1+Y),g/2),W=Math.PI/2-2*Math.atan(E*Y)-D,D+=W;return new F(D*l,s.x*l/h)}},ie={__proto__:null,LonLat:B,Mercator:q,SphericalMercator:nt},Ke=r({},xe,{code:"EPSG:3395",projection:q,transformation:function(){var s=.5/(Math.PI*q.R);return Oe(s,.5,-s,.5)}()}),Rt=r({},xe,{code:"EPSG:4326",projection:B,transformation:Oe(1/180,1,-1/180,.5)}),je=r({},ue,{projection:B,transformation:Oe(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var h=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});ue.Earth=xe,ue.EPSG3395=Ke,ue.EPSG3857=Me,ue.EPSG900913=Ce,ue.EPSG4326=Rt,ue.Simple=je;var Je=Mt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});be.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=d(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=d(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},_addLayers:function(s){s=s?b(s)?s:[s]:[];for(var l=0,h=s.length;l<h;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=d(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var g=this._zoomBoundLayers[p].options;s=g.minZoom===void 0?s:Math.min(s,g.minZoom),l=g.maxZoom===void 0?l:Math.max(l,g.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var mt=Je.extend({initialize:function(s,l){N(this,l),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),Pr=function(s,l){return new mt(s,l)},Ct=mt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),mt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),mt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ae;for(var l in this._layers){var h=this._layers[l];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),Do=function(s,l){return new Ct(s,l)},Ii=Ze.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){N(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var h=this.options,p=h[l+"Size"];typeof p=="number"&&(p=[p,p]);var g=te(p),E=te(l==="shadow"&&h.shadowAnchor||h.iconAnchor||g&&g.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(h.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),g&&(s.style.width=g.x+"px",s.style.height=g.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return de.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function RI(s){return new Ii(s)}var fl=Ii.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof fl.imagePath!="string"&&(fl.imagePath=this._detectIconPath()),(this.options.imagePath||fl.imagePath)+Ii.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(h,p,g){var E=p.exec(h);return E&&E[g]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=De("div","leaflet-default-icon-path",document.body),l=Er(s,"background-image")||Er(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),cg=Ln.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new ui(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Pe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,h=l._map,p=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,E=jn(l._icon),D=h.getPixelBounds(),j=h.getPixelOrigin(),W=we(D.min._subtract(j).add(g),D.max._subtract(j).subtract(g));if(!W.contains(E)){var Y=te((Math.max(W.max.x,E.x)-W.max.x)/(D.max.x-W.max.x)-(Math.min(W.min.x,E.x)-W.min.x)/(D.min.x-W.min.x),(Math.max(W.max.y,E.y)-W.max.y)/(D.max.y-W.max.y)-(Math.min(W.min.y,E.y)-W.min.y)/(D.min.y-W.min.y)).multiplyBy(p);h.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),Ee(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=V(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,h=l._shadow,p=jn(l._icon),g=l._map.layerPointToLatLng(p);h&&Ee(h,p),l._latlng=g,s.latlng=g,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),oc=Je.extend({options:{icon:new fl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){N(this,l),this._latlng=ne(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ne(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Pe(h,l),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ge(h,"focus",this._panOnFocus,this);var g=s.icon.createShadow(this._shadow),E=!1;g!==this._shadow&&(this._removeShadow(),E=!0),g&&(Pe(g,l),g.alt=""),this._shadow=g,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ye(this._icon,"focus",this._panOnFocus,this),tt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&tt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Ee(this._icon,s),this._shadow&&Ee(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),cg)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new cg(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Tt(this._icon,s),this._shadow&&Tt(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,h=l.iconSize?te(l.iconSize):te(0,0),p=l.iconAnchor?te(l.iconAnchor):te(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function LI(s,l){return new oc(s,l)}var Ar=Je.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return N(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ac=Ar.extend({options:{fill:!0,radius:10},initialize:function(s,l){N(this,l),this._latlng=ne(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ne(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Ar.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,h=this._clickTolerance(),p=[s+h,l+h];this._pxBounds=new me(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function bI(s,l){return new ac(s,l)}var Dd=ac.extend({initialize:function(s,l,h){if(typeof l=="number"&&(l=r({},h,{radius:l})),N(this,l),this._latlng=ne(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ae(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Ar.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===xe.distance){var g=Math.PI/180,E=this._mRadius/xe.R/g,D=h.project([l+E,s]),j=h.project([l-E,s]),W=D.add(j).divideBy(2),Y=h.unproject(W).lat,se=Math.acos((Math.cos(E*g)-Math.sin(l*g)*Math.sin(Y*g))/(Math.cos(l*g)*Math.cos(Y*g)))/g;(isNaN(se)||se===0)&&(se=E/Math.cos(Math.PI/180*l)),this._point=W.subtract(h.getPixelOrigin()),this._radius=isNaN(se)?0:W.x-h.project([Y,s-se]).x,this._radiusY=W.y-D.y}else{var ye=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(ye).x}this._updateBounds()}});function NI(s,l,h){return new Dd(s,l,h)}var Xi=Ar.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){N(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,h=null,p=Gn,g,E,D=0,j=this._parts.length;D<j;D++)for(var W=this._parts[D],Y=1,se=W.length;Y<se;Y++){g=W[Y-1],E=W[Y];var ye=p(s,g,E,!0);ye<l&&(l=ye,h=p(s,g,E))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return v(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ne(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ae,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return c(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],h=c(s),p=0,g=s.length;p<g;p++)h?(l[p]=ne(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new me;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Z(s,s);this._rawPxBounds&&(this._pxBounds=new me([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,h){var p=s[0]instanceof F,g=s.length,E,D;if(p){for(D=[],E=0;E<g;E++)D[E]=this._map.latLngToLayerPoint(s[E]),h.extend(D[E]);l.push(D)}else for(E=0;E<g;E++)this._projectLatlngs(s[E],l,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,p,g,E,D,j,W;for(h=0,g=0,E=this._rings.length;h<E;h++)for(W=this._rings[h],p=0,D=W.length;p<D-1;p++)j=Ls(W[p],W[p+1],s,p,!0),j&&(l[g]=l[g]||[],l[g].push(j[0]),(j[1]!==W[p+1]||p===D-2)&&(l[g].push(j[1]),g++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=cl(s[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var h,p,g,E,D,j,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,E=this._parts.length;h<E;h++)for(j=this._parts[h],p=0,D=j.length,g=D-1;p<D;g=p++)if(!(!l&&p===0)&&hl(s,j[g],j[p])<=W)return!0;return!1}});function OI(s,l){return new Xi(s,l)}Xi._flat=m;var Vo=Xi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Xi.prototype._convertLatLngs.call(this,s),h=l.length;return h>=2&&l[0]instanceof F&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(s){Xi.prototype._setLatLngs.call(this,s),c(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return c(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,h=new Z(l,l);if(s=new me(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,g=this._rings.length,E;p<g;p++)E=Lo(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,h,p,g,E,D,j,W,Y;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,W=this._parts.length;E<W;E++)for(h=this._parts[E],D=0,Y=h.length,j=Y-1;D<Y;j=D++)p=h[D],g=h[j],p.y>s.y!=g.y>s.y&&s.x<(g.x-p.x)*(s.y-p.y)/(g.y-p.y)+p.x&&(l=!l);return l||Xi.prototype._containsPoint.call(this,s,!0)}});function MI(s,l){return new Vo(s,l)}var Yi=Ct.extend({initialize:function(s,l){N(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=b(s)?s:s.features,h,p,g;if(l){for(h=0,p=l.length;h<p;h++)g=l[h],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var D=lc(s,E);return D?(D.feature=hc(s),D.defaultOptions=D.options,this.resetStyle(D),E.onEachFeature&&E.onEachFeature(s,D),this.addLayer(D)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function lc(s,l){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,g=[],E=l&&l.pointToLayer,D=l&&l.coordsToLatLng||Vd,j,W,Y,se;if(!p&&!h)return null;switch(h.type){case"Point":return j=D(p),hg(E,s,j,l);case"MultiPoint":for(Y=0,se=p.length;Y<se;Y++)j=D(p[Y]),g.push(hg(E,s,j,l));return new Ct(g);case"LineString":case"MultiLineString":return W=uc(p,h.type==="LineString"?0:1,D),new Xi(W,l);case"Polygon":case"MultiPolygon":return W=uc(p,h.type==="Polygon"?1:2,D),new Vo(W,l);case"GeometryCollection":for(Y=0,se=h.geometries.length;Y<se;Y++){var ye=lc({geometry:h.geometries[Y],type:"Feature",properties:s.properties},l);ye&&g.push(ye)}return new Ct(g);case"FeatureCollection":for(Y=0,se=h.features.length;Y<se;Y++){var Re=lc(h.features[Y],l);Re&&g.push(Re)}return new Ct(g);default:throw new Error("Invalid GeoJSON object.")}}function hg(s,l,h,p){return s?s(l,h):new oc(h,p&&p.markersInheritOptions&&p)}function Vd(s){return new F(s[1],s[0],s[2])}function uc(s,l,h){for(var p=[],g=0,E=s.length,D;g<E;g++)D=l?uc(s[g],l-1,h):(h||Vd)(s[g]),p.push(D);return p}function zd(s,l){return s=ne(s),s.alt!==void 0?[w(s.lng,l),w(s.lat,l),w(s.alt,l)]:[w(s.lng,l),w(s.lat,l)]}function cc(s,l,h,p){for(var g=[],E=0,D=s.length;E<D;E++)g.push(l?cc(s[E],c(s[E])?0:l-1,h,p):zd(s[E],p));return!l&&h&&g.length>0&&g.push(g[0].slice()),g}function zo(s,l){return s.feature?r({},s.feature,{geometry:l}):hc(l)}function hc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Ud={toGeoJSON:function(s){return zo(this,{type:"Point",coordinates:zd(this.getLatLng(),s)})}};oc.include(Ud),Dd.include(Ud),ac.include(Ud),Xi.include({toGeoJSON:function(s){var l=!c(this._latlngs),h=cc(this._latlngs,l?1:0,!1,s);return zo(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),Vo.include({toGeoJSON:function(s){var l=!c(this._latlngs),h=l&&!c(this._latlngs[0]),p=cc(this._latlngs,h?2:l?1:0,!0,s);return l||(p=[p]),zo(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),mt.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(s).geometry.coordinates)}),zo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var h=l==="GeometryCollection",p=[];return this.eachLayer(function(g){if(g.toGeoJSON){var E=g.toGeoJSON(s);if(h)p.push(E.geometry);else{var D=hc(E);D.type==="FeatureCollection"?p.push.apply(p,D.features):p.push(D)}}}),h?zo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function dg(s,l){return new Yi(s,l)}var DI=dg,dc=Je.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,h){this._url=s,this._bounds=Fe(l),N(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){tt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Gi(this._image),this},bringToBack:function(){return this._map&&Tr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Fe(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:De("img");if(Pe(l,"leaflet-image-layer"),this._zoomAnimated&&Pe(l,"leaflet-zoom-animated"),this.options.className&&Pe(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Ti(this._image,h,l)},_reset:function(){var s=this._image,l=new me(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();Ee(s,l.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){Tt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),VI=function(s,l,h){return new dc(s,l,h)},fg=dc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:De("video");if(Pe(l,"leaflet-image-layer"),this._zoomAnimated&&Pe(l,"leaflet-zoom-animated"),this.options.className&&Pe(l,this.options.className),l.onselectstart=y,l.onmousemove=y,l.onloadeddata=a(this.fire,this,"load"),s){for(var h=l.getElementsByTagName("source"),p=[],g=0;g<h.length;g++)p.push(h[g].src);this._url=h.length>0?p:[l.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var D=De("source");D.src=this._url[E],l.appendChild(D)}}});function zI(s,l,h){return new fg(s,l,h)}var pg=dc.extend({_initImage:function(){var s=this._image=this._url;Pe(s,"leaflet-image-layer"),this._zoomAnimated&&Pe(s,"leaflet-zoom-animated"),this.options.className&&Pe(s,this.options.className),s.onselectstart=y,s.onmousemove=y}});function UI(s,l,h){return new pg(s,l,h)}var Ci=Je.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof F||b(s))?(this._latlng=ne(s),N(this,l)):(N(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Tt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Tt(this._container,1),this.bringToFront(),this.options.interactive&&(Pe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Tt(this._container,0),this._removeTimeout=setTimeout(a(tt,void 0,this._container),200)):tt(this._container),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ne(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Gi(this._container),this},bringToBack:function(){return this._map&&Tr(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof Ct){l=null;var h=this._source._layers;for(var p in h)if(h[p]._map){l=h[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=te(this.options.offset),h=this._getAnchor();this._zoomAnimated?Ee(this._container,s.add(h)):l=l.add(s).add(h);var p=this._containerBottom=-l.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});be.include({_initOverlay:function(s,l,h,p){var g=l;return g instanceof s||(g=new s(p).setContent(l)),h&&g.setLatLng(h),g}}),Je.include({_initOverlay:function(s,l,h,p){var g=h;return g instanceof s?(N(g,p),g._source=this):(g=l&&!p?l:new s(p,this),g.setContent(h)),g}});var fc=Ci.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Ci.prototype.openOn.call(this,s)},onAdd:function(s){Ci.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ar||this._source.on("preclick",qn))},onRemove:function(s){Ci.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ar||this._source.off("preclick",qn))},getEvents:function(){var s=Ci.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=De("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=De("div",s+"-content-wrapper",l);if(this._contentNode=De("div",s+"-content",h),Cr(l),Ir(this._contentNode),ge(l,"contextmenu",qn),this._tipContainer=De("div",s+"-tip-container",l),this._tip=De("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=De("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ge(p,"click",function(g){pt(g),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,g=this.options.maxHeight,E="leaflet-popup-scrolled";g&&p>g?(l.height=g+"px",Pe(s,E)):ht(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();Ee(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Er(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,p=this._containerWidth,g=new Z(this._containerLeft,-h-this._containerBottom);g._add(jn(this._container));var E=s.layerPointToContainerPoint(g),D=te(this.options.autoPanPadding),j=te(this.options.autoPanPaddingTopLeft||D),W=te(this.options.autoPanPaddingBottomRight||D),Y=s.getSize(),se=0,ye=0;E.x+p+W.x>Y.x&&(se=E.x+p-Y.x+W.x),E.x-se-j.x<0&&(se=E.x-j.x),E.y+h+W.y>Y.y&&(ye=E.y+h-Y.y+W.y),E.y-ye-j.y<0&&(ye=E.y-j.y),(se||ye)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([se,ye]))}},_getAnchor:function(){return te(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),FI=function(s,l){return new fc(s,l)};be.mergeOptions({closePopupOnClick:!0}),be.include({openPopup:function(s,l,h){return this._initOverlay(fc,s,l,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Je.include({bindPopup:function(s,l){return this._popup=this._initOverlay(fc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Ct||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Rn(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Ar)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var pc=Ci.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Ci.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Ci.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Ci.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=De("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,h,p=this._map,g=this._container,E=p.latLngToContainerPoint(p.getCenter()),D=p.layerPointToContainerPoint(s),j=this.options.direction,W=g.offsetWidth,Y=g.offsetHeight,se=te(this.options.offset),ye=this._getAnchor();j==="top"?(l=W/2,h=Y):j==="bottom"?(l=W/2,h=0):j==="center"?(l=W/2,h=Y/2):j==="right"?(l=0,h=Y/2):j==="left"?(l=W,h=Y/2):D.x<E.x?(j="right",l=0,h=Y/2):(j="left",l=W+(se.x+ye.x)*2,h=Y/2),s=s.subtract(te(l,h,!0)).add(se).add(ye),ht(g,"leaflet-tooltip-right"),ht(g,"leaflet-tooltip-left"),ht(g,"leaflet-tooltip-top"),ht(g,"leaflet-tooltip-bottom"),Pe(g,"leaflet-tooltip-"+j),Ee(g,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Tt(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return te(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),BI=function(s,l){return new pc(s,l)};be.include({openTooltip:function(s,l,h){return this._initOverlay(pc,s,l,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Je.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(pc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Ct||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(ge(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ge(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var mg=Ii.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(xs(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=te(h.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function jI(s){return new mg(s)}Ii.Default=fl;var pl=Je.extend({options:{tileSize:256,opacity:1,updateWhenIdle:de.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){N(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),tt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Gi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Tr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Z?s:new Z(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,h=-s(-1/0,1/0),p=0,g=l.length,E;p<g;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(h=s(h,+E));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!de.ielt9){Tt(this._container,this.options.opacity);var s=+new Date,l=!1,h=!1;for(var p in this._tiles){var g=this._tiles[p];if(!(!g.current||!g.loaded)){var E=Math.min(1,(s-g.loaded)/200);Tt(g.el,E),E<1?l=!0:(g.active?h=!0:this._onOpaqueTile(g),g.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(z(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=De("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=l-Math.abs(s-h),this._onUpdateLevel(h)):(tt(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],g=this._map;return p||(p=this._levels[s]={},p.el=De("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=g.project(g.unproject(g.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,g.getCenter(),g.getZoom()),y(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var s,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)tt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,h,p){var g=Math.floor(s/2),E=Math.floor(l/2),D=h-1,j=new Z(+g,+E);j.z=+D;var W=this._tileCoordsToKey(j),Y=this._tiles[W];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),D>p?this._retainParent(g,E,D,p):!1)},_retainChildren:function(s,l,h,p){for(var g=2*s;g<2*s+2;g++)for(var E=2*l;E<2*l+2;E++){var D=new Z(g,E);D.z=h+1;var j=this._tileCoordsToKey(D),W=this._tiles[j];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);h+1<p&&this._retainChildren(g,E,h+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,h,p){var g=Math.round(l);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var E=this.options.updateWhenZooming&&g!==this._tileZoom;(!p||E)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,l)},_setZoomTransform:function(s,l,h){var p=this._map.getZoomScale(h,s.zoom),g=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,h)).round();de.any3d?Ti(s.el,g,p):Ee(s.el,g)},_resetGrid:function(){var s=this._map,l=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(h,this._tileZoom),g=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new me(g.subtract(E),g.add(E))},_update:function(s){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),g=this._pxBoundsToTileRange(p),E=g.getCenter(),D=[],j=this.options.keepBuffer,W=new me(g.getBottomLeft().subtract([j,-j]),g.getTopRight().add([j,-j]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var se=this._tiles[Y].coords;(se.z!==this._tileZoom||!W.contains(new Z(se.x,se.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var ye=g.min.y;ye<=g.max.y;ye++)for(var Re=g.min.x;Re<=g.max.x;Re++){var un=new Z(Re,ye);if(un.z=this._tileZoom,!!this._isValidTile(un)){var Bt=this._tiles[this._tileCoordsToKey(un)];Bt?Bt.current=!0:D.push(un)}}if(D.sort(function(wn,Fo){return wn.distanceTo(E)-Fo.distanceTo(E)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Zn=document.createDocumentFragment();for(Re=0;Re<D.length;Re++)this._addTile(D[Re],Zn);this._level.el.appendChild(Zn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!l.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Fe(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,h=this.getTileSize(),p=s.scaleBy(h),g=p.add(h),E=l.unproject(p,s.z),D=l.unproject(g,s.z);return[E,D]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),h=new Ae(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),h=new Z(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(s){var l=this._tiles[s];l&&(tt(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Pe(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=y,s.onmousemove=y,de.ielt9&&this.options.opacity<1&&Tt(s,this.options.opacity)},_addTile:function(s,l){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),g=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(g),this.createTile.length<2&&V(a(this._tileReady,this,s,null,g)),Ee(g,h),this._tiles[p]={el:g,coords:s,current:!0},l.appendChild(g),this.fire("tileloadstart",{tile:g,coords:s})},_tileReady:function(s,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Tt(h.el,0),z(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(Pe(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),de.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Z(this._wrapX?_(s.x,this._wrapX):s.x,this._wrapY?_(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new me(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function HI(s){return new pl(s)}var Uo=pl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=N(this,l),l.detectRetina&&de.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var h=document.createElement("img");return ge(h,"load",a(this._tileOnLoad,this,l,h)),ge(h,"error",a(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var l={r:de.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=h),l["-y"]=h}return k(this._url,r(l,this.options))},_tileOnLoad:function(s,l){de.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,h){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(h,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=y,l.onerror=y,!l.complete)){l.src=$;var h=this._tiles[s].coords;tt(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",$),pl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,h){if(!(!this._map||h&&h.getAttribute("src")===$))return pl.prototype._tileReady.call(this,s,l,h)}});function _g(s,l){return new Uo(s,l)}var gg=Uo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var h=r({},this.defaultWmsParams);for(var p in l)p in this.options||(h[p]=l[p]);l=N(this,l);var g=l.detectRetina&&de.retina?2:1,E=this.getTileSize();h.width=E.x*g,h.height=E.y*g,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Uo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),h=this._crs,p=we(h.project(l[0]),h.project(l[1])),g=p.min,E=p.max,D=(this._wmsVersion>=1.3&&this._crs===Rt?[g.y,g.x,E.y,E.x]:[g.x,g.y,E.x,E.y]).join(","),j=Uo.prototype.getTileUrl.call(this,s);return j+U(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function WI(s,l){return new gg(s,l)}Uo.WMS=gg,_g.wms=WI;var Ji=Je.extend({options:{padding:.1},initialize:function(s){N(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var h=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,l),E=p.multiplyBy(-h).add(g).subtract(this._map._getNewPixelOrigin(s,l));de.any3d?Ti(this._container,E,h):Ee(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new me(h,h.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),yg=Ji.extend({options:{tolerance:0},getEvents:function(){var s=Ji.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ji.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ge(s,"mousemove",this._onMouseMove,this),ge(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ge(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,tt(this._container),Ye(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ji.prototype._update.call(this);var s=this._bounds,l=this._container,h=s.getSize(),p=de.retina?2:1;Ee(l,s.min),l.width=p*h.x,l.height=p*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",de.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Ji.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,h=l.next,p=l.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),h=[],p,g;for(g=0;g<l.length;g++){if(p=Number(l[g]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new me,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var h,p,g,E,D=s._parts,j=D.length,W=this._ctx;if(j){for(W.beginPath(),h=0;h<j;h++){for(p=0,g=D[h].length;p<g;p++)E=D[h][p],W[p?"lineTo":"moveTo"](E.x,E.y);l&&W.closePath()}this._fillStroke(W,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),g=(Math.max(Math.round(s._radiusY),1)||p)/p;g!==1&&(h.save(),h.scale(1,g)),h.beginPath(),h.arc(l.x,l.y/g,p,0,Math.PI*2,!1),g!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,l){var h=l.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),h,p,g=this._drawFirst;g;g=g.next)h=g.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(ht(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var h,p,g=this._drawFirst;g;g=g.next)h=g.layer,h.options.interactive&&h._containsPoint(l)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Pe(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,h){this._map._fireDOMEvent(l,h||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function vg(s){return de.canvas?new yg(s):null}var ml=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),qI={_initContainer:function(){this._container=De("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ji.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=ml("shape");Pe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=ml("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;tt(l),s.removeInteractiveTarget(l),delete this._layers[d(s)]},_updateStyle:function(s){var l=s._stroke,h=s._fill,p=s.options,g=s._container;g.stroked=!!p.stroke,g.filled=!!p.fill,p.stroke?(l||(l=s._stroke=ml("stroke")),g.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=b(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(g.removeChild(l),s._stroke=null),p.fill?(h||(h=s._fill=ml("fill")),g.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(g.removeChild(h),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Gi(s._container)},_bringToBack:function(s){Tr(s._container)}},mc=de.vml?ml:it,_l=Ji.extend({_initContainer:function(){this._container=mc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=mc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){tt(this._container),Ye(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ji.prototype._update.call(this);var s=this._bounds,l=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),Ee(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=mc("path");s.options.className&&Pe(l,s.options.className),s.options.interactive&&Pe(l,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){tt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,h=s.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,ke(s._parts,l))},_updateCircle:function(s){var l=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,g="a"+h+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-h)+","+l.y+g+h*2+",0 "+g+-h*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Gi(s._path)},_bringToBack:function(s){Tr(s._path)}});de.vml&&_l.include(qI);function wg(s){return de.svg||de.vml?new _l(s):null}be.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&vg(s)||wg(s)}});var Eg=Vo.extend({initialize:function(s,l){Vo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Fe(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function GI(s,l){return new Eg(s,l)}_l.create=mc,_l.pointsToPath=ke,Yi.geometryToLayer=lc,Yi.coordsToLatLng=Vd,Yi.coordsToLatLngs=uc,Yi.latLngToCoords=zd,Yi.latLngsToCoords=cc,Yi.getFeature=zo,Yi.asFeature=hc,be.mergeOptions({boxZoom:!0});var Tg=Ln.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ge(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ye(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){tt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ai(),Ja(),this._startPoint=this._map.mouseEventToContainerPoint(s),ge(document,{contextmenu:Rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=De("div","leaflet-zoom-box",this._container),Pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new me(this._point,this._startPoint),h=l.getSize();Ee(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(tt(this._box),ht(this._container,"leaflet-crosshair")),li(),el(),Ye(document,{contextmenu:Rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});be.addInitHook("addHandler","boxZoom",Tg),be.mergeOptions({doubleClickZoom:!0});var Sg=Ln.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,h=l.getZoom(),p=l.options.zoomDelta,g=s.originalEvent.shiftKey?h-p:h+p;l.options.doubleClickZoom==="center"?l.setZoom(g):l.setZoomAround(s.containerPoint,g)}});be.addInitHook("addHandler","doubleClickZoom",Sg),be.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ig=Ln.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new ui(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ht(this._map._container,"leaflet-grab"),ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Fe(this._map.options.maxBounds);this._offsetLimit=we(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,g=(p-l+h)%s+l-h,E=(p+l+h)%s-l-h,D=Math.abs(g+h)<Math.abs(E+h)?g:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(s){var l=this._map,h=l.options,p=!h.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,D=h.easeLinearity,j=g.multiplyBy(D/E),W=j.distanceTo([0,0]),Y=Math.min(h.inertiaMaxSpeed,W),se=j.multiplyBy(Y/W),ye=Y/(h.inertiaDeceleration*D),Re=se.multiplyBy(-ye/2).round();!Re.x&&!Re.y?l.fire("moveend"):(Re=l._limitOffset(Re,l.options.maxBounds),V(function(){l.panBy(Re,{duration:ye,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});be.addInitHook("addHandler","dragging",Ig),be.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Cg=Ln.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ge(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ye(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,h=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},h=this.keyCodes,p,g;for(p=0,g=h.left.length;p<g;p++)l[h.left[p]]=[-1*s,0];for(p=0,g=h.right.length;p<g;p++)l[h.right[p]]=[s,0];for(p=0,g=h.down.length;p<g;p++)l[h.down[p]]=[0,s];for(p=0,g=h.up.length;p<g;p++)l[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},h=this.keyCodes,p,g;for(p=0,g=h.zoomIn.length;p<g;p++)l[h.zoomIn[p]]=s;for(p=0,g=h.zoomOut.length;p<g;p++)l[h.zoomOut[p]]=-s},_addHooks:function(){ge(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ye(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,h=this._map,p;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=te(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(te(p),h.options.maxBounds)),h.options.worldCopyJump){var g=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(g)}else h.panBy(p)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Rn(s)}}});be.addInitHook("addHandler","keyboard",Cg),be.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var kg=Ln.extend({addHooks:function(){ge(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ye(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Ju(s),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),Rn(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=h?Math.ceil(g/h)*h:g,D=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,D&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+D):s.setZoomAround(this._lastMousePos,l+D))}});be.addInitHook("addHandler","scrollWheelZoom",kg);var ZI=600;be.mergeOptions({tapHold:de.touchNative&&de.safari&&de.mobile,tapTolerance:15});var Pg=Ln.extend({addHooks:function(){ge(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ye(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Z(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ge(document,"touchend",pt),ge(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),ZI),ge(document,"touchend touchcancel contextmenu",this._cancel,this),ge(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ye(document,"touchend",pt),Ye(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ye(document,"touchend touchcancel contextmenu",this._cancel,this),Ye(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Z(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});be.addInitHook("addHandler","tapHold",Pg),be.mergeOptions({touchZoom:de.touch,bounceAtZoomLimits:!0});var Ag=Ln.extend({addHooks:function(){Pe(this._map._container,"leaflet-touch-zoom"),ge(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),Ye(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ge(document,"touchmove",this._onTouchMove,this),ge(document,"touchend touchcancel",this._onTouchEnd,this),pt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),g=h.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(g,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&g<1||this._zoom>l.getMaxZoom()&&g>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var E=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(g===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var D=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(D,this,!0),pt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Ye(document,"touchmove",this._onTouchMove,this),Ye(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});be.addInitHook("addHandler","touchZoom",Ag),be.BoxZoom=Tg,be.DoubleClickZoom=Sg,be.Drag=Ig,be.Keyboard=Cg,be.ScrollWheelZoom=kg,be.TapHold=Pg,be.TouchZoom=Ag,n.Bounds=me,n.Browser=de,n.CRS=ue,n.Canvas=yg,n.Circle=Dd,n.CircleMarker=ac,n.Class=Ze,n.Control=vn,n.DivIcon=mg,n.DivOverlay=Ci,n.DomEvent=ec,n.DomUtil=Xu,n.Draggable=ui,n.Evented=Mt,n.FeatureGroup=Ct,n.GeoJSON=Yi,n.GridLayer=pl,n.Handler=Ln,n.Icon=Ii,n.ImageOverlay=dc,n.LatLng=F,n.LatLngBounds=Ae,n.Layer=Je,n.LayerGroup=mt,n.LineUtil=I,n.Map=be,n.Marker=oc,n.Mixin=Rs,n.Path=Ar,n.Point=Z,n.PolyUtil=Oo,n.Polygon=Vo,n.Polyline=Xi,n.Popup=fc,n.PosAnimation=al,n.Projection=ie,n.Rectangle=Eg,n.Renderer=Ji,n.SVG=_l,n.SVGOverlay=pg,n.TileLayer=Uo,n.Tooltip=pc,n.Transformation=Ge,n.Util=M,n.VideoOverlay=fg,n.bind=a,n.bounds=we,n.canvas=vg,n.circle=NI,n.circleMarker=bI,n.control=ln,n.divIcon=jI,n.extend=r,n.featureGroup=Do,n.geoJSON=dg,n.geoJson=DI,n.gridLayer=HI,n.icon=RI,n.imageOverlay=VI,n.latLng=ne,n.latLngBounds=Fe,n.layerGroup=Pr,n.map=Ao,n.marker=LI,n.point=te,n.polygon=MI,n.polyline=OI,n.popup=FI,n.rectangle=GI,n.setOptions=N,n.stamp=d,n.svg=wg,n.svgOverlay=UI,n.tileLayer=_g,n.tooltip=BI,n.transformation=Oe,n.version=i,n.videoOverlay=zI;var $I=window.L;n.noConflict=function(){return window.L=$I,this},window.L=n})})(Ep,Ep.exports);var ni=Ep.exports;const Ds=pw(ni);function OE(t){return t.split(" ").filter(Boolean)}function ME(t,e){OE(e).forEach(n=>{ni.DomUtil.addClass(t,n)})}function DE(t,e){OE(e).forEach(n=>{ni.DomUtil.removeClass(t,n)})}function AP(t,e,n){t!=null&&n!==e&&(e!=null&&e.length>0&&DE(t,e),n!=null&&n.length>0&&ME(t,n))}function ds(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Da(t,e){return e==null?function(i,r){const o=G.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=G.useRef();o.current||(o.current=t(i,r));const a=G.useRef(i),{instance:u}=o.current;return G.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function Km(t,e){G.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Qm(t){return function(n){const i=Ma(),r=t(Lu(n,i),i);return Wm(i.map,n.attribution),pd(r.current,n.eventHandlers),Km(r.current,i),r}}function VE(t,e){const n=G.useRef();G.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function zE(t){return function(n){const i=Ma(),r=t(Lu(n,i),i);return pd(r.current,n.eventHandlers),Km(r.current,i),VE(r.current,n),r}}function xP(t){function e(r,o){return ds(t(r),o)}const n=Da(e),i=bE(n);return $m(i)}function UE(t,e){const n=Da(t,e),i=Qm(n);return Zm(i)}function Xm(t,e){const n=Da(t),i=NE(n,e);return LE(i)}function Ym(t,e){const n=Da(t,e),i=zE(n);return Zm(i)}function FE(t,e){const n=Da(t,e),i=Qm(n);return $m(i)}function BE(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function RP(t,e,n){e.bounds instanceof ni.LatLngBounds&&e.bounds!==n.bounds&&t.setBounds(e.bounds),e.opacity!=null&&e.opacity!==n.opacity&&t.setOpacity(e.opacity),e.zIndex!=null&&e.zIndex!==n.zIndex&&t.setZIndex(e.zIndex)}const LP=Object.freeze(Object.defineProperty({__proto__:null,CONTEXT_VERSION:xE,LeafletContext:qm,LeafletProvider:Gm,addClassName:ME,createContainerComponent:Zm,createControlComponent:xP,createControlHook:bE,createDivOverlayComponent:LE,createDivOverlayHook:NE,createElementHook:Da,createElementObject:ds,createLayerComponent:UE,createLayerHook:Qm,createLeafComponent:$m,createLeafletContext:RE,createOverlayComponent:Xm,createPathComponent:Ym,createPathHook:zE,createTileLayerComponent:FE,extendContext:fd,removeClassName:DE,updateCircle:AE,updateClassName:AP,updateGridLayer:BE,updateMediaOverlay:RP,useAttribution:Wm,useEventHandlers:pd,useLayerLifecycle:Km,useLeafletContext:Ma,usePathOptions:VE,withPane:Lu},Symbol.toStringTag,{value:"Module"}));function Jm(){return Ma().map}function jE(t){const e=Jm();return G.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const bP=Ym(function({center:e,children:n,...i},r){const o=new ni.CircleMarker(e,i);return ds(o,fd(r,{overlayContainer:o}))},AE);function Tp(){return Tp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Tp.apply(this,arguments)}function NP({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:d,zoom:f,..._},y){const[w]=G.useState({className:r,id:o,style:u}),[T,A]=G.useState(null);G.useImperativeHandle(y,()=>(T==null?void 0:T.map)??null,[T]);const N=G.useCallback(P=>{if(P!==null&&T===null){const k=new ni.Map(P,_);n!=null&&f!=null?k.setView(n,f):t!=null&&k.fitBounds(t,e),d!=null&&k.whenReady(d),A(RE(k))}},[]);G.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const U=T?ar.createElement(Gm,{value:T},i):a??null;return ar.createElement("div",Tp({},w,{ref:N}),U)}const OP=G.forwardRef(NP),bs=UE(function({position:e,...n},i){const r=new ni.Marker(e,n);return ds(r,fd(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),MP=Ym(function({positions:e,...n},i){const r=new ni.Polyline(e,n);return ds(r,fd(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),Ns=Xm(function(e,n){const i=new ni.Popup(e,n.overlayContainer);return ds(i,n)},function(e,n,{position:i},r){G.useEffect(function(){const{instance:a}=e;function u(f){f.popup===a&&(a.update(),r(!0))}function d(f){f.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:d}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var _;n.map.off({popupopen:u,popupclose:d}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),DP=FE(function({url:e,...n},i){const r=new ni.TileLayer(e,Lu(n,i));return ds(r,i)},function(e,n,i){BE(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),VP=Xm(function(e,n){const i=new ni.Tooltip(e,n.overlayContainer);return ds(i,n)},function(e,n,{position:i},r){G.useEffect(function(){const a=n.overlayContainer;if(a==null)return;const{instance:u}=e,d=_=>{_.tooltip===u&&(i!=null&&u.setLatLng(i),u.update(),r(!0))},f=_=>{_.tooltip===u&&r(!1)};return a.on({tooltipopen:d,tooltipclose:f}),a.bindTooltip(u),function(){a.off({tooltipopen:d,tooltipclose:f}),a._map!=null&&a.unbindTooltip()}},[e,n,r,i])});var HE={};const zP=Qh(LP);var By={exports:{}};(function(t,e){(function(n,i){i(e)})(ns,function(n){var i=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(o){L.Util.setOptions(this,o),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var a=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,a?this._withAnimation:this._noAnimation),this._markerCluster=a?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(o){if(o instanceof L.LayerGroup)return this.addLayers([o]);if(!o.getLatLng)return this._nonPointGroup.addLayer(o),this.fire("layeradd",{layer:o}),this;if(!this._map)return this._needsClustering.push(o),this.fire("layeradd",{layer:o}),this;if(this.hasLayer(o))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(o,this._maxZoom),this.fire("layeradd",{layer:o}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var a=o,u=this._zoom;if(o.__parent)for(;a.__parent._zoom>=u;)a=a.__parent;return this._currentShownBounds.contains(a.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(o,a):this._animationAddLayerNonAnimated(o,a)),this},removeLayer:function(o){return o instanceof L.LayerGroup?this.removeLayers([o]):o.getLatLng?this._map?o.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(o)),this._removeLayer(o,!0),this.fire("layerremove",{layer:o}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),o.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(o)&&(this._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,o)&&this.hasLayer(o)&&this._needsRemoving.push({layer:o,latlng:o._latlng}),this.fire("layerremove",{layer:o}),this):(this._nonPointGroup.removeLayer(o),this.fire("layerremove",{layer:o}),this)},addLayers:function(o,a){if(!L.Util.isArray(o))return this.addLayer(o);var u=this._featureGroup,d=this._nonPointGroup,f=this.options.chunkedLoading,_=this.options.chunkInterval,y=this.options.chunkProgress,w=o.length,T=0,A=!0,N;if(this._map){var U=new Date().getTime(),P=L.bind(function(){var b=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();T<w;T++){if(f&&T%200===0){var H=new Date().getTime()-b;if(H>_)break}if(N=o[T],N instanceof L.LayerGroup){A&&(o=o.slice(),A=!1),this._extractNonGroupLayers(N,o),w=o.length;continue}if(!N.getLatLng){d.addLayer(N),a||this.fire("layeradd",{layer:N});continue}if(!this.hasLayer(N)&&(this._addLayer(N,this._maxZoom),a||this.fire("layeradd",{layer:N}),N.__parent&&N.__parent.getChildCount()===2)){var $=N.__parent.getAllChildMarkers(),Q=$[0]===N?$[1]:$[0];u.removeLayer(Q)}}y&&y(T,w,new Date().getTime()-U),T===w?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(P,this.options.chunkDelay)},this);P()}else for(var k=this._needsClustering;T<w;T++){if(N=o[T],N instanceof L.LayerGroup){A&&(o=o.slice(),A=!1),this._extractNonGroupLayers(N,o),w=o.length;continue}if(!N.getLatLng){d.addLayer(N);continue}this.hasLayer(N)||k.push(N)}return this},removeLayers:function(o){var a,u,d=o.length,f=this._featureGroup,_=this._nonPointGroup,y=!0;if(!this._map){for(a=0;a<d;a++){if(u=o[a],u instanceof L.LayerGroup){y&&(o=o.slice(),y=!1),this._extractNonGroupLayers(u,o),d=o.length;continue}this._arraySplice(this._needsClustering,u),_.removeLayer(u),this.hasLayer(u)&&this._needsRemoving.push({layer:u,latlng:u._latlng}),this.fire("layerremove",{layer:u})}return this}if(this._unspiderfy){this._unspiderfy();var w=o.slice(),T=d;for(a=0;a<T;a++){if(u=w[a],u instanceof L.LayerGroup){this._extractNonGroupLayers(u,w),T=w.length;continue}this._unspiderfyLayer(u)}}for(a=0;a<d;a++){if(u=o[a],u instanceof L.LayerGroup){y&&(o=o.slice(),y=!1),this._extractNonGroupLayers(u,o),d=o.length;continue}if(!u.__parent){_.removeLayer(u),this.fire("layerremove",{layer:u});continue}this._removeLayer(u,!0,!0),this.fire("layerremove",{layer:u}),f.hasLayer(u)&&(f.removeLayer(u),u.clusterShow&&u.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(o){o.off(this._childMarkerEventHandlers,this),delete o.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var o=new L.LatLngBounds;this._topClusterLevel&&o.extend(this._topClusterLevel._bounds);for(var a=this._needsClustering.length-1;a>=0;a--)o.extend(this._needsClustering[a].getLatLng());return o.extend(this._nonPointGroup.getBounds()),o},eachLayer:function(o,a){var u=this._needsClustering.slice(),d=this._needsRemoving,f,_,y;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(u),_=u.length-1;_>=0;_--){for(f=!0,y=d.length-1;y>=0;y--)if(d[y].layer===u[_]){f=!1;break}f&&o.call(a,u[_])}this._nonPointGroup.eachLayer(o,a)},getLayers:function(){var o=[];return this.eachLayer(function(a){o.push(a)}),o},getLayer:function(o){var a=null;return o=parseInt(o,10),this.eachLayer(function(u){L.stamp(u)===o&&(a=u)}),a},hasLayer:function(o){if(!o)return!1;var a,u=this._needsClustering;for(a=u.length-1;a>=0;a--)if(u[a]===o)return!0;for(u=this._needsRemoving,a=u.length-1;a>=0;a--)if(u[a].layer===o)return!1;return!!(o.__parent&&o.__parent._group===this)||this._nonPointGroup.hasLayer(o)},zoomToShowLayer:function(o,a){var u=this._map;typeof a!="function"&&(a=function(){});var d=function(){(u.hasLayer(o)||u.hasLayer(o.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",d,this),this.off("animationend",d,this),u.hasLayer(o)?a():o.__parent._icon&&(this.once("spiderfied",a,this),o.__parent.spiderfy()))};o._icon&&this._map.getBounds().contains(o.getLatLng())?a():o.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",d,this),this._map.panTo(o.getLatLng())):(this._map.on("moveend",d,this),this.on("animationend",d,this),o.__parent.zoomToBounds())},onAdd:function(o){this._map=o;var a,u,d;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(o),this._nonPointGroup.addTo(o),this._gridClusters||this._generateInitialClusters(),this._maxLat=o.options.crs.projection.MAX_LATITUDE,a=0,u=this._needsRemoving.length;a<u;a++)d=this._needsRemoving[a],d.newlatlng=d.layer._latlng,d.layer._latlng=d.latlng;for(a=0,u=this._needsRemoving.length;a<u;a++)d=this._needsRemoving[a],this._removeLayer(d.layer,!0),d.layer._latlng=d.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),u=this._needsClustering,this._needsClustering=[],this.addLayers(u,!0)},onRemove:function(o){o.off("zoomend",this._zoomEnd,this),o.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(o){for(var a=o;a&&!a._icon;)a=a.__parent;return a||null},_arraySplice:function(o,a){for(var u=o.length-1;u>=0;u--)if(o[u]===a)return o.splice(u,1),!0},_removeFromGridUnclustered:function(o,a){for(var u=this._map,d=this._gridUnclustered,f=Math.floor(this._map.getMinZoom());a>=f&&d[a].removeObject(o,u.project(o.getLatLng(),a));a--);},_childMarkerDragStart:function(o){o.target.__dragStart=o.target._latlng},_childMarkerMoved:function(o){if(!this._ignoreMove&&!o.target.__dragStart){var a=o.target._popup&&o.target._popup.isOpen();this._moveChild(o.target,o.oldLatLng,o.latlng),a&&o.target.openPopup()}},_moveChild:function(o,a,u){o._latlng=a,this.removeLayer(o),o._latlng=u,this.addLayer(o)},_childMarkerDragEnd:function(o){var a=o.target.__dragStart;delete o.target.__dragStart,a&&this._moveChild(o.target,a,o.target._latlng)},_removeLayer:function(o,a,u){var d=this._gridClusters,f=this._gridUnclustered,_=this._featureGroup,y=this._map,w=Math.floor(this._map.getMinZoom());a&&this._removeFromGridUnclustered(o,this._maxZoom);var T=o.__parent,A=T._markers,N;for(this._arraySplice(A,o);T&&(T._childCount--,T._boundsNeedUpdate=!0,!(T._zoom<w));)a&&T._childCount<=1?(N=T._markers[0]===o?T._markers[1]:T._markers[0],d[T._zoom].removeObject(T,y.project(T._cLatLng,T._zoom)),f[T._zoom].addObject(N,y.project(N.getLatLng(),T._zoom)),this._arraySplice(T.__parent._childClusters,T),T.__parent._markers.push(N),N.__parent=T.__parent,T._icon&&(_.removeLayer(T),u||_.addLayer(N))):T._iconNeedsUpdate=!0,T=T.__parent;delete o.__parent},_isOrIsParent:function(o,a){for(;a;){if(o===a)return!0;a=a.parentNode}return!1},fire:function(o,a,u){if(a&&a.layer instanceof L.MarkerCluster){if(a.originalEvent&&this._isOrIsParent(a.layer._icon,a.originalEvent.relatedTarget))return;o="cluster"+o}L.FeatureGroup.prototype.fire.call(this,o,a,u)},listens:function(o,a){return L.FeatureGroup.prototype.listens.call(this,o,a)||L.FeatureGroup.prototype.listens.call(this,"cluster"+o,a)},_defaultIconCreateFunction:function(o){var a=o.getChildCount(),u=" marker-cluster-";return a<10?u+="small":a<100?u+="medium":u+="large",new L.DivIcon({html:"<div><span>"+a+"</span></div>",className:"marker-cluster"+u,iconSize:new L.Point(40,40)})},_bindEvents:function(){var o=this._map,a=this.options.spiderfyOnMaxZoom,u=this.options.showCoverageOnHover,d=this.options.zoomToBoundsOnClick,f=this.options.spiderfyOnEveryZoom;(a||d||f)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),u&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),o.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(o){var a=o.layer,u=a;if(!(o.type==="clusterkeypress"&&o.originalEvent&&o.originalEvent.keyCode!==13)){for(;u._childClusters.length===1;)u=u._childClusters[0];u._zoom===this._maxZoom&&u._childCount===a._childCount&&this.options.spiderfyOnMaxZoom?a.spiderfy():this.options.zoomToBoundsOnClick&&a.zoomToBounds(),this.options.spiderfyOnEveryZoom&&a.spiderfy(),o.originalEvent&&o.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(o){var a=this._map;this._inZoomAnimation||(this._shownPolygon&&a.removeLayer(this._shownPolygon),o.layer.getChildCount()>2&&o.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(o.layer.getConvexHull(),this.options.polygonOptions),a.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var o=this.options.spiderfyOnMaxZoom,a=this.options.showCoverageOnHover,u=this.options.zoomToBoundsOnClick,d=this.options.spiderfyOnEveryZoom,f=this._map;(o||u||d)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),a&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),f.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var o=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,o),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),o),this._currentShownBounds=o}},_generateInitialClusters:function(){var o=Math.ceil(this._map.getMaxZoom()),a=Math.floor(this._map.getMinZoom()),u=this.options.maxClusterRadius,d=u;typeof u!="function"&&(d=function(){return u}),this.options.disableClusteringAtZoom!==null&&(o=this.options.disableClusteringAtZoom-1),this._maxZoom=o,this._gridClusters={},this._gridUnclustered={};for(var f=o;f>=a;f--)this._gridClusters[f]=new L.DistanceGrid(d(f)),this._gridUnclustered[f]=new L.DistanceGrid(d(f));this._topClusterLevel=new this._markerCluster(this,a-1)},_addLayer:function(o,a){var u=this._gridClusters,d=this._gridUnclustered,f=Math.floor(this._map.getMinZoom()),_,y;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(o),o.on(this._childMarkerEventHandlers,this);a>=f;a--){_=this._map.project(o.getLatLng(),a);var w=u[a].getNearObject(_);if(w){w._addChild(o),o.__parent=w;return}if(w=d[a].getNearObject(_),w){var T=w.__parent;T&&this._removeLayer(w,!1);var A=new this._markerCluster(this,a,w,o);u[a].addObject(A,this._map.project(A._cLatLng,a)),w.__parent=A,o.__parent=A;var N=A;for(y=a-1;y>T._zoom;y--)N=new this._markerCluster(this,y,N),u[y].addObject(N,this._map.project(w.getLatLng(),y));T._addChild(N),this._removeFromGridUnclustered(w,a);return}d[a].addObject(o,_)}this._topClusterLevel._addChild(o),o.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(o){o instanceof L.MarkerCluster&&o._iconNeedsUpdate&&o._updateIcon()})},_enqueue:function(o){this._queue.push(o),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var o=0;o<this._queue.length;o++)this._queue[o].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var o=Math.round(this._map._zoom);this._processQueue(),this._zoom<o&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,o)):this._zoom>o?(this._animationStart(),this._animationZoomOut(this._zoom,o)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(o){var a=this._maxLat;return a!==void 0&&(o.getNorth()>=a&&(o._northEast.lat=1/0),o.getSouth()<=-a&&(o._southWest.lat=-1/0)),o},_animationAddLayerNonAnimated:function(o,a){if(a===o)this._featureGroup.addLayer(o);else if(a._childCount===2){a._addToMap();var u=a.getAllChildMarkers();this._featureGroup.removeLayer(u[0]),this._featureGroup.removeLayer(u[1])}else a._updateIcon()},_extractNonGroupLayers:function(o,a){var u=o.getLayers(),d=0,f;for(a=a||[];d<u.length;d++){if(f=u[d],f instanceof L.LayerGroup){this._extractNonGroupLayers(f,a);continue}a.push(f)}return a},_overrideMarkerIcon:function(o){var a=o.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[o]}});return a}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(o,a){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),o),this._topClusterLevel._recursivelyAddChildrenToMap(null,a,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(o,a){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),o),this._topClusterLevel._recursivelyAddChildrenToMap(null,a,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(o,a){this._animationAddLayerNonAnimated(o,a)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(o,a){var u=this._getExpandedVisibleBounds(),d=this._featureGroup,f=Math.floor(this._map.getMinZoom()),_;this._ignoreMove=!0,this._topClusterLevel._recursively(u,o,f,function(y){var w=y._latlng,T=y._markers,A;for(u.contains(w)||(w=null),y._isSingleParent()&&o+1===a?(d.removeLayer(y),y._recursivelyAddChildrenToMap(null,a,u)):(y.clusterHide(),y._recursivelyAddChildrenToMap(w,a,u)),_=T.length-1;_>=0;_--)A=T[_],u.contains(A._latlng)||d.removeLayer(A)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(u,a),d.eachLayer(function(y){!(y instanceof L.MarkerCluster)&&y._icon&&y.clusterShow()}),this._topClusterLevel._recursively(u,o,a,function(y){y._recursivelyRestoreChildPositions(a)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(u,o,f,function(y){d.removeLayer(y),y.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(o,a){this._animationZoomOutSingle(this._topClusterLevel,o-1,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,a,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),o,this._getExpandedVisibleBounds())},_animationAddLayer:function(o,a){var u=this,d=this._featureGroup;d.addLayer(o),a!==o&&(a._childCount>2?(a._updateIcon(),this._forceLayout(),this._animationStart(),o._setPos(this._map.latLngToLayerPoint(a.getLatLng())),o.clusterHide(),this._enqueue(function(){d.removeLayer(o),o.clusterShow(),u._animationEnd()})):(this._forceLayout(),u._animationStart(),u._animationZoomOutSingle(a,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(o,a,u){var d=this._getExpandedVisibleBounds(),f=Math.floor(this._map.getMinZoom());o._recursivelyAnimateChildrenInAndAddSelfToMap(d,f,a+1,u);var _=this;this._forceLayout(),o._recursivelyBecomeVisible(d,u),this._enqueue(function(){if(o._childCount===1){var y=o._markers[0];this._ignoreMove=!0,y.setLatLng(y.getLatLng()),this._ignoreMove=!1,y.clusterShow&&y.clusterShow()}else o._recursively(d,u,f,function(w){w._recursivelyRemoveChildrenFromMap(d,f,a+1)});_._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(o){return new L.MarkerClusterGroup(o)};var r=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(o,a,u,d){L.Marker.prototype.initialize.call(this,u?u._cLatLng||u.getLatLng():new L.LatLng(0,0),{icon:this,pane:o.options.clusterPane}),this._group=o,this._zoom=a,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,u&&this._addChild(u),d&&this._addChild(d)},getAllChildMarkers:function(o,a){o=o||[];for(var u=this._childClusters.length-1;u>=0;u--)this._childClusters[u].getAllChildMarkers(o,a);for(var d=this._markers.length-1;d>=0;d--)a&&this._markers[d].__dragStart||o.push(this._markers[d]);return o},getChildCount:function(){return this._childCount},zoomToBounds:function(o){for(var a=this._childClusters.slice(),u=this._group._map,d=u.getBoundsZoom(this._bounds),f=this._zoom+1,_=u.getZoom(),y;a.length>0&&d>f;){f++;var w=[];for(y=0;y<a.length;y++)w=w.concat(a[y]._childClusters);a=w}d>f?this._group._map.setView(this._latlng,f):d<=_?this._group._map.setView(this._latlng,_+1):this._group._map.fitBounds(this._bounds,o)},getBounds:function(){var o=new L.LatLngBounds;return o.extend(this._bounds),o},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(o,a){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(o),o instanceof L.MarkerCluster?(a||(this._childClusters.push(o),o.__parent=this),this._childCount+=o._childCount):(a||this._markers.push(o),this._childCount++),this.__parent&&this.__parent._addChild(o,!0)},_setClusterCenter:function(o){this._cLatLng||(this._cLatLng=o._cLatLng||o._latlng)},_resetBounds:function(){var o=this._bounds;o._southWest&&(o._southWest.lat=1/0,o._southWest.lng=1/0),o._northEast&&(o._northEast.lat=-1/0,o._northEast.lng=-1/0)},_recalculateBounds:function(){var o=this._markers,a=this._childClusters,u=0,d=0,f=this._childCount,_,y,w,T;if(f!==0){for(this._resetBounds(),_=0;_<o.length;_++)w=o[_]._latlng,this._bounds.extend(w),u+=w.lat,d+=w.lng;for(_=0;_<a.length;_++)y=a[_],y._boundsNeedUpdate&&y._recalculateBounds(),this._bounds.extend(y._bounds),w=y._wLatLng,T=y._childCount,u+=w.lat*T,d+=w.lng*T;this._latlng=this._wLatLng=new L.LatLng(u/f,d/f),this._boundsNeedUpdate=!1}},_addToMap:function(o){o&&(this._backupLatlng=this._latlng,this.setLatLng(o)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(o,a,u){this._recursively(o,this._group._map.getMinZoom(),u-1,function(d){var f=d._markers,_,y;for(_=f.length-1;_>=0;_--)y=f[_],y._icon&&(y._setPos(a),y.clusterHide())},function(d){var f=d._childClusters,_,y;for(_=f.length-1;_>=0;_--)y=f[_],y._icon&&(y._setPos(a),y.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(o,a,u,d){this._recursively(o,d,a,function(f){f._recursivelyAnimateChildrenIn(o,f._group._map.latLngToLayerPoint(f.getLatLng()).round(),u),f._isSingleParent()&&u-1===d?(f.clusterShow(),f._recursivelyRemoveChildrenFromMap(o,a,u)):f.clusterHide(),f._addToMap()})},_recursivelyBecomeVisible:function(o,a){this._recursively(o,this._group._map.getMinZoom(),a,null,function(u){u.clusterShow()})},_recursivelyAddChildrenToMap:function(o,a,u){this._recursively(u,this._group._map.getMinZoom()-1,a,function(d){if(a!==d._zoom)for(var f=d._markers.length-1;f>=0;f--){var _=d._markers[f];u.contains(_._latlng)&&(o&&(_._backupLatlng=_.getLatLng(),_.setLatLng(o),_.clusterHide&&_.clusterHide()),d._group._featureGroup.addLayer(_))}},function(d){d._addToMap(o)})},_recursivelyRestoreChildPositions:function(o){for(var a=this._markers.length-1;a>=0;a--){var u=this._markers[a];u._backupLatlng&&(u.setLatLng(u._backupLatlng),delete u._backupLatlng)}if(o-1===this._zoom)for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._restorePosition();else for(var f=this._childClusters.length-1;f>=0;f--)this._childClusters[f]._recursivelyRestoreChildPositions(o)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(o,a,u,d){var f,_;this._recursively(o,a-1,u-1,function(y){for(_=y._markers.length-1;_>=0;_--)f=y._markers[_],(!d||!d.contains(f._latlng))&&(y._group._featureGroup.removeLayer(f),f.clusterShow&&f.clusterShow())},function(y){for(_=y._childClusters.length-1;_>=0;_--)f=y._childClusters[_],(!d||!d.contains(f._latlng))&&(y._group._featureGroup.removeLayer(f),f.clusterShow&&f.clusterShow())})},_recursively:function(o,a,u,d,f){var _=this._childClusters,y=this._zoom,w,T;if(a<=y&&(d&&d(this),f&&y===u&&f(this)),y<a||y<u)for(w=_.length-1;w>=0;w--)T=_[w],T._boundsNeedUpdate&&T._recalculateBounds(),o.intersects(T._bounds)&&T._recursively(o,a,u,d,f)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var o=this.options.opacity;return this.setOpacity(0),this.options.opacity=o,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(o){this._cellSize=o,this._sqCellSize=o*o,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(o,a){var u=this._getCoord(a.x),d=this._getCoord(a.y),f=this._grid,_=f[d]=f[d]||{},y=_[u]=_[u]||[],w=L.Util.stamp(o);this._objectPoint[w]=a,y.push(o)},updateObject:function(o,a){this.removeObject(o),this.addObject(o,a)},removeObject:function(o,a){var u=this._getCoord(a.x),d=this._getCoord(a.y),f=this._grid,_=f[d]=f[d]||{},y=_[u]=_[u]||[],w,T;for(delete this._objectPoint[L.Util.stamp(o)],w=0,T=y.length;w<T;w++)if(y[w]===o)return y.splice(w,1),T===1&&delete _[u],!0},eachObject:function(o,a){var u,d,f,_,y,w,T,A=this._grid;for(u in A){y=A[u];for(d in y)for(w=y[d],f=0,_=w.length;f<_;f++)T=o.call(a,w[f]),T&&(f--,_--)}},getNearObject:function(o){var a=this._getCoord(o.x),u=this._getCoord(o.y),d,f,_,y,w,T,A,N,U=this._objectPoint,P=this._sqCellSize,k=null;for(d=u-1;d<=u+1;d++)if(y=this._grid[d],y){for(f=a-1;f<=a+1;f++)if(w=y[f],w)for(_=0,T=w.length;_<T;_++)A=w[_],N=this._sqDist(U[L.Util.stamp(A)],o),(N<P||N<=P&&k===null)&&(P=N,k=A)}return k},_getCoord:function(o){var a=Math.floor(o/this._cellSize);return isFinite(a)?a:o},_sqDist:function(o,a){var u=a.x-o.x,d=a.y-o.y;return u*u+d*d}},function(){L.QuickHull={getDistant:function(o,a){var u=a[1].lat-a[0].lat,d=a[0].lng-a[1].lng;return d*(o.lat-a[0].lat)+u*(o.lng-a[0].lng)},findMostDistantPointFromBaseLine:function(o,a){var u=0,d=null,f=[],_,y,w;for(_=a.length-1;_>=0;_--){if(y=a[_],w=this.getDistant(y,o),w>0)f.push(y);else continue;w>u&&(u=w,d=y)}return{maxPoint:d,newPoints:f}},buildConvexHull:function(o,a){var u=[],d=this.findMostDistantPointFromBaseLine(o,a);return d.maxPoint?(u=u.concat(this.buildConvexHull([o[0],d.maxPoint],d.newPoints)),u=u.concat(this.buildConvexHull([d.maxPoint,o[1]],d.newPoints)),u):[o[0]]},getConvexHull:function(o){var a=!1,u=!1,d=!1,f=!1,_=null,y=null,w=null,T=null,A=null,N=null,U;for(U=o.length-1;U>=0;U--){var P=o[U];(a===!1||P.lat>a)&&(_=P,a=P.lat),(u===!1||P.lat<u)&&(y=P,u=P.lat),(d===!1||P.lng>d)&&(w=P,d=P.lng),(f===!1||P.lng<f)&&(T=P,f=P.lng)}u!==a?(N=y,A=_):(N=T,A=w);var k=[].concat(this.buildConvexHull([N,A],o),this.buildConvexHull([A,N],o));return k}}}(),L.MarkerCluster.include({getConvexHull:function(){var o=this.getAllChildMarkers(),a=[],u,d;for(d=o.length-1;d>=0;d--)u=o[d].getLatLng(),a.push(u);return L.QuickHull.getConvexHull(a)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var o=this.getAllChildMarkers(null,!0),a=this._group,u=a._map,d=u.latLngToLayerPoint(this._latlng),f;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?f=this._group.options.spiderfyShapePositions(o.length,d):o.length>=this._circleSpiralSwitchover?f=this._generatePointsSpiral(o.length,d):(d.y+=10,f=this._generatePointsCircle(o.length,d)),this._animationSpiderfy(o,f)}},unspiderfy:function(o){this._group._inZoomAnimation||(this._animationUnspiderfy(o),this._group._spiderfied=null)},_generatePointsCircle:function(o,a){var u=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+o),d=u/this._2PI,f=this._2PI/o,_=[],y,w;for(d=Math.max(d,35),_.length=o,y=0;y<o;y++)w=this._circleStartAngle+y*f,_[y]=new L.Point(a.x+d*Math.cos(w),a.y+d*Math.sin(w))._round();return _},_generatePointsSpiral:function(o,a){var u=this._group.options.spiderfyDistanceMultiplier,d=u*this._spiralLengthStart,f=u*this._spiralFootSeparation,_=u*this._spiralLengthFactor*this._2PI,y=0,w=[],T;for(w.length=o,T=o;T>=0;T--)T<o&&(w[T]=new L.Point(a.x+d*Math.cos(y),a.y+d*Math.sin(y))._round()),y+=f/d+T*5e-4,d+=_/y;return w},_noanimationUnspiderfy:function(){var o=this._group,a=o._map,u=o._featureGroup,d=this.getAllChildMarkers(null,!0),f,_;for(o._ignoreMove=!0,this.setOpacity(1),_=d.length-1;_>=0;_--)f=d[_],u.removeLayer(f),f._preSpiderfyLatlng&&(f.setLatLng(f._preSpiderfyLatlng),delete f._preSpiderfyLatlng),f.setZIndexOffset&&f.setZIndexOffset(0),f._spiderLeg&&(a.removeLayer(f._spiderLeg),delete f._spiderLeg);o.fire("unspiderfied",{cluster:this,markers:d}),o._ignoreMove=!1,o._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(o,a){var u=this._group,d=u._map,f=u._featureGroup,_=this._group.options.spiderLegPolylineOptions,y,w,T,A;for(u._ignoreMove=!0,y=0;y<o.length;y++)A=d.layerPointToLatLng(a[y]),w=o[y],T=new L.Polyline([this._latlng,A],_),d.addLayer(T),w._spiderLeg=T,w._preSpiderfyLatlng=w._latlng,w.setLatLng(A),w.setZIndexOffset&&w.setZIndexOffset(1e6),f.addLayer(w);this.setOpacity(.3),u._ignoreMove=!1,u.fire("spiderfied",{cluster:this,markers:o})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(o,a){var u=this,d=this._group,f=d._map,_=d._featureGroup,y=this._latlng,w=f.latLngToLayerPoint(y),T=L.Path.SVG,A=L.extend({},this._group.options.spiderLegPolylineOptions),N=A.opacity,U,P,k,b,H,$;for(N===void 0&&(N=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),T?(A.opacity=0,A.className=(A.className||"")+" leaflet-cluster-spider-leg"):A.opacity=N,d._ignoreMove=!0,U=0;U<o.length;U++)P=o[U],$=f.layerPointToLatLng(a[U]),k=new L.Polyline([y,$],A),f.addLayer(k),P._spiderLeg=k,T&&(b=k._path,H=b.getTotalLength()+.1,b.style.strokeDasharray=H,b.style.strokeDashoffset=H),P.setZIndexOffset&&P.setZIndexOffset(1e6),P.clusterHide&&P.clusterHide(),_.addLayer(P),P._setPos&&P._setPos(w);for(d._forceLayout(),d._animationStart(),U=o.length-1;U>=0;U--)$=f.layerPointToLatLng(a[U]),P=o[U],P._preSpiderfyLatlng=P._latlng,P.setLatLng($),P.clusterShow&&P.clusterShow(),T&&(k=P._spiderLeg,b=k._path,b.style.strokeDashoffset=0,k.setStyle({opacity:N}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:u,markers:o})},200)},_animationUnspiderfy:function(o){var a=this,u=this._group,d=u._map,f=u._featureGroup,_=o?d._latLngToNewLayerPoint(this._latlng,o.zoom,o.center):d.latLngToLayerPoint(this._latlng),y=this.getAllChildMarkers(null,!0),w=L.Path.SVG,T,A,N,U,P,k;for(u._ignoreMove=!0,u._animationStart(),this.setOpacity(1),A=y.length-1;A>=0;A--)T=y[A],T._preSpiderfyLatlng&&(T.closePopup(),T.setLatLng(T._preSpiderfyLatlng),delete T._preSpiderfyLatlng,k=!0,T._setPos&&(T._setPos(_),k=!1),T.clusterHide&&(T.clusterHide(),k=!1),k&&f.removeLayer(T),w&&(N=T._spiderLeg,U=N._path,P=U.getTotalLength()+.1,U.style.strokeDashoffset=P,N.setStyle({opacity:0})));u._ignoreMove=!1,setTimeout(function(){var b=0;for(A=y.length-1;A>=0;A--)T=y[A],T._spiderLeg&&b++;for(A=y.length-1;A>=0;A--)T=y[A],T._spiderLeg&&(T.clusterShow&&T.clusterShow(),T.setZIndexOffset&&T.setZIndexOffset(0),b>1&&f.removeLayer(T),d.removeLayer(T._spiderLeg),delete T._spiderLeg);u._animationEnd(),u.fire("unspiderfied",{cluster:a,markers:y})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(o){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(o))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(o){this._spiderfied&&this._spiderfied.unspiderfy(o)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(o){o._spiderLeg&&(this._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow(),o.setZIndexOffset&&o.setZIndexOffset(0),this._map.removeLayer(o._spiderLeg),delete o._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(o){return o?o instanceof L.MarkerClusterGroup?o=o._topClusterLevel.getAllChildMarkers():o instanceof L.LayerGroup?o=o._layers:o instanceof L.MarkerCluster?o=o.getAllChildMarkers():o instanceof L.Marker&&(o=[o]):o=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(o),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(o),this},_flagParentsIconsNeedUpdate:function(o){var a,u;for(a in o)for(u=o[a].__parent;u;)u._iconNeedsUpdate=!0,u=u.__parent},_refreshSingleMarkerModeMarkers:function(o){var a,u;for(a in o)u=o[a],this.hasLayer(u)&&u.setIcon(this._overrideMarkerIcon(u))}}),L.Marker.include({refreshIconOptions:function(o,a){var u=this.options.icon;return L.setOptions(u,o),this.setIcon(u),a&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),n.MarkerClusterGroup=i,n.MarkerCluster=r,Object.defineProperty(n,"__esModule",{value:!0})})})(By,By.exports);const UP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",FP=Object.freeze(Object.defineProperty({__proto__:null,default:UP},Symbol.toStringTag,{value:"Module"})),BP=Qh(FP),jP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",HP=Object.freeze(Object.defineProperty({__proto__:null,default:jP},Symbol.toStringTag,{value:"Module"})),WP=Qh(HP),qP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",GP=Object.freeze(Object.defineProperty({__proto__:null,default:qP},Symbol.toStringTag,{value:"Module"})),ZP=Qh(GP);var oa=ns&&ns.__assign||function(){return oa=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},oa.apply(this,arguments)},$P=ns&&ns.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n},KP=ns&&ns.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(HE,"__esModule",{value:!0});var Sp=zP,e_=KP(ni);delete e_.default.Icon.Default.prototype._getIconUrl;e_.default.Icon.Default.mergeOptions({iconRetinaUrl:BP.default,iconUrl:WP.default,shadowUrl:ZP.default});function QP(t){var e={},n={};t.children;var i=$P(t,["children"]);return Object.entries(i).forEach(function(r){var o,a,u=r[0],d=r[1];u.startsWith("on")?n=oa(oa({},n),(o={},o[u]=d,o)):e=oa(oa({},e),(a={},a[u]=d,a))}),{clusterProps:e,clusterEvents:n}}function XP(t,e){var n=QP(t),i=n.clusterProps,r=n.clusterEvents,o=new e_.default.MarkerClusterGroup(i);return Object.entries(r).forEach(function(a){var u=a[0],d=a[1],f="cluster".concat(u.substring(2).toLowerCase());o.on(f,d)}),(0,Sp.createElementObject)(o,(0,Sp.extendContext)(e,{layerContainer:o}))}var YP=function(t,e,n){},JP=(0,Sp.createPathComponent)(XP,YP),jo=HE.default=JP;const Vs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",zs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",Us="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";Ds.Icon.Default.mergeOptions({iconRetinaUrl:Vs,iconUrl:zs,shadowUrl:Us});function eA({onChange:t}){return jE({moveend:e=>{const n=e.target,i=n.getBounds(),r=n.getZoom();t({south:i.getSouth(),west:i.getWest(),north:i.getNorth(),east:i.getEast(),zoom:r})},load:e=>{const n=e.target,i=n.getBounds(),r=n.getZoom();t({south:i.getSouth(),west:i.getWest(),north:i.getNorth(),east:i.getEast(),zoom:r})}}),null}function tA({selectingStart:t,onStartSelected:e}){return jE({click:n=>{t&&e&&e(n.latlng.lat,n.latlng.lng)}}),null}function nA(t){return`https://en.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(t)}`}function iA({startLocation:t}){const e=Jm();return ar.useEffect(()=>{if(t)try{const n=e.getZoom(),i=Math.max(n,12);e.flyTo([t.lat,t.lon],i,{duration:.8})}catch{}},[t]),null}function rA({onMapReady:t}){const e=Jm();return ar.useEffect(()=>{t&&t(e)},[e,t]),null}function sA({onAddPlace:t,selectedIds:e,route:n,startLocation:i,selectingStart:r,onStartSelected:o,showFuelStations:a,showDumpPoints:u,showWaterPoints:d,showSmallTownsOnly:f,showCampsites:_,favorites:y=[],toggleFavorite:w,itinerary:T,onMapReady:A,visitedPlaces:N=[]}){const[U,P]=G.useState([]),[k,b]=G.useState([]),[H,$]=G.useState([]),[Q,R]=G.useState([]),[C,x]=G.useState([]),[O,V]=G.useState([]),z=G.useRef(null),M=G.useRef(null),Ze=G.useMemo(()=>[-25.2744,133.7751],[]),An=G.useMemo(()=>new Ds.Icon({iconRetinaUrl:Vs,iconUrl:zs,shadowUrl:Us,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:"green-marker"}),[]),ze=G.useMemo(()=>new Ds.Icon({iconRetinaUrl:Vs,iconUrl:zs,shadowUrl:Us,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:"purple-marker"}),[]),Mt=G.useMemo(()=>new Ds.Icon({iconRetinaUrl:Vs,iconUrl:zs,shadowUrl:Us,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:"orange-marker"}),[]),Z=G.useMemo(()=>new Ds.Icon({iconRetinaUrl:Vs,iconUrl:zs,shadowUrl:Us,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:"blue-marker"}),[]),_e=G.useMemo(()=>new Ds.Icon({iconRetinaUrl:Vs,iconUrl:zs,shadowUrl:Us,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:"cyan-marker"}),[]),te=G.useMemo(()=>new Ds.Icon({iconRetinaUrl:Vs,iconUrl:zs,shadowUrl:Us,iconSize:[30,49],iconAnchor:[15,49],popupAnchor:[1,-40],shadowSize:[41,41],className:"start-marker"}),[]),me=async(F,ne=!1)=>{var Ge;const ue=`(${F.south},${F.west},${F.north},${F.east})`,xe=[];if(F.zoom<4)return;F.zoom<6?xe.push(`node["place"="city"]["population"~"[0-9]{6,}"]${ue};`):F.zoom<8?(xe.push(`node["place"="city"]${ue};`),xe.push(`node["place"="town"]${ue};`),ne&&xe.push(`node["place"~"village|hamlet"]${ue};`)):(xe.push(`node["place"~"city|town|village"]${ue};`),ne&&xe.push(`node["place"~"hamlet|locality"]${ue};`),F.zoom>=12&&(xe.push(`node["tourism"="attraction"]${ue};`),xe.push(`way["tourism"="attraction"]${ue};`),xe.push(`relation["tourism"="attraction"]${ue};`)));const et=`[out:json][timeout:25];(
      ${xe.join(`
      `)}
    );out center;`;console.log("Fetching places with query:",et),(Ge=z.current)==null||Ge.abort();const nt=new AbortController;z.current=nt;try{const Oe=["https://overpass-api.de/api/interpreter","https://lz4.overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter"];let Me=null,Ce=null;for(const ke of Oe)try{const $e=await fetch(ke,{method:"POST",body:et,headers:{"Content-Type":"text/plain"},signal:nt.signal});if(!$e.ok)throw new Error(`Overpass error (${ke}): ${$e.status}`);Me=await $e.json(),Ce=null;break}catch($e){Ce=$e}if(!Me)throw Ce||new Error("Overpass: no response from endpoints");const it=[];for(const ke of Me.elements){const $e=ke.tags||{},ot=$e.name||$e["name:en"]||null;if(!ot)continue;let At,_n;if(ke.type==="node"?(At=ke.lat,_n=ke.lon):(ke.type==="way"||ke.type==="relation")&&ke.center&&(At=ke.center.lat,_n=ke.center.lon),At===void 0||_n===void 0)continue;let zn="locality";$e.tourism==="attraction"?zn="attraction":$e.place&&(zn=$e.place);const Ei=$e.population?parseInt($e.population,10):void 0;it.push({id:`${ke.type}/${ke.id}`,name:ot,type:zn,lat:At,lon:_n,population:Ei})}console.log(`Fetched ${it.length} places:`,it.slice(0,10)),P(it)}catch(Oe){if(Oe.name==="AbortError")return;console.error(Oe)}},we=async F=>{if(F.zoom<8){b([]),$([]);return}const ne=`(${F.south},${F.west},${F.north},${F.east})`,ue=`[out:json][timeout:25];
      (
        node["tourism"="camp_site"]${ne};
        node["tourism"="caravan_site"]${ne};
      );
      out body;`,xe=new AbortController;z.current&&z.current.abort(),z.current=xe;try{const et=["https://overpass-api.de/api/interpreter","https://lz4.overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter"];let nt=null;for(const Me of et)try{const Ce=await fetch(Me,{method:"POST",body:ue,headers:{"Content-Type":"text/plain"},signal:xe.signal});if(!Ce.ok)throw new Error(`Overpass error: ${Ce.status}`);nt=await Ce.json();break}catch(Ce){if(Ce.name==="AbortError")return;continue}if(!nt)return;const Ge=[],Oe=[];for(const Me of nt.elements){if(Me.type!=="node")continue;const{lat:Ce,lon:it,tags:ke}=Me;if(!Ce||!it||!ke)continue;const $e=ke.name||ke.alt_name||"Campsite",ot=ke.fee==="no",At={id:`node/${Me.id}`,name:$e,type:"attraction",lat:Ce,lon:it};ot?Ge.push(At):Oe.push(At)}b(Ge),$(Oe)}catch(et){if(et.name==="AbortError")return;console.error("Campsite fetch error:",et)}};G.useEffect(()=>{if(!a||!T||T.length===0){R([]);return}(async()=>{const ue=[],xe=new Set;for(const et of T){const nt=`[out:json][timeout:25];
          (
            node["amenity"="fuel"](around:10000,${et.lat},${et.lon});
          );
          out body;`;try{const Ge=["https://overpass-api.de/api/interpreter","https://lz4.overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter"];let Oe=null;for(const Me of Ge)try{const Ce=await fetch(Me,{method:"POST",body:nt,headers:{"Content-Type":"text/plain"}});if(!Ce.ok)continue;Oe=await Ce.json();break}catch{continue}if(!Oe)continue;for(const Me of Oe.elements){if(Me.type!=="node")continue;const{lat:Ce,lon:it,tags:ke,id:$e}=Me;if(!Ce||!it)continue;const ot=`fuel/${$e}`;if(xe.has(ot))continue;xe.add(ot);const At=(ke==null?void 0:ke.name)||(ke==null?void 0:ke.brand)||"Fuel Station";ue.push({id:ot,name:At,type:"attraction",lat:Ce,lon:it})}}catch(Ge){console.error("Fuel station fetch error:",Ge)}}R(ue)})()},[a,T]),G.useEffect(()=>{if(!u||!T||T.length===0){x([]);return}(async()=>{const ue=[],xe=new Set;for(const et of T){const nt=`[out:json][timeout:25];
          (
            node["amenity"="sanitary_dump_station"](around:10000,${et.lat},${et.lon});
          );
          out body;`;try{const Ge=["https://overpass-api.de/api/interpreter","https://lz4.overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter"];let Oe=null;for(const Me of Ge)try{const Ce=await fetch(Me,{method:"POST",body:nt,headers:{"Content-Type":"text/plain"}});if(!Ce.ok)continue;Oe=await Ce.json();break}catch{continue}if(!Oe)continue;for(const Me of Oe.elements){if(Me.type!=="node")continue;const{lat:Ce,lon:it,tags:ke,id:$e}=Me;if(!Ce||!it)continue;const ot=`dump/${$e}`;if(xe.has(ot))continue;xe.add(ot);const At=(ke==null?void 0:ke.name)||"RV Dump Point";ue.push({id:ot,name:At,type:"attraction",lat:Ce,lon:it})}}catch(Ge){console.error("Dump point fetch error:",Ge)}}x(ue)})()},[u,T]),G.useEffect(()=>{if(!d||!(T!=null&&T.length)){V([]);return}(async()=>{const ue=[],xe=new Set;for(const et of T){const nt=`[out:json][timeout:25];
          (
            node["amenity"="drinking_water"](around:10000,${et.lat},${et.lon});
            node["amenity"="water_point"](around:10000,${et.lat},${et.lon});
          );
          out body;`;try{const Ge=["https://overpass-api.de/api/interpreter","https://lz4.overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter"];let Oe=null;for(const Me of Ge)try{const Ce=await fetch(Me,{method:"POST",body:nt,headers:{"Content-Type":"text/plain"}});if(!Ce.ok)continue;Oe=await Ce.json();break}catch{continue}if(!Oe)continue;for(const Me of Oe.elements){if(Me.type!=="node")continue;const{lat:Ce,lon:it,tags:ke,id:$e}=Me;if(!Ce||!it)continue;const ot=`water/${$e}`;if(xe.has(ot))continue;xe.add(ot);const At=(ke==null?void 0:ke.name)||"Water Point";ue.push({id:ot,name:At,type:"attraction",lat:Ce,lon:it})}}catch(Ge){console.error("Water point fetch error:",Ge)}}V(ue)})()},[d,T]);const Ae=F=>{M.current&&window.clearTimeout(M.current),M.current=window.setTimeout(()=>{me(F,f),we(F)},1e3)},Fe=G.useMemo(()=>f?U.filter(F=>F.type==="attraction"?!0:F.population!==void 0&&!isNaN(F.population)?F.population>=500&&F.population<=1e4:F.type==="village"||F.type==="hamlet"||F.type==="locality"):U,[U,f]);return S.jsxs(OP,{center:Ze,zoom:4,minZoom:3,maxZoom:15,style:{height:"100%",width:"100%"},children:[S.jsx(DP,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),S.jsx(eA,{onChange:Ae}),S.jsx(tA,{selectingStart:r,onStartSelected:o}),S.jsx(iA,{startLocation:i}),S.jsx(rA,{onMapReady:A}),!a&&!u&&!d&&S.jsx(jo,{chunkedLoading:!0,children:Fe.map(F=>S.jsx(bs,{position:[F.lat,F.lon],children:S.jsx(Ns,{children:S.jsxs("div",{style:{minWidth:180},children:[(()=>{const ne=N.some(ue=>ue.id===F.id);return S.jsxs("div",{style:{fontWeight:600,textDecoration:ne?"line-through":"none",opacity:ne?.6:1},children:[ne?" ":"",F.name]})})(),S.jsxs("div",{style:{color:"#475569",marginBottom:8},children:[F.type," \\u00b7 ",F.lat.toFixed(3),", ",F.lon.toFixed(3)]}),S.jsxs("div",{style:{marginBottom:8,display:"flex",flexDirection:"column",gap:4},children:[S.jsx("a",{href:nA(F.name),target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:" Wikipedia "}),S.jsx("a",{href:`https://www.meteoblue.com/en/weather/forecast/week/${F.lat.toFixed(4)}N${F.lon.toFixed(4)}E`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:" Weather forecast "})]}),S.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[S.jsx("button",{className:"button",onClick:()=>t(F),disabled:e.has(F.id),children:e.has(F.id)?"Added":"Add to itinerary"}),w&&(()=>{const ne=y.some(ue=>ue.id===F.id);return S.jsx("button",{className:"button",onClick:async()=>{try{await w(F)}catch(ue){console.error("Error toggling favorite:",ue)}},style:{background:ne?"#ec4899":void 0},title:ne?"Remove from favorites":"Add to favorites",children:ne?"":""})})(),o&&!i&&S.jsx("button",{className:"button",onClick:()=>o(F.lat,F.lon,F.name),children:"Set as start"})]})]})})},F.id))}),!a&&!u&&!d&&_&&S.jsx(jo,{chunkedLoading:!0,children:k.map(F=>S.jsx(bs,{position:[F.lat,F.lon],icon:ze,children:S.jsx(Ns,{children:S.jsxs("div",{style:{minWidth:180},children:[(()=>{const ne=N.some(ue=>ue.id===F.id);return S.jsxs("div",{style:{fontWeight:600,textDecoration:ne?"line-through":"none",opacity:ne?.6:1},children:[ne?" ":"","\\ud83c\\udfd5\\ufe0f ",F.name]})})(),S.jsxs("div",{style:{color:"#475569",marginBottom:8},children:["Free campsite \\u00b7 ",F.lat.toFixed(3),", ",F.lon.toFixed(3)]}),S.jsxs("div",{style:{marginBottom:8,display:"flex",flexDirection:"column",gap:4},children:[S.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(F.name+" campsite")}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"View on Google Maps "}),S.jsx("a",{href:`https://www.meteoblue.com/en/weather/forecast/week/${F.lat.toFixed(4)}N${F.lon.toFixed(4)}E`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"Weather forecast "})]}),S.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[S.jsx("button",{className:"button",onClick:()=>t(F),disabled:e.has(F.id),children:e.has(F.id)?"Added":"Add to itinerary"}),w&&(()=>{const ne=y.some(ue=>ue.id===F.id);return S.jsx("button",{className:"button",onClick:async()=>{try{await w(F)}catch(ue){console.error("Error toggling favorite:",ue)}},style:{background:ne?"#ec4899":void 0},title:ne?"Remove from favorites":"Add to favorites",children:ne?"":""})})(),o&&!i&&S.jsx("button",{className:"button",onClick:()=>o(F.lat,F.lon,F.name),children:"Set as start"})]})]})})},F.id))}),!a&&!u&&!d&&_&&S.jsx(jo,{chunkedLoading:!0,children:H.map(F=>S.jsx(bs,{position:[F.lat,F.lon],icon:An,children:S.jsx(Ns,{children:S.jsxs("div",{style:{minWidth:180},children:[(()=>{const ne=N.some(ue=>ue.id===F.id);return S.jsxs("div",{style:{fontWeight:600,textDecoration:ne?"line-through":"none",opacity:ne?.6:1},children:[ne?" ":"","\\ud83c\\udfd5\\ufe0f\\ud83d\\udcb0 ",F.name]})})(),S.jsxs("div",{style:{color:"#475569",marginBottom:8},children:["Paid campsite \\u00b7 ",F.lat.toFixed(3),", ",F.lon.toFixed(3)]}),S.jsxs("div",{style:{marginBottom:8,display:"flex",flexDirection:"column",gap:4},children:[S.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(F.name+" campsite")}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"View on Google Maps "}),S.jsx("a",{href:`https://www.meteoblue.com/en/weather/forecast/week/${F.lat.toFixed(4)}N${F.lon.toFixed(4)}E`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"Weather forecast "})]}),S.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[S.jsx("button",{className:"button",onClick:()=>t(F),disabled:e.has(F.id),children:e.has(F.id)?"Added":"Add to itinerary"}),w&&(()=>{const ne=y.some(ue=>ue.id===F.id);return S.jsx("button",{className:"button",onClick:async()=>{try{await w(F)}catch(ue){console.error("Error toggling favorite:",ue)}},style:{background:ne?"#ec4899":void 0},title:ne?"Remove from favorites":"Add to favorites",children:ne?"":""})})(),o&&!i&&S.jsx("button",{className:"button",onClick:()=>o(F.lat,F.lon,F.name),children:"Set as start"})]})]})})},F.id))}),a&&S.jsx(jo,{chunkedLoading:!0,children:Q.map(F=>S.jsx(bs,{position:[F.lat,F.lon],icon:Mt,children:S.jsx(Ns,{children:S.jsxs("div",{style:{minWidth:180},children:[S.jsxs("div",{style:{fontWeight:600},children:[" ",F.name]}),S.jsxs("div",{style:{color:"#475569",marginBottom:8},children:["Fuel station  ",F.lat.toFixed(3),", ",F.lon.toFixed(3)]}),S.jsx("div",{style:{marginBottom:8},children:S.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(F.name+" fuel station")}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"View on Google Maps "})}),S.jsx("button",{className:"button",onClick:()=>t(F),disabled:e.has(F.id),children:e.has(F.id)?"Added":"Add to itinerary"}),o&&!i&&S.jsx("button",{className:"button",style:{marginLeft:8},onClick:()=>o(F.lat,F.lon,F.name),children:"Set as start"})]})})},F.id))}),u&&S.jsx(jo,{chunkedLoading:!0,children:C.map(F=>S.jsx(bs,{position:[F.lat,F.lon],icon:Z,children:S.jsx(Ns,{children:S.jsxs("div",{style:{minWidth:180},children:[S.jsxs("div",{style:{fontWeight:600},children:[" ",F.name]}),S.jsxs("div",{style:{color:"#475569",marginBottom:8},children:["RV Dump Point  ",F.lat.toFixed(3),", ",F.lon.toFixed(3)]}),S.jsx("div",{style:{marginBottom:8},children:S.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(F.name+" dump station")}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"View on Google Maps "})}),S.jsx("button",{className:"button",onClick:()=>t(F),disabled:e.has(F.id),children:e.has(F.id)?"Added":"Add to itinerary"}),o&&!i&&S.jsx("button",{className:"button",style:{marginLeft:8},onClick:()=>o(F.lat,F.lon,F.name),children:"Set as start"})]})})},F.id))}),d&&S.jsx(jo,{chunkedLoading:!0,children:O.map(F=>S.jsx(bs,{position:[F.lat,F.lon],icon:_e,children:S.jsx(Ns,{children:S.jsxs("div",{style:{minWidth:180},children:[S.jsxs("div",{style:{fontWeight:600},children:[" ",F.name]}),S.jsxs("div",{style:{color:"#475569",marginBottom:8},children:["Drinking Water  ",F.lat.toFixed(3),", ",F.lon.toFixed(3)]}),S.jsx("div",{style:{marginBottom:8},children:S.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(F.name+" water point")}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"View on Google Maps "})}),S.jsx("button",{className:"button",onClick:()=>t(F),disabled:e.has(F.id),children:e.has(F.id)?"Added":"Add to itinerary"}),o&&!i&&S.jsx("button",{className:"button",style:{marginLeft:8},onClick:()=>o(F.lat,F.lon,F.name),children:"Set as start"})]})})},F.id))}),i&&S.jsx(bs,{position:[i.lat,i.lon],icon:te,children:S.jsx(Ns,{children:S.jsxs("div",{style:{minWidth:140},children:[S.jsxs("div",{style:{fontWeight:600},children:[" ",i.name||"Start"]}),S.jsxs("div",{style:{color:"#475569"},children:[i.lat.toFixed(4),", ",i.lon.toFixed(4)]})]})})}),n&&n.coordinates&&S.jsxs(S.Fragment,{children:[S.jsx(MP,{positions:n.coordinates,pathOptions:{color:"dodgerblue",weight:4,opacity:.85}}),n.waypoints&&n.legs&&n.waypoints.map((F,ne)=>{if(ne>=n.waypoints.length-1)return null;const ue=n.waypoints[ne+1],xe=[(F[0]+ue[0])/2,(F[1]+ue[1])/2],et=n.legs[ne].duration,nt=Ge=>{const Oe=Math.round(Ge/60);if(Oe<60)return`${Oe} min`;const Me=Math.floor(Oe/60),Ce=Oe%60;return`${Me}h ${Ce}m`};return S.jsx(bP,{center:xe,radius:8,pathOptions:{color:"#fff",fillColor:"dodgerblue",fillOpacity:1},children:S.jsx(VP,{direction:"top",offset:[0,-8],permanent:!0,children:nt(et)})},`seg-${ne}`)})]})]})}var jy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},oA=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],d=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},qE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,d=r+2<t.length,f=d?t[r+2]:0,_=o>>2,y=(o&3)<<4|u>>4;let w=(u&15)<<2|f>>6,T=f&63;d||(T=64,a||(w=64)),i.push(n[_],n[y],n[w],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(WE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||y==null)throw new aA;const w=o<<2|u>>4;if(i.push(w),f!==64){const T=u<<4&240|f>>2;if(i.push(T),y!==64){const A=f<<6&192|y;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lA=function(t){const e=WE(t);return qE.encodeByteArray(e,!0)},bh=function(t){return lA(t).replace(/\./g,"")},GE=function(t){try{return qE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=()=>uA().__FIREBASE_DEFAULTS__,hA=()=>{if(typeof process>"u"||typeof jy>"u")return;const t=jy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&GE(t[1]);return e&&JSON.parse(e)},md=()=>{try{return cA()||hA()||dA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ZE=t=>{var e,n;return(n=(e=md())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$E=t=>{const e=ZE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},KE=()=>{var t;return(t=md())===null||t===void 0?void 0:t.config},QE=t=>{var e;return(e=md())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bh(JSON.stringify(n)),bh(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function mA(){var t;const e=(t=md())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _A(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vA(){const t=an();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wA(){return!mA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EA(){try{return typeof indexedDB=="object"}catch{return!1}}function TA(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="FirebaseError";class Bi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=SA,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?IA(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Bi(r,u,i)}}function IA(t,e){return t.replace(CA,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const CA=/\{\$([^}]+)}/g;function kA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Nh(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(Hy(o)&&Hy(a)){if(!Nh(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Hy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ll(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function bl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function PA(t,e){const n=new AA(t,e);return n.subscribe.bind(n)}class AA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");xA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=pf),r.error===void 0&&(r.error=pf),r.complete===void 0&&(r.complete=pf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}class ss{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new fA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bA(e))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fs){return this.instances.has(e)}getOptions(e=Fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:LA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Fs){return this.component?this.component.multipleInstances?e:Fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LA(t){return t===Fs?void 0:t}function bA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ue||(Ue={}));const OA={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},MA=Ue.INFO,DA={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},VA=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=DA[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class t_{constructor(e){this.name=e,this._logLevel=MA,this._logHandler=VA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const zA=(t,e)=>e.some(n=>t instanceof n);let Wy,qy;function UA(){return Wy||(Wy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FA(){return qy||(qy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YE=new WeakMap,Ip=new WeakMap,JE=new WeakMap,mf=new WeakMap,n_=new WeakMap;function BA(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Yr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&YE.set(n,t)}).catch(()=>{}),n_.set(e,t),e}function jA(t){if(Ip.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Ip.set(t,e)}let Cp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ip.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function HA(t){Cp=t(Cp)}function WA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(_f(this),e,...n);return JE.set(i,e.sort?e.sort():[e]),Yr(i)}:FA().includes(t)?function(...e){return t.apply(_f(this),e),Yr(YE.get(this))}:function(...e){return Yr(t.apply(_f(this),e))}}function qA(t){return typeof t=="function"?WA(t):(t instanceof IDBTransaction&&jA(t),zA(t,UA())?new Proxy(t,Cp):t)}function Yr(t){if(t instanceof IDBRequest)return BA(t);if(mf.has(t))return mf.get(t);const e=qA(t);return e!==t&&(mf.set(t,e),n_.set(e,t)),e}const _f=t=>n_.get(t);function GA(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=Yr(a);return i&&a.addEventListener("upgradeneeded",d=>{i(Yr(a.result),d.oldVersion,d.newVersion,Yr(a.transaction),d)}),n&&a.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const ZA=["get","getKey","getAll","getAllKeys","count"],$A=["put","add","delete","clear"],gf=new Map;function Gy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=$A.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||ZA.includes(n)))return;const o=async function(a,...u){const d=this.transaction(a,r?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&d.done]))[0]};return gf.set(e,o),o}HA(t=>({...t,get:(e,n,i)=>Gy(e,n)||t.get(e,n,i),has:(e,n)=>!!Gy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function QA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kp="@firebase/app",Zy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new t_("@firebase/app"),XA="@firebase/app-compat",YA="@firebase/analytics-compat",JA="@firebase/analytics",ex="@firebase/app-check-compat",tx="@firebase/app-check",nx="@firebase/auth",ix="@firebase/auth-compat",rx="@firebase/database",sx="@firebase/data-connect",ox="@firebase/database-compat",ax="@firebase/functions",lx="@firebase/functions-compat",ux="@firebase/installations",cx="@firebase/installations-compat",hx="@firebase/messaging",dx="@firebase/messaging-compat",fx="@firebase/performance",px="@firebase/performance-compat",mx="@firebase/remote-config",_x="@firebase/remote-config-compat",gx="@firebase/storage",yx="@firebase/storage-compat",vx="@firebase/firestore",wx="@firebase/vertexai-preview",Ex="@firebase/firestore-compat",Tx="firebase",Sx="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="[DEFAULT]",Ix={[kp]:"fire-core",[XA]:"fire-core-compat",[JA]:"fire-analytics",[YA]:"fire-analytics-compat",[tx]:"fire-app-check",[ex]:"fire-app-check-compat",[nx]:"fire-auth",[ix]:"fire-auth-compat",[rx]:"fire-rtdb",[sx]:"fire-data-connect",[ox]:"fire-rtdb-compat",[ax]:"fire-fn",[lx]:"fire-fn-compat",[ux]:"fire-iid",[cx]:"fire-iid-compat",[hx]:"fire-fcm",[dx]:"fire-fcm-compat",[fx]:"fire-perf",[px]:"fire-perf-compat",[mx]:"fire-rc",[_x]:"fire-rc-compat",[gx]:"fire-gcs",[yx]:"fire-gcs-compat",[vx]:"fire-fst",[Ex]:"fire-fst-compat",[wx]:"fire-vertex","fire-js":"fire-js",[Tx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new Map,Cx=new Map,Ap=new Map;function $y(t,e){try{t.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function to(t){const e=t.name;if(Ap.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;Ap.set(e,t);for(const n of Oh.values())$y(n,t);for(const n of Cx.values())$y(n,t);return!0}function _d(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jr=new bu("app","Firebase",kx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=Sx;function eT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Pp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Jr.create("bad-app-name",{appName:String(r)});if(n||(n=KE()),!n)throw Jr.create("no-options");const o=Oh.get(r);if(o){if(Nh(n,o.options)&&Nh(i,o.config))return o;throw Jr.create("duplicate-app",{appName:r})}const a=new NA(r);for(const d of Ap.values())a.addComponent(d);const u=new Px(n,i,a);return Oh.set(r,u),u}function i_(t=Pp){const e=Oh.get(t);if(!e&&t===Pp&&KE())return eT();if(!e)throw Jr.create("no-app",{appName:t});return e}function Ni(t,e,n){var i;let r=(i=Ix[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(u.join(" "));return}to(new ss(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="firebase-heartbeat-database",xx=1,mu="firebase-heartbeat-store";let yf=null;function tT(){return yf||(yf=GA(Ax,xx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Jr.create("idb-open",{originalErrorMessage:t.message})})),yf}async function Rx(t){try{const n=(await tT()).transaction(mu),i=await n.objectStore(mu).get(nT(t));return await n.done,i}catch(e){if(e instanceof Bi)pr.warn(e.message);else{const n=Jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function Ky(t,e){try{const i=(await tT()).transaction(mu,"readwrite");await i.objectStore(mu).put(e,nT(t)),await i.done}catch(n){if(n instanceof Bi)pr.warn(n.message);else{const i=Jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(i.message)}}}function nT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=1024,bx=30*24*60*60*1e3;class Nx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Mx(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Qy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=bx}),this._storage.overwrite(this._heartbeatsCache))}catch(i){pr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qy(),{heartbeatsToSend:i,unsentEntries:r}=Ox(this._heartbeatsCache.heartbeats),o=bh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return pr.warn(n),""}}}function Qy(){return new Date().toISOString().substring(0,10)}function Ox(t,e=Lx){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),Xy(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Xy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Mx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EA()?TA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Rx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Xy(t){return bh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t){to(new ss("platform-logger",e=>new KA(e),"PRIVATE")),to(new ss("heartbeat",e=>new Nx(e),"PRIVATE")),Ni(kp,Zy,t),Ni(kp,Zy,"esm2017"),Ni("fire-js","")}Dx("");var Vx="firebase",zx="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni(Vx,zx,"app");function r_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function iT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ux=iT,rT=new bu("auth","Firebase",iT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new t_("@firebase/auth");function Fx(t,...e){Mh.logLevel<=Ue.WARN&&Mh.warn(`Auth (${fo}): ${t}`,...e)}function Jc(t,...e){Mh.logLevel<=Ue.ERROR&&Mh.error(`Auth (${fo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,...e){throw s_(t,...e)}function Oi(t,...e){return s_(t,...e)}function sT(t,e,n){const i=Object.assign(Object.assign({},Ux()),{[e]:n});return new bu("auth","Firebase",i).create(e,{appName:t.name})}function ur(t){return sT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function s_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return rT.create(t,...e)}function ve(t,e,...n){if(!t)throw s_(e,...n)}function rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jc(e),new Error(e)}function mr(t,e){t||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Bx(){return Yy()==="http:"||Yy()==="https:"}function Yy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bx()||gA()||"connection"in navigator)?navigator.onLine:!0}function Hx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n){this.shortDelay=e,this.longDelay=n,mr(n>e,"Short delay should be less than long delay!"),this.isMobile=pA()||yA()}get(){return jx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t,e){mr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new Ou(3e4,6e4);function fs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ps(t,e,n,i,r={}){return aT(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=Nu(Object.assign({key:t.config.apiKey},a)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return _A()||(f.referrerPolicy="no-referrer"),oT.fetch()(lT(t,t.config.apiHost,n,u),f)})}async function aT(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Wx),e);try{const r=new Zx(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Oc(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oc(t,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Oc(t,"email-already-in-use",a);if(d==="USER_DISABLED")throw Oc(t,"user-disabled",a);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw sT(t,_,f);vi(t,_)}}catch(r){if(r instanceof Bi)throw r;vi(t,"network-request-failed",{message:String(r)})}}async function Mu(t,e,n,i,r={}){const o=await ps(t,e,n,i,r);return"mfaPendingCredential"in o&&vi(t,"multi-factor-auth-required",{_serverResponse:o}),o}function lT(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?o_(t.config,r):`${t.config.apiScheme}://${r}`}function Gx(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Oi(this.auth,"network-request-failed")),qx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Oc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Oi(t,e,i);return r.customData._tokenResponse=n,r}function Jy(t){return t!==void 0&&t.enterprise!==void 0}class $x{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Gx(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Kx(t,e){return ps(t,"GET","/v2/recaptchaConfig",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(t,e){return ps(t,"POST","/v1/accounts:delete",e)}async function uT(t,e){return ps(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Xx(t,e=!1){const n=It(t),i=await n.getIdToken(e),r=a_(i);ve(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Gl(vf(r.auth_time)),issuedAtTime:Gl(vf(r.iat)),expirationTime:Gl(vf(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function vf(t){return Number(t)*1e3}function a_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Jc("JWT malformed, contained fewer than 3 sections"),null;try{const r=GE(n);return r?JSON.parse(r):(Jc("Failed to decode base64 JWT payload"),null)}catch(r){return Jc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function ev(t){const e=a_(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Bi&&Yx(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Yx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(t){var e;const n=t.auth,i=await t.getIdToken(),r=await _u(t,uT(n,{idToken:i}));ve(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?cT(o.providerUserInfo):[],u=tR(t.providerData,a),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),_=d?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Rp(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(t,y)}async function eR(t){const e=It(t);await Dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tR(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function cT(t){return t.map(e=>{var{providerId:n}=e,i=r_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(t,e){const n=await aT(t,{},async()=>{const i=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=lT(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",oT.fetch()(a,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function iR(t,e){return ps(t,"POST","/v2/accounts:revokeToken",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ev(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=ev(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await nR(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new pa;return i&&(ve(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ve(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(ve(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pa,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=r_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Rp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await _u(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Xx(this,e)}reload(){return eR(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Dh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xi(this.auth.app))return Promise.reject(ur(this.auth));const e=await this.getIdToken();return await _u(this,Qx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,a,u,d,f,_;const y=(i=n.displayName)!==null&&i!==void 0?i:void 0,w=(r=n.email)!==null&&r!==void 0?r:void 0,T=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,A=(a=n.photoURL)!==null&&a!==void 0?a:void 0,N=(u=n.tenantId)!==null&&u!==void 0?u:void 0,U=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,P=(f=n.createdAt)!==null&&f!==void 0?f:void 0,k=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:b,emailVerified:H,isAnonymous:$,providerData:Q,stsTokenManager:R}=n;ve(b&&R,e,"internal-error");const C=pa.fromJSON(this.name,R);ve(typeof b=="string",e,"internal-error"),Rr(y,e.name),Rr(w,e.name),ve(typeof H=="boolean",e,"internal-error"),ve(typeof $=="boolean",e,"internal-error"),Rr(T,e.name),Rr(A,e.name),Rr(N,e.name),Rr(U,e.name),Rr(P,e.name),Rr(k,e.name);const x=new sr({uid:b,auth:e,email:w,emailVerified:H,displayName:y,isAnonymous:$,photoURL:A,phoneNumber:T,tenantId:N,stsTokenManager:C,createdAt:P,lastLoginAt:k});return Q&&Array.isArray(Q)&&(x.providerData=Q.map(O=>Object.assign({},O))),U&&(x._redirectEventId=U),x}static async _fromIdTokenResponse(e,n,i=!1){const r=new pa;r.updateFromServerResponse(n);const o=new sr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Dh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ve(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?cT(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new pa;u.updateFromIdToken(i);const d=new sr({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Rp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=new Map;function or(t){mr(t instanceof Function,"Expected a class definition");let e=tv.get(t);return e?(mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}hT.type="NONE";const nv=hT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t,e,n){return`firebase:${t}:${e}:${n}`}class ma{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=eh(this.userKey,r.apiKey,o),this.fullPersistenceKey=eh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?sr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ma(or(nv),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||or(nv);const a=eh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const _=await f._get(a);if(_){const y=sr._fromJSON(e,_);f!==o&&(u=y),o=f;break}}catch{}const d=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new ma(o,e,i):(o=d[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new ma(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gT(e))return"Blackberry";if(yT(e))return"Webos";if(fT(e))return"Safari";if((e.includes("chrome/")||pT(e))&&!e.includes("edge/"))return"Chrome";if(_T(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function dT(t=an()){return/firefox\//i.test(t)}function fT(t=an()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pT(t=an()){return/crios\//i.test(t)}function mT(t=an()){return/iemobile/i.test(t)}function _T(t=an()){return/android/i.test(t)}function gT(t=an()){return/blackberry/i.test(t)}function yT(t=an()){return/webos/i.test(t)}function l_(t=an()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rR(t=an()){var e;return l_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sR(){return vA()&&document.documentMode===10}function vT(t=an()){return l_(t)||_T(t)||yT(t)||gT(t)||/windows phone/i.test(t)||mT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t,e=[]){let n;switch(t){case"Browser":n=iv(an());break;case"Worker":n=`${iv(an())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const d=e(o);a(d)}catch(d){u(d)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(t,e={}){return ps(t,"GET","/v2/passwordPolicy",fs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=6;class uR{constructor(e){var n,i,r,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:lR,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,a,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rv(this),this.idTokenSubscription=new rv(this),this.beforeStateQueue=new oR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=or(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await ma.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uT(this,{idToken:e}),i=await sr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===u)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Dh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Hx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xi(this.app))return Promise.reject(ur(this));const n=e?It(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xi(this.app)?Promise.reject(ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xi(this.app)?Promise.reject(ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aR(this),n=new uR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await iR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&or(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await ma.create(this,[or(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,r);return()=>{a=!0,d()}}else{const d=e.addObserver(n);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Fx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function po(t){return It(t)}class rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=PA(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hR(t){gd=t}function ET(t){return gd.loadJS(t)}function dR(){return gd.recaptchaEnterpriseScript}function fR(){return gd.gapiScript}function pR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const mR="recaptcha-enterprise",_R="NO_RECAPTCHA";class gR{constructor(e){this.type=mR,this.auth=po(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,u)=>{Kx(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new $x(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(d=>{u(d)})})}function r(o,a,u){const d=window.grecaptcha;Jy(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(_R)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{i(this.auth).then(u=>{if(!n&&Jy(window.grecaptcha))r(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=dR();d.length!==0&&(d+=u),ET(d).then(()=>{r(u,o,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function sv(t,e,n,i=!1){const r=new gR(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Lp(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await sv(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await sv(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t,e){const n=_d(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Nh(o,e??{}))return r;vi(r,"already-initialized")}return n.initialize({options:e})}function vR(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(or);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function wR(t,e,n){const i=po(t);ve(i._canInitEmulator,i,"emulator-config-failed"),ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=TT(e),{host:a,port:u}=ER(e),d=u===null?"":`:${u}`;i.config.emulator={url:`${o}//${a}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),TR()}function TT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ER(t){const e=TT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:ov(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:ov(a)}}}function ov(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,n){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}async function SR(t,e){return ps(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t,e){return Mu(t,"POST","/v1/accounts:signInWithPassword",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e){return Mu(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}async function kR(t,e){return Mu(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends u_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new gu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new gu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lp(e,n,"signInWithPassword",IR);case"emailLink":return CR(e,{email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lp(e,i,"signUpPassword",SR);case"emailLink":return kR(e,{idToken:n,email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(t,e){return Mu(t,"POST","/v1/accounts:signInWithIdp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="http://localhost";class no extends u_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new no(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=r_(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new no(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return _a(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,_a(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_a(e,n)}buildRequest(){const e={requestUri:PR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xR(t){const e=Ll(bl(t)).link,n=e?Ll(bl(e)).deep_link_id:null,i=Ll(bl(t)).deep_link_id;return(i?Ll(bl(i)).link:null)||i||n||e||t}class c_{constructor(e){var n,i,r,o,a,u;const d=Ll(bl(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,_=(i=d.oobCode)!==null&&i!==void 0?i:null,y=AR((r=d.mode)!==null&&r!==void 0?r:null);ve(f&&_&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=_,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=d.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=xR(e);try{return new c_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(){this.providerId=Va.PROVIDER_ID}static credential(e,n){return gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=c_.parseLink(n);return ve(i,"argument-error"),gu._fromEmailAndCode(e,i.code,i.tenantId)}}Va.PROVIDER_ID="password";Va.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Va.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends ST{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Du{constructor(){super("facebook.com")}static credential(e){return no._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return no._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Dr.credential(n,i)}catch{return null}}}Dr.GOOGLE_SIGN_IN_METHOD="google.com";Dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Du{constructor(){super("github.com")}static credential(e){return no._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.GITHUB_SIGN_IN_METHOD="github.com";Vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Du{constructor(){super("twitter.com")}static credential(e,n){return no._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return zr.credential(n,i)}catch{return null}}}zr.TWITTER_SIGN_IN_METHOD="twitter.com";zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(t,e){return Mu(t,"POST","/v1/accounts:signUp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await sr._fromIdTokenResponse(e,i,r),a=av(i);return new io({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=av(i);return new io({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function av(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends Bi{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Vh(e,n,i,r)}}function IT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(t,o,e,i):o})}async function LR(t,e,n=!1){const i=await _u(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return io._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(t,e,n=!1){const{auth:i}=t;if(xi(i.app))return Promise.reject(ur(i));const r="reauthenticate";try{const o=await _u(t,IT(i,r,e,t),n);ve(o.idToken,i,"internal-error");const a=a_(o.idToken);ve(a,i,"internal-error");const{sub:u}=a;return ve(t.uid===u,i,"user-mismatch"),io._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&vi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CT(t,e,n=!1){if(xi(t.app))return Promise.reject(ur(t));const i="signIn",r=await IT(t,i,e),o=await io._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function NR(t,e){return CT(po(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kT(t){const e=po(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OR(t,e,n){if(xi(t.app))return Promise.reject(ur(t));const i=po(t),a=await Lp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RR).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&kT(t),d}),u=await io._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(u.user),u}function MR(t,e,n){return xi(t.app)?Promise.reject(ur(t)):NR(It(t),Va.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&kT(t),i})}function DR(t,e,n,i){return It(t).onIdTokenChanged(e,n,i)}function VR(t,e,n){return It(t).beforeAuthStateChanged(e,n)}function zR(t,e,n,i){return It(t).onAuthStateChanged(e,n,i)}function UR(t){return It(t).signOut()}const zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zh,"1"),this.storage.removeItem(zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=1e3,BR=10;class AT extends PT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,d)=>{this.notifyListeners(a,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);sR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,BR):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},FR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AT.type="LOCAL";const jR=AT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT extends PT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xT.type="SESSION";const RT=xT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new yd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),d=await HR(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,d)=>{const f=h_("",20);r.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(y){const w=y;if(w.data.eventId===f)switch(w.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(w.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return window}function qR(t){Mi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function GR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $R(){return LT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="firebaseLocalStorageDb",KR=1,Uh="firebaseLocalStorage",NT="fbase_key";class Vu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vd(t,e){return t.transaction([Uh],e?"readwrite":"readonly").objectStore(Uh)}function QR(){const t=indexedDB.deleteDatabase(bT);return new Vu(t).toPromise()}function bp(){const t=indexedDB.open(bT,KR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Uh,{keyPath:NT})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Uh)?e(i):(i.close(),await QR(),e(await bp()))})})}async function lv(t,e,n){const i=vd(t,!0).put({[NT]:e,value:n});return new Vu(i).toPromise()}async function XR(t,e){const n=vd(t,!1).get(e),i=await new Vu(n).toPromise();return i===void 0?null:i.value}function uv(t,e){const n=vd(t,!0).delete(e);return new Vu(n).toPromise()}const YR=800,JR=3;class OT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>JR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yd._getInstance($R()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await GR(),!this.activeServiceWorker)return;this.sender=new WR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bp();return await lv(e,zh,"1"),await uv(e,zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>lv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>XR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>uv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=vd(r,!1).getAll();return new Vu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OT.type="LOCAL";const eL=OT;new Ou(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(t,e){return e?or(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends u_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _a(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nL(t){return CT(t.auth,new d_(t),t.bypassAuthState)}function iL(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),bR(n,new d_(t),t.bypassAuthState)}async function rL(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),LR(n,new d_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nL;case"linkViaPopup":case"linkViaRedirect":return rL;case"reauthViaPopup":case"reauthViaRedirect":return iL;default:vi(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new Ou(2e3,1e4);class aa extends MT{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,aa.currentPopupAction&&aa.currentPopupAction.cancel(),aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=h_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sL.get())};e()}}aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL="pendingRedirect",th=new Map;class aL extends MT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=th.get(this.auth._key());if(!e){try{const i=await lL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}th.set(this.auth._key(),e)}return this.bypassAuthState||th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lL(t,e){const n=hL(e),i=cL(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function uL(t,e){th.set(t._key(),e)}function cL(t){return or(t._redirectPersistence)}function hL(t){return eh(oL,t.config.apiKey,t.name)}async function dL(t,e,n=!1){if(xi(t.app))return Promise.reject(ur(t));const i=po(t),r=tL(i,e),a=await new aL(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=10*60*1e3;class pL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!DT(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Oi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fL&&this.cachedEventUids.clear(),this.cachedEventUids.has(cv(e))}saveEventToCache(e){this.cachedEventUids.add(cv(e)),this.lastProcessedEventTime=Date.now()}}function cv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(t,e={}){return ps(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yL=/^https?/;async function vL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _L(t);for(const n of e)try{if(wL(n))return}catch{}vi(t,"unauthorized-domain")}function wL(t){const e=xp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!yL.test(n))return!1;if(gL.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=new Ou(3e4,6e4);function hv(){const t=Mi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TL(t){return new Promise((e,n)=>{var i,r,o;function a(){hv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hv(),n(Oi(t,"network-request-failed"))},timeout:EL.get()})}if(!((r=(i=Mi().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Mi().gapi)===null||o===void 0)&&o.load)a();else{const u=pR("iframefcb");return Mi()[u]=()=>{gapi.load?a():n(Oi(t,"network-request-failed"))},ET(`${fR()}?onload=${u}`).catch(d=>n(d))}}).catch(e=>{throw nh=null,e})}let nh=null;function SL(t){return nh=nh||TL(t),nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=new Ou(5e3,15e3),CL="__/auth/iframe",kL="emulator/auth/iframe",PL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xL(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?o_(e,kL):`https://${t.config.authDomain}/${CL}`,i={apiKey:e.apiKey,appName:t.name,v:fo},r=AL.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Nu(i).slice(1)}`}async function RL(t){const e=await SL(t),n=Mi().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:xL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PL,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Oi(t,"network-request-failed"),u=Mi().setTimeout(()=>{o(a)},IL.get());function d(){Mi().clearTimeout(u),r(i)}i.ping(d).then(d,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bL=500,NL=600,OL="_blank",ML="http://localhost";class dv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DL(t,e,n,i=bL,r=NL){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const d=Object.assign(Object.assign({},LL),{width:i.toString(),height:r.toString(),top:o,left:a}),f=an().toLowerCase();n&&(u=pT(f)?OL:n),dT(f)&&(e=e||ML,d.scrollbars="yes");const _=Object.entries(d).reduce((w,[T,A])=>`${w}${T}=${A},`,"");if(rR(f)&&u!=="_self")return VL(e||"",u),new dv(null);const y=window.open(e||"",u,_);ve(y,t,"popup-blocked");try{y.focus()}catch{}return new dv(y)}function VL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL="__/auth/handler",UL="emulator/auth/handler",FL=encodeURIComponent("fac");async function fv(t,e,n,i,r,o){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:fo,eventId:r};if(e instanceof ST){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",kA(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,y]of Object.entries({}))a[_]=y}if(e instanceof Du){const _=e.getScopes().filter(y=>y!=="");_.length>0&&(a.scopes=_.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const _ of Object.keys(u))u[_]===void 0&&delete u[_];const d=await t._getAppCheckToken(),f=d?`#${FL}=${encodeURIComponent(d)}`:"";return`${BL(t)}?${Nu(u).slice(1)}${f}`}function BL({config:t}){return t.emulator?o_(t,UL):`https://${t.authDomain}/${zL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="webStorageSupport";class jL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RT,this._completeRedirectFn=dL,this._overrideRedirectResult=uL}async _openPopup(e,n,i,r){var o;mr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await fv(e,n,i,xp(),r);return DL(e,a,h_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await fv(e,n,i,xp(),r);return qR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(mr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await RL(e),i=new pL(e);return n.register("authEvent",r=>(ve(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wf,{type:wf},r=>{var o;const a=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[wf];a!==void 0&&n(!!a),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vT()||fT()||l_()}}const HL=jL;var pv="@firebase/auth",mv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GL(t){to(new ss("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;ve(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wT(t)},f=new cR(i,r,o,d);return vR(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),to(new ss("auth-internal",e=>{const n=po(e.getProvider("auth").getImmediate());return(i=>new WL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ni(pv,mv,qL(t)),Ni(pv,mv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=5*60,$L=QE("authIdTokenMaxAge")||ZL;let _v=null;const KL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>$L)return;const r=n==null?void 0:n.token;_v!==r&&(_v=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function QL(t=i_()){const e=_d(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yR(t,{popupRedirectResolver:HL,persistence:[eL,jR,RT]}),i=QE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=KL(o.toString());VR(n,a,()=>a(n.currentUser)),DR(n,u=>a(u))}}const r=ZE("auth");return r&&wR(n,`http://${r}`),n}function XL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}hR({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Oi("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",XL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GL("Browser");var gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,VT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,C){function x(){}x.prototype=C.prototype,R.D=C.prototype,R.prototype=new x,R.prototype.constructor=R,R.C=function(O,V,z){for(var M=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)M[Ze-2]=arguments[Ze];return C.prototype[V].apply(O,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,C,x){x||(x=0);var O=Array(16);if(typeof C=="string")for(var V=0;16>V;++V)O[V]=C.charCodeAt(x++)|C.charCodeAt(x++)<<8|C.charCodeAt(x++)<<16|C.charCodeAt(x++)<<24;else for(V=0;16>V;++V)O[V]=C[x++]|C[x++]<<8|C[x++]<<16|C[x++]<<24;C=R.g[0],x=R.g[1],V=R.g[2];var z=R.g[3],M=C+(z^x&(V^z))+O[0]+3614090360&4294967295;C=x+(M<<7&4294967295|M>>>25),M=z+(V^C&(x^V))+O[1]+3905402710&4294967295,z=C+(M<<12&4294967295|M>>>20),M=V+(x^z&(C^x))+O[2]+606105819&4294967295,V=z+(M<<17&4294967295|M>>>15),M=x+(C^V&(z^C))+O[3]+3250441966&4294967295,x=V+(M<<22&4294967295|M>>>10),M=C+(z^x&(V^z))+O[4]+4118548399&4294967295,C=x+(M<<7&4294967295|M>>>25),M=z+(V^C&(x^V))+O[5]+1200080426&4294967295,z=C+(M<<12&4294967295|M>>>20),M=V+(x^z&(C^x))+O[6]+2821735955&4294967295,V=z+(M<<17&4294967295|M>>>15),M=x+(C^V&(z^C))+O[7]+4249261313&4294967295,x=V+(M<<22&4294967295|M>>>10),M=C+(z^x&(V^z))+O[8]+1770035416&4294967295,C=x+(M<<7&4294967295|M>>>25),M=z+(V^C&(x^V))+O[9]+2336552879&4294967295,z=C+(M<<12&4294967295|M>>>20),M=V+(x^z&(C^x))+O[10]+4294925233&4294967295,V=z+(M<<17&4294967295|M>>>15),M=x+(C^V&(z^C))+O[11]+2304563134&4294967295,x=V+(M<<22&4294967295|M>>>10),M=C+(z^x&(V^z))+O[12]+1804603682&4294967295,C=x+(M<<7&4294967295|M>>>25),M=z+(V^C&(x^V))+O[13]+4254626195&4294967295,z=C+(M<<12&4294967295|M>>>20),M=V+(x^z&(C^x))+O[14]+2792965006&4294967295,V=z+(M<<17&4294967295|M>>>15),M=x+(C^V&(z^C))+O[15]+1236535329&4294967295,x=V+(M<<22&4294967295|M>>>10),M=C+(V^z&(x^V))+O[1]+4129170786&4294967295,C=x+(M<<5&4294967295|M>>>27),M=z+(x^V&(C^x))+O[6]+3225465664&4294967295,z=C+(M<<9&4294967295|M>>>23),M=V+(C^x&(z^C))+O[11]+643717713&4294967295,V=z+(M<<14&4294967295|M>>>18),M=x+(z^C&(V^z))+O[0]+3921069994&4294967295,x=V+(M<<20&4294967295|M>>>12),M=C+(V^z&(x^V))+O[5]+3593408605&4294967295,C=x+(M<<5&4294967295|M>>>27),M=z+(x^V&(C^x))+O[10]+38016083&4294967295,z=C+(M<<9&4294967295|M>>>23),M=V+(C^x&(z^C))+O[15]+3634488961&4294967295,V=z+(M<<14&4294967295|M>>>18),M=x+(z^C&(V^z))+O[4]+3889429448&4294967295,x=V+(M<<20&4294967295|M>>>12),M=C+(V^z&(x^V))+O[9]+568446438&4294967295,C=x+(M<<5&4294967295|M>>>27),M=z+(x^V&(C^x))+O[14]+3275163606&4294967295,z=C+(M<<9&4294967295|M>>>23),M=V+(C^x&(z^C))+O[3]+4107603335&4294967295,V=z+(M<<14&4294967295|M>>>18),M=x+(z^C&(V^z))+O[8]+1163531501&4294967295,x=V+(M<<20&4294967295|M>>>12),M=C+(V^z&(x^V))+O[13]+2850285829&4294967295,C=x+(M<<5&4294967295|M>>>27),M=z+(x^V&(C^x))+O[2]+4243563512&4294967295,z=C+(M<<9&4294967295|M>>>23),M=V+(C^x&(z^C))+O[7]+1735328473&4294967295,V=z+(M<<14&4294967295|M>>>18),M=x+(z^C&(V^z))+O[12]+2368359562&4294967295,x=V+(M<<20&4294967295|M>>>12),M=C+(x^V^z)+O[5]+4294588738&4294967295,C=x+(M<<4&4294967295|M>>>28),M=z+(C^x^V)+O[8]+2272392833&4294967295,z=C+(M<<11&4294967295|M>>>21),M=V+(z^C^x)+O[11]+1839030562&4294967295,V=z+(M<<16&4294967295|M>>>16),M=x+(V^z^C)+O[14]+4259657740&4294967295,x=V+(M<<23&4294967295|M>>>9),M=C+(x^V^z)+O[1]+2763975236&4294967295,C=x+(M<<4&4294967295|M>>>28),M=z+(C^x^V)+O[4]+1272893353&4294967295,z=C+(M<<11&4294967295|M>>>21),M=V+(z^C^x)+O[7]+4139469664&4294967295,V=z+(M<<16&4294967295|M>>>16),M=x+(V^z^C)+O[10]+3200236656&4294967295,x=V+(M<<23&4294967295|M>>>9),M=C+(x^V^z)+O[13]+681279174&4294967295,C=x+(M<<4&4294967295|M>>>28),M=z+(C^x^V)+O[0]+3936430074&4294967295,z=C+(M<<11&4294967295|M>>>21),M=V+(z^C^x)+O[3]+3572445317&4294967295,V=z+(M<<16&4294967295|M>>>16),M=x+(V^z^C)+O[6]+76029189&4294967295,x=V+(M<<23&4294967295|M>>>9),M=C+(x^V^z)+O[9]+3654602809&4294967295,C=x+(M<<4&4294967295|M>>>28),M=z+(C^x^V)+O[12]+3873151461&4294967295,z=C+(M<<11&4294967295|M>>>21),M=V+(z^C^x)+O[15]+530742520&4294967295,V=z+(M<<16&4294967295|M>>>16),M=x+(V^z^C)+O[2]+3299628645&4294967295,x=V+(M<<23&4294967295|M>>>9),M=C+(V^(x|~z))+O[0]+4096336452&4294967295,C=x+(M<<6&4294967295|M>>>26),M=z+(x^(C|~V))+O[7]+1126891415&4294967295,z=C+(M<<10&4294967295|M>>>22),M=V+(C^(z|~x))+O[14]+2878612391&4294967295,V=z+(M<<15&4294967295|M>>>17),M=x+(z^(V|~C))+O[5]+4237533241&4294967295,x=V+(M<<21&4294967295|M>>>11),M=C+(V^(x|~z))+O[12]+1700485571&4294967295,C=x+(M<<6&4294967295|M>>>26),M=z+(x^(C|~V))+O[3]+2399980690&4294967295,z=C+(M<<10&4294967295|M>>>22),M=V+(C^(z|~x))+O[10]+4293915773&4294967295,V=z+(M<<15&4294967295|M>>>17),M=x+(z^(V|~C))+O[1]+2240044497&4294967295,x=V+(M<<21&4294967295|M>>>11),M=C+(V^(x|~z))+O[8]+1873313359&4294967295,C=x+(M<<6&4294967295|M>>>26),M=z+(x^(C|~V))+O[15]+4264355552&4294967295,z=C+(M<<10&4294967295|M>>>22),M=V+(C^(z|~x))+O[6]+2734768916&4294967295,V=z+(M<<15&4294967295|M>>>17),M=x+(z^(V|~C))+O[13]+1309151649&4294967295,x=V+(M<<21&4294967295|M>>>11),M=C+(V^(x|~z))+O[4]+4149444226&4294967295,C=x+(M<<6&4294967295|M>>>26),M=z+(x^(C|~V))+O[11]+3174756917&4294967295,z=C+(M<<10&4294967295|M>>>22),M=V+(C^(z|~x))+O[2]+718787259&4294967295,V=z+(M<<15&4294967295|M>>>17),M=x+(z^(V|~C))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+z&4294967295}i.prototype.u=function(R,C){C===void 0&&(C=R.length);for(var x=C-this.blockSize,O=this.B,V=this.h,z=0;z<C;){if(V==0)for(;z<=x;)r(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<C;)if(O[V++]=R.charCodeAt(z++),V==this.blockSize){r(this,O),V=0;break}}else for(;z<C;)if(O[V++]=R[z++],V==this.blockSize){r(this,O),V=0;break}}this.h=V,this.o+=C},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;var x=8*this.o;for(C=R.length-8;C<R.length;++C)R[C]=x&255,x/=256;for(this.u(R),R=Array(16),C=x=0;4>C;++C)for(var O=0;32>O;O+=8)R[x++]=this.g[C]>>>O&255;return R};function o(R,C){var x=u;return Object.prototype.hasOwnProperty.call(x,R)?x[R]:x[R]=C(R)}function a(R,C){this.h=C;for(var x=[],O=!0,V=R.length-1;0<=V;V--){var z=R[V]|0;O&&z==C||(x[V]=z,O=!1)}this.g=x}var u={};function d(R){return-128<=R&&128>R?o(R,function(C){return new a([C|0],0>C?-1:0)}):new a([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return y;if(0>R)return U(f(-R));for(var C=[],x=1,O=0;R>=x;O++)C[O]=R/x|0,x*=4294967296;return new a(C,0)}function _(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return U(_(R.substring(1),C));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=f(Math.pow(C,8)),O=y,V=0;V<R.length;V+=8){var z=Math.min(8,R.length-V),M=parseInt(R.substring(V,V+z),C);8>z?(z=f(Math.pow(C,z)),O=O.j(z).add(f(M))):(O=O.j(x),O=O.add(f(M)))}return O}var y=d(0),w=d(1),T=d(16777216);t=a.prototype,t.m=function(){if(N(this))return-U(this).m();for(var R=0,C=1,x=0;x<this.g.length;x++){var O=this.i(x);R+=(0<=O?O:4294967296+O)*C,C*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(A(this))return"0";if(N(this))return"-"+U(this).toString(R);for(var C=f(Math.pow(R,6)),x=this,O="";;){var V=H(x,C).g;x=P(x,V.j(C));var z=((0<x.g.length?x.g[0]:x.h)>>>0).toString(R);if(x=V,A(x))return z+O;for(;6>z.length;)z="0"+z;O=z+O}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function A(R){if(R.h!=0)return!1;for(var C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function N(R){return R.h==-1}t.l=function(R){return R=P(this,R),N(R)?-1:A(R)?0:1};function U(R){for(var C=R.g.length,x=[],O=0;O<C;O++)x[O]=~R.g[O];return new a(x,~R.h).add(w)}t.abs=function(){return N(this)?U(this):this},t.add=function(R){for(var C=Math.max(this.g.length,R.g.length),x=[],O=0,V=0;V<=C;V++){var z=O+(this.i(V)&65535)+(R.i(V)&65535),M=(z>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);O=M>>>16,z&=65535,M&=65535,x[V]=M<<16|z}return new a(x,x[x.length-1]&-2147483648?-1:0)};function P(R,C){return R.add(U(C))}t.j=function(R){if(A(this)||A(R))return y;if(N(this))return N(R)?U(this).j(U(R)):U(U(this).j(R));if(N(R))return U(this.j(U(R)));if(0>this.l(T)&&0>R.l(T))return f(this.m()*R.m());for(var C=this.g.length+R.g.length,x=[],O=0;O<2*C;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<R.g.length;V++){var z=this.i(O)>>>16,M=this.i(O)&65535,Ze=R.i(V)>>>16,An=R.i(V)&65535;x[2*O+2*V]+=M*An,k(x,2*O+2*V),x[2*O+2*V+1]+=z*An,k(x,2*O+2*V+1),x[2*O+2*V+1]+=M*Ze,k(x,2*O+2*V+1),x[2*O+2*V+2]+=z*Ze,k(x,2*O+2*V+2)}for(O=0;O<C;O++)x[O]=x[2*O+1]<<16|x[2*O];for(O=C;O<2*C;O++)x[O]=0;return new a(x,0)};function k(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function b(R,C){this.g=R,this.h=C}function H(R,C){if(A(C))throw Error("division by zero");if(A(R))return new b(y,y);if(N(R))return C=H(U(R),C),new b(U(C.g),U(C.h));if(N(C))return C=H(R,U(C)),new b(U(C.g),C.h);if(30<R.g.length){if(N(R)||N(C))throw Error("slowDivide_ only works with positive integers.");for(var x=w,O=C;0>=O.l(R);)x=$(x),O=$(O);var V=Q(x,1),z=Q(O,1);for(O=Q(O,2),x=Q(x,2);!A(O);){var M=z.add(O);0>=M.l(R)&&(V=V.add(x),z=M),O=Q(O,1),x=Q(x,1)}return C=P(R,V.j(C)),new b(V,C)}for(V=y;0<=R.l(C);){for(x=Math.max(1,Math.floor(R.m()/C.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),z=f(x),M=z.j(C);N(M)||0<M.l(R);)x-=O,z=f(x),M=z.j(C);A(z)&&(z=w),V=V.add(z),R=P(R,M)}return new b(V,R)}t.A=function(R){return H(this,R).h},t.and=function(R){for(var C=Math.max(this.g.length,R.g.length),x=[],O=0;O<C;O++)x[O]=this.i(O)&R.i(O);return new a(x,this.h&R.h)},t.or=function(R){for(var C=Math.max(this.g.length,R.g.length),x=[],O=0;O<C;O++)x[O]=this.i(O)|R.i(O);return new a(x,this.h|R.h)},t.xor=function(R){for(var C=Math.max(this.g.length,R.g.length),x=[],O=0;O<C;O++)x[O]=this.i(O)^R.i(O);return new a(x,this.h^R.h)};function $(R){for(var C=R.g.length+1,x=[],O=0;O<C;O++)x[O]=R.i(O)<<1|R.i(O-1)>>>31;return new a(x,R.h)}function Q(R,C){var x=C>>5;C%=32;for(var O=R.g.length-x,V=[],z=0;z<O;z++)V[z]=0<C?R.i(z+x)>>>C|R.i(z+x+1)<<32-C:R.i(z+x);return new a(V,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,VT=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=_,$s=a}).apply(typeof gv<"u"?gv:typeof self<"u"?self:typeof window<"u"?window:{});var Mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zT,Nl,UT,ih,Np,FT,BT,jT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,v){return c==Array.prototype||c==Object.prototype||(c[m]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mc=="object"&&Mc];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=n(this);function r(c,m){if(m)e:{var v=i;c=c.split(".");for(var I=0;I<c.length-1;I++){var B=c[I];if(!(B in v))break e;v=v[B]}c=c[c.length-1],I=v[c],m=m(I),m!=I&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}function o(c,m){c instanceof String&&(c+="");var v=0,I=!1,B={next:function(){if(!I&&v<c.length){var q=v++;return{value:m(q,c[q]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}r("Array.prototype.values",function(c){return c||function(){return o(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function f(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function _(c,m,v){return c.call.apply(c.bind,arguments)}function y(c,m,v){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),c.apply(m,B)}}return function(){return c.apply(m,arguments)}}function w(c,m,v){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:y,w.apply(null,arguments)}function T(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function A(c,m){function v(){}v.prototype=m.prototype,c.aa=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(I,B,q){for(var ie=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ie[Ke-2]=arguments[Ke];return m.prototype[B].apply(I,ie)}}function N(c){const m=c.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=c[I];return v}return[]}function U(c,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(d(I)){const B=c.length||0,q=I.length||0;c.length=B+q;for(let ie=0;ie<q;ie++)c[B+ie]=I[ie]}else c.push(I)}}class P{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function k(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=u.navigator;return c&&(c=c.userAgent)?c:""}function H(c){return H[" "](c),c}H[" "]=function(){};var $=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function Q(c,m,v){for(const I in c)m.call(v,c[I],I,c)}function R(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function C(c){const m={};for(const v in c)m[v]=c[v];return m}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,m){let v,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(v in I)c[v]=I[v];for(let q=0;q<x.length;q++)v=x[q],Object.prototype.hasOwnProperty.call(I,v)&&(c[v]=I[v])}}function V(c){var m=1;c=c.split(":");const v=[];for(;0<m&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function z(c){u.setTimeout(()=>{throw c},0)}function M(){var c=_e;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class Ze{constructor(){this.h=this.g=null}add(m,v){const I=An.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var An=new P(()=>new ze,c=>c.reset());class ze{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Mt,Z=!1,_e=new Ze,te=()=>{const c=u.Promise.resolve(void 0);Mt=()=>{c.then(me)}};var me=()=>{for(var c;c=M();){try{c.h.call(c.g)}catch(v){z(v)}var m=An;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}Z=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Fe=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};u.addEventListener("test",v,m),u.removeEventListener("test",v,m)}catch{}return c}();function F(c,m){if(Ae.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if($){e:{try{H(m.nodeName);var B=!0;break e}catch{}B=!1}B||(m=null)}}else v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ne[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&F.aa.h.call(this)}}A(F,Ae);var ne={2:"touch",3:"pen",4:"mouse"};F.prototype.h=function(){F.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),xe=0;function et(c,m,v,I,B){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=B,this.key=++xe,this.da=this.fa=!1}function nt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ge(c){this.src=c,this.g={},this.h=0}Ge.prototype.add=function(c,m,v,I,B){var q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);var ie=Me(c,m,I,B);return-1<ie?(m=c[ie],v||(m.fa=!1)):(m=new et(m,this.src,q,!!I,B),m.fa=v,c.push(m)),m};function Oe(c,m){var v=m.type;if(v in c.g){var I=c.g[v],B=Array.prototype.indexOf.call(I,m,void 0),q;(q=0<=B)&&Array.prototype.splice.call(I,B,1),q&&(nt(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Me(c,m,v,I){for(var B=0;B<c.length;++B){var q=c[B];if(!q.da&&q.listener==m&&q.capture==!!v&&q.ha==I)return B}return-1}var Ce="closure_lm_"+(1e6*Math.random()|0),it={};function ke(c,m,v,I,B){if(Array.isArray(m)){for(var q=0;q<m.length;q++)ke(c,m[q],v,I,B);return null}return v=ys(v),c&&c[ue]?c.K(m,v,f(I)?!!I.capture:!1,B):$e(c,m,v,!1,I,B)}function $e(c,m,v,I,B,q){if(!m)throw Error("Invalid event type");var ie=f(B)?!!B.capture:!!B,Ke=ii(c);if(Ke||(c[Ce]=Ke=new Ge(c)),v=Ke.add(m,v,I,ie,q),v.proxy)return v;if(I=ot(),v.proxy=I,I.src=c,I.listener=v,c.addEventListener)Fe||(B=ie),B===void 0&&(B=!1),c.addEventListener(m.toString(),I,B);else if(c.attachEvent)c.attachEvent(zn(m.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ot(){function c(v){return m.call(c.src,c.listener,v)}const m=Ei;return c}function At(c,m,v,I,B){if(Array.isArray(m))for(var q=0;q<m.length;q++)At(c,m[q],v,I,B);else I=f(I)?!!I.capture:!!I,v=ys(v),c&&c[ue]?(c=c.i,m=String(m).toString(),m in c.g&&(q=c.g[m],v=Me(q,v,I,B),-1<v&&(nt(q[v]),Array.prototype.splice.call(q,v,1),q.length==0&&(delete c.g[m],c.h--)))):c&&(c=ii(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Me(m,v,I,B)),(v=-1<c?m[c]:null)&&_n(v))}function _n(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[ue])Oe(m.i,c);else{var v=c.type,I=c.proxy;m.removeEventListener?m.removeEventListener(v,I,c.capture):m.detachEvent?m.detachEvent(zn(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=ii(m))?(Oe(v,c),v.h==0&&(v.src=null,m[Ce]=null)):nt(c)}}}function zn(c){return c in it?it[c]:it[c]="on"+c}function Ei(c,m){if(c.da)c=!0;else{m=new F(m,this);var v=c.listener,I=c.ha||c.src;c.fa&&_n(c),c=v.call(I,m)}return c}function ii(c){return c=c[Ce],c instanceof Ge?c:null}var gs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ys(c){return typeof c=="function"?c:(c[gs]||(c[gs]=function(m){return c.handleEvent(m)}),c[gs])}function Et(){we.call(this),this.i=new Ge(this),this.M=this,this.F=null}A(Et,we),Et.prototype[ue]=!0,Et.prototype.removeEventListener=function(c,m,v,I){At(this,c,m,v,I)};function xt(c,m){var v,I=c.F;if(I)for(v=[];I;I=I.F)v.push(I);if(c=c.M,I=m.type||m,typeof m=="string")m=new Ae(m,c);else if(m instanceof Ae)m.target=m.target||c;else{var B=m;m=new Ae(I,c),O(m,B)}if(B=!0,v)for(var q=v.length-1;0<=q;q--){var ie=m.g=v[q];B=ji(ie,I,!0,m)&&B}if(ie=m.g=c,B=ji(ie,I,!0,m)&&B,B=ji(ie,I,!1,m)&&B,v)for(q=0;q<v.length;q++)ie=m.g=v[q],B=ji(ie,I,!1,m)&&B}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var v=c.g[m],I=0;I<v.length;I++)nt(v[I]);delete c.g[m],c.h--}}this.F=null},Et.prototype.K=function(c,m,v,I){return this.i.add(String(c),m,!1,v,I)},Et.prototype.L=function(c,m,v,I){return this.i.add(String(c),m,!0,v,I)};function ji(c,m,v,I){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var B=!0,q=0;q<m.length;++q){var ie=m[q];if(ie&&!ie.da&&ie.capture==v){var Ke=ie.listener,Rt=ie.ha||ie.src;ie.fa&&Oe(c.i,ie),B=Ke.call(Rt,I)!==!1&&B}}return B&&!I.defaultPrevented}function vs(c,m,v){if(typeof c=="function")v&&(c=w(c,v));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:u.setTimeout(c,m||0)}function ws(c){c.g=vs(()=>{c.g=null,c.i&&(c.i=!1,ws(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Es extends we{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ws(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(c){we.call(this),this.h=c,this.g={}}A(Hi,we);var Ts=[];function X(c){Q(c.g,function(m,v){this.g.hasOwnProperty(v)&&_n(m)},c),c.g={}}Hi.prototype.N=function(){Hi.aa.N.call(this),X(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var re=u.JSON.stringify,ce=u.JSON.parse,ae=class{stringify(c){return u.JSON.stringify(c,void 0)}parse(c){return u.JSON.parse(c,void 0)}};function fe(){}fe.prototype.h=null;function Le(c){return c.h||(c.h=c.i())}function rt(){}var Be={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gn(){Ae.call(this,"d")}A(gn,Ae);function ri(){Ae.call(this,"c")}A(ri,Ae);var Un={},yo=null;function wr(){return yo=yo||new Et}Un.La="serverreachability";function Ut(c){Ae.call(this,Un.La,c)}A(Ut,Ae);function yn(c){const m=wr();xt(m,new Ut(m))}Un.STAT_EVENT="statevent";function vo(c,m){Ae.call(this,Un.STAT_EVENT,c),this.stat=m}A(vo,Ae);function qt(c){const m=wr();xt(m,new vo(m,c))}Un.Ma="timingevent";function Wu(c,m){Ae.call(this,Un.Ma,c),this.size=m}A(Wu,Ae);function Ss(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){c()},m)}function Is(){this.g=!0}Is.prototype.xa=function(){this.g=!1};function Fn(c,m,v,I,B,q){c.info(function(){if(c.g)if(q)for(var ie="",Ke=q.split("&"),Rt=0;Rt<Ke.length;Rt++){var je=Ke[Rt].split("=");if(1<je.length){var Je=je[0];je=je[1];var mt=Je.split("_");ie=2<=mt.length&&mt[1]=="type"?ie+(Je+"="+je+"&"):ie+(Je+"=redacted&")}}else ie=null;else ie=q;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+m+`
`+v+`
`+ie})}function de(c,m,v,I,B,q,ie){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+m+`
`+v+`
`+q+" "+ie})}function Wi(c,m,v,I){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Gu(c,v)+(I?" "+I:"")})}function qu(c,m){c.info(function(){return"TIMEOUT: "+m})}Is.prototype.info=function(){};function Gu(c,m){if(!c.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var I=v[c];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var q=B[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ie=1;ie<B.length;ie++)B[ie]=""}}}}return re(v)}catch{return m}}var Cs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Eo;function si(){}A(si,fe),si.prototype.g=function(){return new XMLHttpRequest},si.prototype.i=function(){return{}},Eo=new si;function oi(c,m,v,I){this.j=c,this.i=m,this.l=v,this.R=I||1,this.U=new Hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zu}function Zu(){this.i=null,this.g="",this.h=!1}var $u={},Wa={};function qa(c,m,v){c.L=1,c.v=jn(Tt(m)),c.m=v,c.P=!0,Ga(c,null)}function Ga(c,m){c.F=Date.now(),So(c),c.A=Tt(c.v);var v=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),Xu(v.i,"t",I),c.C=0,v=c.j.J,c.h=new Zu,c.g=rc(c.j,v?m:null,!c.m),0<c.O&&(c.M=new Es(w(c.Y,c,c.g),c.O)),m=c.U,v=c.g,I=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(Ts[0]=B.toString()),B=Ts);for(var q=0;q<B.length;q++){var ie=ke(v,B[q],I||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),yn(),Fn(c.i,c.u,c.A,c.l,c.R,c.m)}oi.prototype.ca=function(c){c=c.target;const m=this.M;m&&ln(c)==3?m.j():this.Y(c)},oi.prototype.Y=function(c){try{if(c==this.g)e:{const mt=ln(this.g);var m=this.g.Ba();const Pr=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||ll(this.g)))){this.J||mt!=4||m==7||(m==8||0>=Pr?yn(3):yn(2)),Za(this);var v=this.g.Z();this.X=v;t:if(Ku(this)){var I=ll(this.g);c="";var B=I.length,q=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qi(this),ks(this);var ie="";break t}this.h.i=new u.TextDecoder}for(m=0;m<B;m++)this.h.h=!0,c+=this.h.i.decode(I[m],{stream:!(q&&m==B-1)});I.length=0,this.h.g+=c,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=v==200,de(this.i,this.u,this.A,this.l,this.R,mt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Rt=this.g;if((Ke=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Ke)){var je=Ke;break t}}je=null}if(v=je)Wi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ps(this,v);else{this.o=!1,this.s=3,qt(12),qi(this),ks(this);break e}}if(this.P){v=!0;let Ct;for(;!this.J&&this.C<ie.length;)if(Ct=To(this,ie),Ct==Wa){mt==4&&(this.s=4,qt(14),v=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==$u){this.s=4,qt(15),Wi(this.i,this.l,ie,"[Invalid Chunk]"),v=!1;break}else Wi(this.i,this.l,Ct,null),Ps(this,Ct);if(Ku(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||ie.length!=0||this.h.h||(this.s=1,qt(16),v=!1),this.o=this.o&&v,!v)Wi(this.i,this.l,ie,"[Invalid Chunked Response]"),qi(this),ks(this);else if(0<ie.length&&!this.W){this.W=!0;var Je=this.j;Je.g==this&&Je.ba&&!Je.M&&(Je.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),bo(Je),Je.M=!0,qt(11))}}else Wi(this.i,this.l,ie,null),Ps(this,ie);mt==4&&qi(this),this.o&&!this.J&&(mt==4?cl(this.j,this):(this.o=!1,So(this)))}else Od(this.g),v==400&&0<ie.indexOf("Unknown SID")?(this.s=3,qt(12)):(this.s=0,qt(13)),qi(this),ks(this)}}}catch{}finally{}};function Ku(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function To(c,m){var v=c.C,I=m.indexOf(`
`,v);return I==-1?Wa:(v=Number(m.substring(v,I)),isNaN(v)?$u:(I+=1,I+v>m.length?Wa:(m=m.slice(I,I+v),c.C=I+v,m)))}oi.prototype.cancel=function(){this.J=!0,qi(this)};function So(c){c.S=Date.now()+c.I,Qu(c,c.I)}function Qu(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ss(w(c.ba,c),m)}function Za(c){c.B&&(u.clearTimeout(c.B),c.B=null)}oi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(qu(this.i,this.A),this.L!=2&&(yn(),qt(17)),qi(this),this.s=2,ks(this)):Qu(this,this.S-c)};function ks(c){c.j.G==0||c.J||cl(c.j,c)}function qi(c){Za(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,X(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function Ps(c,m){try{var v=c.j;if(v.G!=0&&(v.g==c||De(v.h,c))){if(!c.K&&De(v.h,c)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Oo(v),Ro(v);else break e;Lo(v),qt(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ss(w(v.Za,v),6e3));if(1>=Er(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Qi(v,11)}else if((c.K||v.g==c)&&Oo(v),!k(m))for(B=v.Da.g.parse(m),m=0;m<B.length;m++){let je=B[m];if(v.T=je[0],je=je[1],v.G==2)if(je[0]=="c"){v.K=je[1],v.ia=je[2];const Je=je[3];Je!=null&&(v.la=Je,v.j.info("VER="+v.la));const mt=je[4];mt!=null&&(v.Aa=mt,v.j.info("SVER="+v.Aa));const Pr=je[5];Pr!=null&&typeof Pr=="number"&&0<Pr&&(I=1.5*Pr,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const Ct=c.g;if(Ct){const Do=Ct.g?Ct.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Do){var q=I.h;q.g||Do.indexOf("spdy")==-1&&Do.indexOf("quic")==-1&&Do.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(tt(q,q.h),q.h=null))}if(I.D){const Ii=Ct.g?Ct.g.getResponseHeader("X-HTTP-Session-Id"):null;Ii&&(I.ya=Ii,Ee(I.I,I.D,Ii))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var ie=c;if(I.qa=Mo(I,I.J?I.ia:null,I.W),ie.K){xs(I.h,ie);var Ke=ie,Rt=I.L;Rt&&(Ke.I=Rt),Ke.B&&(Za(Ke),So(Ke)),I.g=ie}else ui(I);0<v.i.length&&kr(v)}else je[0]!="stop"&&je[0]!="close"||Qi(v,7);else v.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Qi(v,7):xo(v):je[0]!="noop"&&v.l&&v.l.ta(je),v.v=0)}}yn(4)}catch{}}var As=class{constructor(c,m){this.g=c,this.map=m}};function $a(c){this.l=c||10,u.PerformanceNavigationTiming?(c=u.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ka(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Er(c){return c.h?1:c.g?c.g.size:0}function De(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function tt(c,m){c.g?c.g.add(m):c.h=m}function xs(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}$a.prototype.cancel=function(){if(this.i=Gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Gi(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.D);return m}return N(c.i)}function Tr(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(d(c)){for(var m=[],v=c.length,I=0;I<v;I++)m.push(c[I]);return m}m=[],v=0;for(I in c)m[v++]=c[I];return m}function Qa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(d(c)||typeof c=="string"){var m=[];c=c.length;for(var v=0;v<c;v++)m.push(v);return m}m=[],v=0;for(const I in c)m[v++]=I;return m}}}function Pe(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(d(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var v=Qa(c),I=Tr(c),B=I.length,q=0;q<B;q++)m.call(void 0,I[q],v&&v[q],c)}var ht=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xa(c,m){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var I=c[v].indexOf("="),B=null;if(0<=I){var q=c[v].substring(0,I);B=c[v].substring(I+1)}else q=c[v];m(q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Bn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Bn){this.h=c.h,Io(this,c.j),this.o=c.o,this.g=c.g,Zi(this,c.s),this.l=c.l;var m=c.i,v=new $i;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Ti(this,v),this.m=c.m}else c&&(m=String(c).match(ht))?(this.h=!1,Io(this,m[1]||"",!0),this.o=ai(m[2]||""),this.g=ai(m[3]||"",!0),Zi(this,m[4]),this.l=ai(m[5]||"",!0),Ti(this,m[6]||"",!0),this.m=ai(m[7]||"")):(this.h=!1,this.i=new $i(null,this.h))}Bn.prototype.toString=function(){var c=[],m=this.j;m&&c.push(li(m,Sr,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(li(m,Sr,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(li(v,v.charAt(0)=="/"?el:Ja,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",li(v,tl)),c.join("")};function Tt(c){return new Bn(c)}function Io(c,m,v){c.j=v?ai(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Zi(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function Ti(c,m,v){m instanceof $i?(c.i=m,Hn(c.i,c.h)):(v||(m=li(m,Co)),c.i=new $i(m,c.h))}function Ee(c,m,v){c.i.set(m,v)}function jn(c){return Ee(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ai(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function li(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,Ya),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ya(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Sr=/[#\/\?@]/g,Ja=/[#\?:]/g,el=/[#\?]/g,Co=/[#\?@]/g,tl=/#/g;function $i(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function xn(c){c.g||(c.g=new Map,c.h=0,c.i&&Xa(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}t=$i.prototype,t.add=function(c,m){xn(this),this.i=null,c=ge(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function nl(c,m){xn(c),m=ge(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function ko(c,m){return xn(c),m=ge(c,m),c.g.has(m)}t.forEach=function(c,m){xn(this),this.g.forEach(function(v,I){v.forEach(function(B){c.call(m,B,I,this)},this)},this)},t.na=function(){xn(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const B=c[I];for(let q=0;q<B.length;q++)v.push(m[I])}return v},t.V=function(c){xn(this);let m=[];if(typeof c=="string")ko(this,c)&&(m=m.concat(this.g.get(ge(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)m=m.concat(c[v])}return m},t.set=function(c,m){return xn(this),this.i=null,c=ge(this,c),ko(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function Xu(c,m,v){nl(c,m),0<v.length&&(c.i=null,c.g.set(ge(c,m),N(v)),c.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const q=encodeURIComponent(String(I)),ie=this.V(I);for(I=0;I<ie.length;I++){var B=q;ie[I]!==""&&(B+="="+encodeURIComponent(String(ie[I]))),c.push(B)}}return this.i=c.join("&")};function ge(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Hn(c,m){m&&!c.j&&(xn(c),c.i=null,c.g.forEach(function(v,I){var B=I.toLowerCase();I!=B&&(nl(this,I),Xu(this,B,v))},c)),c.j=m}function Ye(c,m){const v=new Is;if(u.Image){const I=new Image;I.onload=T(Wn,v,"TestLoadImage: loaded",!0,m,I),I.onerror=T(Wn,v,"TestLoadImage: error",!1,m,I),I.onabort=T(Wn,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=T(Wn,v,"TestLoadImage: timeout",!1,m,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else m(!1)}function Yu(c,m){const v=new Is,I=new AbortController,B=setTimeout(()=>{I.abort(),Wn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:I.signal}).then(q=>{clearTimeout(B),q.ok?Wn(v,"TestPingServer: ok",!0,m):Wn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(B),Wn(v,"TestPingServer: error",!1,m)})}function Wn(c,m,v,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(v)}catch{}}function il(){this.g=new ae}function rl(c,m,v){const I=v||"";try{Pe(c,function(B,q){let ie=B;f(B)&&(ie=re(B)),m.push(I+q+"="+encodeURIComponent(ie))})}catch(B){throw m.push(I+"type="+encodeURIComponent("_badmap")),B}}function qn(c){this.l=c.Ub||null,this.j=c.eb||!1}A(qn,fe),qn.prototype.g=function(){return new Ir(this.l,this.j)},qn.prototype.i=function(c){return function(){return c}}({});function Ir(c,m){Et.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Ir,Et),t=Ir.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Rn(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||u).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pt(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Rn(this)),this.g&&(this.readyState=3,Rn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cr(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cr(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?pt(this):Rn(this),this.readyState==3&&Cr(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,pt(this))},t.Qa=function(c){this.g&&(this.response=c,pt(this))},t.ga=function(){this.g&&pt(this)};function pt(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Rn(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function Rn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ir.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function sl(c){let m="";return Q(c,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Po(c,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=sl(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Ee(c,m,v))}function dt(c){Et.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(dt,Et);var Ju=/^https?$/i,ol=["POST","PUT"];t=dt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Eo.g(),this.v=this.o?Le(this.o):Le(Eo),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(q){ec(this,q);return}if(c=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)v.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const q of I.keys())v.set(q,I.get(q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),B=u.FormData&&c instanceof u.FormData,!(0<=Array.prototype.indexOf.call(ol,m,void 0))||I||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ie]of v)this.g.setRequestHeader(q,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vn(this),this.u=!0,this.g.send(c),this.u=!1}catch(q){ec(this,q)}};function ec(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,al(c),Ao(c)}function al(c){c.A||(c.A=!0,xt(c,"complete"),xt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,xt(this,"complete"),xt(this,"abort"),Ao(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ao(this,!0)),dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?be(this):this.bb())},t.bb=function(){be(this)};function be(c){if(c.h&&typeof a<"u"&&(!c.v[1]||ln(c)!=4||c.Z()!=2)){if(c.u&&ln(c)==4)vs(c.Ea,0,c);else if(xt(c,"readystatechange"),ln(c)==4){c.h=!1;try{const ie=c.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=ie===0){var B=String(c.D).match(ht)[1]||null;!B&&u.self&&u.self.location&&(B=u.self.location.protocol.slice(0,-1)),I=!Ju.test(B?B.toLowerCase():"")}v=I}if(v)xt(c,"complete"),xt(c,"success");else{c.m=6;try{var q=2<ln(c)?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.Z()+"]",al(c)}}finally{Ao(c)}}}}function Ao(c,m){if(c.g){vn(c);const v=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||xt(c,"ready");try{v.onreadystatechange=I}catch{}}}function vn(c){c.I&&(u.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function ln(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),ce(m)}};function ll(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Od(c){const m={};c=(c.g&&2<=ln(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(k(c[I]))continue;var v=V(c[I]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=m[B]||[];m[B]=q,q.push(v)}R(m,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ki(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function tc(c){this.Aa=0,this.i=[],this.j=new Is,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ki("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ki("baseRetryDelayMs",5e3,c),this.cb=Ki("retryDelaySeedMs",1e4,c),this.Wa=Ki("forwardChannelMaxRetries",2,c),this.wa=Ki("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new $a(c&&c.concurrentRequestLimit),this.Da=new il,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tc.prototype,t.la=8,t.G=1,t.connect=function(c,m,v,I){qt(0),this.W=c,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=Mo(this,null,this.W),kr(this)};function xo(c){if(nc(c),c.G==3){var m=c.U++,v=Tt(c.I);if(Ee(v,"SID",c.K),Ee(v,"RID",m),Ee(v,"TYPE","terminate"),Rs(c,v),m=new oi(c,c.j,m),m.L=2,m.v=jn(Tt(v)),v=!1,u.navigator&&u.navigator.sendBeacon)try{v=u.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&u.Image&&(new Image().src=m.v,v=!0),v||(m.g=rc(m.j,null),m.g.ea(m.v)),m.F=Date.now(),So(m)}ic(c)}function Ro(c){c.g&&(bo(c),c.g.cancel(),c.g=null)}function nc(c){Ro(c),c.u&&(u.clearTimeout(c.u),c.u=null),Oo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&u.clearTimeout(c.s),c.s=null)}function kr(c){if(!Ka(c.h)&&!c.s){c.s=!0;var m=c.Ga;Mt||te(),Z||(Mt(),Z=!0),_e.add(m,c),c.B=0}}function Md(c,m){return Er(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ss(w(c.Ga,c,m),hl(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new oi(this,this.j,c);let q=this.o;if(this.S&&(q?(q=C(q),O(q,this.S)):q=this.S),this.m!==null||this.O||(B.H=q,q=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=ul(this,B,m),v=Tt(this.I),Ee(v,"RID",c),Ee(v,"CVER",22),this.D&&Ee(v,"X-HTTP-Session-Id",this.D),Rs(this,v),q&&(this.O?m="headers="+encodeURIComponent(String(sl(q)))+"&"+m:this.m&&Po(v,this.m,q)),tt(this.h,B),this.Ua&&Ee(v,"TYPE","init"),this.P?(Ee(v,"$req",m),Ee(v,"SID","null"),B.T=!0,qa(B,v,null)):qa(B,v,m),this.G=2}}else this.G==3&&(c?Ln(this,c):this.i.length==0||Ka(this.h)||Ln(this))};function Ln(c,m){var v;m?v=m.l:v=c.U++;const I=Tt(c.I);Ee(I,"SID",c.K),Ee(I,"RID",v),Ee(I,"AID",c.T),Rs(c,I),c.m&&c.o&&Po(I,c.m,c.o),v=new oi(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),m&&(c.i=m.D.concat(c.i)),m=ul(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),tt(c.h,v),qa(v,I,m)}function Rs(c,m){c.H&&Q(c.H,function(v,I){Ee(m,I,v)}),c.l&&Pe({},function(v,I){Ee(m,I,v)})}function ul(c,m,v){v=Math.min(c.i.length,v);var I=c.l?w(c.l.Na,c.l,c):null;e:{var B=c.i;let q=-1;for(;;){const ie=["count="+v];q==-1?0<v?(q=B[0].g,ie.push("ofs="+q)):q=0:ie.push("ofs="+q);let Ke=!0;for(let Rt=0;Rt<v;Rt++){let je=B[Rt].g;const Je=B[Rt].map;if(je-=q,0>je)q=Math.max(0,B[Rt].g-100),Ke=!1;else try{rl(Je,ie,"req"+je+"_")}catch{I&&I(Je)}}if(Ke){I=ie.join("&");break e}}}return c=c.i.splice(0,v),m.D=c,I}function ui(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Mt||te(),Z||(Mt(),Z=!0),_e.add(m,c),c.v=0}}function Lo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ss(w(c.Fa,c),hl(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,No(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ss(w(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qt(10),Ro(this),No(this))};function bo(c){c.A!=null&&(u.clearTimeout(c.A),c.A=null)}function No(c){c.g=new oi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=Tt(c.qa);Ee(m,"RID","rpc"),Ee(m,"SID",c.K),Ee(m,"AID",c.T),Ee(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ee(m,"TO",c.ja),Ee(m,"TYPE","xmlhttp"),Rs(c,m),c.m&&c.o&&Po(m,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=jn(Tt(m)),v.m=null,v.P=!0,Ga(v,c)}t.Za=function(){this.C!=null&&(this.C=null,Ro(this),Lo(this),qt(19))};function Oo(c){c.C!=null&&(u.clearTimeout(c.C),c.C=null)}function cl(c,m){var v=null;if(c.g==m){Oo(c),bo(c),c.g=null;var I=2}else if(De(c.h,m))v=m.D,xs(c.h,m),I=1;else return;if(c.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var B=c.B;I=wr(),xt(I,new Wu(I,v)),kr(c)}else ui(c);else if(B=m.s,B==3||B==0&&0<m.X||!(I==1&&Md(c,m)||I==2&&Lo(c)))switch(v&&0<v.length&&(m=c.h,m.i=m.i.concat(v)),B){case 1:Qi(c,5);break;case 4:Qi(c,10);break;case 3:Qi(c,6);break;default:Qi(c,2)}}}function hl(c,m){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*m}function Qi(c,m){if(c.j.info("Error code "+m),m==2){var v=w(c.fb,c),I=c.Xa;const B=!I;I=new Bn(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Io(I,"https"),jn(I),B?Ye(I.toString(),v):Yu(I.toString(),v)}else qt(2);c.G=0,c.l&&c.l.sa(m),ic(c),nc(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function ic(c){if(c.G=0,c.ka=[],c.l){const m=Gi(c.h);(m.length!=0||c.i.length!=0)&&(U(c.ka,m),U(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function Mo(c,m,v){var I=v instanceof Bn?Tt(v):new Bn(v);if(I.g!="")m&&(I.g=m+"."+I.g),Zi(I,I.s);else{var B=u.location;I=B.protocol,m=m?m+"."+B.hostname:B.hostname,B=+B.port;var q=new Bn(null);I&&Io(q,I),m&&(q.g=m),B&&Zi(q,B),v&&(q.l=v),I=q}return v=c.D,m=c.ya,v&&m&&Ee(I,v,m),Ee(I,"VER",c.la),Rs(c,I),I}function rc(c,m,v){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new dt(new qn({eb:v})):new dt(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dl(){}t=dl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ls(){}Ls.prototype.g=function(c,m){return new Ft(c,m)};function Ft(c,m){Et.call(this),this.g=new tc(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!k(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!k(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Gn(this)}A(Ft,Et),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){xo(this.g)},Ft.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=re(c),c=v);m.i.push(new As(m.Ya++,c)),m.G==3&&kr(m)},Ft.prototype.N=function(){this.g.l=null,delete this.j,xo(this.g),delete this.g,Ft.aa.N.call(this)};function Si(c){gn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}A(Si,gn);function sc(){ri.call(this),this.status=1}A(sc,ri);function Gn(c){this.g=c}A(Gn,dl),Gn.prototype.ua=function(){xt(this.g,"a")},Gn.prototype.ta=function(c){xt(this.g,new Si(c))},Gn.prototype.sa=function(c){xt(this.g,new sc)},Gn.prototype.ra=function(){xt(this.g,"b")},Ls.prototype.createWebChannel=Ls.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,jT=function(){return new Ls},BT=function(){return wr()},FT=Un,Np={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cs.NO_ERROR=0,Cs.TIMEOUT=8,Cs.HTTP_ERROR=6,ih=Cs,wo.COMPLETE="complete",UT=wo,rt.EventType=Be,Be.OPEN="a",Be.CLOSE="b",Be.ERROR="c",Be.MESSAGE="d",Et.prototype.listen=Et.prototype.K,Nl=rt,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,zT=dt}).apply(typeof Mc<"u"?Mc:typeof self<"u"?self:typeof window<"u"?window:{});const yv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let za="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new t_("@firebase/firestore");function Cl(){return ro.logLevel}function he(t,...e){if(ro.logLevel<=Ue.DEBUG){const n=e.map(f_);ro.debug(`Firestore (${za}): ${t}`,...n)}}function _r(t,...e){if(ro.logLevel<=Ue.ERROR){const n=e.map(f_);ro.error(`Firestore (${za}): ${t}`,...n)}}function Ca(t,...e){if(ro.logLevel<=Ue.WARN){const n=e.map(f_);ro.warn(`Firestore (${za}): ${t}`,...n)}}function f_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t="Unexpected state"){const e=`FIRESTORE (${za}) INTERNAL ASSERTION FAILED: `+t;throw _r(e),new Error(e)}function Xe(t,e){t||Te()}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class JL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class e1{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new es;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new es,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},u=d=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new es)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Xe(typeof i.accessToken=="string"),new HT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new nn(e)}}class t1{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class n1{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new t1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class i1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Xe(this.o===void 0);const i=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,he("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xe(typeof n.token=="string"),this.R=n.token,new i1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=s1(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function qe(t,e){return t<e?-1:t>e?1:0}function ka(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new zt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new zt(0,0))}static max(){return new Se(new zt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n,i){n===void 0?n=0:n>e.length&&Te(),i===void 0?i=e.length-n:i>e.length-n&&Te(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return yu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yu?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class lt extends yu{construct(e,n,i){return new lt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new lt(n)}static emptyPath(){return new lt([])}}const o1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends yu{construct(e,n,i){return new $t(e,n,i)}static isValidIdentifier(e){return o1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $t(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new le(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new le(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new le(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(n)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(lt.fromString(e))}static fromName(e){return new pe(lt.fromString(e).popFirst(5))}static empty(){return new pe(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new lt(e.slice()))}}function a1(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(i===1e9?new zt(n+1,0):new zt(n,i));return new os(r,pe.empty(),e)}function l1(t){return new os(t.readTime,t.key,-1)}class os{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new os(Se.min(),pe.empty(),-1)}static max(){return new os(Se.max(),pe.empty(),-1)}}function u1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class h1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==c1)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,i)=>{n(e)})}static reject(e){return new J((n,i)=>{i(e)})}static waitFor(e){return new J((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},d=>i(d))}),a=!0,o===r&&n()})}static or(e){let n=J.resolve(!1);for(const i of e)n=n.next(r=>r?J.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new J((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(_=>{a[f]=_,++u,u===o&&i(a)},_=>r(_))}})}static doWhile(e,n){return new J((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function d1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Uu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}p_.oe=-1;function wd(t){return t==null}function Fh(t){return t===0&&1/t==-1/0}function f1(t){return typeof t=="number"&&Number.isInteger(t)&&!Fh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ua(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dc(this.root,e,this.comparator,!0)}}class Dc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Zt.RED,this.left=r??Zt.EMPTY,this.right=o??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Zt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Zt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wv(this.data.getIterator())}getIteratorFrom(e){return new wv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qt(this.comparator);return n.data=e,n}}class wv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new pi([])}unionWith(e){let n=new Qt($t.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new pi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ka(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new GT("Invalid base64 string: "+o):o}}(e);return new Yt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const p1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(t){if(Xe(!!t),typeof t=="string"){let e=0;const n=p1.exec(t);if(Xe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:kt(t.seconds),nanos:kt(t.nanos)}}function kt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function so(t){return typeof t=="string"?Yt.fromBase64String(t):Yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function __(t){const e=t.mapValue.fields.__previous_value__;return m_(e)?__(e):e}function vu(t){const e=as(t.mapValue.fields.__local_write_time__.timestampValue);return new zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n,i,r,o,a,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f}}class wu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new wu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof wu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc={mapValue:{}};function oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?m_(t)?4:g1(t)?9007199254740991:_1(t)?10:11:Te()}function Fi(t,e){if(t===e)return!0;const n=oo(t);if(n!==oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vu(t).isEqual(vu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=as(r.timestampValue),u=as(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return so(r.bytesValue).isEqual(so(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return kt(r.geoPointValue.latitude)===kt(o.geoPointValue.latitude)&&kt(r.geoPointValue.longitude)===kt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return kt(r.integerValue)===kt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=kt(r.doubleValue),u=kt(o.doubleValue);return a===u?Fh(a)===Fh(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return ka(t.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(vv(a)!==vv(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!Fi(a[d],u[d])))return!1;return!0}(t,e);default:return Te()}}function Eu(t,e){return(t.values||[]).find(n=>Fi(n,e))!==void 0}function Pa(t,e){if(t===e)return 0;const n=oo(t),i=oo(e);if(n!==i)return qe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=kt(o.integerValue||o.doubleValue),d=kt(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(t,e);case 3:return Ev(t.timestampValue,e.timestampValue);case 4:return Ev(vu(t),vu(e));case 5:return qe(t.stringValue,e.stringValue);case 6:return function(o,a){const u=so(o),d=so(a);return u.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),d=a.split("/");for(let f=0;f<u.length&&f<d.length;f++){const _=qe(u[f],d[f]);if(_!==0)return _}return qe(u.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=qe(kt(o.latitude),kt(a.latitude));return u!==0?u:qe(kt(o.longitude),kt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Tv(t.arrayValue,e.arrayValue);case 10:return function(o,a){var u,d,f,_;const y=o.fields||{},w=a.fields||{},T=(u=y.value)===null||u===void 0?void 0:u.arrayValue,A=(d=w.value)===null||d===void 0?void 0:d.arrayValue,N=qe(((f=T==null?void 0:T.values)===null||f===void 0?void 0:f.length)||0,((_=A==null?void 0:A.values)===null||_===void 0?void 0:_.length)||0);return N!==0?N:Tv(T,A)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Vc.mapValue&&a===Vc.mapValue)return 0;if(o===Vc.mapValue)return 1;if(a===Vc.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=a.fields||{},_=Object.keys(f);d.sort(),_.sort();for(let y=0;y<d.length&&y<_.length;++y){const w=qe(d[y],_[y]);if(w!==0)return w;const T=Pa(u[d[y]],f[_[y]]);if(T!==0)return T}return qe(d.length,_.length)}(t.mapValue,e.mapValue);default:throw Te()}}function Ev(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);const n=as(t),i=as(e),r=qe(n.seconds,i.seconds);return r!==0?r:qe(n.nanos,i.nanos)}function Tv(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Pa(n[r],i[r]);if(o)return o}return qe(n.length,i.length)}function Aa(t){return Op(t)}function Op(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=as(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return so(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Op(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Op(n.fields[a])}`;return r+"}"}(t.mapValue):Te()}function Sv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mp(t){return!!t&&"integerValue"in t}function g_(t){return!!t&&"arrayValue"in t}function Iv(t){return!!t&&"nullValue"in t}function Cv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rh(t){return!!t&&"mapValue"in t}function _1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Zl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ua(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Zl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function g1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!rh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zl(n)}setAll(e){let n=$t.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=Zl(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());rh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];rh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ua(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Qn(Zl(this.value))}}function ZT(t){const e=[];return Ua(t.fields,(n,i)=>{const r=new $t([n]);if(rh(i)){const o=ZT(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new pi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new sn(e,0,Se.min(),Se.min(),Se.min(),Qn.empty(),0)}static newFoundDocument(e,n,i,r){return new sn(e,1,n,Se.min(),i,r,0)}static newNoDocument(e,n){return new sn(e,2,n,Se.min(),Se.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new sn(e,3,n,Se.min(),Se.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.position=e,this.inclusive=n}}function kv(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=pe.comparator(pe.fromName(a.referenceValue),n.key):i=Pa(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Pv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n="asc"){this.field=e,this.dir=n}}function y1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{}class Ot extends $T{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new w1(e,n,i):n==="array-contains"?new S1(e,i):n==="in"?new I1(e,i):n==="not-in"?new C1(e,i):n==="array-contains-any"?new k1(e,i):new Ot(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new E1(e,i):new T1(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Pa(n,this.value)):n!==null&&oo(this.value)===oo(n)&&this.matchesComparison(Pa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wi extends $T{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new wi(e,n)}matches(e){return KT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function KT(t){return t.op==="and"}function QT(t){return v1(t)&&KT(t)}function v1(t){for(const e of t.filters)if(e instanceof wi)return!1;return!0}function Dp(t){if(t instanceof Ot)return t.field.canonicalString()+t.op.toString()+Aa(t.value);if(QT(t))return t.filters.map(e=>Dp(e)).join(",");{const e=t.filters.map(n=>Dp(n)).join(",");return`${t.op}(${e})`}}function XT(t,e){return t instanceof Ot?function(i,r){return r instanceof Ot&&i.op===r.op&&i.field.isEqual(r.field)&&Fi(i.value,r.value)}(t,e):t instanceof wi?function(i,r){return r instanceof wi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&XT(a,r.filters[u]),!0):!1}(t,e):void Te()}function YT(t){return t instanceof Ot?function(n){return`${n.field.canonicalString()} ${n.op} ${Aa(n.value)}`}(t):t instanceof wi?function(n){return n.op.toString()+" {"+n.getFilters().map(YT).join(" ,")+"}"}(t):"Filter"}class w1 extends Ot{constructor(e,n,i){super(e,n,i),this.key=pe.fromName(i.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class E1 extends Ot{constructor(e,n){super(e,"in",n),this.keys=JT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class T1 extends Ot{constructor(e,n){super(e,"not-in",n),this.keys=JT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function JT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>pe.fromName(i.referenceValue))}class S1 extends Ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return g_(n)&&Eu(n.arrayValue,this.value)}}class I1 extends Ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Eu(this.value.arrayValue,n)}}class C1 extends Ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Eu(this.value.arrayValue,n)}}class k1 extends Ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!g_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Eu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.ue=null}}function Av(t,e=null,n=[],i=[],r=null,o=null,a=null){return new P1(t,e,n,i,r,o,a)}function y_(t){const e=Ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Dp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),wd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Aa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Aa(i)).join(",")),e.ue=n}return e.ue}function v_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!y1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!XT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pv(t.startAt,e.startAt)&&Pv(t.endAt,e.endAt)}function Vp(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function A1(t,e,n,i,r,o,a,u){return new Fa(t,e,n,i,r,o,a,u)}function w_(t){return new Fa(t)}function xv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eS(t){return t.collectionGroup!==null}function $l(t){const e=Ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Qt($t.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Tu(o,i))}),n.has($t.keyField().canonicalString())||e.ce.push(new Tu($t.keyField(),i))}return e.ce}function Di(t){const e=Ie(t);return e.le||(e.le=x1(e,$l(t))),e.le}function x1(t,e){if(t.limitType==="F")return Av(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Tu(r.field,o)});const n=t.endAt?new Bh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Bh(t.startAt.position,t.startAt.inclusive):null;return Av(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function zp(t,e){const n=t.filters.concat([e]);return new Fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jh(t,e,n){return new Fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ed(t,e){return v_(Di(t),Di(e))&&t.limitType===e.limitType}function tS(t){return`${y_(Di(t))}|lt:${t.limitType}`}function qo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>YT(r)).join(", ")}]`),wd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Aa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Aa(r)).join(",")),`Target(${i})`}(Di(t))}; limitType=${t.limitType})`}function Td(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):pe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of $l(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,d){const f=kv(a,u,d);return a.inclusive?f<=0:f<0}(i.startAt,$l(i),r)||i.endAt&&!function(a,u,d){const f=kv(a,u,d);return a.inclusive?f>=0:f>0}(i.endAt,$l(i),r))}(t,e)}function R1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nS(t){return(e,n)=>{let i=!1;for(const r of $l(t)){const o=L1(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function L1(t,e,n){const i=t.field.isKeyField()?pe.comparator(e.key,n.key):function(o,a,u){const d=a.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Pa(d,f):Te()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ua(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return qT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=new vt(pe.comparator);function gr(){return b1}const iS=new vt(pe.comparator);function Ol(...t){let e=iS;for(const n of t)e=e.insert(n.key,n);return e}function rS(t){let e=iS;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function qs(){return Kl()}function sS(){return Kl()}function Kl(){return new Ba(t=>t.toString(),(t,e)=>t.isEqual(e))}const N1=new vt(pe.comparator),O1=new Qt(pe.comparator);function Ve(...t){let e=O1;for(const n of t)e=e.add(n);return e}const M1=new Qt(qe);function D1(){return M1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fh(e)?"-0":e}}function oS(t){return{integerValue:""+t}}function V1(t,e){return f1(e)?oS(e):E_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this._=void 0}}function z1(t,e,n){return t instanceof Hh?function(r,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&m_(o)&&(o=__(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof Su?lS(t,e):t instanceof Iu?uS(t,e):function(r,o){const a=aS(r,o),u=Rv(a)+Rv(r.Pe);return Mp(a)&&Mp(r.Pe)?oS(u):E_(r.serializer,u)}(t,e)}function U1(t,e,n){return t instanceof Su?lS(t,e):t instanceof Iu?uS(t,e):n}function aS(t,e){return t instanceof Wh?function(i){return Mp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Hh extends Sd{}class Su extends Sd{constructor(e){super(),this.elements=e}}function lS(t,e){const n=cS(e);for(const i of t.elements)n.some(r=>Fi(r,i))||n.push(i);return{arrayValue:{values:n}}}class Iu extends Sd{constructor(e){super(),this.elements=e}}function uS(t,e){let n=cS(e);for(const i of t.elements)n=n.filter(r=>!Fi(r,i));return{arrayValue:{values:n}}}class Wh extends Sd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Rv(t){return kt(t.integerValue||t.doubleValue)}function cS(t){return g_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function F1(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Su&&r instanceof Su||i instanceof Iu&&r instanceof Iu?ka(i.elements,r.elements,Fi):i instanceof Wh&&r instanceof Wh?Fi(i.Pe,r.Pe):i instanceof Hh&&r instanceof Hh}(t.transform,e.transform)}class B1{constructor(e,n){this.version=e,this.transformResults=n}}class gi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gi}static exists(e){return new gi(void 0,e)}static updateTime(e){return new gi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Id{}function hS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new T_(t.key,gi.none()):new Fu(t.key,t.data,gi.none());{const n=t.data,i=Qn.empty();let r=new Qt($t.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new mo(t.key,i,new pi(r.toArray()),gi.none())}}function j1(t,e,n){t instanceof Fu?function(r,o,a){const u=r.value.clone(),d=bv(r.fieldTransforms,o,a.transformResults);u.setAll(d),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof mo?function(r,o,a){if(!sh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=bv(r.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(dS(r)),d.setAll(u),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ql(t,e,n,i){return t instanceof Fu?function(o,a,u,d){if(!sh(o.precondition,a))return u;const f=o.value.clone(),_=Nv(o.fieldTransforms,d,a);return f.setAll(_),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof mo?function(o,a,u,d){if(!sh(o.precondition,a))return u;const f=Nv(o.fieldTransforms,d,a),_=a.data;return _.setAll(dS(o)),_.setAll(f),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,a,u){return sh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function H1(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=aS(i.transform,r||null);o!=null&&(n===null&&(n=Qn.empty()),n.set(i.field,o))}return n||null}function Lv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ka(i,r,(o,a)=>F1(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fu extends Id{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class mo extends Id{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function dS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function bv(t,e,n){const i=new Map;Xe(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,U1(a,u,n[r]))}return i}function Nv(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,z1(o,a,e))}return i}class T_ extends Id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class W1 extends Id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&j1(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ql(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ql(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=sS();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const d=hS(a,u);d!==null&&i.set(r.key,d),a.isValidDocument()||a.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ve())}isEqual(e){return this.batchId===e.batchId&&ka(this.mutations,e.mutations,(n,i)=>Lv(n,i))&&ka(this.baseMutations,e.baseMutations,(n,i)=>Lv(n,i))}}class S_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Xe(e.mutations.length===i.length);let r=function(){return N1}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new S_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,He;function $1(t){switch(t){default:return Te();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function fS(t){if(t===void 0)return _r("GRPC error has no .code"),K.UNKNOWN;switch(t){case bt.OK:return K.OK;case bt.CANCELLED:return K.CANCELLED;case bt.UNKNOWN:return K.UNKNOWN;case bt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case bt.INTERNAL:return K.INTERNAL;case bt.UNAVAILABLE:return K.UNAVAILABLE;case bt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case bt.NOT_FOUND:return K.NOT_FOUND;case bt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case bt.ABORTED:return K.ABORTED;case bt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case bt.DATA_LOSS:return K.DATA_LOSS;default:return Te()}}(He=bt||(bt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new $s([4294967295,4294967295],0);function Ov(t){const e=K1().encode(t),n=new VT;return n.update(e),new Uint8Array(n.digest())}function Mv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $s([n,i],0),new $s([r,o],0)]}class I_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ml(`Invalid padding: ${n}`);if(i<0)throw new Ml(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ml(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ml(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$s.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply($s.fromNumber(i)));return r.compare(Q1)===1&&(r=new $s([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ov(e),[i,r]=Mv(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new I_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=Ov(e),[i,r]=Mv(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Bu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Cd(Se.min(),r,new vt(qe),gr(),Ve())}}class Bu{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Bu(i,n,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class pS{constructor(e,n){this.targetId=e,this.me=n}}class mS{constructor(e,n,i=Yt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Dv{constructor(){this.fe=0,this.ge=zv(),this.pe=Yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ve(),n=Ve(),i=Ve();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Te()}}),new Bu(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=zv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class X1{constructor(e){this.Le=e,this.Be=new Map,this.ke=gr(),this.qe=Vv(),this.Qe=new vt(qe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(Vp(o))if(i===0){const a=new pe(o.path);this.Ue(n,a,sn.newNoDocument(a,Se.min()))}else Xe(i===1);else{const a=this.Ye(n);if(a!==i){const u=this.Ze(e),d=u?this.Xe(u,e,a):1;if(d!==0){this.je(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=so(i).toUint8Array()}catch(d){if(d instanceof GT)return Ca("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new I_(a,r,o)}catch(d){return Ca(d instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ie===0?null:u}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,a)=>{const u=this.Je(a);if(u){if(o.current&&Vp(u.target)){const d=new pe(u.target.path);this.ke.get(d)!==null||this.it(a,d)||this.Ue(a,d,sn.newNoDocument(d,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let i=Ve();this.qe.forEach((o,a)=>{let u=!0;a.forEachWhile(d=>{const f=this.Je(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const r=new Cd(e,n,this.Qe,this.ke,i);return this.ke=gr(),this.qe=Vv(),this.Qe=new vt(qe),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Dv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Qt(qe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Dv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Vv(){return new vt(pe.comparator)}function zv(){return new vt(pe.comparator)}const Y1={asc:"ASCENDING",desc:"DESCENDING"},J1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eb={and:"AND",or:"OR"};class tb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Up(t,e){return t.useProto3Json||wd(e)?e:{value:e}}function qh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _S(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nb(t,e){return qh(t,e.toTimestamp())}function Vi(t){return Xe(!!t),Se.fromTimestamp(function(n){const i=as(n);return new zt(i.seconds,i.nanos)}(t))}function C_(t,e){return Fp(t,e).canonicalString()}function Fp(t,e){const n=function(r){return new lt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gS(t){const e=lt.fromString(t);return Xe(TS(e)),e}function Bp(t,e){return C_(t.databaseId,e.path)}function Ef(t,e){const n=gS(e);if(n.get(1)!==t.databaseId.projectId)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe(vS(n))}function yS(t,e){return C_(t.databaseId,e)}function ib(t){const e=gS(t);return e.length===4?lt.emptyPath():vS(e)}function jp(t){return new lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vS(t){return Xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Uv(t,e,n){return{name:Bp(t,e),fields:n.value.mapValue.fields}}function rb(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,_){return f.useProto3Json?(Xe(_===void 0||typeof _=="string"),Yt.fromBase64String(_||"")):(Xe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Yt.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const _=f.code===void 0?K.UNKNOWN:fS(f.code);return new le(_,f.message||"")}(a);n=new mS(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ef(t,i.document.name),o=Vi(i.document.updateTime),a=i.document.createTime?Vi(i.document.createTime):Se.min(),u=new Qn({mapValue:{fields:i.document.fields}}),d=sn.newFoundDocument(r,o,a,u),f=i.targetIds||[],_=i.removedTargetIds||[];n=new oh(f,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Ef(t,i.document),o=i.readTime?Vi(i.readTime):Se.min(),a=sn.newNoDocument(r,o),u=i.removedTargetIds||[];n=new oh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Ef(t,i.document),o=i.removedTargetIds||[];n=new oh([],o,r,null)}else{if(!("filter"in e))return Te();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new Z1(r,o),u=i.targetId;n=new pS(u,a)}}return n}function sb(t,e){let n;if(e instanceof Fu)n={update:Uv(t,e.key,e.value)};else if(e instanceof T_)n={delete:Bp(t,e.key)};else if(e instanceof mo)n={update:Uv(t,e.key,e.data),updateMask:pb(e.fieldMask)};else{if(!(e instanceof W1))return Te();n={verify:Bp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Hh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Su)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Iu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Wh)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw Te()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:nb(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Te()}(t,e.precondition)),n}function ob(t,e){return t&&t.length>0?(Xe(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?Vi(r.updateTime):Vi(o);return a.isEqual(Se.min())&&(a=Vi(o)),new B1(a,r.transformResults||[])}(n,e))):[]}function ab(t,e){return{documents:[yS(t,e.path)]}}function lb(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=yS(t,r);const o=function(f){if(f.length!==0)return ES(wi.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(_=>function(w){return{field:Go(w.field),direction:hb(w.dir)}}(_))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Up(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function ub(t){let e=ib(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Xe(i===1);const _=n.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let o=[];n.where&&(o=function(y){const w=wS(y);return w instanceof wi&&QT(w)?w.getFilters():[w]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(w=>function(A){return new Tu(Zo(A.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(w))}(n.orderBy));let u=null;n.limit&&(u=function(y){let w;return w=typeof y=="object"?y.value:y,wd(w)?null:w}(n.limit));let d=null;n.startAt&&(d=function(y){const w=!!y.before,T=y.values||[];return new Bh(T,w)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const w=!y.before,T=y.values||[];return new Bh(T,w)}(n.endAt)),A1(e,r,a,o,u,"F",d,f)}function cb(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Zo(n.unaryFilter.field);return Ot.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Zo(n.unaryFilter.field);return Ot.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zo(n.unaryFilter.field);return Ot.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Zo(n.unaryFilter.field);return Ot.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(t):t.fieldFilter!==void 0?function(n){return Ot.create(Zo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wi.create(n.compositeFilter.filters.map(i=>wS(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Te()}}(n.compositeFilter.op))}(t):Te()}function hb(t){return Y1[t]}function db(t){return J1[t]}function fb(t){return eb[t]}function Go(t){return{fieldPath:t.canonicalString()}}function Zo(t){return $t.fromServerFormat(t.fieldPath)}function ES(t){return t instanceof Ot?function(n){if(n.op==="=="){if(Cv(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NAN"}};if(Iv(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cv(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NAN"}};if(Iv(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(n.field),op:db(n.op),value:n.value}}}(t):t instanceof wi?function(n){const i=n.getFilters().map(r=>ES(r));return i.length===1?i[0]:{compositeFilter:{op:fb(n.op),filters:i}}}(t):Te()}function pb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,i,r,o=Se.min(),a=Se.min(),u=Yt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.ct=e}}function _b(t){const e=ub({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(){this.un=new yb}addToCollectionParentIndex(e,n){return this.un.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(os.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(os.min())}updateCollectionGroup(e,n,i){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class yb{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Qt(lt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Qt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xa(0)}static kn(){return new xa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.changes=new Ba(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?J.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ql(i.mutation,r,pi.empty(),zt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ve()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ve()){const r=qs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Ol();return o.forEach((u,d)=>{a=a.insert(u,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=qs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ve()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=gr();const a=Kl(),u=function(){return Kl()}();return n.forEach((d,f)=>{const _=i.get(f.key);r.has(f.key)&&(_===void 0||_.mutation instanceof mo)?o=o.insert(f.key,f):_!==void 0?(a.set(f.key,_.mutation.getFieldMask()),Ql(_.mutation,f,_.mutation.getFieldMask(),zt.now())):a.set(f.key,pi.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,_)=>a.set(f,_)),n.forEach((f,_)=>{var y;return u.set(f,new wb(_,(y=a.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const i=Kl();let r=new vt((a,u)=>a-u),o=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let _=i.get(d)||pi.empty();_=u.applyToLocalView(f,_),i.set(d,_);const y=(r.get(u.batchId)||Ve()).add(d);r=r.insert(u.batchId,y)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,_=d.value,y=sS();_.forEach(w=>{if(!o.has(w)){const T=hS(n.get(w),i.get(w));T!==null&&y.set(w,T),o=o.add(w)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return J.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return pe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):J.resolve(qs());let u=-1,d=o;return a.next(f=>J.forEach(f,(_,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(_)?J.resolve():this.remoteDocumentCache.getEntry(e,_).next(w=>{d=d.insert(_,w)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,Ve())).next(_=>({batchId:u,changes:rS(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(i=>{let r=Ol();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Ol();return this.indexManager.getCollectionParents(e,o).next(u=>J.forEach(u,d=>{const f=function(y,w){return new Fa(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(_=>{_.forEach((y,w)=>{a=a.insert(y,w)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((d,f)=>{const _=f.getKey();a.get(_)===null&&(a=a.insert(_,sn.newInvalidDocument(_)))});let u=Ol();return a.forEach((d,f)=>{const _=o.get(d);_!==void 0&&Ql(_.mutation,f,pi.empty(),zt.now()),Td(n,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return J.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Vi(r.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:_b(r.bundledQuery),readTime:Vi(r.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.overlays=new vt(pe.comparator),this.Ir=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const i=qs();return J.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),J.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),J.resolve()}getOverlaysForCollection(e,n,i){const r=qs(),o=n.length+1,a=new pe(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return J.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new vt((f,_)=>f-_);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let _=o.get(f.largestBatchId);_===null&&(_=qs(),o=o.insert(f.largestBatchId,_)),_.set(f.getKey(),f)}}const u=qs(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,_)=>u.set(f,_)),!(u.size()>=r)););return J.resolve(u)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new G1(n,i));let o=this.Ir.get(n);o===void 0&&(o=Ve(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(){this.Tr=new Qt(jt.Er),this.dr=new Qt(jt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new jt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new jt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new pe(new lt([])),i=new jt(n,e),r=new jt(n,e+1),o=[];return this.dr.forEachInRange([i,r],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new pe(new lt([])),i=new jt(n,e),r=new jt(n,e+1);let o=Ve();return this.dr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new jt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class jt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return pe.comparator(e.key,n.key)||qe(e.wr,n.wr)}static Ar(e,n){return qe(e.wr,n.wr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Qt(jt.Er)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new q1(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.br=this.br.add(new jt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return J.resolve(a)}lookupMutationBatch(e,n){return J.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return J.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new jt(n,0),r=new jt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],a=>{const u=this.Dr(a.wr);o.push(u)}),J.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Qt(qe);return n.forEach(r=>{const o=new jt(r,0),a=new jt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],u=>{i=i.add(u.wr)})}),J.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;pe.isDocumentKey(o)||(o=o.child(""));const a=new jt(new pe(o),0);let u=new Qt(qe);return this.br.forEachWhile(d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(d.wr)),!0)},a),J.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return J.forEach(n.mutations,r=>{const o=new jt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new jt(n,0),r=this.br.firstAfterOrEqual(i);return J.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e){this.Mr=e,this.docs=function(){return new vt(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return J.resolve(i?i.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let i=gr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():sn.newInvalidDocument(r))}),J.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=gr();const a=n.path,u=new pe(a.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:_}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||u1(l1(_),i)<=0||(r.has(_.key)||Td(n,_))&&(o=o.insert(_.key,_.mutableCopy()))}return J.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Te()}Or(e,n){return J.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Pb(this)}getSize(e){return J.resolve(this.size)}}class Pb extends vb{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),J.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.persistence=e,this.Nr=new Ba(n=>y_(n),v_),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new k_,this.targetCount=0,this.kr=xa.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),J.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new xa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Kn(n),J.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),J.waitFor(o).next(()=>r)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return J.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),J.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),J.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return J.resolve(i)}containsKey(e,n){return J.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new p_(0),this.Kr=!1,this.Kr=!0,this.$r=new Ib,this.referenceDelegate=e(this),this.Ur=new Ab(this),this.indexManager=new gb,this.remoteDocumentCache=function(r){return new kb(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new mb(n),this.Gr=new Tb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Sb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new Cb(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){he("MemoryPersistence","Starting transaction:",e);const r=new Rb(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return J.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class Rb extends h1{constructor(e){super(),this.currentSequenceNumber=e}}class P_{constructor(e){this.persistence=e,this.Jr=new k_,this.Yr=null}static Zr(e){return new P_(e)}get Xr(){if(this.Yr)return this.Yr;throw Te()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),J.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),J.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,i=>{const r=pe.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,Se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return J.or([()=>J.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Ve(),r=Ve();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new A_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return wA()?8:d1(an())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new Lb;return this.Xi(e,n,a).next(u=>{if(o.result=u,this.zi)return this.es(e,n,a,u.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Cl()<=Ue.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",qo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(Cl()<=Ue.DEBUG&&he("QueryEngine","Query:",qo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Cl()<=Ue.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",qo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Di(n))):J.resolve())}Yi(e,n){if(xv(n))return J.resolve(null);let i=Di(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=jh(n,null,"F"),i=Di(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Ve(...o);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(d=>{const f=this.ts(n,u);return this.ns(n,f,a,d.readTime)?this.Yi(e,jh(n,null,"F")):this.rs(e,f,n,d)}))})))}Zi(e,n,i,r){return xv(n)||r.isEqual(Se.min())?J.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const a=this.ts(n,o);return this.ns(n,a,i,r)?J.resolve(null):(Cl()<=Ue.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qo(n)),this.rs(e,a,n,a1(r,-1)).next(u=>u))})}ts(e,n){let i=new Qt(nS(e));return n.forEach((r,o)=>{Td(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return Cl()<=Ue.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",qo(n)),this.Ji.getDocumentsMatchingQuery(e,n,os.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new vt(qe),this._s=new Ba(o=>y_(o),v_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Eb(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Ob(t,e,n,i){return new Nb(t,e,n,i)}async function SS(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let d=Ve();for(const f of r){a.push(f.batchId);for(const _ of f.mutations)d=d.add(_.key)}for(const f of o){u.push(f.batchId);for(const _ of f.mutations)d=d.add(_.key)}return n.localDocuments.getDocuments(i,d).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:u}))})})}function Mb(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,d,f,_){const y=f.batch,w=y.keys();let T=J.resolve();return w.forEach(A=>{T=T.next(()=>_.getEntry(d,A)).next(N=>{const U=f.docVersions.get(A);Xe(U!==null),N.version.compareTo(U)<0&&(y.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),_.addEntry(N)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(d,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let d=Ve();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function IS(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Db(t,e){const n=Ie(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const u=[];e.targetChanges.forEach((_,y)=>{const w=r.get(y);if(!w)return;u.push(n.Ur.removeMatchingKeys(o,_.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,_.addedDocuments,y)));let T=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(Yt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):_.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(_.resumeToken,i)),r=r.insert(y,T),function(N,U,P){return N.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(w,T,_)&&u.push(n.Ur.updateTargetData(o,T))});let d=gr(),f=Ve();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),u.push(Vb(o,a,e.documentUpdates).next(_=>{d=_.Ps,f=_.Is})),!i.isEqual(Se.min())){const _=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(_)}return J.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.os=r,o))}function Vb(t,e,n){let i=Ve(),r=Ve();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=gr();return n.forEach((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(Se.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):he("LocalStore","Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{Ps:a,Is:r}})}function zb(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ub(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,J.resolve(r)):n.Ur.allocateTargetId(i).next(a=>(r=new Hr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Hp(t,e,n){const i=Ie(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Uu(a))throw a;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function Fv(t,e,n){const i=Ie(t);let r=Se.min(),o=Ve();return i.persistence.runTransaction("Execute query","readwrite",a=>function(d,f,_){const y=Ie(d),w=y._s.get(_);return w!==void 0?J.resolve(y.os.get(w)):y.Ur.getTargetData(f,_)}(i,a,Di(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(a,u.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(a,e,n?r:Se.min(),n?o:Ve())).next(u=>(Fb(i,R1(e),u),{documents:u,Ts:o})))}function Fb(t,e,n){let i=t.us.get(e)||Se.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class Bv{constructor(){this.activeTargetIds=D1()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bb{constructor(){this.so=new Bv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Bv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc=null;function Tf(){return zc===null?zc=function(){return 268435456+Math.round(2147483648*Math.random())}():zc++,"0x"+zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class qb extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,a){const u=Tf(),d=this.xo(n,i.toUriEncodedString());he("RestConnection",`Sending RPC '${n}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,a),this.No(n,d,f,r).then(_=>(he("RestConnection",`Received RPC '${n}' ${u}: `,_),_),_=>{throw Ca("RestConnection",`RPC '${n}' ${u} failed with error: `,_,"url: ",d,"request:",r),_})}Lo(n,i,r,o,a,u){return this.Mo(n,i,r,o,a)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+za}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}xo(n,i){const r=Hb[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=Tf();return new Promise((a,u)=>{const d=new zT;d.setWithCredentials(!0),d.listenOnce(UT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ih.NO_ERROR:const _=d.getResponseJson();he(tn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),a(_);break;case ih.TIMEOUT:he(tn,`RPC '${e}' ${o} timed out`),u(new le(K.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const y=d.getStatus();if(he(tn,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const T=w==null?void 0:w.error;if(T&&T.status&&T.message){const A=function(U){const P=U.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(P)>=0?P:K.UNKNOWN}(T.status);u(new le(A,T.message))}else u(new le(K.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new le(K.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{he(tn,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);he(tn,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",f,i,15)})}Bo(e,n,i){const r=Tf(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=jT(),u=BT(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const _=o.join("");he(tn,`Creating RPC '${e}' stream ${r}: ${_}`,d);const y=a.createWebChannel(_,d);let w=!1,T=!1;const A=new Wb({Io:U=>{T?he(tn,`Not sending because RPC '${e}' stream ${r} is closed:`,U):(w||(he(tn,`Opening RPC '${e}' stream ${r} transport.`),y.open(),w=!0),he(tn,`RPC '${e}' stream ${r} sending:`,U),y.send(U))},To:()=>y.close()}),N=(U,P,k)=>{U.listen(P,b=>{try{k(b)}catch(H){setTimeout(()=>{throw H},0)}})};return N(y,Nl.EventType.OPEN,()=>{T||(he(tn,`RPC '${e}' stream ${r} transport opened.`),A.yo())}),N(y,Nl.EventType.CLOSE,()=>{T||(T=!0,he(tn,`RPC '${e}' stream ${r} transport closed`),A.So())}),N(y,Nl.EventType.ERROR,U=>{T||(T=!0,Ca(tn,`RPC '${e}' stream ${r} transport errored:`,U),A.So(new le(K.UNAVAILABLE,"The operation could not be completed")))}),N(y,Nl.EventType.MESSAGE,U=>{var P;if(!T){const k=U.data[0];Xe(!!k);const b=k,H=b.error||((P=b[0])===null||P===void 0?void 0:P.error);if(H){he(tn,`RPC '${e}' stream ${r} received error:`,H);const $=H.status;let Q=function(x){const O=bt[x];if(O!==void 0)return fS(O)}($),R=H.message;Q===void 0&&(Q=K.INTERNAL,R="Unknown error status: "+$+" with message "+H.message),T=!0,A.So(new le(Q,R)),y.close()}else he(tn,`RPC '${e}' stream ${r} received:`,k),A.bo(k)}}),N(u,FT.STAT_EVENT,U=>{U.stat===Np.PROXY?he(tn,`RPC '${e}' stream ${r} detected buffering proxy`):U.stat===Np.NOPROXY&&he(tn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function Sf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){return new tb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&he("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n,i,r,o,a,u,d){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new CS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(_r(n.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new le(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gb extends kS{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=rb(this.serializer,e),i=function(o){if(!("targetChange"in o))return Se.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Se.min():a.readTime?Vi(a.readTime):Se.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=jp(this.serializer),n.addTarget=function(o,a){let u;const d=a.target;if(u=Vp(d)?{documents:ab(o,d)}:{query:lb(o,d)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=_S(o,a.resumeToken);const f=Up(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Se.min())>0){u.readTime=qh(o,a.snapshotVersion.toTimestamp());const f=Up(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=cb(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=jp(this.serializer),n.removeTarget=e,this.a_(n)}}class Zb extends kS{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ob(e.writeResults,e.commitTime),i=Vi(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=jp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>sb(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Fp(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(K.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,Fp(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(K.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Kb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_r(n),this.D_=!1):he("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{i.enqueueAndForget(async()=>{_o(this)&&(he("RemoteStore","Restarting streams for network reachability change."),await async function(d){const f=Ie(d);f.L_.add(4),await ju(f),f.q_.set("Unknown"),f.L_.delete(4),await Pd(f)}(this))})}),this.q_=new Kb(i,r)}}async function Pd(t){if(_o(t))for(const e of t.B_)await e(!0)}async function ju(t){for(const e of t.B_)await e(!1)}function PS(t,e){const n=Ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),b_(n)?L_(n):ja(n).r_()&&R_(n,e))}function x_(t,e){const n=Ie(t),i=ja(n);n.N_.delete(e),i.r_()&&AS(n,e),n.N_.size===0&&(i.r_()?i.o_():_o(n)&&n.q_.set("Unknown"))}function R_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ja(t).A_(e)}function AS(t,e){t.Q_.xe(e),ja(t).R_(e)}function L_(t){t.Q_=new X1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ja(t).start(),t.q_.v_()}function b_(t){return _o(t)&&!ja(t).n_()&&t.N_.size>0}function _o(t){return Ie(t).L_.size===0}function xS(t){t.Q_=void 0}async function Xb(t){t.q_.set("Online")}async function Yb(t){t.N_.forEach((e,n)=>{R_(t,e)})}async function Jb(t,e){xS(t),b_(t)?(t.q_.M_(e),L_(t)):t.q_.set("Unknown")}async function eN(t,e,n){if(t.q_.set("Online"),e instanceof mS&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.N_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.N_.delete(u),r.Q_.removeTarget(u))}(t,e)}catch(i){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gh(t,i)}else if(e instanceof oh?t.Q_.Ke(e):e instanceof pS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Se.min()))try{const i=await IS(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Q_.rt(a);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.N_.get(f);_&&o.N_.set(f,_.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach((d,f)=>{const _=o.N_.get(d);if(!_)return;o.N_.set(d,_.withResumeToken(Yt.EMPTY_BYTE_STRING,_.snapshotVersion)),AS(o,d);const y=new Hr(_.target,d,f,_.sequenceNumber);R_(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){he("RemoteStore","Failed to raise snapshot:",i),await Gh(t,i)}}async function Gh(t,e,n){if(!Uu(e))throw e;t.L_.add(1),await ju(t),t.q_.set("Offline"),n||(n=()=>IS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Pd(t)})}function RS(t,e){return e().catch(n=>Gh(t,n,e))}async function Ad(t){const e=Ie(t),n=ls(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tN(e);)try{const r=await zb(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,nN(e,r)}catch(r){await Gh(e,r)}LS(e)&&bS(e)}function tN(t){return _o(t)&&t.O_.length<10}function nN(t,e){t.O_.push(e);const n=ls(t);n.r_()&&n.V_&&n.m_(e.mutations)}function LS(t){return _o(t)&&!ls(t).n_()&&t.O_.length>0}function bS(t){ls(t).start()}async function iN(t){ls(t).p_()}async function rN(t){const e=ls(t);for(const n of t.O_)e.m_(n.mutations)}async function sN(t,e,n){const i=t.O_.shift(),r=S_.from(i,e,n);await RS(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Ad(t)}async function oN(t,e){e&&ls(t).V_&&await async function(i,r){if(function(a){return $1(a)&&a!==K.ABORTED}(r.code)){const o=i.O_.shift();ls(i).s_(),await RS(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Ad(i)}}(t,e),LS(t)&&bS(t)}async function Hv(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const i=_o(n);n.L_.add(3),await ju(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Pd(n)}async function aN(t,e){const n=Ie(t);e?(n.L_.delete(2),await Pd(n)):e||(n.L_.add(2),await ju(n),n.q_.set("Unknown"))}function ja(t){return t.K_||(t.K_=function(n,i,r){const o=Ie(n);return o.w_(),new Gb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:Xb.bind(null,t),Ro:Yb.bind(null,t),mo:Jb.bind(null,t),d_:eN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),b_(t)?L_(t):t.q_.set("Unknown")):(await t.K_.stop(),xS(t))})),t.K_}function ls(t){return t.U_||(t.U_=function(n,i,r){const o=Ie(n);return o.w_(),new Zb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iN.bind(null,t),mo:oN.bind(null,t),f_:rN.bind(null,t),g_:sN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ad(t)):(await t.U_.stop(),t.O_.length>0&&(he("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new N_(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function O_(t,e){if(_r("AsyncQueue",`${e}: ${t}`),Uu(t))return new le(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.comparator=e?(n,i)=>e(n,i)||pe.comparator(n.key,i.key):(n,i)=>pe.comparator(n.key,i.key),this.keyedMap=Ol(),this.sortedSet=new vt(this.comparator)}static emptySet(e){return new ga(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ga;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this.W_=new vt(pe.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ra{constructor(e,n,i,r,o,a,u,d,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ra(e,n,ga.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class uN{constructor(){this.queries=qv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Ie(n),o=r.queries;r.queries=qv(),o.forEach((a,u)=>{for(const d of u.j_)d.onError(i)})})(this,new le(K.ABORTED,"Firestore shutting down"))}}function qv(){return new Ba(t=>tS(t),Ed)}async function NS(t,e){const n=Ie(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new lN,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=O_(a,`Initialization of query '${qo(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&M_(n)}async function OS(t,e){const n=Ie(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function cN(t,e){const n=Ie(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.j_)u.X_(r)&&(i=!0);a.z_=r}}i&&M_(n)}function hN(t,e,n){const i=Ie(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function M_(t){t.Y_.forEach(e=>{e.next()})}var Wp,Gv;(Gv=Wp||(Wp={})).ea="default",Gv.Cache="cache";class MS{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ra(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.key=e}}class VS{constructor(e){this.key=e}}class dN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ve(),this.mutatedKeys=Ve(),this.Aa=nS(e),this.Ra=new ga(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new Wv,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((_,y)=>{const w=r.get(_),T=Td(this.query,y)?y:null,A=!!w&&this.mutatedKeys.has(w.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let U=!1;w&&T?w.data.isEqual(T.data)?A!==N&&(i.track({type:3,doc:T}),U=!0):this.ga(w,T)||(i.track({type:2,doc:T}),U=!0,(d&&this.Aa(T,d)>0||f&&this.Aa(T,f)<0)&&(u=!0)):!w&&T?(i.track({type:0,doc:T}),U=!0):w&&!T&&(i.track({type:1,doc:w}),U=!0,(d||f)&&(u=!0)),U&&(T?(a=a.add(T),o=N?o.add(_):o.delete(_)):(a=a.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const _=this.query.limitType==="F"?a.last():a.first();a=a.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{Ra:a,fa:i,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((_,y)=>function(T,A){const N=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return N(T)-N(A)}(_.type,y.type)||this.Aa(_.doc,y.doc)),this.pa(i),r=r!=null&&r;const u=n&&!r?this.ya():[],d=this.da.size===0&&this.current&&!r?1:0,f=d!==this.Ea;return this.Ea=d,a.length!==0||f?{snapshot:new Ra(this.query,e.Ra,o,a,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Wv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ve(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new VS(i))}),this.da.forEach(i=>{e.has(i)||n.push(new DS(i))}),n}ba(e){this.Ta=e.Ts,this.da=Ve();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ra.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fN{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class pN{constructor(e){this.key=e,this.va=!1}}class mN{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ba(u=>tS(u),Ed),this.Ma=new Map,this.xa=new Set,this.Oa=new vt(pe.comparator),this.Na=new Map,this.La=new k_,this.Ba={},this.ka=new Map,this.qa=xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function _N(t,e,n=!0){const i=HS(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await zS(i,e,n,!0),r}async function gN(t,e){const n=HS(t);await zS(n,e,!0,!1)}async function zS(t,e,n,i){const r=await Ub(t.localStore,Di(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await yN(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&PS(t.remoteStore,r),u}async function yN(t,e,n,i,r){t.Ka=(y,w,T)=>async function(N,U,P,k){let b=U.view.ma(P);b.ns&&(b=await Fv(N.localStore,U.query,!1).then(({documents:R})=>U.view.ma(R,b)));const H=k&&k.targetChanges.get(U.targetId),$=k&&k.targetMismatches.get(U.targetId)!=null,Q=U.view.applyChanges(b,N.isPrimaryClient,H,$);return $v(N,U.targetId,Q.wa),Q.snapshot}(t,y,w,T);const o=await Fv(t.localStore,e,!0),a=new dN(e,o.Ts),u=a.ma(o.documents),d=Bu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,d);$v(t,n,f.wa);const _=new fN(e,n,a);return t.Fa.set(e,_),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function vN(t,e,n){const i=Ie(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(a=>!Ed(a,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Hp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&x_(i.remoteStore,r.targetId),qp(i,r.targetId)}).catch(zu)):(qp(i,r.targetId),await Hp(i.localStore,r.targetId,!0))}async function wN(t,e){const n=Ie(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),x_(n.remoteStore,i.targetId))}async function EN(t,e,n){const i=AN(t);try{const r=await function(a,u){const d=Ie(a),f=zt.now(),_=u.reduce((T,A)=>T.add(A.key),Ve());let y,w;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let A=gr(),N=Ve();return d.cs.getEntries(T,_).next(U=>{A=U,A.forEach((P,k)=>{k.isValidDocument()||(N=N.add(P))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,A)).next(U=>{y=U;const P=[];for(const k of u){const b=H1(k,y.get(k.key).overlayedDocument);b!=null&&P.push(new mo(k.key,b,ZT(b.value.mapValue),gi.exists(!0)))}return d.mutationQueue.addMutationBatch(T,f,P,u)}).next(U=>{w=U;const P=U.applyToLocalDocumentSet(y,N);return d.documentOverlayCache.saveOverlays(T,U.batchId,P)})}).then(()=>({batchId:w.batchId,changes:rS(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,d){let f=a.Ba[a.currentUser.toKey()];f||(f=new vt(qe)),f=f.insert(u,d),a.Ba[a.currentUser.toKey()]=f}(i,r.batchId,n),await Hu(i,r.changes),await Ad(i.remoteStore)}catch(r){const o=O_(r,"Failed to persist write");n.reject(o)}}async function US(t,e){const n=Ie(t);try{const i=await Db(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Na.get(o);a&&(Xe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?Xe(a.va):r.removedDocuments.size>0&&(Xe(a.va),a.va=!1))}),await Hu(n,i,e)}catch(i){await zu(i)}}function Zv(t,e,n){const i=Ie(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,a)=>{const u=a.view.Z_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const d=Ie(a);d.onlineState=u;let f=!1;d.queries.forEach((_,y)=>{for(const w of y.j_)w.Z_(u)&&(f=!0)}),f&&M_(d)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function TN(t,e,n){const i=Ie(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let a=new vt(pe.comparator);a=a.insert(o,sn.newNoDocument(o,Se.min()));const u=Ve().add(o),d=new Cd(Se.min(),new Map,new vt(qe),a,u);await US(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),D_(i)}else await Hp(i.localStore,e,!1).then(()=>qp(i,e,n)).catch(zu)}async function SN(t,e){const n=Ie(t),i=e.batch.batchId;try{const r=await Mb(n.localStore,e);BS(n,i,null),FS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Hu(n,r)}catch(r){await zu(r)}}async function IN(t,e,n){const i=Ie(t);try{const r=await function(a,u){const d=Ie(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let _;return d.mutationQueue.lookupMutationBatch(f,u).next(y=>(Xe(y!==null),_=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,_,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,_)).next(()=>d.localDocuments.getDocuments(f,_))})}(i.localStore,e);BS(i,e,n),FS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Hu(i,r)}catch(r){await zu(r)}}function FS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function BS(t,e,n){const i=Ie(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function qp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||jS(t,i)})}function jS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(x_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),D_(t))}function $v(t,e,n){for(const i of n)i instanceof DS?(t.La.addReference(i.key,e),CN(t,i)):i instanceof VS?(he("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||jS(t,i.key)):Te()}function CN(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(he("SyncEngine","New document in limbo: "+n),t.xa.add(i),D_(t))}function D_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new pe(lt.fromString(e)),i=t.qa.next();t.Na.set(i,new pN(n)),t.Oa=t.Oa.insert(n,i),PS(t.remoteStore,new Hr(Di(w_(n.path)),i,"TargetPurposeLimboResolution",p_.oe))}}async function Hu(t,e,n){const i=Ie(t),r=[],o=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((u,d)=>{a.push(i.Ka(d,e,n).then(f=>{var _;if((f||n)&&i.isPrimaryClient){const y=f?!f.fromCache:(_=n==null?void 0:n.targetChanges.get(d.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){r.push(f);const y=A_.Wi(d.targetId,f);o.push(y)}}))}),await Promise.all(a),i.Ca.d_(r),await async function(d,f){const _=Ie(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>J.forEach(f,w=>J.forEach(w.$i,T=>_.persistence.referenceDelegate.addReference(y,w.targetId,T)).next(()=>J.forEach(w.Ui,T=>_.persistence.referenceDelegate.removeReference(y,w.targetId,T)))))}catch(y){if(!Uu(y))throw y;he("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const w=y.targetId;if(!y.fromCache){const T=_.os.get(w),A=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(A);_.os=_.os.insert(w,N)}}}(i.localStore,o))}async function kN(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const i=await SS(n.localStore,e);n.currentUser=e,function(o,a){o.ka.forEach(u=>{u.forEach(d=>{d.reject(new le(K.CANCELLED,a))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Hu(n,i.hs)}}function PN(t,e){const n=Ie(t),i=n.Na.get(e);if(i&&i.va)return Ve().add(i.key);{let r=Ve();const o=n.Ma.get(e);if(!o)return r;for(const a of o){const u=n.Fa.get(a);r=r.unionWith(u.view.Va)}return r}}function HS(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=US.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TN.bind(null,e),e.Ca.d_=cN.bind(null,e.eventManager),e.Ca.$a=hN.bind(null,e.eventManager),e}function AN(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IN.bind(null,e),e}class Zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Ob(this.persistence,new bb,e.initialUser,this.serializer)}Ga(e){return new xb(P_.Zr,this.serializer)}Wa(e){return new Bb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zh.provider={build:()=>new Zh};class Gp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Zv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kN.bind(null,this.syncEngine),await aN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uN}()}createDatastore(e){const n=kd(e.databaseInfo.databaseId),i=function(o){return new qb(o)}(e.databaseInfo);return function(o,a,u,d){return new $b(o,a,u,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new Qb(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Zv(this.syncEngine,n,0),function(){return jv.D()?new jv:new jb}())}createSyncEngine(e,n){return function(r,o,a,u,d,f,_){const y=new mN(r,o,a,u,d,f);return _&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ie(r);he("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await ju(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Gp.provider={build:()=>new Gp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=nn.UNAUTHENTICATED,this.clientId=WT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{he("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(he("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=O_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function If(t,e){t.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await SS(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RN(t);he("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Hv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Hv(e.remoteStore,r)),t._onlineComponents=e}async function RN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{await If(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===K.FAILED_PRECONDITION||r.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ca("Error using user provided cache. Falling back to memory cache: "+n),await If(t,new Zh)}}else he("FirestoreClient","Using default OfflineComponentProvider"),await If(t,new Zh);return t._offlineComponents}async function qS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),await Kv(t,t._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),await Kv(t,new Gp))),t._onlineComponents}function LN(t){return qS(t).then(e=>e.syncEngine)}async function Zp(t){const e=await qS(t),n=e.eventManager;return n.onListen=_N.bind(null,e.syncEngine),n.onUnlisten=vN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wN.bind(null,e.syncEngine),n}function bN(t,e,n={}){const i=new es;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,d,f){const _=new WS({next:w=>{_.Za(),a.enqueueAndForget(()=>OS(o,y)),w.fromCache&&d.source==="server"?f.reject(new le(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),y=new MS(u,_,{includeMetadataChanges:!0,_a:!0});return NS(o,y)}(await Zp(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t,e,n){if(!n)throw new le(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NN(t,e,n,i){if(e===!0&&i===!0)throw new le(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Xv(t){if(!pe.isDocumentKey(t))throw new le(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Yv(t){if(pe.isDocumentKey(t))throw new le(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te()}function zi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xd(t);throw new le(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new le(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new YL;switch(i.type){case"firstParty":return new n1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Qv.get(n);i&&(he("ComponentProvider","Removing Datastore"),Qv.delete(n),i.terminate())}(this),Promise.resolve()}}function ON(t,e,n,i={}){var r;const o=(t=zi(t,Rd))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let u,d;if(typeof i.mockUserToken=="string")u=i.mockUserToken,d=nn.MOCK_USER;else{u=XE(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new le(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new nn(f)}t._authCredentials=new JL(new HT(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new vr(this.firestore,e,this._query)}}class Pn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}}class ts extends vr{constructor(e,n,i){super(e,n,w_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new pe(e))}withConverter(e){return new ts(this.firestore,e,this._path)}}function Cu(t,e,...n){if(t=It(t),ZS("collection","path",e),t instanceof Rd){const i=lt.fromString(e,...n);return Yv(i),new ts(t,null,i)}{if(!(t instanceof Pn||t instanceof ts))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(lt.fromString(e,...n));return Yv(i),new ts(t.firestore,null,i)}}function ms(t,e,...n){if(t=It(t),arguments.length===1&&(e=WT.newId()),ZS("doc","path",e),t instanceof Rd){const i=lt.fromString(e,...n);return Xv(i),new Pn(t,null,new pe(i))}{if(!(t instanceof Pn||t instanceof ts))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(lt.fromString(e,...n));return Xv(i),new Pn(t.firestore,t instanceof ts?t.converter:null,new pe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new CS(this,"async_queue_retry"),this.Vu=()=>{const i=Sf();i&&he("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Sf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Sf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new es;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Uu(e))throw e;he("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(i);throw _r("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=N_.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&Te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function tw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class ao extends Rd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new ew,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ew(e),this._firestoreClient=void 0,await e}}}function MN(t,e){const n=typeof t=="object"?t:i_(),i=typeof t=="string"?t:"(default)",r=_d(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=$E("firestore");o&&ON(r,...o)}return r}function V_(t){if(t._terminated)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||DN(t),t._firestoreClient}function DN(t){var e,n,i;const r=t._freezeSettings(),o=function(u,d,f,_){return new m1(u,d,f,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,GS(_.experimentalLongPollingOptions),_.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new xN(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this._byteString=e}static fromBase64String(e){try{return new La(Yt.fromBase64String(e))}catch(n){throw new le(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new La(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=/^__.*__$/;class zN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new mo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fu(e,this.data,n,this.fieldTransforms)}}function KS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class B_{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new B_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return $h(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(KS(this.Cu)&&VN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class UN{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||kd(e)}Qu(e,n,i,r=!1){return new B_({Cu:e,methodName:n,qu:i,path:$t.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function j_(t){const e=t._freezeSettings(),n=kd(t._databaseId);return new UN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function QS(t,e,n,i,r,o={}){const a=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);JS("Data must be an object, but it was:",a,i);const u=XS(i,a);let d,f;if(o.merge)d=new pi(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const _=[];for(const y of o.mergeFields){const w=BN(e,y,n);if(!a.contains(w))throw new le(K.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);HN(_,w)||_.push(w)}d=new pi(_),f=a.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=a.fieldTransforms;return new zN(new Qn(u),d,f)}function FN(t,e,n,i=!1){return H_(n,t.Qu(i?4:3,e))}function H_(t,e){if(YS(t=It(t)))return JS("Unsupported field value:",e,t),XS(t,e);if(t instanceof $S)return function(i,r){if(!KS(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let d=H_(u,r.Lu(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=It(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return V1(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=zt.fromDate(i);return{timestampValue:qh(r.serializer,o)}}if(i instanceof zt){const o=new zt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:qh(r.serializer,o)}}if(i instanceof U_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof La)return{bytesValue:_S(r.serializer,i._byteString)};if(i instanceof Pn){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:C_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof F_)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw u.Bu("VectorValues must only contain numeric values.");return E_(u.serializer,d)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${xd(i)}`)}(t,e)}function XS(t,e){const n={};return qT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ua(t,(i,r)=>{const o=H_(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function YS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof zt||t instanceof U_||t instanceof La||t instanceof Pn||t instanceof $S||t instanceof F_)}function JS(t,e,n){if(!YS(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=xd(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function BN(t,e,n){if((e=It(e))instanceof z_)return e._internalPath;if(typeof e=="string")return eI(t,e);throw $h("Field path arguments must be of type string or ",t,!1,void 0,n)}const jN=new RegExp("[~\\*/\\[\\]]");function eI(t,e,n){if(e.search(jN)>=0)throw $h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new z_(...e.split("."))._internalPath}catch{throw $h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $h(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${i}`),a&&(d+=` in document ${r}`),d+=")"),new le(K.INVALID_ARGUMENT,u+t+d)}function HN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(W_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WN extends tI{data(){return super.data()}}function W_(t,e){return typeof e=="string"?eI(t,e):e instanceof z_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class q_{}class G_ extends q_{}function qN(t,e,...n){let i=[];e instanceof q_&&i.push(e),i=i.concat(n),function(o){const a=o.filter(d=>d instanceof $_).length,u=o.filter(d=>d instanceof Z_).length;if(a>1||a>0&&u>0)throw new le(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Z_ extends G_{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Z_(e,n,i)}_apply(e){const n=this._parse(e);return iI(e._query,n),new vr(e.firestore,e.converter,zp(e._query,n))}_parse(e){const n=j_(e.firestore);return function(o,a,u,d,f,_,y){let w;if(f.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new le(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){iw(y,_);const T=[];for(const A of y)T.push(nw(d,o,A));w={arrayValue:{values:T}}}else w=nw(d,o,y)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||iw(y,_),w=FN(u,a,y,_==="in"||_==="not-in");return Ot.create(f,_,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class $_ extends q_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $_(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:wi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r;const u=o.getFlattenedFilters();for(const d of u)iI(a,d),a=zp(a,d)}(e._query,n),new vr(e.firestore,e.converter,zp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class K_ extends G_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new K_(e,n)}_apply(e){const n=function(r,o,a){if(r.startAt!==null)throw new le(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new le(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tu(o,a)}(e._query,this._field,this._direction);return new vr(e.firestore,e.converter,function(r,o){const a=r.explicitOrderBy.concat([o]);return new Fa(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function GN(t,e="asc"){const n=e,i=W_("orderBy",t);return K_._create(i,n)}class Q_ extends G_{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Q_(e,n,i)}_apply(e){return new vr(e.firestore,e.converter,jh(e._query,this._limit,this._limitType))}}function ZN(t){return Q_._create("limit",t,"F")}function nw(t,e,n){if(typeof(n=It(n))=="string"){if(n==="")throw new le(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eS(e)&&n.indexOf("/")!==-1)throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(lt.fromString(n));if(!pe.isDocumentKey(i))throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Sv(t,new pe(i))}if(n instanceof Pn)return Sv(t,n._key);throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xd(n)}.`)}function iw(t,e){if(!Array.isArray(t)||t.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iI(t,e){const n=function(r,o){for(const a of r)for(const u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $N{convertValue(e,n="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(so(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ua(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>kt(a.doubleValue));return new F_(o)}convertGeoPoint(e){return new U_(kt(e.latitude),kt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=__(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const n=as(e);return new zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=lt.fromString(e);Xe(TS(i));const r=new wu(i.get(1),i.get(3)),o=new pe(i.popFirst(5));return r.isEqual(n)||_r(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sI extends tI{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(W_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class ah extends sI{data(e={}){return super.data(e)}}class oI{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Dl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ah(this._firestore,this._userDataWriter,i.key,i,new Dl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const d=new ah(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Dl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const d=new ah(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Dl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,_=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),_=a.indexOf(u.doc.key)),{type:KN(u.type),doc:d,oldIndex:f,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function KN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}class X_ extends $N{constructor(e){super(),this.firestore=e}convertBytes(e){return new La(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,n)}}function rw(t){t=zi(t,vr);const e=zi(t.firestore,ao),n=V_(e),i=new X_(e);return nI(t._query),bN(n,t._query).then(r=>new oI(e,i,t,r))}function Ld(t,e,n){t=zi(t,Pn);const i=zi(t.firestore,ao),r=rI(t.converter,e);return J_(i,[QS(j_(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,gi.none())])}function aI(t){return J_(zi(t.firestore,ao),[new T_(t._key,gi.none())])}function QN(t,e){const n=zi(t.firestore,ao),i=ms(t),r=rI(t.converter,e);return J_(n,[QS(j_(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,gi.exists(!1))]).then(()=>i)}function Y_(t,...e){var n,i,r;t=It(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||tw(e[a])||(o=e[a],a++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(tw(e[a])){const y=e[a];e[a]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[a+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),e[a+2]=(r=y.complete)===null||r===void 0?void 0:r.bind(y)}let d,f,_;if(t instanceof Pn)f=zi(t.firestore,ao),_=w_(t._key.path),d={next:y=>{e[a]&&e[a](XN(f,t,y))},error:e[a+1],complete:e[a+2]};else{const y=zi(t,vr);f=zi(y.firestore,ao),_=y._query;const w=new X_(f);d={next:T=>{e[a]&&e[a](new oI(f,w,y,T))},error:e[a+1],complete:e[a+2]},nI(t._query)}return function(w,T,A,N){const U=new WS(N),P=new MS(T,U,A);return w.asyncQueue.enqueueAndForget(async()=>NS(await Zp(w),P)),()=>{U.Za(),w.asyncQueue.enqueueAndForget(async()=>OS(await Zp(w),P))}}(V_(f),_,u,d)}function J_(t,e){return function(i,r){const o=new es;return i.asyncQueue.enqueueAndForget(async()=>EN(await LN(i),r,o)),o.promise}(V_(t),e)}function XN(t,e,n){const i=n.docs.get(e._key),r=new X_(t);return new sI(t,r,e._key,i,new Dl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){za=r})(fo),to(new ss("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new ao(new e1(i.getProvider("auth-internal")),new r1(i.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new le(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wu(f.options.projectId,_)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Ni(yv,"4.7.3",e),Ni(yv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="firebasestorage.googleapis.com",uI="storageBucket",YN=2*60*1e3,JN=10*60*1e3,eO=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt extends Bi{constructor(e,n,i=0){super(Cf(e),`Firebase Storage: ${n} (${Cf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ct;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ct||(ct={}));function Cf(t){return"storage/"+t}function eg(){const t="An unknown error occurred, please check the error payload for server response.";return new wt(ct.UNKNOWN,t)}function tO(t){return new wt(ct.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function nO(t){return new wt(ct.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function iO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new wt(ct.UNAUTHENTICATED,t)}function rO(){return new wt(ct.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function sO(t){return new wt(ct.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function cI(){return new wt(ct.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hI(){return new wt(ct.CANCELED,"User canceled the upload/download.")}function oO(t){return new wt(ct.INVALID_URL,"Invalid URL '"+t+"'.")}function aO(t){return new wt(ct.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lO(){return new wt(ct.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uI+"' property when initializing the app?")}function dI(){return new wt(ct.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function uO(){return new wt(ct.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function cO(){return new wt(ct.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hO(t){return new wt(ct.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $p(t){return new wt(ct.INVALID_ARGUMENT,t)}function fI(){return new wt(ct.APP_DELETED,"The Firebase app was deleted.")}function dO(t){return new wt(ct.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xl(t,e){return new wt(ct.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function kl(t){throw new wt(ct.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=dn.makeFromUrl(e,n)}catch{return new dn(e,"")}if(i.path==="")return i;throw aO(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),d={bucket:1,path:3};function f(H){H.path_=decodeURIComponent(H.path)}const _="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",T=new RegExp(`^https?://${y}/${_}/b/${r}/o${w}`,"i"),A={bucket:1,path:3},N=n===lI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",P=new RegExp(`^https?://${N}/${r}/${U}`,"i"),b=[{regex:u,indices:d,postModify:o},{regex:T,indices:A,postModify:f},{regex:P,indices:{bucket:1,path:2},postModify:f}];for(let H=0;H<b.length;H++){const $=b[H],Q=$.regex.exec(e);if(Q){const R=Q[$.indices.bucket];let C=Q[$.indices.path];C||(C=""),i=new dn(R,C),$.postModify(i);break}}if(i==null)throw oO(e);return i}}class fO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t,e,n){let i=1,r=null,o=null,a=!1,u=0;function d(){return u===2}let f=!1;function _(...U){f||(f=!0,e.apply(null,U))}function y(U){r=setTimeout(()=>{r=null,t(T,d())},U)}function w(){o&&clearTimeout(o)}function T(U,...P){if(f){w();return}if(U){w(),_.call(null,U,...P);return}if(d()||a){w(),_.call(null,U,...P);return}i<64&&(i*=2);let b;u===1?(u=2,b=0):b=(i+Math.random())*1e3,y(b)}let A=!1;function N(U){A||(A=!0,w(),!f&&(r!==null?(U||(u=2),clearTimeout(r),y(0)):U||(u=1)))}return y(0),o=setTimeout(()=>{a=!0,N(!0)},n),N}function mO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t){return t!==void 0}function gO(t){return typeof t=="function"}function yO(t){return typeof t=="object"&&!Array.isArray(t)}function bd(t){return typeof t=="string"||t instanceof String}function sw(t){return tg()&&t instanceof Blob}function tg(){return typeof Blob<"u"}function Kp(t,e,n,i){if(i<e)throw $p(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw $p(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function pI(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ks;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ks||(Ks={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n,i,r,o,a,u,d,f,_,y,w=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=_,this.connectionFactory_=y,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,A)=>{this.resolve_=T,this.reject_=A,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Uc(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const u=o.getErrorCode()===Ks.NO_ERROR,d=o.getStatus();if(!u||mI(d,this.additionalRetryCodes_)&&this.retry){const _=o.getErrorCode()===Ks.ABORT;i(!1,new Uc(!1,null,_));return}const f=this.successCodes_.indexOf(d)!==-1;i(!0,new Uc(f,o))})},n=(i,r)=>{const o=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());_O(d)?o(d):o()}catch(d){a(d)}else if(u!==null){const d=eg();d.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,d)):a(d)}else if(r.canceled){const d=this.appDelete_?fI():hI();a(d)}else{const d=cI();a(d)}};this.canceled_?n(!1,new Uc(!1,null,!0)):this.backoffId_=pO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Uc{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function wO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function EO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function TO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function SO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function IO(t,e,n,i,r,o,a=!0){const u=pI(t.urlParams),d=t.url+u,f=Object.assign({},t.headers);return TO(f,e),wO(f,n),EO(f,o),SO(f,i),new vO(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function kO(...t){const e=CO();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(tg())return new Blob(t);throw new wt(ct.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function PO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t){if(typeof atob>"u")throw hO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kf{constructor(e,n){this.data=e,this.contentType=n||null}}function xO(t,e){switch(t){case Ri.RAW:return new kf(_I(e));case Ri.BASE64:case Ri.BASE64URL:return new kf(gI(t,e));case Ri.DATA_URL:return new kf(LO(e),bO(e))}throw eg()}function _I(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,a=t.charCodeAt(++n);i=65536|(o&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function RO(t){let e;try{e=decodeURIComponent(t)}catch{throw Xl(Ri.DATA_URL,"Malformed data URL.")}return _I(e)}function gI(t,e){switch(t){case Ri.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw Xl(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ri.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw Xl(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=AO(e)}catch(r){throw r.message.includes("polyfill")?r:Xl(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class yI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Xl(Ri.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=NO(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function LO(t){const e=new yI(t);return e.base64?gI(Ri.BASE64,e.rest):RO(e.rest)}function bO(t){return new yI(t).contentType}function NO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){let i=0,r="";sw(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(sw(this.data_)){const i=this.data_,r=PO(i,e,n);return r===null?null:new Ur(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Ur(i,!0)}}static getBlob(...e){if(tg()){const n=e.map(i=>i instanceof Ur?i.data_:i);return new Ur(kO.apply(null,n))}else{const n=e.map(a=>bd(a)?xO(Ri.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(a=>{for(let u=0;u<a.length;u++)r[o++]=a[u]}),new Ur(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t){let e;try{e=JSON.parse(t)}catch{return null}return yO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function MO(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function vI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t,e){return e}class cn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||DO}}let Fc=null;function VO(t){return!bd(t)||t.length<2?t:vI(t)}function wI(){if(Fc)return Fc;const t=[];t.push(new cn("bucket")),t.push(new cn("generation")),t.push(new cn("metageneration")),t.push(new cn("name","fullPath",!0));function e(o,a){return VO(a)}const n=new cn("name");n.xform=e,t.push(n);function i(o,a){return a!==void 0?Number(a):a}const r=new cn("size");return r.xform=i,t.push(r),t.push(new cn("timeCreated")),t.push(new cn("updated")),t.push(new cn("md5Hash",null,!0)),t.push(new cn("cacheControl",null,!0)),t.push(new cn("contentDisposition",null,!0)),t.push(new cn("contentEncoding",null,!0)),t.push(new cn("contentLanguage",null,!0)),t.push(new cn("contentType",null,!0)),t.push(new cn("metadata","customMetadata",!0)),Fc=t,Fc}function zO(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new dn(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function UO(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const a=n[o];i[a.local]=a.xform(i,e[a.server])}return zO(i,t),i}function EI(t,e,n){const i=ng(e);return i===null?null:UO(t,i,n)}function FO(t,e,n,i){const r=ng(e);if(r===null||!bd(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(f=>{const _=t.bucket,y=t.fullPath,w="/b/"+a(_)+"/o/"+a(y),T=go(w,n,i),A=pI({alt:"media",token:f});return T+A})[0]}function TI(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="prefixes",aw="items";function BO(t,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[ow])for(const r of n[ow]){const o=r.replace(/\/$/,""),a=t._makeStorageReference(new dn(e,o));i.prefixes.push(a)}if(n[aw])for(const r of n[aw]){const o=t._makeStorageReference(new dn(e,r.name));i.items.push(o)}return i}function jO(t,e,n){const i=ng(n);return i===null?null:BO(t,e,i)}class _s{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t){if(!t)throw eg()}function ig(t,e){function n(i,r){const o=EI(t,r,e);return Ui(o!==null),o}return n}function HO(t,e){function n(i,r){const o=jO(t,e,r);return Ui(o!==null),o}return n}function WO(t,e){function n(i,r){const o=EI(t,r,e);return Ui(o!==null),FO(o,r,t.host,t._protocol)}return n}function Ha(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=rO():r=iO():n.getStatus()===402?r=nO(t.bucket):n.getStatus()===403?r=sO(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function rg(t){const e=Ha(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=tO(t.path)),o.serverResponse=r.serverResponse,o}return n}function qO(t,e,n){const i=e.fullServerUrl(),r=go(i,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,u=new _s(r,o,ig(t,n),a);return u.errorHandler=rg(e),u}function GO(t,e,n,i,r){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n.length>0&&(o.delimiter=n),i&&(o.pageToken=i),r&&(o.maxResults=r);const a=e.bucketOnlyServerUrl(),u=go(a,t.host,t._protocol),d="GET",f=t.maxOperationRetryTime,_=new _s(u,d,HO(t,e.bucket),f);return _.urlParams=o,_.errorHandler=Ha(e),_}function ZO(t,e,n){const i=e.fullServerUrl(),r=go(i,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,u=new _s(r,o,WO(t,n),a);return u.errorHandler=rg(e),u}function $O(t,e){const n=e.fullServerUrl(),i=go(n,t.host,t._protocol),r="DELETE",o=t.maxOperationRetryTime;function a(d,f){}const u=new _s(i,r,a,o);return u.successCodes=[200,204],u.errorHandler=rg(e),u}function KO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function SI(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=KO(null,e)),i}function QO(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let b="";for(let H=0;H<2;H++)b=b+Math.random().toString().slice(2);return b}const d=u();a["Content-Type"]="multipart/related; boundary="+d;const f=SI(e,i,r),_=TI(f,n),y="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,w=`\r
--`+d+"--",T=Ur.getBlob(y,i,w);if(T===null)throw dI();const A={name:f.fullPath},N=go(o,t.host,t._protocol),U="POST",P=t.maxUploadRetryTime,k=new _s(N,U,ig(t,n),P);return k.urlParams=A,k.headers=a,k.body=T.uploadData(),k.errorHandler=Ha(e),k}class Kh{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function sg(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ui(!1)}return Ui(!!n&&(e||["active"]).indexOf(n)!==-1),n}function XO(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),a=SI(e,i,r),u={name:a.fullPath},d=go(o,t.host,t._protocol),f="POST",_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},y=TI(a,n),w=t.maxUploadRetryTime;function T(N){sg(N);let U;try{U=N.getResponseHeader("X-Goog-Upload-URL")}catch{Ui(!1)}return Ui(bd(U)),U}const A=new _s(d,f,T,w);return A.urlParams=u,A.headers=_,A.body=y,A.errorHandler=Ha(e),A}function YO(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function o(f){const _=sg(f,["active","final"]);let y=null;try{y=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ui(!1)}y||Ui(!1);const w=Number(y);return Ui(!isNaN(w)),new Kh(w,i.size(),_==="final")}const a="POST",u=t.maxUploadRetryTime,d=new _s(n,a,o,u);return d.headers=r,d.errorHandler=Ha(e),d}const lw=256*1024;function JO(t,e,n,i,r,o,a,u){const d=new Kh(0,0);if(a?(d.current=a.current,d.total=a.total):(d.current=0,d.total=i.size()),i.size()!==d.total)throw uO();const f=d.total-d.current;let _=f;r>0&&(_=Math.min(_,r));const y=d.current,w=y+_;let T="";_===0?T="finalize":f===_?T="upload, finalize":T="upload";const A={"X-Goog-Upload-Command":T,"X-Goog-Upload-Offset":`${d.current}`},N=i.slice(y,w);if(N===null)throw dI();function U(H,$){const Q=sg(H,["active","final"]),R=d.current+_,C=i.size();let x;return Q==="final"?x=ig(e,o)(H,$):x=null,new Kh(R,C,Q==="final",x)}const P="POST",k=e.maxUploadRetryTime,b=new _s(n,P,U,k);return b.headers=A,b.body=N.uploadData(),b.progressCallback=u||null,b.errorHandler=Ha(t),b}const En={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Pf(t){switch(t){case"running":case"pausing":case"canceling":return En.RUNNING;case"paused":return En.PAUSED;case"success":return En.SUCCESS;case"canceled":return En.CANCELED;case"error":return En.ERROR;default:return En.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,n,i){if(gO(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class tM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ks.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ks.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ks.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw kl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class nM extends tM{initXhr(){this.xhr_.responseType="text"}}function Fr(){return new nM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=wI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(ct.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(mI(r.status,[]))if(o)r=cI();else{this.sleepTime=Math.max(this.sleepTime*2,eO),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(ct.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=XO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Fr,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=YO(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,Fr,n,i);this._request=o,o.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=lw*this._chunkMultiplier,n=new Kh(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let a;try{a=JO(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(d){this._error=d,this._transition("error");return}const u=this._ref.storage._makeRequest(a,Fr,r,o,!1);this._request=u,u.getPromise().then(d=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(d.current),d.finalized?(this._metadata=d.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){lw*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=qO(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Fr,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=QO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Fr,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=hI(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Pf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const o=new eM(n||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Pf(this._state)){case En.SUCCESS:Ho(this._resolve.bind(null,this.snapshot))();break;case En.CANCELED:case En.ERROR:const n=this._reject;Ho(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Pf(this._state)){case En.RUNNING:case En.PAUSED:e.next&&Ho(e.next.bind(e,this.snapshot))();break;case En.SUCCESS:e.complete&&Ho(e.complete.bind(e))();break;case En.CANCELED:case En.ERROR:e.error&&Ho(e.error.bind(e,this._error))();break;default:e.error&&Ho(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){this._service=e,n instanceof dn?this._location=n:this._location=dn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new lo(e,n)}get root(){const e=new dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vI(this._location.path)}get storage(){return this._service}get parent(){const e=OO(this._location.path);if(e===null)return null;const n=new dn(this._location.bucket,e);return new lo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw dO(e)}}function rM(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new iM(t,new Ur(e),n)}function sM(t){const e={prefixes:[],items:[]};return II(t,e).then(()=>e)}async function II(t,e,n){const r=await oM(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await II(t,e,r.nextPageToken)}function oM(t,e){e!=null&&typeof e.maxResults=="number"&&Kp("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=GO(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,Fr)}function aM(t){t._throwIfRoot("getDownloadURL");const e=ZO(t.storage,t._location,wI());return t.storage.makeRequestWithTokens(e,Fr).then(n=>{if(n===null)throw cO();return n})}function lM(t){t._throwIfRoot("deleteObject");const e=$O(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Fr)}function uM(t,e){const n=MO(t._location.path,e),i=new dn(t._location.bucket,n);return new lo(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){return/^[A-Za-z]+:\/\//.test(t)}function hM(t,e){return new lo(t,e)}function CI(t,e){if(t instanceof og){const n=t;if(n._bucket==null)throw lO();const i=new lo(n,n._bucket);return e!=null?CI(i,e):i}else return e!==void 0?uM(t,e):t}function dM(t,e){if(e&&cM(e)){if(t instanceof og)return hM(t,e);throw $p("To use ref(service, url), the first argument must be a Storage instance.")}else return CI(t,e)}function uw(t,e){const n=e==null?void 0:e[uI];return n==null?null:dn.makeFromBucketSpec(n,t)}function fM(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:XE(r,t.app.options.projectId))}class og{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=lI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=YN,this._maxUploadRetryTime=JN,this._requests=new Set,r!=null?this._bucket=dn.makeFromBucketSpec(r,this._host):this._bucket=uw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dn.makeFromBucketSpec(this._url,e):this._bucket=uw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lo(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new fO(fI());{const a=IO(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const cw="@firebase/storage",hw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="storage";function pM(t,e,n){return t=It(t),rM(t,e,n)}function mM(t){return t=It(t),sM(t)}function _M(t){return t=It(t),aM(t)}function PI(t){return t=It(t),lM(t)}function ag(t,e){return t=It(t),dM(t,e)}function gM(t=i_(),e){t=It(t);const i=_d(t,kI).getImmediate({identifier:e}),r=$E("storage");return r&&yM(i,...r),i}function yM(t,e,n,i={}){fM(t,e,n,i)}function vM(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new og(n,i,r,e,fo)}function wM(){to(new ss(kI,vM,"PUBLIC").setMultipleInstances(!0)),Ni(cw,hw,""),Ni(cw,hw,"esm2017")}wM();const EM={apiKey:"AIzaSyDWdcEBNoobKZoNRQmWlooCJNCBfb_M8-U",authDomain:"lapmap-cc281.firebaseapp.com",projectId:"lapmap-cc281",storageBucket:"lapmap-cc281.firebasestorage.app",messagingSenderId:"102969245328",appId:"1:102969245328:web:1b3478a17782fc6f792215",measurementId:"G-4R5VTXQ9X4"},lg=eT(EM),uo=QL(lg),ti=MN(lg),ug=gM(lg);async function TM(t,e,n,i){const r=Date.now(),o=n.name.replace(/[^a-zA-Z0-9.-]/g,"_"),a=`users/${t}/places/${e}/${r}_${o}`,u=ag(ug,a),d=pM(u,n);await new Promise((_,y)=>{d.on("state_changed",w=>{},y,()=>_())});const f=await _M(d.snapshot.ref);return{id:`${r}_${o}`,name:n.name,url:f,storagePath:a,type:n.type,size:n.size,uploadedAt:r}}async function SM(t){const e=ag(ug,t);await PI(e)}async function IM(t,e){const n=ag(ug,`users/${t}/places/${e}`);try{const i=await mM(n);await Promise.all(i.items.map(r=>PI(r)))}catch{console.log("No attachments to delete or folder not found")}}function CM(t){if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,i)*100)/100+" "+n[i]}function kM(t){return t.startsWith("image/")}function PM(t){return t.startsWith("image/")?"":t.startsWith("video/")?"":t.includes("pdf")?"":t.includes("word")||t.includes("document")?"":t.includes("sheet")||t.includes("excel")?"":t.includes("presentation")||t.includes("powerpoint")?"":t.startsWith("audio/")?"":t.includes("zip")||t.includes("compressed")?"":""}function AI({attachments:t,onUpload:e,onDelete:n,uploading:i}){const[r,o]=G.useState(null),[a,u]=G.useState(0),d=G.useRef(null),f=async y=>{var T;const w=(T=y.target.files)==null?void 0:T[0];if(w)try{u(0),await e(w),d.current&&(d.current.value="")}catch(A){console.error("Upload failed:",A),alert("Failed to upload file. Please try again.")}finally{u(0)}},_=async y=>{if(confirm(`Delete ${y.name}?`))try{await n(y)}catch(w){console.error("Delete failed:",w),alert("Failed to delete file. Please try again.")}};return S.jsxs("div",{style:{marginTop:12},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[S.jsxs("h4",{style:{margin:0,fontSize:14,fontWeight:600},children:[" Attachments (",t.length,")"]}),S.jsxs("label",{style:{cursor:"pointer"},children:[S.jsx("input",{ref:d,type:"file",onChange:f,disabled:i,style:{display:"none"},accept:"image/*,.pdf,.doc,.docx,.txt"}),S.jsx("span",{className:"button",style:{padding:"4px 8px",fontSize:12,opacity:i?.6:1,cursor:i?"not-allowed":"pointer"},children:i?`Uploading... ${a}%`:"+ Add File"})]})]}),t.length===0?S.jsx("div",{style:{padding:8,color:"#94a3b8",fontSize:13,fontStyle:"italic"},children:"No attachments yet. Add booking confirmations, maps, or photos."}):S.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:6},children:t.map(y=>S.jsxs("li",{style:{padding:8,backgroundColor:"#f8fafc",borderRadius:6,border:"1px solid #e2e8f0",display:"flex",alignItems:"center",gap:8},children:[S.jsx("span",{style:{fontSize:20},children:PM(y.type)}),S.jsxs("div",{style:{flex:1,minWidth:0},children:[S.jsx("div",{style:{fontSize:13,fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:y.name}),S.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:[CM(y.size),"  ",new Date(y.uploadedAt).toLocaleDateString()]})]}),S.jsxs("div",{style:{display:"flex",gap:4},children:[kM(y.type)&&S.jsx("button",{className:"button",onClick:()=>o(y.url),style:{padding:"4px 8px",fontSize:12,backgroundColor:"#3b82f6"},children:" View"}),S.jsx("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",className:"button",style:{padding:"4px 8px",fontSize:12,textDecoration:"none",backgroundColor:"#10b981"},children:" Download"}),S.jsx("button",{className:"button",onClick:()=>_(y),style:{padding:"4px 8px",fontSize:12,backgroundColor:"#ef4444"},children:""})]})]},y.id))}),r&&S.jsxs("div",{onClick:()=>o(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:20,cursor:"pointer"},children:[S.jsx("img",{src:r,alt:"Preview",style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain",borderRadius:8}}),S.jsx("button",{className:"button",onClick:y=>{y.stopPropagation(),o(null)},style:{position:"absolute",top:20,right:20,backgroundColor:"#ef4444",padding:"8px 16px"},children:" Close"})]})]})}function AM({items:t,onRemove:e,onSetStart:n,onClearStart:i,onUploadAttachment:r,onDeleteAttachment:o,startLocation:a}){const[u,d]=G.useState(null);return t.length?S.jsx("ul",{className:"itineraryList",children:t.map(f=>{const _=a&&a.lat===f.lat&&a.lon===f.lon;return S.jsxs("li",{className:"itineraryItem",children:[S.jsxs("div",{children:[S.jsxs("div",{style:{fontWeight:600},children:[_&&" ",f.name]}),S.jsxs("small",{children:[f.type,"  ",f.lat.toFixed(3),", ",f.lon.toFixed(3)]})]}),S.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_?S.jsx("button",{className:"button",onClick:i,children:"Clear From Start"}):!a&&S.jsx("button",{className:"button",onClick:()=>n(f),children:"Make Start"}),S.jsx("button",{className:"button",onClick:()=>e(f.id),children:"Remove From Itinerary"})]}),S.jsx("div",{style:{marginTop:8},children:S.jsx(AI,{attachments:f.attachments||[],uploading:u===f.id,onUpload:async y=>{d(f.id);try{await r(f.id,y)}finally{d(null)}},onDelete:y=>o(f.id,y)})})]},f.id)})}):S.jsx("div",{style:{padding:12,color:"#64748b"},children:"No stops yet. Click places on the map to add them."})}const xM=(t,e)=>e<129?"WA":e>=129&&e<138?t<-26?"SA":"NT":e>=138&&e<141?t<-29?"SA":t<-26?"QLD":"NT":e>=141&&e<153?t>-29?"QLD":t>-34?"NSW":t>-39?"VIC":"SA":t>-29?"QLD":t>-37?"NSW":t>-39.2?"VIC":t>-43.6?"TAS":"NSW",RM={NSW:"New South Wales",VIC:"Victoria",QLD:"Queensland",SA:"South Australia",WA:"Western Australia",TAS:"Tasmania",NT:"Northern Territory",ACT:"Australian Capital Territory"};function LM({favorites:t,onAddToItinerary:e,onRemove:n,onCenterMap:i,onToggleVisited:r,onUploadAttachment:o,onDeleteAttachment:a}){const[u,d]=G.useState(null),f=G.useMemo(()=>{const y={};return t.forEach(w=>{const T=xM(w.lat,w.lon);y[T]||(y[T]=[]),y[T].push(w)}),Object.keys(y).forEach(w=>{y[w].sort((T,A)=>T.name.localeCompare(A.name))}),y},[t]),_=Object.keys(f).sort();return t.length===0?S.jsx("div",{style:{padding:12,color:"#64748b",fontSize:14},children:"No favorites yet. Click the heart button in any marker popup to add it to your favorites."}):S.jsx("div",{style:{maxHeight:"100%",overflowY:"auto"},children:_.map(y=>S.jsxs("div",{style:{marginBottom:16},children:[S.jsxs("div",{style:{fontWeight:600,fontSize:14,color:"#0f172a",padding:"8px 12px",background:"#f1f5f9",borderLeft:"3px solid #ec4899"},children:[RM[y]||y," (",f[y].length,")"]}),f[y].map(w=>S.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e2e8f0",opacity:w.visited?.6:1},children:[S.jsxs("div",{style:{marginBottom:8},children:[S.jsxs("div",{style:{fontSize:13,fontWeight:500,cursor:"pointer",color:"#2563eb",textDecoration:w.visited?"line-through":"none"},onClick:()=>i(w.lat,w.lon),title:"Click to center map on this location",children:[w.visited?" ":"",w.name]}),S.jsxs("div",{style:{fontSize:11,color:"#64748b",marginTop:2},children:[w.type,"  ",w.lat.toFixed(3),", ",w.lon.toFixed(3)]}),S.jsxs("div",{style:{display:"flex",gap:8,marginTop:4,flexWrap:"wrap"},children:[S.jsx("a",{href:`https://www.meteoblue.com/en/weather/forecast/week/${w.lat.toFixed(4)}N${w.lon.toFixed(4)}E`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:11,color:"#2563eb",textDecoration:"none"},children:" Weather"}),S.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${w.lat},${w.lon}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:11,color:"#2563eb",textDecoration:"none"},children:" Google Maps"})]})]}),S.jsxs("div",{style:{display:"flex",gap:4},children:[S.jsx("button",{className:"button small",onClick:()=>e(w),title:"Add to itinerary",style:{fontSize:11,padding:"4px 8px"},children:"Add"}),S.jsx("button",{className:"button small",onClick:async()=>{try{await r(w.id)}catch(T){console.error("Error toggling visited status:",T)}},title:w.visited?"Mark as unvisited":"Mark as visited",style:{fontSize:11,padding:"4px 8px",background:w.visited?"#10b981":"#6b7280"},children:w.visited?"":""}),S.jsx("button",{className:"button small",onClick:()=>n(w.id),title:"Remove from favorites",style:{fontSize:11,padding:"4px 8px",background:"#ef4444"},children:""})]}),S.jsx(AI,{attachments:w.attachments||[],onUpload:async T=>{d(w.id);try{await o(w.id,T)}finally{d(null)}},onDelete:T=>a(w.id,T),uploading:u===w.id})]},w.id))]},y))})}function bM(t,e){return t>-29&&e>153||t>-29&&e>149&&e<=153?"QLD":t>-29&&e<=149?"NT":t<=-29&&t>-37&&e>141&&e<=153.5?"NSW":t<=-37&&e>141&&e<=150?"VIC":t<=-26&&t>-29&&e>138&&e<=141||t<=-29&&t>-37&&e<=141?"SA":t<=-37?"TAS":e<=129?"WA":t>-26&&e>129&&e<=138?"NT":t<=-26&&t>-29&&e>138&&e<=141?"SA":t>-35&&e>149?"ACT":"Other"}const NM={NSW:"New South Wales",VIC:"Victoria",QLD:"Queensland",SA:"South Australia",WA:"Western Australia",TAS:"Tasmania",NT:"Northern Territory",ACT:"Australian Capital Territory",Other:"Other"};function OM({visitedPlaces:t,onCenterMap:e,onUnvisit:n,onClose:i}){const r=G.useMemo(()=>{const a={};return t.forEach(u=>{const d=bM(u.lat,u.lon);a[d]||(a[d]=[]),a[d].push(u)}),Object.keys(a).forEach(u=>{a[u].sort((d,f)=>d.name.localeCompare(f.name))}),a},[t]),o=Object.keys(r).sort();return S.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},children:S.jsxs("div",{style:{backgroundColor:"white",borderRadius:8,padding:24,maxWidth:600,width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[S.jsxs("h2",{style:{margin:0,fontSize:20,fontWeight:600},children:[" Visited Places (",t.length,")"]}),S.jsx("button",{onClick:i,style:{background:"none",border:"none",fontSize:24,cursor:"pointer",padding:4,lineHeight:1},title:"Close",children:""})]}),t.length===0?S.jsxs("div",{style:{textAlign:"center",padding:32,color:"#64748b"},children:[S.jsx("p",{children:"No places visited yet!"}),S.jsx("p",{style:{fontSize:14},children:"Mark favorites as visited to track your journey."})]}):S.jsx("div",{children:o.map(a=>S.jsxs("div",{style:{marginBottom:16},children:[S.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#475569",padding:"8px 12px",backgroundColor:"#f1f5f9",borderRadius:4,marginBottom:4},children:[NM[a]||a," (",r[a].length,")"]}),r[a].map(u=>S.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e2e8f0"},children:[S.jsxs("div",{style:{marginBottom:8},children:[S.jsxs("div",{style:{fontSize:13,fontWeight:500,cursor:"pointer",color:"#2563eb"},onClick:()=>e(u.lat,u.lon),title:"Click to center map on this location",children:[" ",u.name]}),S.jsxs("div",{style:{fontSize:11,color:"#64748b",marginTop:2},children:[u.type,"  ",u.lat.toFixed(3),", ",u.lon.toFixed(3),u.visitedAt&&S.jsxs("span",{children:["  Visited ",new Date(u.visitedAt).toLocaleDateString()]})]})]}),S.jsx("button",{className:"button small",onClick:()=>n(u.id),title:"Mark as not visited",style:{fontSize:11,padding:"4px 8px",background:"#ef4444"},children:"Unvisit"})]},u.id))]},a))})]})})}function MM(t){try{const e=JSON.stringify(t);return btoa(e)}catch(e){throw console.error("Error encoding route:",e),new Error("Failed to encode route")}}function DM(t){try{const e=atob(t);return JSON.parse(e)}catch(e){throw console.error("Error decoding route:",e),new Error("Invalid route data")}}function VM(t){const e=MM(t),n=window.location.origin+window.location.pathname,i=new URLSearchParams;return i.set("sharedRoute",e),`${n}?${i.toString()}`}function zM(){try{const e=new URLSearchParams(window.location.search).get("sharedRoute");if(!e)return null;const n=DM(e);return!n.stops||!Array.isArray(n.stops)||n.stops.length===0?null:n}catch(t){return console.error("Error extracting shared route from URL:",t),null}}function UM(t,e,n){return{title:e,description:n,stops:t.map(i=>({id:i.id,name:i.name,lat:i.lat,lon:i.lon,type:i.type})),createdAt:Date.now()}}async function FM(t,e){try{const n=Cu(ti,"sharedRoutes");return(await QN(n,{title:t.title,description:t.description,itinerary:t.stops,createdAt:t.createdAt,userId:e})).id}catch(n){throw console.error("Error saving shared route:",n),new Error("Failed to save shared route")}}function BM({itinerary:t,isOpen:e,onClose:n}){const[i,r]=G.useState(""),[o,a]=G.useState(""),[u,d]=G.useState(""),[f,_]=G.useState(!1),[y,w]=G.useState(!1);if(!e)return null;const T=async()=>{if(!i.trim()){alert("Please enter a title for your route");return}const U=uo.currentUser;if(!U){alert("You must be logged in to share routes");return}w(!0);try{const P=UM(t,i.trim(),o.trim());await FM(P,U.uid);const k=VM(P);d(k)}catch(P){console.error("Error sharing route:",P),alert("Failed to share route")}finally{w(!1)}},A=async()=>{try{await navigator.clipboard.writeText(u),_(!0),setTimeout(()=>_(!1),2e3)}catch(U){console.error("Error copying to clipboard:",U),alert("Failed to copy link")}},N=()=>{r(""),a(""),d("")};return S.jsx("div",{className:"modalOverlay",onClick:n,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:S.jsxs("div",{onClick:U=>U.stopPropagation(),style:{background:"#fff",borderRadius:8,padding:24,maxWidth:500,width:"90%",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[S.jsx("h3",{style:{margin:0},children:" Share Your Route"}),S.jsx("button",{className:"button small",onClick:n,children:"Close"})]}),u?S.jsxs(S.Fragment,{children:[S.jsx("div",{style:{marginBottom:16,padding:12,background:"#f0fdf4",borderRadius:6,fontSize:13,color:"#16a34a"},children:" Route shared successfully! It's now visible in Browse Routes and you can share this direct link."}),S.jsxs("div",{style:{marginBottom:16},children:[S.jsx("label",{style:{display:"block",fontWeight:600,marginBottom:6,fontSize:13},children:"Share Link"}),S.jsxs("div",{style:{display:"flex",gap:8},children:[S.jsx("input",{type:"text",value:u,readOnly:!0,style:{flex:1,padding:"10px 12px",border:"2px solid #e2e8f0",borderRadius:8,fontSize:12,fontFamily:"monospace",color:"#475569",backgroundColor:"#f8fafc"}}),S.jsx("button",{className:"button",onClick:A,style:{whiteSpace:"nowrap"},title:f?"Copied!":"Copy to clipboard",children:f?" Copied":"Copy"})]})]}),S.jsx("div",{style:{marginBottom:16,padding:12,background:"#fef3c7",borderRadius:6,fontSize:13,color:"#92400e"},children:" Share this link via email, messaging, or social media. Recipients can open it to load your route."}),S.jsxs("div",{style:{display:"flex",gap:8},children:[S.jsx("button",{className:"button",onClick:N,style:{flex:1},children:"Create Another Route"}),S.jsx("button",{className:"button",onClick:n,style:{background:"#10b981"},children:"Done"})]})]}):S.jsxs(S.Fragment,{children:[S.jsx("p",{style:{color:"#475569",marginBottom:16,fontSize:14},children:"Share your itinerary with others. They can load your route and customize it for their own trip."}),S.jsxs("div",{style:{marginBottom:16},children:[S.jsx("label",{style:{display:"block",fontWeight:600,marginBottom:6,fontSize:13},children:"Route Title *"}),S.jsx("input",{type:"text",placeholder:"e.g., Great Ocean Road Adventure",value:i,onChange:U=>r(U.target.value),style:{width:"100%",padding:"10px 12px",border:"2px solid #e2e8f0",borderRadius:8,fontSize:14,fontFamily:"inherit"},onKeyDown:U=>{U.key==="Enter"&&T()}})]}),S.jsxs("div",{style:{marginBottom:16},children:[S.jsx("label",{style:{display:"block",fontWeight:600,marginBottom:6,fontSize:13},children:"Description (optional)"}),S.jsx("textarea",{placeholder:"e.g., A scenic 5-day coastal route with stops at iconic landmarks...",value:o,onChange:U=>a(U.target.value),rows:4,style:{width:"100%",padding:"10px 12px",border:"2px solid #e2e8f0",borderRadius:8,fontSize:14,fontFamily:"inherit",resize:"vertical"}})]}),S.jsxs("div",{style:{marginBottom:16,padding:12,background:"#f0f9ff",borderRadius:6,fontSize:13,color:"#0369a1"},children:[" ",S.jsx("strong",{children:t.length})," stops will be shared (attachments and personal files are not included)"]}),S.jsxs("div",{style:{display:"flex",gap:8},children:[S.jsx("button",{className:"button",onClick:T,style:{flex:1},disabled:y,children:y?"Sharing...":"Generate Share Link"}),S.jsx("button",{className:"button",onClick:n,style:{background:"#94a3b8"},children:"Cancel"})]})]})]})})}function jM({isOpen:t,onClose:e,onLoadRoute:n}){const[i,r]=G.useState([]),[o,a]=G.useState([]),[u,d]=G.useState(!1),f=uo.currentUser;G.useEffect(()=>{if(!t)return;(async()=>{d(!0);try{if(f){const k=Cu(ti,`users/${f.uid}/itineraries`),H=(await rw(k)).docs.map($=>({id:$.id,...$.data(),isMine:!0})).filter($=>$.itinerary&&$.itinerary.length>0).sort(($,Q)=>Q.updatedAt-$.updatedAt);r(H)}const N=qN(Cu(ti,"sharedRoutes"),GN("createdAt","desc"),ZN(20)),P=(await rw(N)).docs.map(k=>({id:k.id,...k.data()}));a(P)}catch(N){console.error("Error fetching routes:",N)}finally{d(!1)}})()},[t,f]);const _=A=>{n(A.itinerary),e()},y=A=>{if(A.length<2)return 0;let N=0;for(let U=0;U<A.length-1;U++){const P=A[U],k=A[U+1],b=6371,H=(k.lat-P.lat)*Math.PI/180,$=(k.lon-P.lon)*Math.PI/180,Q=Math.sin(H/2)*Math.sin(H/2)+Math.cos(P.lat*Math.PI/180)*Math.cos(k.lat*Math.PI/180)*Math.sin($/2)*Math.sin($/2),R=2*Math.atan2(Math.sqrt(Q),Math.sqrt(1-Q));N+=b*R}return Math.round(N)},w=A=>{const N=new Date(A),P=new Date().getTime()-N.getTime(),k=Math.floor(P/(1e3*60*60*24));return k===0?"Today":k===1?"Yesterday":k<7?`${k} days ago`:k<30?`${Math.floor(k/7)} weeks ago`:N.toLocaleDateString()},T=(A,N)=>{var $,Q;const U=y(A.itinerary),P=A.itinerary.length,k=(($=A.itinerary[0])==null?void 0:$.name)||"Unknown",b=((Q=A.itinerary[P-1])==null?void 0:Q.name)||"Unknown",H="updatedAt"in A?A.updatedAt:A.createdAt;return S.jsxs("div",{className:"route-card",children:[S.jsxs("div",{className:"route-card-header",children:[S.jsx("h3",{children:A.title||(A.id==="current"?"Current Route":`${k}  ${b}`)}),S.jsx("span",{className:"route-date",children:w(H)})]}),S.jsxs("div",{className:"route-card-stats",children:[S.jsxs("span",{className:"stat",children:[S.jsx("strong",{children:P})," stops"]}),S.jsxs("span",{className:"stat",children:[S.jsxs("strong",{children:[U," km"]})," total"]})]}),S.jsxs("div",{className:"route-card-preview",children:[A.itinerary.slice(0,3).map((R,C)=>S.jsxs("span",{className:"preview-stop",children:[" ",R.name]},C)),P>3&&S.jsxs("span",{className:"preview-more",children:["+",P-3," more"]})]}),S.jsx("button",{className:"button route-load-button",onClick:()=>_(A),children:"Load This Route"})]},A.id)};return t?S.jsx("div",{className:"modal-overlay",onClick:e,children:S.jsxs("div",{className:"modal-content browse-routes-modal",onClick:A=>A.stopPropagation(),children:[S.jsxs("div",{className:"modal-header",children:[S.jsx("h2",{children:" Browse Public Routes"}),S.jsx("button",{className:"modal-close",onClick:e,children:""})]}),S.jsx("div",{className:"modal-body",children:u?S.jsxs("div",{className:"loading-state",children:[S.jsx("div",{className:"spinner"}),S.jsx("p",{children:"Loading routes..."})]}):S.jsxs(S.Fragment,{children:[i.length>0&&S.jsxs("div",{className:"routes-section",children:[S.jsx("h3",{className:"section-heading",children:" My Saved Routes"}),S.jsx("div",{className:"routes-list",children:i.map(A=>T(A,!0))})]}),S.jsxs("div",{className:"routes-section",children:[S.jsx("h3",{className:"section-heading",children:" Shared by Others"}),o.length===0?S.jsx("div",{className:"empty-state",children:S.jsx("p",{children:"No shared routes yet. Be the first to share!"})}):S.jsx("div",{className:"routes-list",children:o.map(A=>T(A,!1))})]})]})})]})}):null}function HM({isOpen:t,onClose:e,itinerary:n}){const[i,r]=G.useState(""),[o,a]=G.useState(!1),u=uo.currentUser;if(!t)return null;const d=async()=>{if(!i.trim()){alert("Please enter a name for this route");return}if(!u){alert("You must be logged in to save routes");return}a(!0);try{const f=i.trim().toLowerCase().replace(/[^a-z0-9]/g,"-"),_=Date.now(),y=`${f}-${_}`,w=ms(ti,`users/${u.uid}/itineraries`,y);await Ld(w,{title:i.trim(),itinerary:n,updatedAt:_}),alert(`Route "${i}" saved successfully!`),r(""),e()}catch(f){console.error("Error saving route:",f),alert("Failed to save route")}finally{a(!1)}};return S.jsx("div",{className:"modal-overlay",onClick:e,children:S.jsxs("div",{className:"modal-content",onClick:f=>f.stopPropagation(),style:{maxWidth:"400px"},children:[S.jsxs("div",{className:"modal-header",children:[S.jsx("h2",{children:" Save Route"}),S.jsx("button",{className:"modal-close",onClick:e,children:""})]}),S.jsxs("div",{className:"modal-body",children:[S.jsx("p",{style:{marginBottom:"16px",color:"#64748b",fontSize:"14px"},children:"Save this route to access it later from Browse Routes."}),S.jsxs("div",{style:{marginBottom:"16px"},children:[S.jsx("label",{style:{display:"block",fontWeight:600,marginBottom:6,fontSize:13},children:"Route Name *"}),S.jsx("input",{type:"text",placeholder:"e.g., Great Ocean Road Trip",value:i,onChange:f=>r(f.target.value),onKeyDown:f=>{f.key==="Enter"&&d()},style:{width:"100%",padding:"10px 12px",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit"},autoFocus:!0})]}),S.jsxs("div",{style:{padding:12,background:"#f0f9ff",borderRadius:6,fontSize:13,color:"#0369a1",marginBottom:"16px"},children:[" ",S.jsx("strong",{children:n.length})," stops will be saved"]}),S.jsxs("div",{style:{display:"flex",gap:"8px"},children:[S.jsx("button",{className:"button",onClick:d,disabled:o,style:{flex:1},children:o?"Saving...":"Save Route"}),S.jsx("button",{className:"button",onClick:e,style:{background:"#94a3b8"},children:"Cancel"})]})]})]})})}function WM({onLoginSuccess:t}){const[e,n]=G.useState(""),[i,r]=G.useState(""),[o,a]=G.useState(!1),[u,d]=G.useState(""),[f,_]=G.useState(!1),y=async w=>{w.preventDefault(),d(""),_(!0);try{o?await OR(uo,e,i):await MR(uo,e,i),t()}catch(T){d(T.message||"Authentication failed")}finally{_(!1)}};return S.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#0f172a",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},children:S.jsxs("div",{style:{backgroundColor:"white",borderRadius:12,padding:40,maxWidth:400,width:"90%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[S.jsx("h1",{style:{margin:"0 0 8px 0",fontSize:28,fontWeight:700,color:"#0f172a"},children:" Australia Trip Planner"}),S.jsx("p",{style:{margin:"0 0 24px 0",fontSize:14,color:"#64748b"},children:o?"Create an account to get started":"Sign in to continue"}),S.jsxs("form",{onSubmit:y,children:[S.jsxs("div",{style:{marginBottom:16},children:[S.jsx("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:"#334155"},children:"Email"}),S.jsx("input",{type:"email",value:e,onChange:w=>n(w.target.value),required:!0,placeholder:"your@email.com",style:{width:"100%",padding:"10px 12px",border:"1px solid #cbd5e1",borderRadius:6,fontSize:14,boxSizing:"border-box"}})]}),S.jsxs("div",{style:{marginBottom:20},children:[S.jsx("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:"#334155"},children:"Password"}),S.jsx("input",{type:"password",value:i,onChange:w=>r(w.target.value),required:!0,placeholder:"",minLength:6,style:{width:"100%",padding:"10px 12px",border:"1px solid #cbd5e1",borderRadius:6,fontSize:14,boxSizing:"border-box"}})]}),u&&S.jsx("div",{style:{padding:12,backgroundColor:"#fee2e2",color:"#991b1b",borderRadius:6,fontSize:14,marginBottom:16},children:u}),S.jsx("button",{type:"submit",disabled:f,style:{width:"100%",padding:"12px",backgroundColor:f?"#94a3b8":"#2563eb",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:600,cursor:f?"not-allowed":"pointer",marginBottom:16},children:f?"Please wait...":o?"Create Account":"Sign In"}),S.jsx("button",{type:"button",onClick:()=>{a(!o),d("")},style:{width:"100%",padding:"12px",backgroundColor:"transparent",color:"#2563eb",border:"1px solid #cbd5e1",borderRadius:6,fontSize:14,fontWeight:500,cursor:"pointer"},children:o?"Already have an account? Sign In":"Don't have an account? Sign Up"})]})]})})}function Nd(t){return t.replace(/\//g,"_")}async function Bs(t,e){const n=ms(ti,`users/${t}/favorites`,Nd(e.id));await Ld(n,{...e,updatedAt:Date.now()})}async function dw(t,e){const n=ms(ti,`users/${t}/favorites`,Nd(e));await aI(n)}function qM(t,e){const n=Cu(ti,`users/${t}/favorites`);return Y_(n,i=>{const r=i.docs.map(o=>o.data());e(r)})}async function xI(t,e){const n=ms(ti,`users/${t}/visited`,Nd(e.id));await Ld(n,{...e,visitedAt:e.visitedAt||Date.now(),updatedAt:Date.now()})}async function fw(t,e){const n=ms(ti,`users/${t}/visited`,Nd(e));await aI(n)}function GM(t,e){const n=Cu(ti,`users/${t}/visited`);return Y_(n,i=>{const r=i.docs.map(o=>o.data());e(r)})}async function Wo(t,e){const n=ms(ti,`users/${t}/itineraries`,"current");await Ld(n,{items:e,updatedAt:Date.now()})}function ZM(t,e){const n=ms(ti,`users/${t}/itineraries`,"current");return Y_(n,i=>{i.exists()?e(i.data().items||[]):e([])})}async function $M(t){try{const e=localStorage.getItem("trip-favorites");if(e){const i=JSON.parse(e);for(const r of i)await Bs(t,r);console.log(`Migrated ${i.length} favorites to Firestore`)}const n=localStorage.getItem("trip-visited-places");if(n){const i=JSON.parse(n);for(const r of i)await xI(t,r);console.log(`Migrated ${i.length} visited places to Firestore`)}return localStorage.setItem("firestore-migrated","true"),!0}catch(e){return console.error("Migration failed:",e),!1}}function KM(){return localStorage.getItem("firestore-migrated")==="true"}function QM(){const[t,e]=G.useState(null),[n,i]=G.useState(!0),[r,o]=G.useState([]),[a,u]=G.useState(null),[d,f]=G.useState(void 0),[_,y]=G.useState(!1),[w,T]=G.useState(!1),[A,N]=G.useState(""),[U,P]=G.useState(!1),[k,b]=G.useState(null),[H,$]=G.useState(!1),[Q,R]=G.useState(!1),[C,x]=G.useState(!1),[O,V]=G.useState(!1),[z,M]=G.useState(!1),[Ze,An]=G.useState(!0),[ze,Mt]=G.useState([]),[Z,_e]=G.useState([]),[te,me]=G.useState(!1),[we,Ae]=G.useState(!1),[Fe,F]=G.useState(!1),[ne,ue]=G.useState(!1),[xe,et]=G.useState(null),nt=G.useCallback(X=>{o(re=>{if(re.some(ae=>ae.id===X.id))return re;const ce=[...re,{...X,addedAt:Date.now()}];return t&&Wo(t.uid,ce).catch(console.error),ce})},[t]),Ge=G.useCallback(X=>{o(re=>{const ce=re.filter(ae=>ae.id!==X);return t&&Wo(t.uid,ce).catch(console.error),ce})},[t]),Oe=G.useCallback(X=>{f({lat:X.lat,lon:X.lon,name:X.name})},[]),Me=G.useCallback(async X=>{if(!t)return;ze.some(ce=>ce.id===X.id)?await dw(t.uid,X.id):await Bs(t.uid,X)},[t,ze]),Ce=G.useCallback(async X=>{t&&(await IM(t.uid,X),await dw(t.uid,X))},[t]),it=G.useCallback(async(X,re)=>{if(!t)return;const ce=await TM(t.uid,X,re);let ae=ze.find(Le=>Le.id===X);if(!ae){const Le=r.find(rt=>rt.id===X);if(!Le)return;ae={id:Le.id,name:Le.name,type:Le.type,lat:Le.lat,lon:Le.lon}}const fe={...ae,attachments:[...ae.attachments||[],ce]};await Bs(t.uid,fe)},[t,ze]),ke=G.useCallback(async(X,re)=>{if(!t)return;await SM(re.storagePath);const ce=ze.find(fe=>fe.id===X);if(!ce)return;const ae={...ce,attachments:(ce.attachments||[]).filter(fe=>fe.id!==re.id)};await Bs(t.uid,ae)},[t,ze]),$e=G.useCallback(async X=>{if(!t)return;const re=ze.find(ae=>ae.id===X);if(!re)return;if(Z.some(ae=>ae.id===X)){await fw(t.uid,X);const{visited:ae,visitedAt:fe,...Le}=re;await Bs(t.uid,{...Le,visited:!1})}else{const ae={...re,visited:!0,visitedAt:Date.now()};await xI(t.uid,ae),await Bs(t.uid,ae)}},[t,ze,Z]);G.useEffect(()=>{try{const X=zM();if(X&&X.stops&&X.stops.length>0){const re=X.stops.map((ce,ae)=>({id:ce.id,name:ce.name,lat:ce.lat,lon:ce.lon,type:ce.type||"locality",addedAt:Date.now()+ae}));o(re),t&&Wo(t.uid,re).catch(console.error)}}catch(X){console.error("Error loading shared route:",X)}},[t]),G.useEffect(()=>{const X=zR(uo,async re=>{e(re),i(!1),re&&(KM()||(console.log("Migrating localStorage data to Firestore..."),await $M(re.uid)))});return()=>X()},[]),G.useEffect(()=>{if(!t)return;const X=qM(t.uid,ae=>{Mt(ae)}),re=GM(t.uid,ae=>{_e(ae)}),ce=ZM(t.uid,ae=>{o(ae)});return()=>{X(),re(),ce()}},[t]);const ot=async()=>{try{await UR(uo)}catch(X){console.error("Logout error:",X)}},At=G.useCallback(async X=>{if(!t)return;await fw(t.uid,X);const re=ze.find(ce=>ce.id===X);if(re){const{visited:ce,visitedAt:ae,...fe}=re;await Bs(t.uid,{...fe,visited:!1})}},[t,ze]),_n=G.useCallback((X,re)=>{xe&&xe.setView([X,re],13,{animate:!0})},[xe]),zn=ar.useRef(null),Ei=ar.useRef(!1),ii=G.useCallback(async()=>{if(!r.length)return;if(!d){alert("Please select a start location first (type or pick on the map).");return}T(!0);const X=d,ce=`https://router.project-osrm.org/trip/v1/driving/${[`${X.lon},${X.lat}`,...r.map(ae=>`${ae.lon},${ae.lat}`)].join(";")}?source=first&roundtrip=false&overview=full&geometries=geojson`;try{const ae=await fetch(ce);if(!ae.ok)throw new Error(`Routing error: ${ae.status}`);const fe=await ae.json();if(!fe.trips||!fe.trips.length)throw new Error("No trip returned");const Le=fe.trips[0],rt=Le.geometry.coordinates.map(Ut=>[Ut[1],Ut[0]]),Be=Le.legs.map(Ut=>({distance:Ut.distance,duration:Ut.duration})),gn=fe.waypoints.length,ri=new Array(gn);fe.waypoints.forEach((Ut,yn)=>{ri[Ut.waypoint_index]=yn});const Un=ri.slice(1).map(Ut=>r[Ut-1].id),yo=ri.map(Ut=>{const yn=fe.waypoints[Ut];return[yn.location[1],yn.location[0]]});u({coordinates:rt,legs:Be,orderedPlaceIds:Un,waypoints:yo});const wr=Un.map(Ut=>r.find(yn=>yn.id===Ut)).filter(Boolean);o(wr)}catch(ae){console.error(ae),alert("Could not compute route. See console for details.")}finally{T(!1)}},[r,d]),gs=G.useCallback(()=>{r.length&&window.confirm("Clear all itinerary stops? This cannot be undone.")&&(o([]),u(null),t&&Wo(t.uid,[]).catch(console.error))},[r,t]);ar.useEffect(()=>{Ei.current&&r.length>0&&d&&(Ei.current=!1,ii())},[r,d,ii]),G.useCallback(async()=>{const re=JSON.stringify({itinerary:r,startLocation:d},null,2);if("showSaveFilePicker"in window)try{const rt=await(await window.showSaveFilePicker({suggestedName:"Big Lap .json",types:[{description:"JSON File",accept:{"application/json":[".json"]}}]})).createWritable();await rt.write(re),await rt.close();return}catch(Le){if(Le.name==="AbortError")return}const ce=new Blob([re],{type:"application/json"}),ae=URL.createObjectURL(ce),fe=document.createElement("a");fe.href=ae,fe.download="Big Lap .json",document.body.appendChild(fe),fe.click(),fe.remove(),setTimeout(()=>URL.revokeObjectURL(ae),5e3)},[r,d]);const ys=G.useCallback(async X=>{try{if(!X)return;const re=await X.text(),ce=JSON.parse(re);if(!ce||!Array.isArray(ce.itinerary)){alert("Invalid itinerary file");return}if(!window.confirm("Load itinerary from file? This will replace your current stops."))return;const ae=ce.itinerary.map(fe=>({id:fe.id,name:fe.name,type:fe.type,lat:fe.lat,lon:fe.lon,addedAt:fe.addedAt||Date.now()}));o(ae),ce.startLocation&&ce.startLocation.lat&&ce.startLocation.lon&&f({lat:ce.startLocation.lat,lon:ce.startLocation.lon,name:ce.startLocation.name}),u(null),ae.length>0&&ce.startLocation&&(Ei.current=!0)}catch(re){console.error("Import error",re),alert("Could not import itinerary  invalid file")}},[ii]),Et=G.useCallback(X=>{const re=X.target.files&&X.target.files[0];re&&(ys(re),X.currentTarget.value="")},[ys]),xt=G.useCallback(()=>{if(!a)return;const re=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="aus-trip-scheduler">
  <metadata>
    <time>${new Date().toISOString()}</time>
  </metadata>
  <trk>
    <name>Planned route</name>
    <trkseg>
`,ce=a.coordinates.map(([gn,ri])=>`      <trkpt lat="${gn}" lon="${ri}"></trkpt>
`).join(""),fe=re+ce+`    </trkseg>
  </trk>
</gpx>`,Le=new Blob([fe],{type:"application/gpx+xml"}),rt=URL.createObjectURL(Le),Be=document.createElement("a");Be.href=rt,Be.download=`route-${new Date().toISOString().replace(/[:.]/g,"-")}.gpx`,document.body.appendChild(Be),Be.click(),Be.remove(),setTimeout(()=>URL.revokeObjectURL(rt),5e3)},[a]),ji=G.useCallback(()=>{if(!a)return;const re=(a.waypoints||[]).slice(0,25).map(([ae,fe])=>`${ae},${fe}`);if(!re.length)return;const ce=`https://www.google.com/maps/dir/${re.join("/")}`;window.open(ce,"_blank")},[a]),vs=G.useCallback(async()=>{const X=A.trim();if(X){P(!0);try{const re=Be=>`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(Be)}&limit=8&countrycodes=au&addressdetails=1`,ce=async Be=>{const gn=await fetch(re(Be),{headers:{"Accept-Language":"en"}});if(!gn.ok)throw new Error(`Geocode ${gn.status}`);return await gn.json()},ae=await ce(X);let fe=null;if(!X.toLowerCase().includes("south")&&!X.toLowerCase().includes("sa"))try{fe=await ce(`${X} South Australia`)}catch{fe=null}const Le=[],rt=new Set;if(fe&&fe.length)for(const Be of fe)rt.has(Be.osm_id)||(Le.push(Be),rt.add(Be.osm_id));if(ae&&ae.length)for(const Be of ae)rt.has(Be.osm_id)||(Le.push(Be),rt.add(Be.osm_id));if(!Le.length){alert("No results found for that place");return}b(Le.map(Be=>({lat:parseFloat(Be.lat),lon:parseFloat(Be.lon),name:Be.display_name,raw:Be})))}catch(re){console.error("Geocode error",re),alert("Could not find location. Check console for details.")}finally{P(!1)}}},[A]),ws=G.useCallback(X=>{f({lat:X.lat,lon:X.lon,name:X.name}),N(""),b(null),y(!1);const re={id:`start-${X.lat}-${X.lon}`,name:X.name||"Start location",type:"locality",lat:X.lat,lon:X.lon,addedAt:Date.now()};o(ce=>ce.some(ae=>ae.id===re.id)?ce:[re,...ce])},[]),Es=G.useCallback(()=>{f(void 0),N(""),b(null),u(null)},[]),Hi=G.useMemo(()=>`${r.length} stop${r.length===1?"":"s"}`,[r.length]),Ts=null;return n?S.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#0f172a",color:"white",fontSize:18},children:"Loading..."}):t?S.jsxs("div",{className:"app",children:[S.jsx("header",{className:"header",children:S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",width:"100%",gap:16},children:[S.jsxs("div",{children:[S.jsxs("h1",{style:{fontSize:18,margin:0,display:"flex",alignItems:"center",gap:8},children:["Australia Trip Scheduler",S.jsx("span",{style:{fontSize:12,padding:"2px 6px",borderRadius:999,background:"#e2e8f0",color:"#0f172a",border:"1px solid #cbd5e1"},title:"Version",children:"v6.0"})]}),S.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginTop:6},children:[S.jsx("a",{className:"button small",href:"/interactive-Aus-map/user-manual.html",target:"_blank",rel:"noopener noreferrer",title:"Open the latest User Manual",children:" User Manual"}),S.jsx("button",{className:"button small",title:"See what's new in v6.0",onClick:()=>$(!0),children:" What's New"})]}),Hi,S.jsxs("div",{style:{fontSize:12,color:"#475569"},children:["Start: ",d?d.name??`${d.lat.toFixed(3)}, ${d.lon.toFixed(3)}`:"None"]}),S.jsxs("div",{style:{fontSize:12,color:"#475569",marginTop:4},children:["User: ",t.email]}),Ts]}),S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,alignItems:"center",flexGrow:1},children:[S.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[S.jsx("input",{className:"startInput",placeholder:"Type start place (e.g. Adelaide)",value:A,onChange:X=>N(X.target.value),onKeyDown:X=>{X.key==="Enter"&&vs()},disabled:U||!!d,"aria-label":"Start place input"}),S.jsx("button",{className:"button",onClick:vs,disabled:U||!A.trim()||!!d,children:U?"Searching":"Set Start"})]}),d&&S.jsxs("div",{style:{fontSize:14,fontWeight:500,color:"#1e40af",display:"flex",alignItems:"center",gap:8},children:[S.jsx("span",{children:"Starting from"}),S.jsx("span",{children:""}),S.jsx("span",{children:d.name||"Start location"}),S.jsx("button",{className:"button small",onClick:Es,title:"Clear start location",children:"Clear"})]}),S.jsx("div",{style:{position:"relative"},children:k&&S.jsxs("div",{className:"geocodePickOverlay",children:[S.jsx("div",{style:{display:"flex",justifyContent:"flex-end",padding:6},children:S.jsx("button",{className:"button small",onClick:()=>b(null),children:"Cancel"})}),k.map((X,re)=>S.jsxs("button",{className:"geocodeItem",onClick:()=>ws(X),children:[S.jsx("div",{style:{fontSize:13},children:X.name}),S.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:[X.lat.toFixed(4),", ",X.lon.toFixed(4)]})]},re))]})})]}),S.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap",justifyContent:"flex-end"},children:[S.jsx("button",{className:"button small",onClick:()=>M(!z),title:"Show only towns with population under 10,000",style:{background:z?"#ef4444":"#10b981"},children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[S.jsx("span",{children:"Show Only Small Towns"}),S.jsx("span",{style:{fontSize:10,marginTop:2},children:z?"Enabled":"Disabled"})]})}),S.jsx("button",{className:"button small",onClick:()=>An(!Ze),title:"Show/hide campsite markers",style:{background:Ze?"#10b981":"#ef4444"},children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[S.jsx("span",{children:"Show Campsites"}),S.jsx("span",{style:{fontSize:10,marginTop:2},children:Ze?"Enabled":"Disabled"})]})}),S.jsx("button",{className:"button",onClick:ii,disabled:w||r.length===0,children:w?"Routing":"Update Route"}),w&&S.jsx("span",{className:"spinner","aria-hidden":"true"}),S.jsx("button",{className:"button",onClick:xt,disabled:!a,title:"Download route as GPX",children:"Export GPX"}),S.jsx("button",{className:"button",onClick:ji,disabled:!a,title:"Open route in Google Maps",children:"Open in Google Maps"})]})]})}),S.jsxs("main",{className:"main",children:[S.jsx("div",{className:"mapPane",children:S.jsx(sA,{onAddPlace:nt,selectedIds:new Set(r.map(X=>X.id)),route:a,startLocation:d,selectingStart:_,showFuelStations:Q,showDumpPoints:C,showWaterPoints:O,showSmallTownsOnly:z,showCampsites:Ze,favorites:ze,toggleFavorite:Me,itinerary:r,onMapReady:et,visitedPlaces:Z,onStartSelected:(X,re,ce)=>{console.log("Start selected:",X,re,ce),f({lat:X,lon:re,name:ce}),y(!1);const ae={id:`start-${X}-${re}`,name:ce||"Start location",type:"locality",lat:X,lon:re,addedAt:Date.now()};o(fe=>{if(fe.some(rt=>rt.id===ae.id))return fe;const Le=[ae,...fe];return t&&Wo(t.uid,Le).catch(console.error),Le})}})}),S.jsxs("aside",{className:"sidebar",children:[S.jsxs("div",{className:"sidebarHeader",children:[S.jsxs("h2",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[S.jsx("span",{children:"Itinerary"}),a&&a.legs&&a.legs.length>0&&S.jsx("span",{style:{fontSize:14,fontWeight:"normal",color:"#475569"},children:(()=>{const X=a.legs.reduce((fe,Le)=>fe+Le.duration,0),re=X/3600;if(re>=24){const fe=Math.floor(re/24),Le=Math.floor(re%24),rt=Math.round(X%3600/60);return fe>0&&Le>0?`${fe}d ${Le}h ${rt}m`:fe>0?`${fe}d ${rt}m`:`${Le}h ${rt}m`}const ce=Math.floor(re),ae=Math.round(X%3600/60);return ce>0?`${ce}h ${ae}m`:`${ae}m`})()})]}),S.jsx("p",{style:{margin:"0 0 8px 0",fontSize:12,color:"#94a3b8",fontStyle:"italic"},children:"Scroll down to view Favourites"}),S.jsxs("div",{className:"button-grid",children:[S.jsx("button",{className:"button",onClick:()=>R(!Q),title:"Show fuel stations near itinerary stops",style:{background:Q?"#ef4444":"#10b981"},children:Q?"Hide Fuel":"Show Fuel"}),S.jsx("button",{className:"button",onClick:()=>ue(!0),disabled:r.length===0,title:"Save this route to your account",children:" Save Route"}),S.jsxs("button",{className:"button",onClick:()=>me(!0),title:"View all places you've visited",style:{backgroundColor:Z.length>0?"#10b981":void 0},children:[" Show Visits (",Z.length,")"]}),S.jsx("button",{className:"button",onClick:()=>x(!C),title:"Show RV dump points near itinerary stops",style:{background:C?"#ef4444":"#10b981"},children:C?"Hide Dumps":"Show Dumps"}),S.jsx("button",{className:"button",onClick:()=>F(!0),title:"Load a saved route or browse shared routes",children:" Load Route"}),S.jsx("button",{className:"button",onClick:gs,disabled:r.length===0,title:"Remove all stops from itinerary",children:"Clear itinerary"}),S.jsx("button",{className:"button",onClick:()=>V(!O),title:"Show drinking water filling points near itinerary stops",style:{background:O?"#ef4444":"#10b981"},children:O?"Hide Water":"Show Water"}),S.jsx("button",{className:"button",onClick:()=>Ae(!0),disabled:r.length===0,title:"Share your route with others",children:" Share Route"}),S.jsx("button",{className:"button",onClick:ot,title:"Sign out",style:{backgroundColor:"#ef4444"},children:"Logout"}),S.jsx("input",{ref:zn,type:"file",accept:"application/json",style:{display:"none"},onChange:Et})]})]}),S.jsxs("div",{className:"sidebarContent",children:[S.jsx(AM,{items:r,onRemove:Ge,onSetStart:Oe,onClearStart:Es,startLocation:d,onUploadAttachment:it,onDeleteAttachment:ke}),S.jsxs("div",{style:{marginTop:24},children:[S.jsxs("h2",{style:{margin:"0 0 12px 0",fontSize:18,fontWeight:600},children:[" Favorites (",ze.length,")"]}),S.jsx(LM,{favorites:ze,onAddToItinerary:nt,onRemove:Ce,onCenterMap:_n,onToggleVisited:$e,onUploadAttachment:it,onDeleteAttachment:ke})]})]})]})]}),te&&S.jsx(OM,{visitedPlaces:Z,onCenterMap:(X,re)=>{_n(X,re),me(!1)},onUnvisit:At,onClose:()=>me(!1)}),H&&S.jsx("div",{className:"modalOverlay",onClick:()=>$(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:S.jsxs("div",{onClick:X=>X.stopPropagation(),style:{background:"#fff",borderRadius:8,padding:16,maxWidth:520,width:"90%",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[S.jsx("h3",{style:{margin:0},children:"What's New in v6.0"}),S.jsx("button",{className:"button small",onClick:()=>$(!1),children:"Close"})]}),S.jsxs("ul",{style:{marginTop:12},children:[S.jsx("li",{children:" Share routes with others via shareable links - no login required to load."}),S.jsx("li",{children:" Routes are encoded in URLs for easy sharing via email, messaging, social media."}),S.jsx("li",{children:" Shared routes can be edited before saving - full flexibility for recipients."}),S.jsx("li",{children:" Wikipedia links on place markers for quick information access."}),S.jsx("li",{children:" File attachments for Favorites and Itinerary stops (photos, PDFs, docs)."}),S.jsx("li",{children:" Professional 3D beveled button styling throughout the app."})]}),S.jsx("div",{style:{marginTop:12},children:S.jsx("a",{href:"/interactive-Aus-map/user-manual.html",target:"_blank",rel:"noopener noreferrer",className:"button",children:"Read the Manual"})})]})}),S.jsx(BM,{itinerary:r,isOpen:we,onClose:()=>Ae(!1)}),S.jsx(HM,{isOpen:ne,onClose:()=>ue(!1),itinerary:r}),S.jsx(jM,{isOpen:Fe,onClose:()=>F(!1),onLoadRoute:X=>{o(X),t&&Wo(t.uid,X).catch(console.error)}})]}):S.jsx(WM,{onLoginSuccess:()=>{}})}Af.createRoot(document.getElementById("root")).render(S.jsx(ar.StrictMode,{children:S.jsx(QM,{})}));
