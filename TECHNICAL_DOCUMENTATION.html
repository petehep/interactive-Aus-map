<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>TECHNICAL_DOCUMENTATION</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css" />
</head>
<body>
<h1 id="australia-trip-scheduler---technical-documentation">Australia
Trip Scheduler - Technical Documentation</h1>
<h2 id="table-of-contents">Table of Contents</h2>
<ol type="1">
<li><a href="#project-overview">Project Overview</a></li>
<li><a href="#technology-stack">Technology Stack</a></li>
<li><a href="#project-structure">Project Structure</a></li>
<li><a href="#core-components">Core Components</a></li>
<li><a href="#data-management">Data Management</a></li>
<li><a href="#authentication-system">Authentication System</a></li>
<li><a href="#map-integration">Map Integration</a></li>
<li><a href="#api-integrations">API Integrations</a></li>
<li><a href="#deployment">Deployment</a></li>
<li><a href="#development-workflow">Development Workflow</a></li>
</ol>
<hr />
<h2 id="project-overview">Project Overview</h2>
<p><strong>Repository:</strong>
https://github.com/petehep/interactive-Aus-map<br />
<strong>Live URL:</strong>
https://petehep.github.io/interactive-Aus-map/<br />
<strong>Purpose:</strong> Interactive trip planning application for
Australia, featuring route optimization, campsite discovery, and
personal travel tracking.</p>
<h3 id="key-features">Key Features</h3>
<ul>
<li>Interactive map of Australia with OpenStreetMap data</li>
<li>Route planning with OSRM routing engine</li>
<li>Favorites and visited places tracking</li>
<li>Campsite, fuel station, water point, and dump station discovery</li>
<li>Firebase authentication for multi-user access</li>
<li>Mobile-responsive design</li>
</ul>
<hr />
<h2 id="technology-stack">Technology Stack</h2>
<h3 id="frontend-framework">Frontend Framework</h3>
<ul>
<li><strong>React 18.3.1</strong> - UI framework</li>
<li><strong>TypeScript 5.6.3</strong> - Type safety and development
experience</li>
<li><strong>Vite 5.4.8</strong> - Build tool and dev server</li>
</ul>
<h3 id="mapping-gis">Mapping &amp; GIS</h3>
<ul>
<li><strong>Leaflet 1.9.4</strong> - Interactive map library</li>
<li><strong>React-Leaflet 4.2.1</strong> - React bindings for
Leaflet</li>
<li><strong>React-Leaflet-Cluster 2.1.0</strong> - Marker clustering for
performance</li>
<li><strong>Overpass API</strong> - OpenStreetMap data queries</li>
<li><strong>OSRM (Open Source Routing Machine)</strong> - Route
calculation</li>
</ul>
<h3 id="backend-services">Backend Services</h3>
<ul>
<li><strong>Firebase 10.14.0</strong>
<ul>
<li>Authentication (Email/Password)</li>
<li>Firestore (database, prepared but not yet implemented)</li>
</ul></li>
<li><strong>Nominatim</strong> - Geocoding service</li>
</ul>
<h3 id="weather-integration">Weather Integration</h3>
<ul>
<li><strong>MeteoBlue</strong> - 14-day weather forecasts</li>
</ul>
<h3 id="hosting">Hosting</h3>
<ul>
<li><strong>GitHub Pages</strong> - Static site hosting</li>
</ul>
<hr />
<h2 id="project-structure">Project Structure</h2>
<pre><code>aus-trip-scheduler/
├── public/                      # Static assets
├── src/
│   ├── components/             # React components
│   │   ├── Favorites.tsx       # Favorites list with state grouping
│   │   ├── Itinerary.tsx       # Trip itinerary display
│   │   ├── Login.tsx           # Authentication UI
│   │   ├── MapView.tsx         # Main map component (759 lines)
│   │   └── VisitedPlaces.tsx   # Visited places modal
│   ├── types/
│   │   └── react-leaflet-cluster.d.ts  # Type definitions
│   ├── App.tsx                 # Main application component (682 lines)
│   ├── firebase.ts             # Firebase configuration
│   ├── index.css               # Global styles and responsive design
│   ├── main.tsx               # React entry point
│   └── vite-env.d.ts          # Vite type definitions
├── index.html                  # HTML entry point
├── package.json                # Dependencies and scripts
├── tsconfig.json              # TypeScript configuration
├── vite.config.ts             # Vite build configuration
└── .github/workflows/         # GitHub Actions for deployment</code></pre>
<hr />
<h2 id="core-components">Core Components</h2>
<h3 id="app.tsx-main-application">App.tsx (Main Application)</h3>
<p><strong>Location:</strong> <code>src/App.tsx</code><br />
<strong>Lines of Code:</strong> 682<br />
<strong>Purpose:</strong> Root component managing application state and
routing</p>
<h4 id="key-state-variables">Key State Variables</h4>
<div class="sourceCode" id="cb2"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Authentication</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [user<span class="op">,</span> setUser] <span class="op">=</span> <span class="fu">useState</span><span class="op">&lt;</span><span class="dt">any</span><span class="op">&gt;</span>(<span class="kw">null</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [authLoading<span class="op">,</span> setAuthLoading] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">true</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Trip Planning</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [itinerary<span class="op">,</span> setItinerary] <span class="op">=</span> <span class="fu">useState</span><span class="op">&lt;</span>ItineraryItem[]<span class="op">&gt;</span>([])</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [route<span class="op">,</span> setRoute] <span class="op">=</span> <span class="fu">useState</span><span class="op">&lt;</span>RouteResult<span class="op">&gt;</span>(<span class="kw">null</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [startLocation<span class="op">,</span> setStartLocation] <span class="op">=</span> <span class="fu">useState</span><span class="op">&lt;</span>{lat<span class="op">,</span> lon<span class="op">,</span> name}<span class="op">&gt;</span>()</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">// User Data (localStorage-backed)</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [favorites<span class="op">,</span> setFavorites] <span class="op">=</span> <span class="fu">useState</span><span class="op">&lt;</span>Place[]<span class="op">&gt;</span>([])</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [visitedPlaces<span class="op">,</span> setVisitedPlaces] <span class="op">=</span> <span class="fu">useState</span><span class="op">&lt;</span>Place[]<span class="op">&gt;</span>([])</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">// UI State</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [showFuelStations<span class="op">,</span> setShowFuelStations] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">false</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [showDumpPoints<span class="op">,</span> setShowDumpPoints] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">false</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [showWaterPoints<span class="op">,</span> setShowWaterPoints] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">false</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [showSmallTownsOnly<span class="op">,</span> setShowSmallTownsOnly] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">false</span>)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [showCampsites<span class="op">,</span> setShowCampsites] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">true</span>)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> [showVisitedModal<span class="op">,</span> setShowVisitedModal] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">false</span>)</span></code></pre></div>
<h4 id="key-functions">Key Functions</h4>
<p><strong>Route Calculation</strong></p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> updateRoute <span class="op">=</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Uses OSRM Trip API</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Endpoint: https://router.project-osrm.org/trip/v1/driving/{coords}</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Parameters: source=first, roundtrip=false, overview=full</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Geocoding</strong></p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> geocodeStart <span class="op">=</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Uses Nominatim API</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Endpoint: https://nominatim.openstreetmap.org/search</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Converts place names to coordinates</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Favorites Management</strong></p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> toggleFavorite <span class="op">=</span> (place<span class="op">:</span> Place) <span class="kw">=&gt;</span> {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Adds/removes from favorites array</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Syncs to localStorage: &#39;trip-favorites&#39;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> toggleVisited <span class="op">=</span> (id<span class="op">:</span> <span class="dt">string</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Marks place as visited</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Updates both favorites and visitedPlaces</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Stores timestamp</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> unvisitPlace <span class="op">=</span> (id<span class="op">:</span> <span class="dt">string</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Removes from visited list</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Updates both storage locations</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Data Persistence</strong> - <strong>localStorage
keys:</strong> - <code>trip-favorites</code> - Favorites array -
<code>trip-visited-places</code> - Visited places with timestamps</p>
<hr />
<h3 id="mapview.tsx-map-component">MapView.tsx (Map Component)</h3>
<p><strong>Location:</strong>
<code>src/components/MapView.tsx</code><br />
<strong>Lines of Code:</strong> 937<br />
<strong>Purpose:</strong> Interactive Leaflet map with marker clustering
and data fetching</p>
<h4 id="type-definitions">Type Definitions</h4>
<div class="sourceCode" id="cb6"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">export type</span> Place <span class="op">=</span> {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  id<span class="op">:</span> <span class="dt">string</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  name<span class="op">:</span> <span class="dt">string</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  type<span class="op">:</span> <span class="st">&#39;city&#39;</span> <span class="op">|</span> <span class="st">&#39;town&#39;</span> <span class="op">|</span> <span class="st">&#39;village&#39;</span> <span class="op">|</span> <span class="st">&#39;hamlet&#39;</span> <span class="op">|</span> <span class="st">&#39;locality&#39;</span> <span class="op">|</span> <span class="st">&#39;attraction&#39;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  lat<span class="op">:</span> <span class="dt">number</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  lon<span class="op">:</span> <span class="dt">number</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  population<span class="op">?:</span> <span class="dt">number</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  visited<span class="op">?:</span> <span class="dt">boolean</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  visitedAt<span class="op">?:</span> <span class="dt">number</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h4 id="map-configuration">Map Configuration</h4>
<ul>
<li><strong>Center:</strong> [-25.2744, 133.7751] (Center of
Australia)</li>
<li><strong>Initial Zoom:</strong> 4</li>
<li><strong>Min Zoom:</strong> 3</li>
<li><strong>Max Zoom:</strong> 15</li>
<li><strong>Tile Layer:</strong> OpenStreetMap standard tiles</li>
</ul>
<h4 id="marker-icons-css-filters">Marker Icons (CSS Filters)</h4>
<div class="sourceCode" id="cb7"><pre
class="sourceCode css"><code class="sourceCode css"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.purple-marker</span> { <span class="kw">filter</span><span class="ch">:</span> <span class="fu">hue-rotate(</span><span class="dv">90</span><span class="dt">deg</span><span class="fu">)</span> <span class="fu">saturate(</span><span class="dv">1.8</span><span class="fu">)</span> <span class="fu">brightness(</span><span class="dv">1.1</span><span class="fu">)</span><span class="op">;</span> }    <span class="co">/* Free camps */</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">.green-marker</span> { <span class="kw">filter</span><span class="ch">:</span> <span class="fu">hue-rotate(</span><span class="dv">220</span><span class="dt">deg</span><span class="fu">)</span> <span class="fu">saturate(</span><span class="dv">2.5</span><span class="fu">)</span> <span class="fu">brightness(</span><span class="dv">0.95</span><span class="fu">)</span><span class="op">;</span> }   <span class="co">/* Paid camps */</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">.orange-marker</span> { <span class="kw">filter</span><span class="ch">:</span> <span class="fu">hue-rotate(</span><span class="dv">330</span><span class="dt">deg</span><span class="fu">)</span> <span class="fu">saturate(</span><span class="dv">2.0</span><span class="fu">)</span> <span class="fu">brightness(</span><span class="dv">1.1</span><span class="fu">)</span><span class="op">;</span> }   <span class="co">/* Fuel */</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">.blue-marker</span> { <span class="kw">filter</span><span class="ch">:</span> <span class="fu">hue-rotate(</span><span class="dv">180</span><span class="dt">deg</span><span class="fu">)</span> <span class="fu">saturate(</span><span class="dv">2.0</span><span class="fu">)</span> <span class="fu">brightness(</span><span class="dv">1.0</span><span class="fu">)</span><span class="op">;</span> }     <span class="co">/* Dumps */</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">.cyan-marker</span> { <span class="kw">filter</span><span class="ch">:</span> <span class="fu">hue-rotate(</span><span class="dv">150</span><span class="dt">deg</span><span class="fu">)</span> <span class="fu">saturate(</span><span class="dv">2.5</span><span class="fu">)</span> <span class="fu">brightness(</span><span class="dv">1.2</span><span class="fu">)</span><span class="op">;</span> }     <span class="co">/* Water */</span></span></code></pre></div>
<h4 id="progressive-data-loading">Progressive Data Loading</h4>
<p><strong>Zoom-based Place Loading:</strong></p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (zoom <span class="op">&lt;</span> <span class="dv">4</span>) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Show nothing</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (zoom <span class="op">&lt;</span> <span class="dv">6</span>) {</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Major cities only (population &gt; 1M)</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  qParts<span class="op">.</span><span class="fu">push</span>(<span class="vs">`node[&quot;place&quot;=&quot;city&quot;][&quot;population&quot;~&quot;[0-9]{6,}&quot;]`</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (zoom <span class="op">&lt;</span> <span class="dv">8</span>) {</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// All cities and towns</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  qParts<span class="op">.</span><span class="fu">push</span>(<span class="vs">`node[&quot;place&quot;=&quot;city&quot;]`</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  qParts<span class="op">.</span><span class="fu">push</span>(<span class="vs">`node[&quot;place&quot;=&quot;town&quot;]`</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Cities, towns, villages (+ hamlets/localities with Small Towns filter)</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  qParts<span class="op">.</span><span class="fu">push</span>(<span class="vs">`node[&quot;place&quot;~&quot;city|town|village&quot;]`</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Campsite Loading:</strong> - Minimum zoom: 8 - Queries both
<code>tourism=camp_site</code> and <code>tourism=caravan_site</code> -
Separates into free and paid based on <code>fee</code> tag</p>
<p><strong>Fuel/Dump/Water Points:</strong> - Only shown when explicitly
toggled - Searches within 10km radius of itinerary stops - Queries: -
Fuel: <code>amenity=fuel</code> - Dumps:
<code>amenity=sanitary_dump_station</code> - Water:
<code>amenity=drinking_water</code> OR
<code>amenity=water_point</code></p>
<h4 id="debouncing-rate-limiting">Debouncing &amp; Rate Limiting</h4>
<ul>
<li>Map movement debounced by 1000ms</li>
<li>Prevents excessive Overpass API calls</li>
<li>Mitigates 429 (Too Many Requests) errors</li>
</ul>
<hr />
<h3 id="favorites.tsx">Favorites.tsx</h3>
<p><strong>Location:</strong>
<code>src/components/Favorites.tsx</code><br />
<strong>Purpose:</strong> Display favorites organized by Australian
state</p>
<h4 id="state-detection-algorithm">State Detection Algorithm</h4>
<div class="sourceCode" id="cb9"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">getAustralianState</span>(lat<span class="op">:</span> <span class="dt">number</span><span class="op">,</span> lon<span class="op">:</span> <span class="dt">number</span>)<span class="op">:</span> <span class="dt">string</span> {</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Uses coordinate boundaries to determine state</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// NSW, VIC, QLD, SA, WA, TAS, NT, ACT</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Rough boundaries based on lat/lon ranges</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h4 id="features">Features</h4>
<ul>
<li>Groups favorites by state</li>
<li>Alphabetical sorting within states</li>
<li>Click name to center map</li>
<li>Weather and Google Maps links</li>
<li>Add to itinerary button</li>
<li>Visited toggle</li>
<li>Remove from favorites</li>
</ul>
<hr />
<h3 id="visitedplaces.tsx">VisitedPlaces.tsx</h3>
<p><strong>Location:</strong>
<code>src/components/VisitedPlaces.tsx</code><br />
<strong>Purpose:</strong> Modal displaying all visited places</p>
<h4 id="features-1">Features</h4>
<ul>
<li>Modal overlay with backdrop</li>
<li>State-organized display</li>
<li>Visit timestamps with date formatting</li>
<li>Unvisit functionality</li>
<li>Click name to center map and close modal</li>
<li>Persists independently from favorites</li>
</ul>
<hr />
<h3 id="login.tsx">Login.tsx</h3>
<p><strong>Location:</strong>
<code>src/components/Login.tsx</code><br />
<strong>Purpose:</strong> Firebase authentication UI</p>
<h4 id="features-2">Features</h4>
<ul>
<li>Email/password authentication</li>
<li>Toggle between sign-up and sign-in</li>
<li>Form validation (min 6 char password)</li>
<li>Error display</li>
<li>Loading states</li>
<li>Full-screen modal design</li>
</ul>
<hr />
<h2 id="data-management">Data Management</h2>
<h3 id="current-implementation-localstorage">Current Implementation:
localStorage</h3>
<h4 id="storage-keys">Storage Keys</h4>
<p><strong>trip-favorites</strong></p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Place[] <span class="op">=</span> [</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    id<span class="op">:</span> <span class="st">&quot;node/123456&quot;</span><span class="op">,</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    name<span class="op">:</span> <span class="st">&quot;Sydney&quot;</span><span class="op">,</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    type<span class="op">:</span> <span class="st">&quot;city&quot;</span><span class="op">,</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    lat<span class="op">:</span> <span class="op">-</span><span class="fl">33.8688</span><span class="op">,</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    lon<span class="op">:</span> <span class="fl">151.2093</span><span class="op">,</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    population<span class="op">:</span> <span class="dv">5312000</span><span class="op">,</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    visited<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    visitedAt<span class="op">:</span> <span class="dv">1700000000000</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div>
<p><strong>trip-visited-places</strong></p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>Place[] <span class="op">=</span> [</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Same structure as favorites</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Independent list that persists even when favorites cleared</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div>
<h4 id="data-flow">Data Flow</h4>
<ol type="1">
<li><strong>User Action</strong> (e.g., toggle favorite)</li>
<li><strong>State Update</strong> (React setState)</li>
<li><strong>localStorage Sync</strong> (JSON.stringify and setItem)</li>
<li><strong>Re-render</strong> (React updates UI)</li>
</ol>
<h4 id="limitations">Limitations</h4>
<ul>
<li>Data stored per-device only</li>
<li>No cross-device sync</li>
<li>No backup/recovery</li>
<li>Limited storage (~5-10MB)</li>
</ul>
<h3 id="future-implementation-firestore">Future Implementation:
Firestore</h3>
<h4 id="prepared-structure">Prepared Structure</h4>
<pre><code>users/
  {userId}/
    favorites/
      {placeId}/
        - id
        - name
        - type
        - lat
        - lon
        - visited
        - visitedAt
    
    visited/
      {placeId}/
        - (same structure)
    
    itineraries/
      {itineraryId}/
        - name
        - created
        - places[]
        - route</code></pre>
<h4 id="firebase-configuration">Firebase Configuration</h4>
<p><strong>File:</strong> <code>src/firebase.ts</code></p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { getFirestore } <span class="im">from</span> <span class="st">&quot;firebase/firestore&quot;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> db <span class="op">=</span> <span class="fu">getFirestore</span>(app)</span></code></pre></div>
<p><strong>Not yet implemented:</strong> - Firestore CRUD operations -
Real-time listeners - Data migration from localStorage</p>
<hr />
<h2 id="authentication-system">Authentication System</h2>
<h3 id="firebase-authentication">Firebase Authentication</h3>
<p><strong>Configuration File:</strong> <code>src/firebase.ts</code></p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> firebaseConfig <span class="op">=</span> {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  apiKey<span class="op">:</span> <span class="st">&quot;AIzaSyDWdcEBNoobKZoNRQmWlooCJNCBfb_M8-U&quot;</span><span class="op">,</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  authDomain<span class="op">:</span> <span class="st">&quot;lapmap-cc281.firebaseapp.com&quot;</span><span class="op">,</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  projectId<span class="op">:</span> <span class="st">&quot;lapmap-cc281&quot;</span><span class="op">,</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  storageBucket<span class="op">:</span> <span class="st">&quot;lapmap-cc281.firebasestorage.app&quot;</span><span class="op">,</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  messagingSenderId<span class="op">:</span> <span class="st">&quot;102969245328&quot;</span><span class="op">,</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  appId<span class="op">:</span> <span class="st">&quot;1:102969245328:web:1b3478a17782fc6f792215&quot;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="authentication-flow">Authentication Flow</h3>
<ol type="1">
<li><p><strong>App Load</strong></p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">useEffect</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> unsubscribe <span class="op">=</span> <span class="fu">onAuthStateChanged</span>(auth<span class="op">,</span> (currentUser) <span class="kw">=&gt;</span> {</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setUser</span>(currentUser)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setAuthLoading</span>(<span class="kw">false</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> () <span class="kw">=&gt;</span> <span class="fu">unsubscribe</span>()</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span> [])</span></code></pre></div></li>
<li><p><strong>Not Authenticated</strong> → Show
<code>&lt;Login /&gt;</code> component</p></li>
<li><p><strong>Sign Up</strong></p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> <span class="fu">createUserWithEmailAndPassword</span>(auth<span class="op">,</span> email<span class="op">,</span> password)</span></code></pre></div></li>
<li><p><strong>Sign In</strong></p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> <span class="fu">signInWithEmailAndPassword</span>(auth<span class="op">,</span> email<span class="op">,</span> password)</span></code></pre></div></li>
<li><p><strong>Authenticated</strong> → Show main app with user.email in
header</p></li>
<li><p><strong>Sign Out</strong></p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> <span class="fu">signOut</span>(auth)</span></code></pre></div></li>
</ol>
<h3 id="security">Security</h3>
<ul>
<li>Passwords hashed by Firebase</li>
<li>No credentials stored in code</li>
<li>Auth state managed by Firebase SDK</li>
<li>Authorized domains configured in Firebase Console</li>
</ul>
<hr />
<h2 id="map-integration">Map Integration</h2>
<h3 id="leaflet-setup">Leaflet Setup</h3>
<p><strong>Imports:</strong></p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { MapContainer<span class="op">,</span> TileLayer<span class="op">,</span> Marker<span class="op">,</span> Popup<span class="op">,</span> Polyline<span class="op">,</span> CircleMarker } <span class="im">from</span> <span class="st">&#39;react-leaflet&#39;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> MarkerClusterGroup <span class="im">from</span> <span class="st">&#39;react-leaflet-cluster&#39;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> L <span class="im">from</span> <span class="st">&#39;leaflet&#39;</span></span></code></pre></div>
<p><strong>Icon Path Fix for Vite:</strong></p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> marker2x <span class="im">from</span> <span class="st">&#39;leaflet/dist/images/marker-icon-2x.png&#39;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> marker1x <span class="im">from</span> <span class="st">&#39;leaflet/dist/images/marker-icon.png&#39;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> markerShadow <span class="im">from</span> <span class="st">&#39;leaflet/dist/images/marker-shadow.png&#39;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>L<span class="op">.</span><span class="at">Icon</span><span class="op">.</span><span class="at">Default</span><span class="op">.</span><span class="fu">mergeOptions</span>({</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  iconRetinaUrl<span class="op">:</span> marker2x<span class="op">,</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  iconUrl<span class="op">:</span> marker1x<span class="op">,</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  shadowUrl<span class="op">:</span> markerShadow<span class="op">,</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<h3 id="marker-clustering">Marker Clustering</h3>
<p><strong>Configuration:</strong></p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>MarkerClusterGroup chunkedLoading<span class="op">&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  {places<span class="op">.</span><span class="fu">map</span>(p <span class="kw">=&gt;</span> <span class="op">&lt;</span>Marker key<span class="op">=</span>{p<span class="op">.</span><span class="at">id</span>} position<span class="op">=</span>{[p<span class="op">.</span><span class="at">lat</span><span class="op">,</span> p<span class="op">.</span><span class="at">lon</span>]} <span class="op">/&gt;</span>)}</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span>MarkerClusterGroup<span class="op">&gt;</span></span></code></pre></div>
<p><strong>Important:</strong> MarkerClusterGroup does not support
dynamic icon changes on existing markers. This is why visited status is
shown in popup content rather than changing marker icons.</p>
<h3 id="route-display">Route Display</h3>
<div class="sourceCode" id="cb22"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>{route <span class="op">&amp;&amp;</span> (</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">&lt;&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>Polyline positions<span class="op">=</span>{route<span class="op">.</span><span class="at">coordinates</span>} color<span class="op">=</span><span class="st">&quot;#2563eb&quot;</span> weight<span class="op">=</span>{<span class="dv">4</span>} <span class="op">/&gt;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    {route<span class="op">.</span><span class="at">waypoints</span><span class="op">.</span><span class="fu">map</span>((wp<span class="op">,</span> i) <span class="kw">=&gt;</span> (</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>      <span class="op">&lt;</span>CircleMarker key<span class="op">=</span>{i} center<span class="op">=</span>{wp} radius<span class="op">=</span>{<span class="dv">6</span>} fillColor<span class="op">=</span><span class="st">&quot;#2563eb&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    ))}</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">&lt;/&gt;</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>)}</span></code></pre></div>
<hr />
<h2 id="api-integrations">API Integrations</h2>
<h3 id="overpass-api-openstreetmap-data">Overpass API (OpenStreetMap
Data)</h3>
<p><strong>Purpose:</strong> Query POIs, campsites, fuel stations,
etc.</p>
<p><strong>Endpoints:</strong> -
<code>https://overpass-api.de/api/interpreter</code> -
<code>https://lz4.overpass-api.de/api/interpreter</code> -
<code>https://overpass.kumi.systems/api/interpreter</code></p>
<p><strong>Strategy:</strong> Try multiple endpoints in sequence for
redundancy</p>
<p><strong>Example Query:</strong></p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>[out<span class="op">:</span>json][timeout<span class="op">:</span><span class="dv">25</span>]<span class="op">;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  node[<span class="st">&quot;place&quot;</span><span class="op">=</span><span class="st">&quot;city&quot;</span>](south<span class="op">,</span>west<span class="op">,</span>north<span class="op">,</span>east)<span class="op">;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  node[<span class="st">&quot;place&quot;</span><span class="op">=</span><span class="st">&quot;town&quot;</span>](south<span class="op">,</span>west<span class="op">,</span>north<span class="op">,</span>east)<span class="op">;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>out body<span class="op">;</span></span></code></pre></div>
<p><strong>Rate Limiting:</strong> - 1000ms debounce on map movement -
Graceful fallback to alternative endpoints - Error handling for 429 (Too
Many Requests)</p>
<h3 id="osrm-routing">OSRM (Routing)</h3>
<p><strong>Endpoint:</strong>
<code>https://router.project-osrm.org/trip/v1/driving/{coords}</code></p>
<p><strong>Parameters:</strong> - <code>source=first</code> - Start from
first coordinate - <code>roundtrip=false</code> - One-way trip -
<code>overview=full</code> - Return full geometry -
<code>geometries=geojson</code> - GeoJSON format</p>
<p><strong>Input Format:</strong></p>
<pre><code>lon1,lat1;lon2,lat2;lon3,lat3</code></pre>
<p><strong>Response:</strong></p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;trips&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;geometry&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;coordinates&quot;</span><span class="fu">:</span> <span class="ot">[[</span><span class="er">lon</span><span class="ot">,</span> <span class="er">lat</span><span class="ot">],</span> <span class="er">...</span><span class="ot">]</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;legs&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span><span class="dt">&quot;distance&quot;</span><span class="fu">:</span> <span class="dv">123456</span><span class="fu">,</span> <span class="dt">&quot;duration&quot;</span><span class="fu">:</span> <span class="dv">7890</span><span class="fu">}</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span><span class="ot">]</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="nominatim-geocoding">Nominatim (Geocoding)</h3>
<p><strong>Endpoint:</strong>
<code>https://nominatim.openstreetmap.org/search</code></p>
<p><strong>Parameters:</strong> - <code>q</code> - Query string -
<code>format=json</code> - <code>countrycodes=au</code> - Australia only
- <code>limit=5</code> - Max results</p>
<p><strong>Usage Policy:</strong> Rate limited, user-agent required</p>
<h3 id="meteoblue-weather">MeteoBlue (Weather)</h3>
<p><strong>URL Format:</strong></p>
<pre><code>https://www.meteoblue.com/en/weather/forecast/week/{lat}N{lon}E</code></pre>
<p><strong>Integration:</strong> External link, no API calls
required</p>
<h3 id="google-maps">Google Maps</h3>
<p><strong>URL Format:</strong></p>
<pre><code>https://www.google.com/maps/search/?api=1&amp;query={lat},{lon}</code></pre>
<p><strong>Integration:</strong> External link for viewing locations</p>
<hr />
<h2 id="deployment">Deployment</h2>
<h3 id="github-pages">GitHub Pages</h3>
<p><strong>Configuration:</strong></p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">// vite.config.ts</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> <span class="fu">defineConfig</span>({</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  base<span class="op">:</span> <span class="st">&#39;/interactive-Aus-map/&#39;</span><span class="op">,</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  plugins<span class="op">:</span> [<span class="fu">react</span>()]<span class="op">,</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p><strong>Workflow:</strong> <code>.github/workflows/deploy.yml</code>
- Triggers on push to <code>main</code> branch - Builds with
<code>npm run build</code> - Deploys to <code>gh-pages</code> branch -
Live in 2-3 minutes</p>
<p><strong>Build Command:</strong> <code>npm run build</code> -
TypeScript compilation - Vite production build - Output:
<code>dist/</code> folder</p>
<h3 id="domain-configuration">Domain Configuration</h3>
<p><strong>Live URL:</strong>
https://petehep.github.io/interactive-Aus-map/</p>
<p><strong>Firebase Authorized Domains:</strong> -
<code>localhost</code> (development) - <code>petehep.github.io</code>
(production)</p>
<hr />
<h2 id="development-workflow">Development Workflow</h2>
<h3 id="setup">Setup</h3>
<div class="sourceCode" id="cb29"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clone repository</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/petehep/interactive-Aus-map.git</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> interactive-Aus-map</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Install dependencies</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Start dev server</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run dev</span></code></pre></div>
<h3 id="development-server">Development Server</h3>
<p><strong>Command:</strong> <code>npm run dev</code><br />
<strong>URL:</strong> http://localhost:5173/interactive-Aus-map/<br />
<strong>Hot Module Replacement:</strong> Enabled<br />
<strong>Port:</strong> 5173</p>
<h3 id="building-for-production">Building for Production</h3>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run build</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run preview  <span class="co"># Test production build locally</span></span></code></pre></div>
<h3 id="git-workflow">Git Workflow</h3>
<div class="sourceCode" id="cb31"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make changes</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add .</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">&quot;Description of changes&quot;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin main</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Automatic deployment to GitHub Pages</span></span></code></pre></div>
<h3 id="code-style">Code Style</h3>
<ul>
<li><strong>Language:</strong> TypeScript strict mode</li>
<li><strong>React:</strong> Functional components with hooks</li>
<li><strong>State Management:</strong> useState, useCallback, useMemo,
useEffect</li>
<li><strong>Styling:</strong> Inline styles and CSS classes</li>
<li><strong>Component Structure:</strong> Props interface, component
function, export</li>
</ul>
<hr />
<h2 id="performance-optimizations">Performance Optimizations</h2>
<h3 id="map-performance">Map Performance</h3>
<ul>
<li><strong>Marker Clustering</strong> - Prevents rendering thousands of
markers</li>
<li><strong>Progressive Loading</strong> - Loads appropriate detail for
zoom level</li>
<li><strong>Debouncing</strong> - 1000ms delay on map movement</li>
</ul>
<h3 id="react-performance">React Performance</h3>
<ul>
<li><strong>useCallback</strong> - Memoize functions to prevent
re-renders</li>
<li><strong>useMemo</strong> - Memoize expensive computations (state
grouping)</li>
<li><strong>Key Props</strong> - Proper keys on lists for efficient
reconciliation</li>
</ul>
<h3 id="network-optimization">Network Optimization</h3>
<ul>
<li><strong>Multiple API Endpoints</strong> - Fallback for
reliability</li>
<li><strong>Conditional Fetching</strong> - Only fetch when needed</li>
<li><strong>Abort Controllers</strong> - Cancel in-flight requests on
new queries</li>
</ul>
<hr />
<h2 id="known-limitations">Known Limitations</h2>
<ol type="1">
<li><strong>Marker Icon Changes</strong> - Cannot dynamically change
marker icons in clusters</li>
<li><strong>OSM Data Coverage</strong> - Remote areas have limited
data</li>
<li><strong>Rate Limiting</strong> - Overpass API has usage limits</li>
<li><strong>localStorage Size</strong> - ~5-10MB limit per domain</li>
<li><strong>No Offline Mode</strong> - Requires internet for tiles and
data</li>
<li><strong>Single Device</strong> - Data not synced across devices
(yet)</li>
</ol>
<hr />
<h2 id="future-enhancements">Future Enhancements</h2>
<h3 id="phase-1-firestore-integration">Phase 1: Firestore
Integration</h3>
<ul>
<li>Migrate localStorage to Firestore</li>
<li>User-specific data storage</li>
<li>Cross-device synchronization</li>
<li>Real-time updates</li>
</ul>
<h3 id="phase-2-advanced-features">Phase 2: Advanced Features</h3>
<ul>
<li>Offline map caching</li>
<li>Route waypoint reordering (drag &amp; drop)</li>
<li>Distance/fuel cost calculations</li>
<li>Custom map layers</li>
<li>Export itinerary to PDF/GPX</li>
</ul>
<h3 id="phase-3-social-features">Phase 3: Social Features</h3>
<ul>
<li>Share itineraries with friends</li>
<li>Public/private trip visibility</li>
<li>Comments and ratings on places</li>
<li>Photo uploads</li>
</ul>
<hr />
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="marker-icons-not-loading">Marker Icons Not Loading</h3>
<p><strong>Symptom:</strong> Placeholder boxes with “Mar…”<br />
<strong>Cause:</strong> Vite asset path issues<br />
<strong>Solution:</strong> Verify imports in MapView.tsx lines 8-10</p>
<h3 id="firebase-auth-not-working-on-github-pages">Firebase Auth Not
Working on GitHub Pages</h3>
<p><strong>Symptom:</strong> Login fails in production<br />
<strong>Cause:</strong> Domain not authorized<br />
<strong>Solution:</strong> Add <code>petehep.github.io</code> to
Firebase Console → Authentication → Settings → Authorized domains</p>
<h3 id="overpass-api-429-errors">Overpass API 429 Errors</h3>
<p><strong>Symptom:</strong> Places not loading<br />
<strong>Cause:</strong> Rate limiting<br />
<strong>Solution:</strong> Increase debounce delay or reduce query
frequency</p>
<h3 id="typescript-errors">TypeScript Errors</h3>
<p><strong>Symptom:</strong> Build fails<br />
<strong>Cause:</strong> Type mismatches<br />
<strong>Solution:</strong> Run <code>npm run build</code> to see errors,
fix type definitions</p>
<hr />
<h2 id="contact-support">Contact &amp; Support</h2>
<p><strong>Repository:</strong>
https://github.com/petehep/interactive-Aus-map<br />
<strong>Issues:</strong> Report bugs via GitHub Issues<br />
<strong>Documentation:</strong> This file and USER_MANUAL.md</p>
<hr />
<p><em>Last Updated: November 24, 2025</em></p>
</body>
</html>
