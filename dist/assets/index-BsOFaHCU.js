(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var Xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Gh(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var Xy={exports:{}},Zh={},Jy={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu=Symbol.for("react.element"),MI=Symbol.for("react.portal"),DI=Symbol.for("react.fragment"),VI=Symbol.for("react.strict_mode"),zI=Symbol.for("react.profiler"),UI=Symbol.for("react.provider"),FI=Symbol.for("react.context"),BI=Symbol.for("react.forward_ref"),jI=Symbol.for("react.suspense"),HI=Symbol.for("react.memo"),WI=Symbol.for("react.lazy"),__=Symbol.iterator;function qI(t){return t===null||typeof t!="object"?null:(t=__&&t[__]||t["@@iterator"],typeof t=="function"?t:null)}var Yy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ew=Object.assign,tw={};function ka(t,e,n){this.props=t,this.context=e,this.refs=tw,this.updater=n||Yy}ka.prototype.isReactComponent={};ka.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ka.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nw(){}nw.prototype=ka.prototype;function qp(t,e,n){this.props=t,this.context=e,this.refs=tw,this.updater=n||Yy}var Gp=qp.prototype=new nw;Gp.constructor=qp;ew(Gp,ka.prototype);Gp.isPureReactComponent=!0;var v_=Array.isArray,iw=Object.prototype.hasOwnProperty,Zp={current:null},rw={key:!0,ref:!0,__self:!0,__source:!0};function sw(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)iw.call(e,i)&&!rw.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var d=Array(u),f=0;f<u;f++)d[f]=arguments[f+2];r.children=d}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:wu,type:t,key:o,ref:a,props:r,_owner:Zp.current}}function GI(t,e){return{$$typeof:wu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kp(t){return typeof t=="object"&&t!==null&&t.$$typeof===wu}function ZI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var y_=/\/+/g;function Vd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZI(""+t.key):e.toString(36)}function Dc(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case wu:case MI:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Vd(a,0):i,v_(r)?(n="",t!=null&&(n=t.replace(y_,"$&/")+"/"),Dc(r,e,n,"",function(f){return f})):r!=null&&(Kp(r)&&(r=GI(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(y_,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",v_(t))for(var u=0;u<t.length;u++){o=t[u];var d=i+Vd(o,u);a+=Dc(o,e,n,d,r)}else if(d=qI(t),typeof d=="function")for(t=d.call(t),u=0;!(o=t.next()).done;)o=o.value,d=i+Vd(o,u++),a+=Dc(o,e,n,d,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function dc(t,e,n){if(t==null)return t;var i=[],r=0;return Dc(t,i,"","",function(o){return e.call(n,o,r++)}),i}function KI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},Vc={transition:null},$I={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:Vc,ReactCurrentOwner:Zp};function ow(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:dc,forEach:function(t,e,n){dc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dc(t,function(){e++}),e},toArray:function(t){return dc(t,function(e){return e})||[]},only:function(t){if(!Kp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=ka;Oe.Fragment=DI;Oe.Profiler=zI;Oe.PureComponent=qp;Oe.StrictMode=VI;Oe.Suspense=jI;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$I;Oe.act=ow;Oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ew({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Zp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)iw.call(e,d)&&!rw.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){u=Array(d);for(var f=0;f<d;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:wu,type:t.type,key:r,ref:o,props:i,_owner:a}};Oe.createContext=function(t){return t={$$typeof:FI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UI,_context:t},t.Consumer=t};Oe.createElement=sw;Oe.createFactory=function(t){var e=sw.bind(null,t);return e.type=t,e};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:BI,render:t}};Oe.isValidElement=Kp;Oe.lazy=function(t){return{$$typeof:WI,_payload:{_status:-1,_result:t},_init:KI}};Oe.memo=function(t,e){return{$$typeof:HI,type:t,compare:e===void 0?null:e}};Oe.startTransition=function(t){var e=Vc.transition;Vc.transition={};try{t()}finally{Vc.transition=e}};Oe.unstable_act=ow;Oe.useCallback=function(t,e){return pn.current.useCallback(t,e)};Oe.useContext=function(t){return pn.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};Oe.useEffect=function(t,e){return pn.current.useEffect(t,e)};Oe.useId=function(){return pn.current.useId()};Oe.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};Oe.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};Oe.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};Oe.useMemo=function(t,e){return pn.current.useMemo(t,e)};Oe.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};Oe.useRef=function(t){return pn.current.useRef(t)};Oe.useState=function(t){return pn.current.useState(t)};Oe.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};Oe.useTransition=function(){return pn.current.useTransition()};Oe.version="18.3.1";Jy.exports=Oe;var Z=Jy.exports;const ir=Qy(Z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI=Z,XI=Symbol.for("react.element"),JI=Symbol.for("react.fragment"),YI=Object.prototype.hasOwnProperty,eC=QI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tC={key:!0,ref:!0,__self:!0,__source:!0};function aw(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)YI.call(e,i)&&!tC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:XI,type:t,key:o,ref:a,props:r,_owner:eC.current}}Zh.Fragment=JI;Zh.jsx=aw;Zh.jsxs=aw;Xy.exports=Zh;var C=Xy.exports,If={},lw={exports:{}},Nn={},uw={exports:{}},cw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,me){var te=G.length;G.push(me);e:for(;0<te;){var fe=te-1>>>1,we=G[fe];if(0<r(we,me))G[fe]=me,G[te]=we,te=fe;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var me=G[0],te=G.pop();if(te!==me){G[0]=te;e:for(var fe=0,we=G.length,Ae=we>>>1;fe<Ae;){var Ne=2*(fe+1)-1,U=G[Ne],ne=Ne+1,ue=G[ne];if(0>r(U,te))ne<we&&0>r(ue,U)?(G[fe]=ue,G[ne]=te,fe=ne):(G[fe]=U,G[Ne]=te,fe=Ne);else if(ne<we&&0>r(ue,te))G[fe]=ue,G[ne]=te,fe=ne;else break e}}return me}function r(G,me){var te=G.sortIndex-me.sortIndex;return te!==0?te:G.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],f=[],_=1,v=null,w=3,T=!1,A=!1,N=!1,j=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(G){for(var me=n(f);me!==null;){if(me.callback===null)i(f);else if(me.startTime<=G)i(f),me.sortIndex=me.expirationTime,e(d,me);else break;me=n(f)}}function H(G){if(N=!1,b(G),!A)if(n(d)!==null)A=!0,Ue(K);else{var me=n(f);me!==null&&Mt(H,me.startTime-G)}}function K(G,me){A=!1,N&&(N=!1,P(I),I=-1),T=!0;var te=w;try{for(b(me),v=n(d);v!==null&&(!(v.expirationTime>me)||G&&!V());){var fe=v.callback;if(typeof fe=="function"){v.callback=null,w=v.priorityLevel;var we=fe(v.expirationTime<=me);me=t.unstable_now(),typeof we=="function"?v.callback=we:v===n(d)&&i(d),b(me)}else i(d);v=n(d)}if(v!==null)var Ae=!0;else{var Ne=n(f);Ne!==null&&Mt(H,Ne.startTime-me),Ae=!1}return Ae}finally{v=null,w=te,T=!1}}var X=!1,R=null,I=-1,x=5,O=-1;function V(){return!(t.unstable_now()-O<x)}function z(){if(R!==null){var G=t.unstable_now();O=G;var me=!0;try{me=R(!0,G)}finally{me?M():(X=!1,R=null)}}else X=!1}var M;if(typeof k=="function")M=function(){k(z)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,In=Ke.port2;Ke.port1.onmessage=z,M=function(){In.postMessage(null)}}else M=function(){j(z,0)};function Ue(G){R=G,X||(X=!0,M())}function Mt(G,me){I=j(function(){G(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){A||T||(A=!0,Ue(K))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(G){switch(w){case 1:case 2:case 3:var me=3;break;default:me=w}var te=w;w=me;try{return G()}finally{w=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,me){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var te=w;w=G;try{return me()}finally{w=te}},t.unstable_scheduleCallback=function(G,me,te){var fe=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?fe+te:fe):te=fe,G){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=te+we,G={id:_++,callback:me,priorityLevel:G,startTime:te,expirationTime:we,sortIndex:-1},te>fe?(G.sortIndex=te,e(f,G),n(d)===null&&G===n(f)&&(N?(P(I),I=-1):N=!0,Mt(H,te-fe))):(G.sortIndex=we,e(d,G),A||T||(A=!0,Ue(K))),G},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(G){var me=w;return function(){var te=w;w=me;try{return G.apply(this,arguments)}finally{w=te}}}})(cw);uw.exports=cw;var nC=uw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC=Z,On=nC;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hw=new Set,Zl={};function io(t,e){da(t,e),da(t+"Capture",e)}function da(t,e){for(Zl[t]=e,t=0;t<e.length;t++)hw.add(e[t])}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cf=Object.prototype.hasOwnProperty,rC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w_={},E_={};function sC(t){return Cf.call(E_,t)?!0:Cf.call(w_,t)?!1:rC.test(t)?E_[t]=!0:(w_[t]=!0,!1)}function oC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aC(t,e,n,i){if(e===null||typeof e>"u"||oC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xt[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xt[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xt[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xt[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xt[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xt[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xt[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xt[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xt[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var $p=/[\-:]([a-z])/g;function Qp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($p,Qp);Xt[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($p,Qp);Xt[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($p,Qp);Xt[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xt[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Xt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xt[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xp(t,e,n,i){var r=Xt.hasOwnProperty(e)?Xt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aC(e,n,r,i)&&(n=null),i||r===null?sC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var pr=iC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fc=Symbol.for("react.element"),jo=Symbol.for("react.portal"),Ho=Symbol.for("react.fragment"),Jp=Symbol.for("react.strict_mode"),kf=Symbol.for("react.profiler"),dw=Symbol.for("react.provider"),fw=Symbol.for("react.context"),Yp=Symbol.for("react.forward_ref"),Pf=Symbol.for("react.suspense"),Af=Symbol.for("react.suspense_list"),em=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),pw=Symbol.for("react.offscreen"),T_=Symbol.iterator;function hl(t){return t===null||typeof t!="object"?null:(t=T_&&t[T_]||t["@@iterator"],typeof t=="function"?t:null)}var Et=Object.assign,zd;function Tl(t){if(zd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zd=e&&e[1]||""}return`
`+zd+t}var Ud=!1;function Fd(t,e){if(!t||Ud)return"";Ud=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var d=`
`+r[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{Ud=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Tl(t):""}function lC(t){switch(t.tag){case 5:return Tl(t.type);case 16:return Tl("Lazy");case 13:return Tl("Suspense");case 19:return Tl("SuspenseList");case 0:case 2:case 15:return t=Fd(t.type,!1),t;case 11:return t=Fd(t.type.render,!1),t;case 1:return t=Fd(t.type,!0),t;default:return""}}function xf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ho:return"Fragment";case jo:return"Portal";case kf:return"Profiler";case Jp:return"StrictMode";case Pf:return"Suspense";case Af:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fw:return(t.displayName||"Context")+".Consumer";case dw:return(t._context.displayName||"Context")+".Provider";case Yp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case em:return e=t.displayName||null,e!==null?e:xf(t.type)||"Memo";case Pr:e=t._payload,t=t._init;try{return xf(t(e))}catch{}}return null}function uC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xf(e);case 8:return e===Jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cC(t){var e=mw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pc(t){t._valueTracker||(t._valueTracker=cC(t))}function gw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=mw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ih(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rf(t,e){var n=e.checked;return Et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function S_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Jr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _w(t,e){e=e.checked,e!=null&&Xp(t,"checked",e,!1)}function Lf(t,e){_w(t,e);var n=Jr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bf(t,e.type,n):e.hasOwnProperty("defaultValue")&&bf(t,e.type,Jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function I_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bf(t,e,n){(e!=="number"||ih(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sl=Array.isArray;function na(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Jr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Of(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function C_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Sl(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jr(n)}}function vw(t,e){var n=Jr(e.value),i=Jr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function k_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mc,ww=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mc=mc||document.createElement("div"),mc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hC=["Webkit","ms","Moz","O"];Object.keys(bl).forEach(function(t){hC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bl[e]=bl[t]})});function Ew(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bl.hasOwnProperty(t)&&bl[t]?(""+e).trim():e+"px"}function Tw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Ew(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var dC=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mf(t,e){if(e){if(dC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Df(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vf=null;function tm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zf=null,ia=null,ra=null;function P_(t){if(t=Su(t)){if(typeof zf!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Jh(e),zf(t.stateNode,t.type,e))}}function Sw(t){ia?ra?ra.push(t):ra=[t]:ia=t}function Iw(){if(ia){var t=ia,e=ra;if(ra=ia=null,P_(t),e)for(t=0;t<e.length;t++)P_(e[t])}}function Cw(t,e){return t(e)}function kw(){}var Bd=!1;function Pw(t,e,n){if(Bd)return t(e,n);Bd=!0;try{return Cw(t,e,n)}finally{Bd=!1,(ia!==null||ra!==null)&&(kw(),Iw())}}function $l(t,e){var n=t.stateNode;if(n===null)return null;var i=Jh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Uf=!1;if(or)try{var dl={};Object.defineProperty(dl,"passive",{get:function(){Uf=!0}}),window.addEventListener("test",dl,dl),window.removeEventListener("test",dl,dl)}catch{Uf=!1}function fC(t,e,n,i,r,o,a,u,d){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(_){this.onError(_)}}var Ol=!1,rh=null,sh=!1,Ff=null,pC={onError:function(t){Ol=!0,rh=t}};function mC(t,e,n,i,r,o,a,u,d){Ol=!1,rh=null,fC.apply(pC,arguments)}function gC(t,e,n,i,r,o,a,u,d){if(mC.apply(this,arguments),Ol){if(Ol){var f=rh;Ol=!1,rh=null}else throw Error(ee(198));sh||(sh=!0,Ff=f)}}function ro(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Aw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function A_(t){if(ro(t)!==t)throw Error(ee(188))}function _C(t){var e=t.alternate;if(!e){if(e=ro(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return A_(r),t;if(o===i)return A_(r),e;o=o.sibling}throw Error(ee(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==i)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function xw(t){return t=_C(t),t!==null?Rw(t):null}function Rw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Rw(t);if(e!==null)return e;t=t.sibling}return null}var Lw=On.unstable_scheduleCallback,x_=On.unstable_cancelCallback,vC=On.unstable_shouldYield,yC=On.unstable_requestPaint,At=On.unstable_now,wC=On.unstable_getCurrentPriorityLevel,nm=On.unstable_ImmediatePriority,bw=On.unstable_UserBlockingPriority,oh=On.unstable_NormalPriority,EC=On.unstable_LowPriority,Ow=On.unstable_IdlePriority,Kh=null,Pi=null;function TC(t){if(Pi&&typeof Pi.onCommitFiberRoot=="function")try{Pi.onCommitFiberRoot(Kh,t,void 0,(t.current.flags&128)===128)}catch{}}var fi=Math.clz32?Math.clz32:CC,SC=Math.log,IC=Math.LN2;function CC(t){return t>>>=0,t===0?32:31-(SC(t)/IC|0)|0}var gc=64,_c=4194304;function Il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ah(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Il(u):(o&=a,o!==0&&(i=Il(o)))}else a=n&~r,a!==0?i=Il(a):o!==0&&(i=Il(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-fi(e),r=1<<n,i|=t[n],e&=~r;return i}function kC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-fi(o),u=1<<a,d=r[a];d===-1?(!(u&n)||u&i)&&(r[a]=kC(u,e)):d<=e&&(t.expiredLanes|=u),o&=~u}}function Bf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nw(){var t=gc;return gc<<=1,!(gc&4194240)&&(gc=64),t}function jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Eu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fi(e),t[e]=n}function AC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-fi(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function im(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-fi(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Qe=0;function Mw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Dw,rm,Vw,zw,Uw,jf=!1,vc=[],Fr=null,Br=null,jr=null,Ql=new Map,Xl=new Map,xr=[],xC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R_(t,e){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Ql.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(e.pointerId)}}function fl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Su(e),e!==null&&rm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function RC(t,e,n,i,r){switch(e){case"focusin":return Fr=fl(Fr,t,e,n,i,r),!0;case"dragenter":return Br=fl(Br,t,e,n,i,r),!0;case"mouseover":return jr=fl(jr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Ql.set(o,fl(Ql.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Xl.set(o,fl(Xl.get(o)||null,t,e,n,i,r)),!0}return!1}function Fw(t){var e=Ms(t.target);if(e!==null){var n=ro(e);if(n!==null){if(e=n.tag,e===13){if(e=Aw(n),e!==null){t.blockedOn=e,Uw(t.priority,function(){Vw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Vf=i,n.target.dispatchEvent(i),Vf=null}else return e=Su(n),e!==null&&rm(e),t.blockedOn=n,!1;e.shift()}return!0}function L_(t,e,n){zc(t)&&n.delete(e)}function LC(){jf=!1,Fr!==null&&zc(Fr)&&(Fr=null),Br!==null&&zc(Br)&&(Br=null),jr!==null&&zc(jr)&&(jr=null),Ql.forEach(L_),Xl.forEach(L_)}function pl(t,e){t.blockedOn===e&&(t.blockedOn=null,jf||(jf=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,LC)))}function Jl(t){function e(r){return pl(r,t)}if(0<vc.length){pl(vc[0],t);for(var n=1;n<vc.length;n++){var i=vc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Fr!==null&&pl(Fr,t),Br!==null&&pl(Br,t),jr!==null&&pl(jr,t),Ql.forEach(e),Xl.forEach(e),n=0;n<xr.length;n++)i=xr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)Fw(n),n.blockedOn===null&&xr.shift()}var sa=pr.ReactCurrentBatchConfig,lh=!0;function bC(t,e,n,i){var r=Qe,o=sa.transition;sa.transition=null;try{Qe=1,sm(t,e,n,i)}finally{Qe=r,sa.transition=o}}function OC(t,e,n,i){var r=Qe,o=sa.transition;sa.transition=null;try{Qe=4,sm(t,e,n,i)}finally{Qe=r,sa.transition=o}}function sm(t,e,n,i){if(lh){var r=Hf(t,e,n,i);if(r===null)Jd(t,e,i,uh,n),R_(t,i);else if(RC(r,t,e,n,i))i.stopPropagation();else if(R_(t,i),e&4&&-1<xC.indexOf(t)){for(;r!==null;){var o=Su(r);if(o!==null&&Dw(o),o=Hf(t,e,n,i),o===null&&Jd(t,e,i,uh,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Jd(t,e,i,null,n)}}var uh=null;function Hf(t,e,n,i){if(uh=null,t=tm(i),t=Ms(t),t!==null)if(e=ro(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Aw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uh=t,null}function Bw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wC()){case nm:return 1;case bw:return 4;case oh:case EC:return 16;case Ow:return 536870912;default:return 16}default:return 16}}var Vr=null,om=null,Uc=null;function jw(){if(Uc)return Uc;var t,e=om,n=e.length,i,r="value"in Vr?Vr.value:Vr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Uc=r.slice(t,1<i?1-i:void 0)}function Fc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yc(){return!0}function b_(){return!1}function Mn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?yc:b_,this.isPropagationStopped=b_,this}return Et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),e}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},am=Mn(Pa),Tu=Et({},Pa,{view:0,detail:0}),NC=Mn(Tu),Hd,Wd,ml,$h=Et({},Tu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ml&&(ml&&t.type==="mousemove"?(Hd=t.screenX-ml.screenX,Wd=t.screenY-ml.screenY):Wd=Hd=0,ml=t),Hd)},movementY:function(t){return"movementY"in t?t.movementY:Wd}}),O_=Mn($h),MC=Et({},$h,{dataTransfer:0}),DC=Mn(MC),VC=Et({},Tu,{relatedTarget:0}),qd=Mn(VC),zC=Et({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),UC=Mn(zC),FC=Et({},Pa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BC=Mn(FC),jC=Et({},Pa,{data:0}),N_=Mn(jC),HC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qC[t])?!!e[t]:!1}function lm(){return GC}var ZC=Et({},Tu,{key:function(t){if(t.key){var e=HC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lm,charCode:function(t){return t.type==="keypress"?Fc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KC=Mn(ZC),$C=Et({},$h,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M_=Mn($C),QC=Et({},Tu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lm}),XC=Mn(QC),JC=Et({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),YC=Mn(JC),ek=Et({},$h,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tk=Mn(ek),nk=[9,13,27,32],um=or&&"CompositionEvent"in window,Nl=null;or&&"documentMode"in document&&(Nl=document.documentMode);var ik=or&&"TextEvent"in window&&!Nl,Hw=or&&(!um||Nl&&8<Nl&&11>=Nl),D_=" ",V_=!1;function Ww(t,e){switch(t){case"keyup":return nk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wo=!1;function rk(t,e){switch(t){case"compositionend":return qw(e);case"keypress":return e.which!==32?null:(V_=!0,D_);case"textInput":return t=e.data,t===D_&&V_?null:t;default:return null}}function sk(t,e){if(Wo)return t==="compositionend"||!um&&Ww(t,e)?(t=jw(),Uc=om=Vr=null,Wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hw&&e.locale!=="ko"?null:e.data;default:return null}}var ok={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ok[t.type]:e==="textarea"}function Gw(t,e,n,i){Sw(i),e=ch(e,"onChange"),0<e.length&&(n=new am("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ml=null,Yl=null;function ak(t){i0(t,0)}function Qh(t){var e=Zo(t);if(gw(e))return t}function lk(t,e){if(t==="change")return e}var Zw=!1;if(or){var Gd;if(or){var Zd="oninput"in document;if(!Zd){var U_=document.createElement("div");U_.setAttribute("oninput","return;"),Zd=typeof U_.oninput=="function"}Gd=Zd}else Gd=!1;Zw=Gd&&(!document.documentMode||9<document.documentMode)}function F_(){Ml&&(Ml.detachEvent("onpropertychange",Kw),Yl=Ml=null)}function Kw(t){if(t.propertyName==="value"&&Qh(Yl)){var e=[];Gw(e,Yl,t,tm(t)),Pw(ak,e)}}function uk(t,e,n){t==="focusin"?(F_(),Ml=e,Yl=n,Ml.attachEvent("onpropertychange",Kw)):t==="focusout"&&F_()}function ck(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qh(Yl)}function hk(t,e){if(t==="click")return Qh(e)}function dk(t,e){if(t==="input"||t==="change")return Qh(e)}function fk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mi=typeof Object.is=="function"?Object.is:fk;function eu(t,e){if(mi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Cf.call(e,r)||!mi(t[r],e[r]))return!1}return!0}function B_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j_(t,e){var n=B_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B_(n)}}function $w(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$w(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qw(){for(var t=window,e=ih();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ih(t.document)}return e}function cm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pk(t){var e=Qw(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$w(n.ownerDocument.documentElement,n)){if(i!==null&&cm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=j_(n,o);var a=j_(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mk=or&&"documentMode"in document&&11>=document.documentMode,qo=null,Wf=null,Dl=null,qf=!1;function H_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qf||qo==null||qo!==ih(i)||(i=qo,"selectionStart"in i&&cm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Dl&&eu(Dl,i)||(Dl=i,i=ch(Wf,"onSelect"),0<i.length&&(e=new am("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=qo)))}function wc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Go={animationend:wc("Animation","AnimationEnd"),animationiteration:wc("Animation","AnimationIteration"),animationstart:wc("Animation","AnimationStart"),transitionend:wc("Transition","TransitionEnd")},Kd={},Xw={};or&&(Xw=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function Xh(t){if(Kd[t])return Kd[t];if(!Go[t])return t;var e=Go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Xw)return Kd[t]=e[n];return t}var Jw=Xh("animationend"),Yw=Xh("animationiteration"),e0=Xh("animationstart"),t0=Xh("transitionend"),n0=new Map,W_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(t,e){n0.set(t,e),io(e,[t])}for(var $d=0;$d<W_.length;$d++){var Qd=W_[$d],gk=Qd.toLowerCase(),_k=Qd[0].toUpperCase()+Qd.slice(1);rs(gk,"on"+_k)}rs(Jw,"onAnimationEnd");rs(Yw,"onAnimationIteration");rs(e0,"onAnimationStart");rs("dblclick","onDoubleClick");rs("focusin","onFocus");rs("focusout","onBlur");rs(t0,"onTransitionEnd");da("onMouseEnter",["mouseout","mouseover"]);da("onMouseLeave",["mouseout","mouseover"]);da("onPointerEnter",["pointerout","pointerover"]);da("onPointerLeave",["pointerout","pointerover"]);io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));io("onBeforeInput",["compositionend","keypress","textInput","paste"]);io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cl));function q_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,gC(i,e,void 0,t),t.currentTarget=null}function i0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],d=u.instance,f=u.currentTarget;if(u=u.listener,d!==o&&r.isPropagationStopped())break e;q_(r,u,f),o=d}else for(a=0;a<i.length;a++){if(u=i[a],d=u.instance,f=u.currentTarget,u=u.listener,d!==o&&r.isPropagationStopped())break e;q_(r,u,f),o=d}}}if(sh)throw t=Ff,sh=!1,Ff=null,t}function at(t,e){var n=e[Qf];n===void 0&&(n=e[Qf]=new Set);var i=t+"__bubble";n.has(i)||(r0(e,t,2,!1),n.add(i))}function Xd(t,e,n){var i=0;e&&(i|=4),r0(n,t,i,e)}var Ec="_reactListening"+Math.random().toString(36).slice(2);function tu(t){if(!t[Ec]){t[Ec]=!0,hw.forEach(function(n){n!=="selectionchange"&&(vk.has(n)||Xd(n,!1,t),Xd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ec]||(e[Ec]=!0,Xd("selectionchange",!1,e))}}function r0(t,e,n,i){switch(Bw(e)){case 1:var r=bC;break;case 4:r=OC;break;default:r=sm}n=r.bind(null,e,n,t),r=void 0,!Uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Jd(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Ms(u),a===null)return;if(d=a.tag,d===5||d===6){i=o=a;continue e}u=u.parentNode}}i=i.return}Pw(function(){var f=o,_=tm(n),v=[];e:{var w=n0.get(t);if(w!==void 0){var T=am,A=t;switch(t){case"keypress":if(Fc(n)===0)break e;case"keydown":case"keyup":T=KC;break;case"focusin":A="focus",T=qd;break;case"focusout":A="blur",T=qd;break;case"beforeblur":case"afterblur":T=qd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=O_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=DC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=XC;break;case Jw:case Yw:case e0:T=UC;break;case t0:T=YC;break;case"scroll":T=NC;break;case"wheel":T=tk;break;case"copy":case"cut":case"paste":T=BC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=M_}var N=(e&4)!==0,j=!N&&t==="scroll",P=N?w!==null?w+"Capture":null:w;N=[];for(var k=f,b;k!==null;){b=k;var H=b.stateNode;if(b.tag===5&&H!==null&&(b=H,P!==null&&(H=$l(k,P),H!=null&&N.push(nu(k,H,b)))),j)break;k=k.return}0<N.length&&(w=new T(w,A,null,n,_),v.push({event:w,listeners:N}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",w&&n!==Vf&&(A=n.relatedTarget||n.fromElement)&&(Ms(A)||A[ar]))break e;if((T||w)&&(w=_.window===_?_:(w=_.ownerDocument)?w.defaultView||w.parentWindow:window,T?(A=n.relatedTarget||n.toElement,T=f,A=A?Ms(A):null,A!==null&&(j=ro(A),A!==j||A.tag!==5&&A.tag!==6)&&(A=null)):(T=null,A=f),T!==A)){if(N=O_,H="onMouseLeave",P="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(N=M_,H="onPointerLeave",P="onPointerEnter",k="pointer"),j=T==null?w:Zo(T),b=A==null?w:Zo(A),w=new N(H,k+"leave",T,n,_),w.target=j,w.relatedTarget=b,H=null,Ms(_)===f&&(N=new N(P,k+"enter",A,n,_),N.target=b,N.relatedTarget=j,H=N),j=H,T&&A)t:{for(N=T,P=A,k=0,b=N;b;b=Do(b))k++;for(b=0,H=P;H;H=Do(H))b++;for(;0<k-b;)N=Do(N),k--;for(;0<b-k;)P=Do(P),b--;for(;k--;){if(N===P||P!==null&&N===P.alternate)break t;N=Do(N),P=Do(P)}N=null}else N=null;T!==null&&G_(v,w,T,N,!1),A!==null&&j!==null&&G_(v,j,A,N,!0)}}e:{if(w=f?Zo(f):window,T=w.nodeName&&w.nodeName.toLowerCase(),T==="select"||T==="input"&&w.type==="file")var K=lk;else if(z_(w))if(Zw)K=dk;else{K=ck;var X=uk}else(T=w.nodeName)&&T.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(K=hk);if(K&&(K=K(t,f))){Gw(v,K,n,_);break e}X&&X(t,w,f),t==="focusout"&&(X=w._wrapperState)&&X.controlled&&w.type==="number"&&bf(w,"number",w.value)}switch(X=f?Zo(f):window,t){case"focusin":(z_(X)||X.contentEditable==="true")&&(qo=X,Wf=f,Dl=null);break;case"focusout":Dl=Wf=qo=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,H_(v,n,_);break;case"selectionchange":if(mk)break;case"keydown":case"keyup":H_(v,n,_)}var R;if(um)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Wo?Ww(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Hw&&n.locale!=="ko"&&(Wo||I!=="onCompositionStart"?I==="onCompositionEnd"&&Wo&&(R=jw()):(Vr=_,om="value"in Vr?Vr.value:Vr.textContent,Wo=!0)),X=ch(f,I),0<X.length&&(I=new N_(I,t,null,n,_),v.push({event:I,listeners:X}),R?I.data=R:(R=qw(n),R!==null&&(I.data=R)))),(R=ik?rk(t,n):sk(t,n))&&(f=ch(f,"onBeforeInput"),0<f.length&&(_=new N_("onBeforeInput","beforeinput",null,n,_),v.push({event:_,listeners:f}),_.data=R))}i0(v,e)})}function nu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ch(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=$l(t,n),o!=null&&i.unshift(nu(t,o,r)),o=$l(t,e),o!=null&&i.push(nu(t,o,r))),t=t.return}return i}function Do(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function G_(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,d=u.alternate,f=u.stateNode;if(d!==null&&d===i)break;u.tag===5&&f!==null&&(u=f,r?(d=$l(n,o),d!=null&&a.unshift(nu(n,d,u))):r||(d=$l(n,o),d!=null&&a.push(nu(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var yk=/\r\n?/g,wk=/\u0000|\uFFFD/g;function Z_(t){return(typeof t=="string"?t:""+t).replace(yk,`
`).replace(wk,"")}function Tc(t,e,n){if(e=Z_(e),Z_(t)!==e&&n)throw Error(ee(425))}function hh(){}var Gf=null,Zf=null;function Kf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $f=typeof setTimeout=="function"?setTimeout:void 0,Ek=typeof clearTimeout=="function"?clearTimeout:void 0,K_=typeof Promise=="function"?Promise:void 0,Tk=typeof queueMicrotask=="function"?queueMicrotask:typeof K_<"u"?function(t){return K_.resolve(null).then(t).catch(Sk)}:$f;function Sk(t){setTimeout(function(){throw t})}function Yd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Jl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Jl(e)}function Hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Aa=Math.random().toString(36).slice(2),Ii="__reactFiber$"+Aa,iu="__reactProps$"+Aa,ar="__reactContainer$"+Aa,Qf="__reactEvents$"+Aa,Ik="__reactListeners$"+Aa,Ck="__reactHandles$"+Aa;function Ms(t){var e=t[Ii];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ar]||n[Ii]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$_(t);t!==null;){if(n=t[Ii])return n;t=$_(t)}return e}t=n,n=t.parentNode}return null}function Su(t){return t=t[Ii]||t[ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Jh(t){return t[iu]||null}var Xf=[],Ko=-1;function ss(t){return{current:t}}function lt(t){0>Ko||(t.current=Xf[Ko],Xf[Ko]=null,Ko--)}function rt(t,e){Ko++,Xf[Ko]=t.current,t.current=e}var Yr={},on=ss(Yr),En=ss(!1),qs=Yr;function fa(t,e){var n=t.type.contextTypes;if(!n)return Yr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Tn(t){return t=t.childContextTypes,t!=null}function dh(){lt(En),lt(on)}function Q_(t,e,n){if(on.current!==Yr)throw Error(ee(168));rt(on,e),rt(En,n)}function s0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ee(108,uC(t)||"Unknown",r));return Et({},n,i)}function fh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yr,qs=on.current,rt(on,t),rt(En,En.current),!0}function X_(t,e,n){var i=t.stateNode;if(!i)throw Error(ee(169));n?(t=s0(t,e,qs),i.__reactInternalMemoizedMergedChildContext=t,lt(En),lt(on),rt(on,t)):lt(En),rt(En,n)}var Xi=null,Yh=!1,ef=!1;function o0(t){Xi===null?Xi=[t]:Xi.push(t)}function kk(t){Yh=!0,o0(t)}function os(){if(!ef&&Xi!==null){ef=!0;var t=0,e=Qe;try{var n=Xi;for(Qe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Xi=null,Yh=!1}catch(r){throw Xi!==null&&(Xi=Xi.slice(t+1)),Lw(nm,os),r}finally{Qe=e,ef=!1}}return null}var $o=[],Qo=0,ph=null,mh=0,Gn=[],Zn=0,Gs=null,Ji=1,Yi="";function Ps(t,e){$o[Qo++]=mh,$o[Qo++]=ph,ph=t,mh=e}function a0(t,e,n){Gn[Zn++]=Ji,Gn[Zn++]=Yi,Gn[Zn++]=Gs,Gs=t;var i=Ji;t=Yi;var r=32-fi(i)-1;i&=~(1<<r),n+=1;var o=32-fi(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Ji=1<<32-fi(e)+r|n<<r|i,Yi=o+t}else Ji=1<<o|n<<r|i,Yi=t}function hm(t){t.return!==null&&(Ps(t,1),a0(t,1,0))}function dm(t){for(;t===ph;)ph=$o[--Qo],$o[Qo]=null,mh=$o[--Qo],$o[Qo]=null;for(;t===Gs;)Gs=Gn[--Zn],Gn[Zn]=null,Yi=Gn[--Zn],Gn[Zn]=null,Ji=Gn[--Zn],Gn[Zn]=null}var Ln=null,Rn=null,dt=!1,hi=null;function l0(t,e){var n=$n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function J_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ln=t,Rn=Hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ln=t,Rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gs!==null?{id:Ji,overflow:Yi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ln=t,Rn=null,!0):!1;default:return!1}}function Jf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yf(t){if(dt){var e=Rn;if(e){var n=e;if(!J_(t,e)){if(Jf(t))throw Error(ee(418));e=Hr(n.nextSibling);var i=Ln;e&&J_(t,e)?l0(i,n):(t.flags=t.flags&-4097|2,dt=!1,Ln=t)}}else{if(Jf(t))throw Error(ee(418));t.flags=t.flags&-4097|2,dt=!1,Ln=t}}}function Y_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function Sc(t){if(t!==Ln)return!1;if(!dt)return Y_(t),dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Kf(t.type,t.memoizedProps)),e&&(e=Rn)){if(Jf(t))throw u0(),Error(ee(418));for(;e;)l0(t,e),e=Hr(e.nextSibling)}if(Y_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rn=Hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rn=null}}else Rn=Ln?Hr(t.stateNode.nextSibling):null;return!0}function u0(){for(var t=Rn;t;)t=Hr(t.nextSibling)}function pa(){Rn=Ln=null,dt=!1}function fm(t){hi===null?hi=[t]:hi.push(t)}var Pk=pr.ReactCurrentBatchConfig;function gl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var i=n.stateNode}if(!i)throw Error(ee(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Ic(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ev(t){var e=t._init;return e(t._payload)}function c0(t){function e(P,k){if(t){var b=P.deletions;b===null?(P.deletions=[k],P.flags|=16):b.push(k)}}function n(P,k){if(!t)return null;for(;k!==null;)e(P,k),k=k.sibling;return null}function i(P,k){for(P=new Map;k!==null;)k.key!==null?P.set(k.key,k):P.set(k.index,k),k=k.sibling;return P}function r(P,k){return P=Zr(P,k),P.index=0,P.sibling=null,P}function o(P,k,b){return P.index=b,t?(b=P.alternate,b!==null?(b=b.index,b<k?(P.flags|=2,k):b):(P.flags|=2,k)):(P.flags|=1048576,k)}function a(P){return t&&P.alternate===null&&(P.flags|=2),P}function u(P,k,b,H){return k===null||k.tag!==6?(k=lf(b,P.mode,H),k.return=P,k):(k=r(k,b),k.return=P,k)}function d(P,k,b,H){var K=b.type;return K===Ho?_(P,k,b.props.children,H,b.key):k!==null&&(k.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Pr&&ev(K)===k.type)?(H=r(k,b.props),H.ref=gl(P,k,b),H.return=P,H):(H=Zc(b.type,b.key,b.props,null,P.mode,H),H.ref=gl(P,k,b),H.return=P,H)}function f(P,k,b,H){return k===null||k.tag!==4||k.stateNode.containerInfo!==b.containerInfo||k.stateNode.implementation!==b.implementation?(k=uf(b,P.mode,H),k.return=P,k):(k=r(k,b.children||[]),k.return=P,k)}function _(P,k,b,H,K){return k===null||k.tag!==7?(k=Fs(b,P.mode,H,K),k.return=P,k):(k=r(k,b),k.return=P,k)}function v(P,k,b){if(typeof k=="string"&&k!==""||typeof k=="number")return k=lf(""+k,P.mode,b),k.return=P,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case fc:return b=Zc(k.type,k.key,k.props,null,P.mode,b),b.ref=gl(P,null,k),b.return=P,b;case jo:return k=uf(k,P.mode,b),k.return=P,k;case Pr:var H=k._init;return v(P,H(k._payload),b)}if(Sl(k)||hl(k))return k=Fs(k,P.mode,b,null),k.return=P,k;Ic(P,k)}return null}function w(P,k,b,H){var K=k!==null?k.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return K!==null?null:u(P,k,""+b,H);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fc:return b.key===K?d(P,k,b,H):null;case jo:return b.key===K?f(P,k,b,H):null;case Pr:return K=b._init,w(P,k,K(b._payload),H)}if(Sl(b)||hl(b))return K!==null?null:_(P,k,b,H,null);Ic(P,b)}return null}function T(P,k,b,H,K){if(typeof H=="string"&&H!==""||typeof H=="number")return P=P.get(b)||null,u(k,P,""+H,K);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case fc:return P=P.get(H.key===null?b:H.key)||null,d(k,P,H,K);case jo:return P=P.get(H.key===null?b:H.key)||null,f(k,P,H,K);case Pr:var X=H._init;return T(P,k,b,X(H._payload),K)}if(Sl(H)||hl(H))return P=P.get(b)||null,_(k,P,H,K,null);Ic(k,H)}return null}function A(P,k,b,H){for(var K=null,X=null,R=k,I=k=0,x=null;R!==null&&I<b.length;I++){R.index>I?(x=R,R=null):x=R.sibling;var O=w(P,R,b[I],H);if(O===null){R===null&&(R=x);break}t&&R&&O.alternate===null&&e(P,R),k=o(O,k,I),X===null?K=O:X.sibling=O,X=O,R=x}if(I===b.length)return n(P,R),dt&&Ps(P,I),K;if(R===null){for(;I<b.length;I++)R=v(P,b[I],H),R!==null&&(k=o(R,k,I),X===null?K=R:X.sibling=R,X=R);return dt&&Ps(P,I),K}for(R=i(P,R);I<b.length;I++)x=T(R,P,I,b[I],H),x!==null&&(t&&x.alternate!==null&&R.delete(x.key===null?I:x.key),k=o(x,k,I),X===null?K=x:X.sibling=x,X=x);return t&&R.forEach(function(V){return e(P,V)}),dt&&Ps(P,I),K}function N(P,k,b,H){var K=hl(b);if(typeof K!="function")throw Error(ee(150));if(b=K.call(b),b==null)throw Error(ee(151));for(var X=K=null,R=k,I=k=0,x=null,O=b.next();R!==null&&!O.done;I++,O=b.next()){R.index>I?(x=R,R=null):x=R.sibling;var V=w(P,R,O.value,H);if(V===null){R===null&&(R=x);break}t&&R&&V.alternate===null&&e(P,R),k=o(V,k,I),X===null?K=V:X.sibling=V,X=V,R=x}if(O.done)return n(P,R),dt&&Ps(P,I),K;if(R===null){for(;!O.done;I++,O=b.next())O=v(P,O.value,H),O!==null&&(k=o(O,k,I),X===null?K=O:X.sibling=O,X=O);return dt&&Ps(P,I),K}for(R=i(P,R);!O.done;I++,O=b.next())O=T(R,P,I,O.value,H),O!==null&&(t&&O.alternate!==null&&R.delete(O.key===null?I:O.key),k=o(O,k,I),X===null?K=O:X.sibling=O,X=O);return t&&R.forEach(function(z){return e(P,z)}),dt&&Ps(P,I),K}function j(P,k,b,H){if(typeof b=="object"&&b!==null&&b.type===Ho&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case fc:e:{for(var K=b.key,X=k;X!==null;){if(X.key===K){if(K=b.type,K===Ho){if(X.tag===7){n(P,X.sibling),k=r(X,b.props.children),k.return=P,P=k;break e}}else if(X.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Pr&&ev(K)===X.type){n(P,X.sibling),k=r(X,b.props),k.ref=gl(P,X,b),k.return=P,P=k;break e}n(P,X);break}else e(P,X);X=X.sibling}b.type===Ho?(k=Fs(b.props.children,P.mode,H,b.key),k.return=P,P=k):(H=Zc(b.type,b.key,b.props,null,P.mode,H),H.ref=gl(P,k,b),H.return=P,P=H)}return a(P);case jo:e:{for(X=b.key;k!==null;){if(k.key===X)if(k.tag===4&&k.stateNode.containerInfo===b.containerInfo&&k.stateNode.implementation===b.implementation){n(P,k.sibling),k=r(k,b.children||[]),k.return=P,P=k;break e}else{n(P,k);break}else e(P,k);k=k.sibling}k=uf(b,P.mode,H),k.return=P,P=k}return a(P);case Pr:return X=b._init,j(P,k,X(b._payload),H)}if(Sl(b))return A(P,k,b,H);if(hl(b))return N(P,k,b,H);Ic(P,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,k!==null&&k.tag===6?(n(P,k.sibling),k=r(k,b),k.return=P,P=k):(n(P,k),k=lf(b,P.mode,H),k.return=P,P=k),a(P)):n(P,k)}return j}var ma=c0(!0),h0=c0(!1),gh=ss(null),_h=null,Xo=null,pm=null;function mm(){pm=Xo=_h=null}function gm(t){var e=gh.current;lt(gh),t._currentValue=e}function ep(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function oa(t,e){_h=t,pm=Xo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function Xn(t){var e=t._currentValue;if(pm!==t)if(t={context:t,memoizedValue:e,next:null},Xo===null){if(_h===null)throw Error(ee(308));Xo=t,_h.dependencies={lanes:0,firstContext:t}}else Xo=Xo.next=t;return e}var Ds=null;function _m(t){Ds===null?Ds=[t]:Ds.push(t)}function d0(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,_m(e)):(n.next=r.next,r.next=n),e.interleaved=n,lr(t,i)}function lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ar=!1;function vm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,He&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,lr(t,n)}return r=i.interleaved,r===null?(e.next=e,_m(i)):(e.next=r.next,r.next=e),i.interleaved=e,lr(t,n)}function Bc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,im(t,n)}}function tv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vh(t,e,n,i){var r=t.updateQueue;Ar=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var d=u,f=d.next;d.next=null,a===null?o=f:a.next=f,a=d;var _=t.alternate;_!==null&&(_=_.updateQueue,u=_.lastBaseUpdate,u!==a&&(u===null?_.firstBaseUpdate=f:u.next=f,_.lastBaseUpdate=d))}if(o!==null){var v=r.baseState;a=0,_=f=d=null,u=o;do{var w=u.lane,T=u.eventTime;if((i&w)===w){_!==null&&(_=_.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var A=t,N=u;switch(w=e,T=n,N.tag){case 1:if(A=N.payload,typeof A=="function"){v=A.call(T,v,w);break e}v=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=N.payload,w=typeof A=="function"?A.call(T,v,w):A,w==null)break e;v=Et({},v,w);break e;case 2:Ar=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,w=r.effects,w===null?r.effects=[u]:w.push(u))}else T={eventTime:T,lane:w,tag:u.tag,payload:u.payload,callback:u.callback,next:null},_===null?(f=_=T,d=v):_=_.next=T,a|=w;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;w=u,u=w.next,w.next=null,r.lastBaseUpdate=w,r.shared.pending=null}}while(!0);if(_===null&&(d=v),r.baseState=d,r.firstBaseUpdate=f,r.lastBaseUpdate=_,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Ks|=a,t.lanes=a,t.memoizedState=v}}function nv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ee(191,r));r.call(i)}}}var Iu={},Ai=ss(Iu),ru=ss(Iu),su=ss(Iu);function Vs(t){if(t===Iu)throw Error(ee(174));return t}function ym(t,e){switch(rt(su,e),rt(ru,t),rt(Ai,Iu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nf(e,t)}lt(Ai),rt(Ai,e)}function ga(){lt(Ai),lt(ru),lt(su)}function p0(t){Vs(su.current);var e=Vs(Ai.current),n=Nf(e,t.type);e!==n&&(rt(ru,t),rt(Ai,n))}function wm(t){ru.current===t&&(lt(Ai),lt(ru))}var yt=ss(0);function yh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tf=[];function Em(){for(var t=0;t<tf.length;t++)tf[t]._workInProgressVersionPrimary=null;tf.length=0}var jc=pr.ReactCurrentDispatcher,nf=pr.ReactCurrentBatchConfig,Zs=0,wt=null,Dt=null,Ht=null,wh=!1,Vl=!1,ou=0,Ak=0;function Yt(){throw Error(ee(321))}function Tm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mi(t[n],e[n]))return!1;return!0}function Sm(t,e,n,i,r,o){if(Zs=o,wt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jc.current=t===null||t.memoizedState===null?bk:Ok,t=n(i,r),Vl){o=0;do{if(Vl=!1,ou=0,25<=o)throw Error(ee(301));o+=1,Ht=Dt=null,e.updateQueue=null,jc.current=Nk,t=n(i,r)}while(Vl)}if(jc.current=Eh,e=Dt!==null&&Dt.next!==null,Zs=0,Ht=Dt=wt=null,wh=!1,e)throw Error(ee(300));return t}function Im(){var t=ou!==0;return ou=0,t}function Si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?wt.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Jn(){if(Dt===null){var t=wt.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=Ht===null?wt.memoizedState:Ht.next;if(e!==null)Ht=e,Dt=t;else{if(t===null)throw Error(ee(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Ht===null?wt.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function au(t,e){return typeof e=="function"?e(t):e}function rf(t){var e=Jn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=Dt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,d=null,f=o;do{var _=f.lane;if((Zs&_)===_)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var v={lane:_,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(u=d=v,a=i):d=d.next=v,wt.lanes|=_,Ks|=_}f=f.next}while(f!==null&&f!==o);d===null?a=i:d.next=u,mi(i,e.memoizedState)||(wn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,wt.lanes|=o,Ks|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sf(t){var e=Jn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);mi(o,e.memoizedState)||(wn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function m0(){}function g0(t,e){var n=wt,i=Jn(),r=e(),o=!mi(i.memoizedState,r);if(o&&(i.memoizedState=r,wn=!0),i=i.queue,Cm(y0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,lu(9,v0.bind(null,n,i,r,e),void 0,null),Wt===null)throw Error(ee(349));Zs&30||_0(n,e,r)}return r}function _0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=wt.updateQueue,e===null?(e={lastEffect:null,stores:null},wt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function v0(t,e,n,i){e.value=n,e.getSnapshot=i,w0(e)&&E0(t)}function y0(t,e,n){return n(function(){w0(e)&&E0(t)})}function w0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mi(t,n)}catch{return!0}}function E0(t){var e=lr(t,1);e!==null&&pi(e,t,1,-1)}function iv(t){var e=Si();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:au,lastRenderedState:t},e.queue=t,t=t.dispatch=Lk.bind(null,wt,t),[e.memoizedState,t]}function lu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=wt.updateQueue,e===null?(e={lastEffect:null,stores:null},wt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function T0(){return Jn().memoizedState}function Hc(t,e,n,i){var r=Si();wt.flags|=t,r.memoizedState=lu(1|e,n,void 0,i===void 0?null:i)}function ed(t,e,n,i){var r=Jn();i=i===void 0?null:i;var o=void 0;if(Dt!==null){var a=Dt.memoizedState;if(o=a.destroy,i!==null&&Tm(i,a.deps)){r.memoizedState=lu(e,n,o,i);return}}wt.flags|=t,r.memoizedState=lu(1|e,n,o,i)}function rv(t,e){return Hc(8390656,8,t,e)}function Cm(t,e){return ed(2048,8,t,e)}function S0(t,e){return ed(4,2,t,e)}function I0(t,e){return ed(4,4,t,e)}function C0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function k0(t,e,n){return n=n!=null?n.concat([t]):null,ed(4,4,C0.bind(null,e,t),n)}function km(){}function P0(t,e){var n=Jn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Tm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function A0(t,e){var n=Jn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Tm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function x0(t,e,n){return Zs&21?(mi(n,e)||(n=Nw(),wt.lanes|=n,Ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function xk(t,e){var n=Qe;Qe=n!==0&&4>n?n:4,t(!0);var i=nf.transition;nf.transition={};try{t(!1),e()}finally{Qe=n,nf.transition=i}}function R0(){return Jn().memoizedState}function Rk(t,e,n){var i=Gr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},L0(t))b0(e,n);else if(n=d0(t,e,n,i),n!==null){var r=fn();pi(n,t,i,r),O0(n,e,i)}}function Lk(t,e,n){var i=Gr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(L0(t))b0(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,mi(u,a)){var d=e.interleaved;d===null?(r.next=r,_m(e)):(r.next=d.next,d.next=r),e.interleaved=r;return}}catch{}finally{}n=d0(t,e,r,i),n!==null&&(r=fn(),pi(n,t,i,r),O0(n,e,i))}}function L0(t){var e=t.alternate;return t===wt||e!==null&&e===wt}function b0(t,e){Vl=wh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function O0(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,im(t,n)}}var Eh={readContext:Xn,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},bk={readContext:Xn,useCallback:function(t,e){return Si().memoizedState=[t,e===void 0?null:e],t},useContext:Xn,useEffect:rv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hc(4194308,4,C0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hc(4,2,t,e)},useMemo:function(t,e){var n=Si();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Si();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Rk.bind(null,wt,t),[i.memoizedState,t]},useRef:function(t){var e=Si();return t={current:t},e.memoizedState=t},useState:iv,useDebugValue:km,useDeferredValue:function(t){return Si().memoizedState=t},useTransition:function(){var t=iv(!1),e=t[0];return t=xk.bind(null,t[1]),Si().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=wt,r=Si();if(dt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Wt===null)throw Error(ee(349));Zs&30||_0(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,rv(y0.bind(null,i,o,t),[t]),i.flags|=2048,lu(9,v0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Si(),e=Wt.identifierPrefix;if(dt){var n=Yi,i=Ji;n=(i&~(1<<32-fi(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ou++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ak++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ok={readContext:Xn,useCallback:P0,useContext:Xn,useEffect:Cm,useImperativeHandle:k0,useInsertionEffect:S0,useLayoutEffect:I0,useMemo:A0,useReducer:rf,useRef:T0,useState:function(){return rf(au)},useDebugValue:km,useDeferredValue:function(t){var e=Jn();return x0(e,Dt.memoizedState,t)},useTransition:function(){var t=rf(au)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:m0,useSyncExternalStore:g0,useId:R0,unstable_isNewReconciler:!1},Nk={readContext:Xn,useCallback:P0,useContext:Xn,useEffect:Cm,useImperativeHandle:k0,useInsertionEffect:S0,useLayoutEffect:I0,useMemo:A0,useReducer:sf,useRef:T0,useState:function(){return sf(au)},useDebugValue:km,useDeferredValue:function(t){var e=Jn();return Dt===null?e.memoizedState=t:x0(e,Dt.memoizedState,t)},useTransition:function(){var t=sf(au)[0],e=Jn().memoizedState;return[t,e]},useMutableSource:m0,useSyncExternalStore:g0,useId:R0,unstable_isNewReconciler:!1};function ui(t,e){if(t&&t.defaultProps){e=Et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function tp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var td={isMounted:function(t){return(t=t._reactInternals)?ro(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=fn(),r=Gr(t),o=rr(i,r);o.payload=e,n!=null&&(o.callback=n),e=Wr(t,o,r),e!==null&&(pi(e,t,r,i),Bc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=fn(),r=Gr(t),o=rr(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Wr(t,o,r),e!==null&&(pi(e,t,r,i),Bc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fn(),i=Gr(t),r=rr(n,i);r.tag=2,e!=null&&(r.callback=e),e=Wr(t,r,i),e!==null&&(pi(e,t,i,n),Bc(e,t,i))}};function sv(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!eu(n,i)||!eu(r,o):!0}function N0(t,e,n){var i=!1,r=Yr,o=e.contextType;return typeof o=="object"&&o!==null?o=Xn(o):(r=Tn(e)?qs:on.current,i=e.contextTypes,o=(i=i!=null)?fa(t,r):Yr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=td,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function ov(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&td.enqueueReplaceState(e,e.state,null)}function np(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},vm(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Xn(o):(o=Tn(e)?qs:on.current,r.context=fa(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(tp(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&td.enqueueReplaceState(r,r.state,null),vh(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function _a(t,e){try{var n="",i=e;do n+=lC(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function of(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ip(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Mk=typeof WeakMap=="function"?WeakMap:Map;function M0(t,e,n){n=rr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Sh||(Sh=!0,fp=i),ip(t,e)},n}function D0(t,e,n){n=rr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ip(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ip(t,e),typeof i!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function av(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Mk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=$k.bind(null,t,e,n),e.then(t,t))}function lv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rr(-1,1),e.tag=2,Wr(n,e,1))),n.lanes|=1),t)}var Dk=pr.ReactCurrentOwner,wn=!1;function hn(t,e,n,i){e.child=t===null?h0(e,null,n,i):ma(e,t.child,n,i)}function cv(t,e,n,i,r){n=n.render;var o=e.ref;return oa(e,r),i=Sm(t,e,n,i,o,r),n=Im(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ur(t,e,r)):(dt&&n&&hm(e),e.flags|=1,hn(t,e,i,r),e.child)}function hv(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Nm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,V0(t,e,o,i,r)):(t=Zc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:eu,n(a,i)&&t.ref===e.ref)return ur(t,e,r)}return e.flags|=1,t=Zr(o,i),t.ref=e.ref,t.return=e,e.child=t}function V0(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(eu(o,i)&&t.ref===e.ref)if(wn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,ur(t,e,r)}return rp(t,e,n,i,r)}function z0(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Yo,xn),xn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(Yo,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,rt(Yo,xn),xn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,rt(Yo,xn),xn|=i;return hn(t,e,r,n),e.child}function U0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rp(t,e,n,i,r){var o=Tn(n)?qs:on.current;return o=fa(e,o),oa(e,r),n=Sm(t,e,n,i,o,r),i=Im(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ur(t,e,r)):(dt&&i&&hm(e),e.flags|=1,hn(t,e,n,r),e.child)}function dv(t,e,n,i,r){if(Tn(n)){var o=!0;fh(e)}else o=!1;if(oa(e,r),e.stateNode===null)Wc(t,e),N0(e,n,i),np(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Xn(f):(f=Tn(n)?qs:on.current,f=fa(e,f));var _=n.getDerivedStateFromProps,v=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||d!==f)&&ov(e,a,i,f),Ar=!1;var w=e.memoizedState;a.state=w,vh(e,i,a,r),d=e.memoizedState,u!==i||w!==d||En.current||Ar?(typeof _=="function"&&(tp(e,n,_,i),d=e.memoizedState),(u=Ar||sv(e,n,u,i,w,d,f))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),a.props=i,a.state=d,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,f0(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:ui(e.type,u),a.props=f,v=e.pendingProps,w=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Xn(d):(d=Tn(n)?qs:on.current,d=fa(e,d));var T=n.getDerivedStateFromProps;(_=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==v||w!==d)&&ov(e,a,i,d),Ar=!1,w=e.memoizedState,a.state=w,vh(e,i,a,r);var A=e.memoizedState;u!==v||w!==A||En.current||Ar?(typeof T=="function"&&(tp(e,n,T,i),A=e.memoizedState),(f=Ar||sv(e,n,f,i,w,A,d)||!1)?(_||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,A,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,A,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=A),a.props=i,a.state=A,a.context=d,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),i=!1)}return sp(t,e,n,i,o,r)}function sp(t,e,n,i,r,o){U0(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&X_(e,n,!1),ur(t,e,o);i=e.stateNode,Dk.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=ma(e,t.child,null,o),e.child=ma(e,null,u,o)):hn(t,e,u,o),e.memoizedState=i.state,r&&X_(e,n,!0),e.child}function F0(t){var e=t.stateNode;e.pendingContext?Q_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Q_(t,e.context,!1),ym(t,e.containerInfo)}function fv(t,e,n,i,r){return pa(),fm(r),e.flags|=256,hn(t,e,n,i),e.child}var op={dehydrated:null,treeContext:null,retryLane:0};function ap(t){return{baseLanes:t,cachePool:null,transitions:null}}function B0(t,e,n){var i=e.pendingProps,r=yt.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),rt(yt,r&1),t===null)return Yf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=rd(a,i,0,null),t=Fs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ap(n),e.memoizedState=op,t):Pm(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Vk(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var d={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Zr(r,d),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Zr(u,o):(o=Fs(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?ap(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=op,i}return o=t.child,t=o.sibling,i=Zr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Pm(t,e){return e=rd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cc(t,e,n,i){return i!==null&&fm(i),ma(e,t.child,null,n),t=Pm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Vk(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=of(Error(ee(422))),Cc(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=rd({mode:"visible",children:i.children},r,0,null),o=Fs(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&ma(e,t.child,null,a),e.child.memoizedState=ap(a),e.memoizedState=op,o);if(!(e.mode&1))return Cc(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(ee(419)),i=of(o,i,void 0),Cc(t,e,a,i)}if(u=(a&t.childLanes)!==0,wn||u){if(i=Wt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,lr(t,r),pi(i,t,r,-1))}return Om(),i=of(Error(ee(421))),Cc(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Qk.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Rn=Hr(r.nextSibling),Ln=e,dt=!0,hi=null,t!==null&&(Gn[Zn++]=Ji,Gn[Zn++]=Yi,Gn[Zn++]=Gs,Ji=t.id,Yi=t.overflow,Gs=e),e=Pm(e,i.children),e.flags|=4096,e)}function pv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),ep(t.return,e,n)}function af(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function j0(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(hn(t,e,i.children,n),i=yt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pv(t,n,e);else if(t.tag===19)pv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(rt(yt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&yh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),af(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&yh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}af(e,!0,n,null,o);break;case"together":af(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ur(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=Zr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zk(t,e,n){switch(e.tag){case 3:F0(e),pa();break;case 5:p0(e);break;case 1:Tn(e.type)&&fh(e);break;case 4:ym(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;rt(gh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(rt(yt,yt.current&1),e.flags|=128,null):n&e.child.childLanes?B0(t,e,n):(rt(yt,yt.current&1),t=ur(t,e,n),t!==null?t.sibling:null);rt(yt,yt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return j0(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),rt(yt,yt.current),i)break;return null;case 22:case 23:return e.lanes=0,z0(t,e,n)}return ur(t,e,n)}var H0,lp,W0,q0;H0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lp=function(){};W0=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Vs(Ai.current);var o=null;switch(n){case"input":r=Rf(t,r),i=Rf(t,i),o=[];break;case"select":r=Et({},r,{value:void 0}),i=Et({},i,{value:void 0}),o=[];break;case"textarea":r=Of(t,r),i=Of(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=hh)}Mf(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Zl.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var d=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&d!==u&&(d!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(o||(o=[]),o.push(f,n)),n=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Zl.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&at("scroll",t),o||u===d||(o=[])):(o=o||[]).push(f,d))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};q0=function(t,e,n,i){n!==i&&(e.flags|=4)};function _l(t,e){if(!dt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function en(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Uk(t,e,n){var i=e.pendingProps;switch(dm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(e),null;case 1:return Tn(e.type)&&dh(),en(e),null;case 3:return i=e.stateNode,ga(),lt(En),lt(on),Em(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Sc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hi!==null&&(gp(hi),hi=null))),lp(t,e),en(e),null;case 5:wm(e);var r=Vs(su.current);if(n=e.type,t!==null&&e.stateNode!=null)W0(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ee(166));return en(e),null}if(t=Vs(Ai.current),Sc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Ii]=e,i[iu]=o,t=(e.mode&1)!==0,n){case"dialog":at("cancel",i),at("close",i);break;case"iframe":case"object":case"embed":at("load",i);break;case"video":case"audio":for(r=0;r<Cl.length;r++)at(Cl[r],i);break;case"source":at("error",i);break;case"img":case"image":case"link":at("error",i),at("load",i);break;case"details":at("toggle",i);break;case"input":S_(i,o),at("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},at("invalid",i);break;case"textarea":C_(i,o),at("invalid",i)}Mf(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&Tc(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Tc(i.textContent,u,t),r=["children",""+u]):Zl.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&at("scroll",i)}switch(n){case"input":pc(i),I_(i,o,!0);break;case"textarea":pc(i),k_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=hh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Ii]=e,t[iu]=i,H0(t,e,!1,!1),e.stateNode=t;e:{switch(a=Df(n,i),n){case"dialog":at("cancel",t),at("close",t),r=i;break;case"iframe":case"object":case"embed":at("load",t),r=i;break;case"video":case"audio":for(r=0;r<Cl.length;r++)at(Cl[r],t);r=i;break;case"source":at("error",t),r=i;break;case"img":case"image":case"link":at("error",t),at("load",t),r=i;break;case"details":at("toggle",t),r=i;break;case"input":S_(t,i),r=Rf(t,i),at("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Et({},i,{value:void 0}),at("invalid",t);break;case"textarea":C_(t,i),r=Of(t,i),at("invalid",t);break;default:r=i}Mf(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?Tw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&ww(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Kl(t,d):typeof d=="number"&&Kl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Zl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&at("scroll",t):d!=null&&Xp(t,o,d,a))}switch(n){case"input":pc(t),I_(t,i,!1);break;case"textarea":pc(t),k_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Jr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?na(t,!!i.multiple,o,!1):i.defaultValue!=null&&na(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=hh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return en(e),null;case 6:if(t&&e.stateNode!=null)q0(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Vs(su.current),Vs(Ai.current),Sc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ii]=e,(o=i.nodeValue!==n)&&(t=Ln,t!==null))switch(t.tag){case 3:Tc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ii]=e,e.stateNode=i}return en(e),null;case 13:if(lt(yt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(dt&&Rn!==null&&e.mode&1&&!(e.flags&128))u0(),pa(),e.flags|=98560,o=!1;else if(o=Sc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[Ii]=e}else pa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;en(e),o=!1}else hi!==null&&(gp(hi),hi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||yt.current&1?zt===0&&(zt=3):Om())),e.updateQueue!==null&&(e.flags|=4),en(e),null);case 4:return ga(),lp(t,e),t===null&&tu(e.stateNode.containerInfo),en(e),null;case 10:return gm(e.type._context),en(e),null;case 17:return Tn(e.type)&&dh(),en(e),null;case 19:if(lt(yt),o=e.memoizedState,o===null)return en(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)_l(o,!1);else{if(zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=yh(t),a!==null){for(e.flags|=128,_l(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rt(yt,yt.current&1|2),e.child}t=t.sibling}o.tail!==null&&At()>va&&(e.flags|=128,i=!0,_l(o,!1),e.lanes=4194304)}else{if(!i)if(t=yh(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_l(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!dt)return en(e),null}else 2*At()-o.renderingStartTime>va&&n!==1073741824&&(e.flags|=128,i=!0,_l(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=At(),e.sibling=null,n=yt.current,rt(yt,i?n&1|2:n&1),e):(en(e),null);case 22:case 23:return bm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?xn&1073741824&&(en(e),e.subtreeFlags&6&&(e.flags|=8192)):en(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function Fk(t,e){switch(dm(e),e.tag){case 1:return Tn(e.type)&&dh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ga(),lt(En),lt(on),Em(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wm(e),null;case 13:if(lt(yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));pa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(yt),null;case 4:return ga(),null;case 10:return gm(e.type._context),null;case 22:case 23:return bm(),null;case 24:return null;default:return null}}var kc=!1,rn=!1,Bk=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Jo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ct(t,e,i)}else n.current=null}function up(t,e,n){try{n()}catch(i){Ct(t,e,i)}}var mv=!1;function jk(t,e){if(Gf=lh,t=Qw(),cm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,f=0,_=0,v=t,w=null;t:for(;;){for(var T;v!==n||r!==0&&v.nodeType!==3||(u=a+r),v!==o||i!==0&&v.nodeType!==3||(d=a+i),v.nodeType===3&&(a+=v.nodeValue.length),(T=v.firstChild)!==null;)w=v,v=T;for(;;){if(v===t)break t;if(w===n&&++f===r&&(u=a),w===o&&++_===i&&(d=a),(T=v.nextSibling)!==null)break;v=w,w=v.parentNode}v=T}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zf={focusedElem:t,selectionRange:n},lh=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var N=A.memoizedProps,j=A.memoizedState,P=e.stateNode,k=P.getSnapshotBeforeUpdate(e.elementType===e.type?N:ui(e.type,N),j);P.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(H){Ct(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return A=mv,mv=!1,A}function zl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&up(e,n,o)}r=r.next}while(r!==i)}}function nd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function cp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function G0(t){var e=t.alternate;e!==null&&(t.alternate=null,G0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ii],delete e[iu],delete e[Qf],delete e[Ik],delete e[Ck])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Z0(t){return t.tag===5||t.tag===3||t.tag===4}function gv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Z0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hh));else if(i!==4&&(t=t.child,t!==null))for(hp(t,e,n),t=t.sibling;t!==null;)hp(t,e,n),t=t.sibling}function dp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(dp(t,e,n),t=t.sibling;t!==null;)dp(t,e,n),t=t.sibling}var Gt=null,ci=!1;function Cr(t,e,n){for(n=n.child;n!==null;)K0(t,e,n),n=n.sibling}function K0(t,e,n){if(Pi&&typeof Pi.onCommitFiberUnmount=="function")try{Pi.onCommitFiberUnmount(Kh,n)}catch{}switch(n.tag){case 5:rn||Jo(n,e);case 6:var i=Gt,r=ci;Gt=null,Cr(t,e,n),Gt=i,ci=r,Gt!==null&&(ci?(t=Gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Gt.removeChild(n.stateNode));break;case 18:Gt!==null&&(ci?(t=Gt,n=n.stateNode,t.nodeType===8?Yd(t.parentNode,n):t.nodeType===1&&Yd(t,n),Jl(t)):Yd(Gt,n.stateNode));break;case 4:i=Gt,r=ci,Gt=n.stateNode.containerInfo,ci=!0,Cr(t,e,n),Gt=i,ci=r;break;case 0:case 11:case 14:case 15:if(!rn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&up(n,e,a),r=r.next}while(r!==i)}Cr(t,e,n);break;case 1:if(!rn&&(Jo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){Ct(n,e,u)}Cr(t,e,n);break;case 21:Cr(t,e,n);break;case 22:n.mode&1?(rn=(i=rn)||n.memoizedState!==null,Cr(t,e,n),rn=i):Cr(t,e,n);break;default:Cr(t,e,n)}}function _v(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Bk),e.forEach(function(i){var r=Xk.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function li(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Gt=u.stateNode,ci=!1;break e;case 3:Gt=u.stateNode.containerInfo,ci=!0;break e;case 4:Gt=u.stateNode.containerInfo,ci=!0;break e}u=u.return}if(Gt===null)throw Error(ee(160));K0(o,a,r),Gt=null,ci=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(f){Ct(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$0(e,t),e=e.sibling}function $0(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(li(e,t),Ti(t),i&4){try{zl(3,t,t.return),nd(3,t)}catch(N){Ct(t,t.return,N)}try{zl(5,t,t.return)}catch(N){Ct(t,t.return,N)}}break;case 1:li(e,t),Ti(t),i&512&&n!==null&&Jo(n,n.return);break;case 5:if(li(e,t),Ti(t),i&512&&n!==null&&Jo(n,n.return),t.flags&32){var r=t.stateNode;try{Kl(r,"")}catch(N){Ct(t,t.return,N)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&_w(r,o),Df(u,a);var f=Df(u,o);for(a=0;a<d.length;a+=2){var _=d[a],v=d[a+1];_==="style"?Tw(r,v):_==="dangerouslySetInnerHTML"?ww(r,v):_==="children"?Kl(r,v):Xp(r,_,v,f)}switch(u){case"input":Lf(r,o);break;case"textarea":vw(r,o);break;case"select":var w=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?na(r,!!o.multiple,T,!1):w!==!!o.multiple&&(o.defaultValue!=null?na(r,!!o.multiple,o.defaultValue,!0):na(r,!!o.multiple,o.multiple?[]:"",!1))}r[iu]=o}catch(N){Ct(t,t.return,N)}}break;case 6:if(li(e,t),Ti(t),i&4){if(t.stateNode===null)throw Error(ee(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(N){Ct(t,t.return,N)}}break;case 3:if(li(e,t),Ti(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Jl(e.containerInfo)}catch(N){Ct(t,t.return,N)}break;case 4:li(e,t),Ti(t);break;case 13:li(e,t),Ti(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Rm=At())),i&4&&_v(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(rn=(f=rn)||_,li(e,t),rn=f):li(e,t),Ti(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!_&&t.mode&1)for(oe=t,_=t.child;_!==null;){for(v=oe=_;oe!==null;){switch(w=oe,T=w.child,w.tag){case 0:case 11:case 14:case 15:zl(4,w,w.return);break;case 1:Jo(w,w.return);var A=w.stateNode;if(typeof A.componentWillUnmount=="function"){i=w,n=w.return;try{e=i,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(N){Ct(i,n,N)}}break;case 5:Jo(w,w.return);break;case 22:if(w.memoizedState!==null){yv(v);continue}}T!==null?(T.return=w,oe=T):yv(v)}_=_.sibling}e:for(_=null,v=t;;){if(v.tag===5){if(_===null){_=v;try{r=v.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=v.stateNode,d=v.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=Ew("display",a))}catch(N){Ct(t,t.return,N)}}}else if(v.tag===6){if(_===null)try{v.stateNode.nodeValue=f?"":v.memoizedProps}catch(N){Ct(t,t.return,N)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;_===v&&(_=null),v=v.return}_===v&&(_=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:li(e,t),Ti(t),i&4&&_v(t);break;case 21:break;default:li(e,t),Ti(t)}}function Ti(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Z0(n)){var i=n;break e}n=n.return}throw Error(ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Kl(r,""),i.flags&=-33);var o=gv(t);dp(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=gv(t);hp(t,u,a);break;default:throw Error(ee(161))}}catch(d){Ct(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Hk(t,e,n){oe=t,Q0(t)}function Q0(t,e,n){for(var i=(t.mode&1)!==0;oe!==null;){var r=oe,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||kc;if(!a){var u=r.alternate,d=u!==null&&u.memoizedState!==null||rn;u=kc;var f=rn;if(kc=a,(rn=d)&&!f)for(oe=r;oe!==null;)a=oe,d=a.child,a.tag===22&&a.memoizedState!==null?wv(r):d!==null?(d.return=a,oe=d):wv(r);for(;o!==null;)oe=o,Q0(o),o=o.sibling;oe=r,kc=u,rn=f}vv(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,oe=o):vv(t)}}function vv(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||nd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!rn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ui(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&nv(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nv(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var _=f.memoizedState;if(_!==null){var v=_.dehydrated;v!==null&&Jl(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}rn||e.flags&512&&cp(e)}catch(w){Ct(e,e.return,w)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function yv(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function wv(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nd(4,e)}catch(d){Ct(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(d){Ct(e,r,d)}}var o=e.return;try{cp(e)}catch(d){Ct(e,o,d)}break;case 5:var a=e.return;try{cp(e)}catch(d){Ct(e,a,d)}}}catch(d){Ct(e,e.return,d)}if(e===t){oe=null;break}var u=e.sibling;if(u!==null){u.return=e.return,oe=u;break}oe=e.return}}var Wk=Math.ceil,Th=pr.ReactCurrentDispatcher,Am=pr.ReactCurrentOwner,Qn=pr.ReactCurrentBatchConfig,He=0,Wt=null,Nt=null,$t=0,xn=0,Yo=ss(0),zt=0,uu=null,Ks=0,id=0,xm=0,Ul=null,yn=null,Rm=0,va=1/0,Qi=null,Sh=!1,fp=null,qr=null,Pc=!1,zr=null,Ih=0,Fl=0,pp=null,qc=-1,Gc=0;function fn(){return He&6?At():qc!==-1?qc:qc=At()}function Gr(t){return t.mode&1?He&2&&$t!==0?$t&-$t:Pk.transition!==null?(Gc===0&&(Gc=Nw()),Gc):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:Bw(t.type)),t):1}function pi(t,e,n,i){if(50<Fl)throw Fl=0,pp=null,Error(ee(185));Eu(t,n,i),(!(He&2)||t!==Wt)&&(t===Wt&&(!(He&2)&&(id|=n),zt===4&&Rr(t,$t)),Sn(t,i),n===1&&He===0&&!(e.mode&1)&&(va=At()+500,Yh&&os()))}function Sn(t,e){var n=t.callbackNode;PC(t,e);var i=ah(t,t===Wt?$t:0);if(i===0)n!==null&&x_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&x_(n),e===1)t.tag===0?kk(Ev.bind(null,t)):o0(Ev.bind(null,t)),Tk(function(){!(He&6)&&os()}),n=null;else{switch(Mw(i)){case 1:n=nm;break;case 4:n=bw;break;case 16:n=oh;break;case 536870912:n=Ow;break;default:n=oh}n=rE(n,X0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function X0(t,e){if(qc=-1,Gc=0,He&6)throw Error(ee(327));var n=t.callbackNode;if(aa()&&t.callbackNode!==n)return null;var i=ah(t,t===Wt?$t:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ch(t,i);else{e=i;var r=He;He|=2;var o=Y0();(Wt!==t||$t!==e)&&(Qi=null,va=At()+500,Us(t,e));do try{Zk();break}catch(u){J0(t,u)}while(!0);mm(),Th.current=o,He=r,Nt!==null?e=0:(Wt=null,$t=0,e=zt)}if(e!==0){if(e===2&&(r=Bf(t),r!==0&&(i=r,e=mp(t,r))),e===1)throw n=uu,Us(t,0),Rr(t,i),Sn(t,At()),n;if(e===6)Rr(t,i);else{if(r=t.current.alternate,!(i&30)&&!qk(r)&&(e=Ch(t,i),e===2&&(o=Bf(t),o!==0&&(i=o,e=mp(t,o))),e===1))throw n=uu,Us(t,0),Rr(t,i),Sn(t,At()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ee(345));case 2:As(t,yn,Qi);break;case 3:if(Rr(t,i),(i&130023424)===i&&(e=Rm+500-At(),10<e)){if(ah(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){fn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=$f(As.bind(null,t,yn,Qi),e);break}As(t,yn,Qi);break;case 4:if(Rr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-fi(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=At()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Wk(i/1960))-i,10<i){t.timeoutHandle=$f(As.bind(null,t,yn,Qi),i);break}As(t,yn,Qi);break;case 5:As(t,yn,Qi);break;default:throw Error(ee(329))}}}return Sn(t,At()),t.callbackNode===n?X0.bind(null,t):null}function mp(t,e){var n=Ul;return t.current.memoizedState.isDehydrated&&(Us(t,e).flags|=256),t=Ch(t,e),t!==2&&(e=yn,yn=n,e!==null&&gp(e)),t}function gp(t){yn===null?yn=t:yn.push.apply(yn,t)}function qk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!mi(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rr(t,e){for(e&=~xm,e&=~id,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fi(e),i=1<<n;t[n]=-1,e&=~i}}function Ev(t){if(He&6)throw Error(ee(327));aa();var e=ah(t,0);if(!(e&1))return Sn(t,At()),null;var n=Ch(t,e);if(t.tag!==0&&n===2){var i=Bf(t);i!==0&&(e=i,n=mp(t,i))}if(n===1)throw n=uu,Us(t,0),Rr(t,e),Sn(t,At()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,As(t,yn,Qi),Sn(t,At()),null}function Lm(t,e){var n=He;He|=1;try{return t(e)}finally{He=n,He===0&&(va=At()+500,Yh&&os())}}function $s(t){zr!==null&&zr.tag===0&&!(He&6)&&aa();var e=He;He|=1;var n=Qn.transition,i=Qe;try{if(Qn.transition=null,Qe=1,t)return t()}finally{Qe=i,Qn.transition=n,He=e,!(He&6)&&os()}}function bm(){xn=Yo.current,lt(Yo)}function Us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ek(n)),Nt!==null)for(n=Nt.return;n!==null;){var i=n;switch(dm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&dh();break;case 3:ga(),lt(En),lt(on),Em();break;case 5:wm(i);break;case 4:ga();break;case 13:lt(yt);break;case 19:lt(yt);break;case 10:gm(i.type._context);break;case 22:case 23:bm()}n=n.return}if(Wt=t,Nt=t=Zr(t.current,null),$t=xn=e,zt=0,uu=null,xm=id=Ks=0,yn=Ul=null,Ds!==null){for(e=0;e<Ds.length;e++)if(n=Ds[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Ds=null}return t}function J0(t,e){do{var n=Nt;try{if(mm(),jc.current=Eh,wh){for(var i=wt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}wh=!1}if(Zs=0,Ht=Dt=wt=null,Vl=!1,ou=0,Am.current=null,n===null||n.return===null){zt=1,uu=e,Nt=null;break}e:{var o=t,a=n.return,u=n,d=e;if(e=$t,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,_=u,v=_.tag;if(!(_.mode&1)&&(v===0||v===11||v===15)){var w=_.alternate;w?(_.updateQueue=w.updateQueue,_.memoizedState=w.memoizedState,_.lanes=w.lanes):(_.updateQueue=null,_.memoizedState=null)}var T=lv(a);if(T!==null){T.flags&=-257,uv(T,a,u,o,e),T.mode&1&&av(o,f,e),e=T,d=f;var A=e.updateQueue;if(A===null){var N=new Set;N.add(d),e.updateQueue=N}else A.add(d);break e}else{if(!(e&1)){av(o,f,e),Om();break e}d=Error(ee(426))}}else if(dt&&u.mode&1){var j=lv(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),uv(j,a,u,o,e),fm(_a(d,u));break e}}o=d=_a(d,u),zt!==4&&(zt=2),Ul===null?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var P=M0(o,d,e);tv(o,P);break e;case 1:u=d;var k=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof k.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(qr===null||!qr.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=D0(o,u,e);tv(o,H);break e}}o=o.return}while(o!==null)}tE(n)}catch(K){e=K,Nt===n&&n!==null&&(Nt=n=n.return);continue}break}while(!0)}function Y0(){var t=Th.current;return Th.current=Eh,t===null?Eh:t}function Om(){(zt===0||zt===3||zt===2)&&(zt=4),Wt===null||!(Ks&268435455)&&!(id&268435455)||Rr(Wt,$t)}function Ch(t,e){var n=He;He|=2;var i=Y0();(Wt!==t||$t!==e)&&(Qi=null,Us(t,e));do try{Gk();break}catch(r){J0(t,r)}while(!0);if(mm(),He=n,Th.current=i,Nt!==null)throw Error(ee(261));return Wt=null,$t=0,zt}function Gk(){for(;Nt!==null;)eE(Nt)}function Zk(){for(;Nt!==null&&!vC();)eE(Nt)}function eE(t){var e=iE(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?tE(t):Nt=e,Am.current=null}function tE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Fk(n,e),n!==null){n.flags&=32767,Nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zt=6,Nt=null;return}}else if(n=Uk(n,e,xn),n!==null){Nt=n;return}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=t}while(e!==null);zt===0&&(zt=5)}function As(t,e,n){var i=Qe,r=Qn.transition;try{Qn.transition=null,Qe=1,Kk(t,e,n,i)}finally{Qn.transition=r,Qe=i}return null}function Kk(t,e,n,i){do aa();while(zr!==null);if(He&6)throw Error(ee(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(AC(t,o),t===Wt&&(Nt=Wt=null,$t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pc||(Pc=!0,rE(oh,function(){return aa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Qn.transition,Qn.transition=null;var a=Qe;Qe=1;var u=He;He|=4,Am.current=null,jk(t,n),$0(n,t),pk(Zf),lh=!!Gf,Zf=Gf=null,t.current=n,Hk(n),yC(),He=u,Qe=a,Qn.transition=o}else t.current=n;if(Pc&&(Pc=!1,zr=t,Ih=r),o=t.pendingLanes,o===0&&(qr=null),TC(n.stateNode),Sn(t,At()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Sh)throw Sh=!1,t=fp,fp=null,t;return Ih&1&&t.tag!==0&&aa(),o=t.pendingLanes,o&1?t===pp?Fl++:(Fl=0,pp=t):Fl=0,os(),null}function aa(){if(zr!==null){var t=Mw(Ih),e=Qn.transition,n=Qe;try{if(Qn.transition=null,Qe=16>t?16:t,zr===null)var i=!1;else{if(t=zr,zr=null,Ih=0,He&6)throw Error(ee(331));var r=He;for(He|=4,oe=t.current;oe!==null;){var o=oe,a=o.child;if(oe.flags&16){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var f=u[d];for(oe=f;oe!==null;){var _=oe;switch(_.tag){case 0:case 11:case 15:zl(8,_,o)}var v=_.child;if(v!==null)v.return=_,oe=v;else for(;oe!==null;){_=oe;var w=_.sibling,T=_.return;if(G0(_),_===f){oe=null;break}if(w!==null){w.return=T,oe=w;break}oe=T}}}var A=o.alternate;if(A!==null){var N=A.child;if(N!==null){A.child=null;do{var j=N.sibling;N.sibling=null,N=j}while(N!==null)}}oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,oe=a;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:zl(9,o,o.return)}var P=o.sibling;if(P!==null){P.return=o.return,oe=P;break e}oe=o.return}}var k=t.current;for(oe=k;oe!==null;){a=oe;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,oe=b;else e:for(a=k;oe!==null;){if(u=oe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:nd(9,u)}}catch(K){Ct(u,u.return,K)}if(u===a){oe=null;break e}var H=u.sibling;if(H!==null){H.return=u.return,oe=H;break e}oe=u.return}}if(He=r,os(),Pi&&typeof Pi.onPostCommitFiberRoot=="function")try{Pi.onPostCommitFiberRoot(Kh,t)}catch{}i=!0}return i}finally{Qe=n,Qn.transition=e}}return!1}function Tv(t,e,n){e=_a(n,e),e=M0(t,e,1),t=Wr(t,e,1),e=fn(),t!==null&&(Eu(t,1,e),Sn(t,e))}function Ct(t,e,n){if(t.tag===3)Tv(t,t,n);else for(;e!==null;){if(e.tag===3){Tv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(qr===null||!qr.has(i))){t=_a(n,t),t=D0(e,t,1),e=Wr(e,t,1),t=fn(),e!==null&&(Eu(e,1,t),Sn(e,t));break}}e=e.return}}function $k(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=fn(),t.pingedLanes|=t.suspendedLanes&n,Wt===t&&($t&n)===n&&(zt===4||zt===3&&($t&130023424)===$t&&500>At()-Rm?Us(t,0):xm|=n),Sn(t,e)}function nE(t,e){e===0&&(t.mode&1?(e=_c,_c<<=1,!(_c&130023424)&&(_c=4194304)):e=1);var n=fn();t=lr(t,e),t!==null&&(Eu(t,e,n),Sn(t,n))}function Qk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nE(t,n)}function Xk(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ee(314))}i!==null&&i.delete(e),nE(t,n)}var iE;iE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||En.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,zk(t,e,n);wn=!!(t.flags&131072)}else wn=!1,dt&&e.flags&1048576&&a0(e,mh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Wc(t,e),t=e.pendingProps;var r=fa(e,on.current);oa(e,n),r=Sm(null,e,i,t,r,n);var o=Im();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tn(i)?(o=!0,fh(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,vm(e),r.updater=td,e.stateNode=r,r._reactInternals=e,np(e,i,t,n),e=sp(null,e,i,!0,o,n)):(e.tag=0,dt&&o&&hm(e),hn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Wc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Yk(i),t=ui(i,t),r){case 0:e=rp(null,e,i,t,n);break e;case 1:e=dv(null,e,i,t,n);break e;case 11:e=cv(null,e,i,t,n);break e;case 14:e=hv(null,e,i,ui(i.type,t),n);break e}throw Error(ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ui(i,r),rp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ui(i,r),dv(t,e,i,r,n);case 3:e:{if(F0(e),t===null)throw Error(ee(387));i=e.pendingProps,o=e.memoizedState,r=o.element,f0(t,e),vh(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=_a(Error(ee(423)),e),e=fv(t,e,i,n,r);break e}else if(i!==r){r=_a(Error(ee(424)),e),e=fv(t,e,i,n,r);break e}else for(Rn=Hr(e.stateNode.containerInfo.firstChild),Ln=e,dt=!0,hi=null,n=h0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pa(),i===r){e=ur(t,e,n);break e}hn(t,e,i,n)}e=e.child}return e;case 5:return p0(e),t===null&&Yf(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Kf(i,r)?a=null:o!==null&&Kf(i,o)&&(e.flags|=32),U0(t,e),hn(t,e,a,n),e.child;case 6:return t===null&&Yf(e),null;case 13:return B0(t,e,n);case 4:return ym(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ma(e,null,i,n):hn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ui(i,r),cv(t,e,i,r,n);case 7:return hn(t,e,e.pendingProps,n),e.child;case 8:return hn(t,e,e.pendingProps.children,n),e.child;case 12:return hn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,rt(gh,i._currentValue),i._currentValue=a,o!==null)if(mi(o.value,a)){if(o.children===r.children&&!En.current){e=ur(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var d=u.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=rr(-1,n&-n),d.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var _=f.pending;_===null?d.next=d:(d.next=_.next,_.next=d),f.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),ep(o.return,n,e),u.lanes|=n;break}d=d.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ee(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),ep(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}hn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,oa(e,n),r=Xn(r),i=i(r),e.flags|=1,hn(t,e,i,n),e.child;case 14:return i=e.type,r=ui(i,e.pendingProps),r=ui(i.type,r),hv(t,e,i,r,n);case 15:return V0(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ui(i,r),Wc(t,e),e.tag=1,Tn(i)?(t=!0,fh(e)):t=!1,oa(e,n),N0(e,i,r),np(e,i,r,n),sp(null,e,i,!0,t,n);case 19:return j0(t,e,n);case 22:return z0(t,e,n)}throw Error(ee(156,e.tag))};function rE(t,e){return Lw(t,e)}function Jk(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,e,n,i){return new Jk(t,e,n,i)}function Nm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yk(t){if(typeof t=="function")return Nm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yp)return 11;if(t===em)return 14}return 2}function Zr(t,e){var n=t.alternate;return n===null?(n=$n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zc(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Nm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ho:return Fs(n.children,r,o,e);case Jp:a=8,r|=8;break;case kf:return t=$n(12,n,e,r|2),t.elementType=kf,t.lanes=o,t;case Pf:return t=$n(13,n,e,r),t.elementType=Pf,t.lanes=o,t;case Af:return t=$n(19,n,e,r),t.elementType=Af,t.lanes=o,t;case pw:return rd(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dw:a=10;break e;case fw:a=9;break e;case Yp:a=11;break e;case em:a=14;break e;case Pr:a=16,i=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=$n(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Fs(t,e,n,i){return t=$n(7,t,i,e),t.lanes=n,t}function rd(t,e,n,i){return t=$n(22,t,i,e),t.elementType=pw,t.lanes=n,t.stateNode={isHidden:!1},t}function lf(t,e,n){return t=$n(6,t,null,e),t.lanes=n,t}function uf(t,e,n){return e=$n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eP(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jd(0),this.expirationTimes=jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Mm(t,e,n,i,r,o,a,u,d){return t=new eP(t,e,n,u,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=$n(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vm(o),t}function tP(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function sE(t){if(!t)return Yr;t=t._reactInternals;e:{if(ro(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(Tn(n))return s0(t,n,e)}return e}function oE(t,e,n,i,r,o,a,u,d){return t=Mm(n,i,!0,t,r,o,a,u,d),t.context=sE(null),n=t.current,i=fn(),r=Gr(n),o=rr(i,r),o.callback=e??null,Wr(n,o,r),t.current.lanes=r,Eu(t,r,i),Sn(t,i),t}function sd(t,e,n,i){var r=e.current,o=fn(),a=Gr(r);return n=sE(n),e.context===null?e.context=n:e.pendingContext=n,e=rr(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Wr(r,e,a),t!==null&&(pi(t,r,a,o),Bc(t,r,a)),a}function kh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dm(t,e){Sv(t,e),(t=t.alternate)&&Sv(t,e)}function nP(){return null}var aE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vm(t){this._internalRoot=t}od.prototype.render=Vm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));sd(t,e,null,null)};od.prototype.unmount=Vm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$s(function(){sd(null,t,null,null)}),e[ar]=null}};function od(t){this._internalRoot=t}od.prototype.unstable_scheduleHydration=function(t){if(t){var e=zw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&Fw(t)}};function zm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ad(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Iv(){}function iP(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=kh(a);o.call(f)}}var a=oE(e,i,t,0,null,!1,!1,"",Iv);return t._reactRootContainer=a,t[ar]=a.current,tu(t.nodeType===8?t.parentNode:t),$s(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=kh(d);u.call(f)}}var d=Mm(t,0,!1,null,null,!1,!1,"",Iv);return t._reactRootContainer=d,t[ar]=d.current,tu(t.nodeType===8?t.parentNode:t),$s(function(){sd(e,d,n,i)}),d}function ld(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var d=kh(a);u.call(d)}}sd(e,a,t,r)}else a=iP(n,e,t,r,i);return kh(a)}Dw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Il(e.pendingLanes);n!==0&&(im(e,n|1),Sn(e,At()),!(He&6)&&(va=At()+500,os()))}break;case 13:$s(function(){var i=lr(t,1);if(i!==null){var r=fn();pi(i,t,1,r)}}),Dm(t,1)}};rm=function(t){if(t.tag===13){var e=lr(t,134217728);if(e!==null){var n=fn();pi(e,t,134217728,n)}Dm(t,134217728)}};Vw=function(t){if(t.tag===13){var e=Gr(t),n=lr(t,e);if(n!==null){var i=fn();pi(n,t,e,i)}Dm(t,e)}};zw=function(){return Qe};Uw=function(t,e){var n=Qe;try{return Qe=t,e()}finally{Qe=n}};zf=function(t,e,n){switch(e){case"input":if(Lf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Jh(i);if(!r)throw Error(ee(90));gw(i),Lf(i,r)}}}break;case"textarea":vw(t,n);break;case"select":e=n.value,e!=null&&na(t,!!n.multiple,e,!1)}};Cw=Lm;kw=$s;var rP={usingClientEntryPoint:!1,Events:[Su,Zo,Jh,Sw,Iw,Lm]},vl={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sP={bundleType:vl.bundleType,version:vl.version,rendererPackageName:vl.rendererPackageName,rendererConfig:vl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xw(t),t===null?null:t.stateNode},findFiberByHostInstance:vl.findFiberByHostInstance||nP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ac.isDisabled&&Ac.supportsFiber)try{Kh=Ac.inject(sP),Pi=Ac}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rP;Nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zm(e))throw Error(ee(200));return tP(t,e,null,n)};Nn.createRoot=function(t,e){if(!zm(t))throw Error(ee(299));var n=!1,i="",r=aE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Mm(t,1,!1,null,null,n,!1,i,r),t[ar]=e.current,tu(t.nodeType===8?t.parentNode:t),new Vm(e)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=xw(e),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return $s(t)};Nn.hydrate=function(t,e,n){if(!ad(e))throw Error(ee(200));return ld(null,t,e,!0,n)};Nn.hydrateRoot=function(t,e,n){if(!zm(t))throw Error(ee(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=aE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=oE(e,null,t,1,n??null,r,!1,o,a),t[ar]=e.current,tu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new od(e)};Nn.render=function(t,e,n){if(!ad(e))throw Error(ee(200));return ld(null,t,e,!1,n)};Nn.unmountComponentAtNode=function(t){if(!ad(t))throw Error(ee(40));return t._reactRootContainer?($s(function(){ld(null,null,t,!1,function(){t._reactRootContainer=null,t[ar]=null})}),!0):!1};Nn.unstable_batchedUpdates=Lm;Nn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ad(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return ld(t,e,n,!1,i)};Nn.version="18.3.1-next-f1338f8080-20240426";function lE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lE)}catch(t){console.error(t)}}lE(),lw.exports=Nn;var uE=lw.exports,Cv=uE;If.createRoot=Cv.createRoot,If.hydrateRoot=Cv.hydrateRoot;function Um(t,e){const n=Z.useRef(e);Z.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function cE(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const hE=1;function dE(t){return Object.freeze({__version:hE,map:t})}function ud(t,e){return Object.freeze({...t,...e})}const Fm=Z.createContext(null),Bm=Fm.Provider;function xa(){const t=Z.useContext(Fm);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function jm(t){function e(n,i){const{instance:r,context:o}=t(n).current;return Z.useImperativeHandle(i,()=>r),n.children==null?null:ir.createElement(Bm,{value:o},n.children)}return Z.forwardRef(e)}function fE(t){function e(n,i){const[r,o]=Z.useState(!1),{instance:a}=t(n,o).current;Z.useImperativeHandle(i,()=>a),Z.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?uE.createPortal(n.children,u):null}return Z.forwardRef(e)}function Hm(t){function e(n,i){const{instance:r}=t(n).current;return Z.useImperativeHandle(i,()=>r),null}return Z.forwardRef(e)}function pE(t){return function(n){const i=xa(),r=t(n,i),{instance:o}=r.current,a=Z.useRef(n.position),{position:u}=n;return Z.useEffect(function(){return o.addTo(i.map),function(){o.remove()}},[i.map,o]),Z.useEffect(function(){u!=null&&u!==a.current&&(o.setPosition(u),a.current=u)},[o,u]),r}}function cd(t,e){const n=Z.useRef();Z.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Cu(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function mE(t,e){return function(i,r){const o=xa(),a=t(Cu(i,o),o);return Um(o.map,i.attribution),cd(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var _p={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Xr,function(n){var i="1.9.4";function r(s){var l,h,p,g;for(h=1,p=arguments.length;h<p;h++){g=arguments[h];for(l in g)s[l]=g[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(h.call(arguments)):arguments)}}var u=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,h){var p,g,E,D;return D=function(){p=!1,g&&(E.apply(h,g),g=!1)},E=function(){p?g=arguments:(s.apply(h,arguments),setTimeout(D,l),p=!0)},E}function _(s,l,h){var p=l[1],g=l[0],E=p-g;return s===p&&h?s:((s-g)%E+E)%E+g}function v(){return!1}function w(s,l){if(l===!1)return s;var h=Math.pow(10,l===void 0?6:l);return Math.round(s*h)/h}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function A(s){return T(s).split(/\s+/)}function N(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var h in l)s.options[h]=l[h];return s.options}function j(s,l,h){var p=[];for(var g in s)p.push(encodeURIComponent(h?g.toUpperCase():g)+"="+encodeURIComponent(s[g]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function k(s,l){return s.replace(P,function(h,p){var g=l[p];if(g===void 0)throw new Error("No value provided for variable "+h);return typeof g=="function"&&(g=g(l)),g})}var b=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function H(s,l){for(var h=0;h<s.length;h++)if(s[h]===l)return h;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function I(s){var l=+new Date,h=Math.max(0,16-(l-R));return R=l+h,window.setTimeout(s,h)}var x=window.requestAnimationFrame||X("RequestAnimationFrame")||I,O=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function V(s,l,h){if(h&&x===I)s.call(l);else return x.call(window,a(s,l))}function z(s){s&&O.call(window,s)}var M={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:d,throttle:f,wrapNum:_,falseFn:v,formatNum:w,trim:T,splitWords:A,setOptions:N,getParamString:j,template:k,isArray:b,indexOf:H,emptyImageUrl:K,requestFn:x,cancelFn:O,requestAnimFrame:V,cancelAnimFrame:z};function Ke(){}Ke.extend=function(s){var l=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,p=o(h);p.constructor=l,l.prototype=p;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(l[g]=this[g]);return s.statics&&r(l,s.statics),s.includes&&(In(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?o(h.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,D=p._initHooks.length;E<D;E++)p._initHooks[E].call(this)}},l},Ke.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},Ke.mergeOptions=function(s){return r(this.prototype.options,s),this},Ke.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function In(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=b(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ue={on:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=A(s);for(var g=0,E=s.length;g<E;g++)this._on(s[g],l,h)}return this},off:function(s,l,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=A(s);for(var g=arguments.length===1,E=0,D=s.length;E<D;E++)g?this._off(s[E]):this._off(s[E],l,h)}return this},_on:function(s,l,h,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,h)===!1){h===this&&(h=void 0);var g={fn:l,ctx:h};p&&(g.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(g)}},_off:function(s,l,h){var p,g,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(g=0,E=p.length;g<E;g++)p[g].fn=v;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var D=this._listens(s,l,h);if(D!==!1){var B=p[D];this._firingCount&&(B.fn=v,this._events[s]=p=p.slice()),p.splice(D,1)}}},fire:function(s,l,h){if(!this.listens(s,h))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var g=this._events[s];if(g){this._firingCount=this._firingCount+1||1;for(var E=0,D=g.length;E<D;E++){var B=g[E],W=B.fn;B.once&&this.off(s,W,B.ctx),W.call(B.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,l,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var g=l;typeof l!="function"&&(p=!!l,g=void 0,h=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,g,h)!==!1)return!0;if(p){for(var D in this._eventParents)if(this._eventParents[D].listens(s,l,h,p))return!0}return!1},_listens:function(s,l,h){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;h===this&&(h=void 0);for(var g=0,E=p.length;g<E;g++)if(p[g].fn===l&&p[g].ctx===h)return g;return!1},once:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=A(s);for(var g=0,E=s.length;g<E;g++)this._on(s[g],l,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ue.addEventListener=Ue.on,Ue.removeEventListener=Ue.clearAllEventListeners=Ue.off,Ue.addOneTimeEventListener=Ue.once,Ue.fireEvent=Ue.fire,Ue.hasEventListeners=Ue.listens;var Mt=Ke.extend(Ue);function G(s,l,h){this.x=h?Math.round(s):s,this.y=h?Math.round(l):l}var me=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(s){return this.clone()._add(te(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(te(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new G(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new G(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=me(this.x),this.y=me(this.y),this},distanceTo:function(s){s=te(s);var l=s.x-this.x,h=s.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(s){return s=te(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=te(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function te(s,l,h){return s instanceof G?s:b(s)?new G(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new G(s.x,s.y):new G(s,l,h)}function fe(s,l){if(s)for(var h=l?[s,l]:s,p=0,g=h.length;p<g;p++)this.extend(h[p])}fe.prototype={extend:function(s){var l,h;if(!s)return this;if(s instanceof G||typeof s[0]=="number"||"x"in s)l=h=te(s);else if(s=we(s),l=s.min,h=s.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return te((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return te(this.min.x,this.max.y)},getTopRight:function(){return te(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,h;return typeof s[0]=="number"||s instanceof G?s=te(s):s=we(s),s instanceof fe?(l=s.min,h=s.max):l=h=s,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=we(s);var l=this.min,h=this.max,p=s.min,g=s.max,E=g.x>=l.x&&p.x<=h.x,D=g.y>=l.y&&p.y<=h.y;return E&&D},overlaps:function(s){s=we(s);var l=this.min,h=this.max,p=s.min,g=s.max,E=g.x>l.x&&p.x<h.x,D=g.y>l.y&&p.y<h.y;return E&&D},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,h=this.max,p=Math.abs(l.x-h.x)*s,g=Math.abs(l.y-h.y)*s;return we(te(l.x-p,l.y-g),te(h.x+p,h.y+g))},equals:function(s){return s?(s=we(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function we(s,l){return!s||s instanceof fe?s:new fe(s,l)}function Ae(s,l){if(s)for(var h=l?[s,l]:s,p=0,g=h.length;p<g;p++)this.extend(h[p])}Ae.prototype={extend:function(s){var l=this._southWest,h=this._northEast,p,g;if(s instanceof U)p=s,g=s;else if(s instanceof Ae){if(p=s._southWest,g=s._northEast,!p||!g)return this}else return s?this.extend(ne(s)||Ne(s)):this;return!l&&!h?(this._southWest=new U(p.lat,p.lng),this._northEast=new U(g.lat,g.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),h.lat=Math.max(g.lat,h.lat),h.lng=Math.max(g.lng,h.lng)),this},pad:function(s){var l=this._southWest,h=this._northEast,p=Math.abs(l.lat-h.lat)*s,g=Math.abs(l.lng-h.lng)*s;return new Ae(new U(l.lat-p,l.lng-g),new U(h.lat+p,h.lng+g))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof U||"lat"in s?s=ne(s):s=Ne(s);var l=this._southWest,h=this._northEast,p,g;return s instanceof Ae?(p=s.getSouthWest(),g=s.getNorthEast()):p=g=s,p.lat>=l.lat&&g.lat<=h.lat&&p.lng>=l.lng&&g.lng<=h.lng},intersects:function(s){s=Ne(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),g=s.getNorthEast(),E=g.lat>=l.lat&&p.lat<=h.lat,D=g.lng>=l.lng&&p.lng<=h.lng;return E&&D},overlaps:function(s){s=Ne(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),g=s.getNorthEast(),E=g.lat>l.lat&&p.lat<h.lat,D=g.lng>l.lng&&p.lng<h.lng;return E&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Ne(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ne(s,l){return s instanceof Ae?s:new Ae(s,l)}function U(s,l,h){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,h!==void 0&&(this.alt=+h)}U.prototype={equals:function(s,l){if(!s)return!1;s=ne(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+w(this.lat,s)+", "+w(this.lng,s)+")"},distanceTo:function(s){return Re.distance(this,ne(s))},wrap:function(){return Re.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,h=l/Math.cos(Math.PI/180*this.lat);return Ne([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new U(this.lat,this.lng,this.alt)}};function ne(s,l,h){return s instanceof U?s:b(s)&&typeof s[0]!="object"?s.length===3?new U(s[0],s[1],s[2]):s.length===2?new U(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new U(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new U(s,l,h)}var ue={latLngToPoint:function(s,l){var h=this.projection.project(s),p=this.scale(l);return this.transformation._transform(h,p)},pointToLatLng:function(s,l){var h=this.scale(l),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(l.min,h),g=this.transformation.transform(l.max,h);return new fe(p,g)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?_(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?_(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new U(h,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),h=this.wrapLatLng(l),p=l.lat-h.lat,g=l.lng-h.lng;if(p===0&&g===0)return s;var E=s.getSouthWest(),D=s.getNorthEast(),B=new U(E.lat-p,E.lng-g),W=new U(D.lat-p,D.lng-g);return new Ae(B,W)}},Re=r({},ue,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var h=Math.PI/180,p=s.lat*h,g=l.lat*h,E=Math.sin((l.lat-s.lat)*h/2),D=Math.sin((l.lng-s.lng)*h/2),B=E*E+Math.cos(p)*Math.cos(g)*D*D,W=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*W}}),tt=6378137,st={R:tt,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),g=Math.sin(p*l);return new G(this.R*s.lng*l,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(s){var l=180/Math.PI;return new U((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=tt*Math.PI;return new fe([-s,-s],[s,s])}()};function qe(s,l,h,p){if(b(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=h,this._d=p}qe.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new G((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Le(s,l,h,p){return new qe(s,l,h,p)}var Me=r({},Re,{code:"EPSG:3857",projection:st,transformation:function(){var s=.5/(Math.PI*st.R);return Le(s,.5,-s,.5)}()}),Ce=r({},Me,{code:"EPSG:900913"});function ot(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function ke(s,l){var h="",p,g,E,D,B,W;for(p=0,E=s.length;p<E;p++){for(B=s[p],g=0,D=B.length;g<D;g++)W=B[g],h+=(g?"L":"M")+W.x+" "+W.y;h+=l?he.svg?"z":"x":""}return h||"M0 0"}var Ze=document.documentElement.style,nt="ActiveXObject"in window,pt=nt&&!document.addEventListener,Cn="msLaunchUri"in navigator&&!("documentMode"in document),Dn=zn("webkit"),Ui=zn("android"),mr=zn("android 2")||zn("android 3"),ds=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),co=Ui&&zn("Google")&&ds<537&&!("AudioNode"in window),mt=!!window.opera,Rt=!Cn&&zn("chrome"),_i=zn("gecko")&&!Dn&&!mt&&!nt,ho=!Rt&&zn("safari"),fs=zn("phantom"),Q="OTransition"in Ze,re=navigator.platform.indexOf("Win")===0,ae=nt&&"transition"in Ze,le="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!mr,de="MozPerspective"in Ze,De=!window.L_DISABLE_3D&&(ae||le||de)&&!Q&&!fs,Je=typeof orientation<"u"||zn("mobile"),Ge=Je&&Dn,Vn=Je&&le,ei=!window.PointerEvent&&window.MSPointerEvent,ti=!!(window.PointerEvent||ei),gr="ontouchstart"in window||!!window.TouchEvent,ps=!window.L_NO_TOUCH&&(gr||ti),gt=Je&&mt,ni=Je&&_i,fo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,zu=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",v,l),window.removeEventListener("testPassiveEventSupport",v,l)}catch{}return s}(),ms=function(){return!!document.createElement("canvas").getContext}(),po=!!(document.createElementNS&&ot("svg").createSVGRect),qt=!!po&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Uu=!po&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),gs=navigator.platform.indexOf("Mac")===0,_s=navigator.platform.indexOf("Linux")===0;function zn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var he={ie:nt,ielt9:pt,edge:Cn,webkit:Dn,android:Ui,android23:mr,androidStock:co,opera:mt,chrome:Rt,gecko:_i,safari:ho,phantom:fs,opera12:Q,win:re,ie3d:ae,webkit3d:le,gecko3d:de,any3d:De,mobile:Je,mobileWebkit:Ge,mobileWebkit3d:Vn,msPointer:ei,pointer:ti,touch:ps,touchNative:gr,mobileOpera:gt,mobileGecko:ni,retina:fo,passiveEvents:zu,canvas:ms,svg:po,vml:Uu,inlineSvg:qt,mac:gs,linux:_s},Fi=he.msPointer?"MSPointerDown":"pointerdown",Fu=he.msPointer?"MSPointerMove":"pointermove",Bu=he.msPointer?"MSPointerUp":"pointerup",vs=he.msPointer?"MSPointerCancel":"pointercancel",mo={touchstart:Fi,touchmove:Fu,touchend:Bu,touchcancel:vs},go={touchstart:vo,touchmove:_o,touchend:_o,touchcancel:_o},ii={},ri=!1;function ju(s,l,h){return l==="touchstart"&&Wu(),go[l]?(h=go[l].bind(this,h),s.addEventListener(mo[l],h,!1),h):(console.warn("wrong event specified:",l),v)}function Hu(s,l,h){if(!mo[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(mo[l],h,!1)}function za(s){ii[s.pointerId]=s}function Ua(s){ii[s.pointerId]&&(ii[s.pointerId]=s)}function Fa(s){delete ii[s.pointerId]}function Wu(){ri||(document.addEventListener(Fi,za,!0),document.addEventListener(Fu,Ua,!0),document.addEventListener(Bu,Fa,!0),document.addEventListener(vs,Fa,!0),ri=!0)}function _o(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in ii)l.touches.push(ii[h]);l.changedTouches=[l],s(l)}}function vo(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&_t(l),_o(s,l)}function qu(s){var l={},h,p;for(p in s)h=s[p],l[p]=h&&h.bind?h.bind(s):h;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Ba=200;function ys(s,l){s.addEventListener("dblclick",l);var h=0,p;function g(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var D=Ya(E);if(!(D.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!D.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var B=Date.now();B-h<=Ba?(p++,p===2&&l(qu(E))):p=1,h=B}}}return s.addEventListener("click",g),{dblclick:l,simDblclick:g}}function Bi(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var ws=Hi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Es=Hi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ja=Es==="webkitTransition"||Es==="OTransition"?Es+"End":"transitionend";function Ha(s){return typeof s=="string"?document.getElementById(s):s}function _r(s,l){var h=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[l]:null}return h==="auto"?null:h}function Ve(s,l,h){var p=document.createElement(s);return p.className=l||"",h&&h.appendChild(p),p}function it(s){var l=s.parentNode;l&&l.removeChild(s)}function Ts(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function ji(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function vr(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Wa(s,l){if(s.classList!==void 0)return s.classList.contains(l);var h=Un(s);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function Pe(s,l){if(s.classList!==void 0)for(var h=A(l),p=0,g=h.length;p<g;p++)s.classList.add(h[p]);else if(!Wa(s,l)){var E=Un(s);qa(s,(E?E+" ":"")+l)}}function ct(s,l){s.classList!==void 0?s.classList.remove(l):qa(s,T((" "+Un(s)+" ").replace(" "+l+" "," ")))}function qa(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function Un(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function It(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&yo(s,l)}function yo(s,l){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Hi(s){for(var l=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in l)return s[h];return!1}function vi(s,l,h){var p=l||new G(0,0);s.style[ws]=(he.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function Ee(s,l){s._leaflet_pos=l,he.any3d?vi(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Fn(s){return s._leaflet_pos||new G(0,0)}var si,oi,Ga;if("onselectstart"in document)si=function(){_e(window,"selectstart",_t)},oi=function(){Ye(window,"selectstart",_t)};else{var yr=Hi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);si=function(){if(yr){var s=document.documentElement.style;Ga=s[yr],s[yr]="none"}},oi=function(){yr&&(document.documentElement.style[yr]=Ga,Ga=void 0)}}function Za(){_e(window,"dragstart",_t)}function Ka(){Ye(window,"dragstart",_t)}var wo,$a;function Wi(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(kn(),wo=s,$a=s.style.outlineStyle,s.style.outlineStyle="none",_e(window,"keydown",kn))}function kn(){wo&&(wo.style.outlineStyle=$a,wo=void 0,$a=void 0,Ye(window,"keydown",kn))}function Qa(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Eo(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Gu={__proto__:null,TRANSFORM:ws,TRANSITION:Es,TRANSITION_END:ja,get:Ha,getStyle:_r,create:Ve,remove:it,empty:Ts,toFront:ji,toBack:vr,hasClass:Wa,addClass:Pe,removeClass:ct,setClass:qa,getClass:Un,setOpacity:It,testProp:Hi,setTransform:vi,setPosition:Ee,getPosition:Fn,get disableTextSelection(){return si},get enableTextSelection(){return oi},disableImageDrag:Za,enableImageDrag:Ka,preventOutline:Wi,restoreOutline:kn,getSizedParentNode:Qa,getScale:Eo};function _e(s,l,h,p){if(l&&typeof l=="object")for(var g in l)Xa(s,g,l[g],h);else{l=A(l);for(var E=0,D=l.length;E<D;E++)Xa(s,l[E],h,p)}return this}var Bn="_leaflet_events";function Ye(s,l,h,p){if(arguments.length===1)Zu(s),delete s[Bn];else if(l&&typeof l=="object")for(var g in l)Ja(s,g,l[g],h);else if(l=A(l),arguments.length===2)Zu(s,function(B){return H(l,B)!==-1});else for(var E=0,D=l.length;E<D;E++)Ja(s,l[E],h,p);return this}function Zu(s,l){for(var h in s[Bn]){var p=h.split(/\d/)[0];(!l||l(p))&&Ja(s,p,null,null,h)}}var jn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xa(s,l,h,p){var g=l+d(h)+(p?"_"+d(p):"");if(s[Bn]&&s[Bn][g])return this;var E=function(B){return h.call(p||s,B||window.event)},D=E;!he.touchNative&&he.pointer&&l.indexOf("touch")===0?E=ju(s,l,E):he.touch&&l==="dblclick"?E=ys(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(jn[l]||l,E,he.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(B){B=B||window.event,el(s,B)&&D(B)},s.addEventListener(jn[l],E,!1)):s.addEventListener(l,D,!1):s.attachEvent("on"+l,E),s[Bn]=s[Bn]||{},s[Bn][g]=E}function Ja(s,l,h,p,g){g=g||l+d(h)+(p?"_"+d(p):"");var E=s[Bn]&&s[Bn][g];if(!E)return this;!he.touchNative&&he.pointer&&l.indexOf("touch")===0?Hu(s,l,E):he.touch&&l==="dblclick"?Bi(s,E):"removeEventListener"in s?s.removeEventListener(jn[l]||l,E,!1):s.detachEvent("on"+l,E),s[Bn][g]=null}function Hn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function wr(s){return Xa(s,"wheel",Hn),this}function Er(s){return _e(s,"mousedown touchstart dblclick contextmenu",Hn),s._leaflet_disable_click=!0,this}function _t(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Pn(s){return _t(s),Hn(s),this}function Ya(s){if(s.composedPath)return s.composedPath();for(var l=[],h=s.target;h;)l.push(h),h=h.parentNode;return l}function To(s,l){if(!l)return new G(s.clientX,s.clientY);var h=Eo(l),p=h.boundingClientRect;return new G((s.clientX-p.left)/h.x-l.clientLeft,(s.clientY-p.top)/h.y-l.clientTop)}var ht=he.linux&&he.chrome?window.devicePixelRatio:he.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ku(s){return he.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ht:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function el(s,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var $u={__proto__:null,on:_e,off:Ye,stopPropagation:Hn,disableScrollPropagation:wr,disableClickPropagation:Er,preventDefault:_t,stop:Pn,getPropagationPath:Ya,getMousePosition:To,getWheelDelta:Ku,isExternalTarget:el,addListener:_e,removeListener:Ye},tl=Mt.extend({run:function(s,l,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Fn(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var h=this._startPos.add(this._offset.multiplyBy(s));l&&h._round(),Ee(this._el,h),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),be=Mt.extend({options:{crs:Me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=N(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ne(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Es&&he.any3d&&!he.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_e(this._proxy,ja,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ne(s),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=r({animate:h.animate},h.zoom),h.pan=r({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(he.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(he.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,h){var p=this.getZoomScale(l),g=this.getSize().divideBy(2),E=s instanceof G?s:this.latLngToContainerPoint(s),D=E.subtract(g).multiplyBy(1-1/p),B=this.containerPointToLatLng(g.add(D));return this.setView(B,l,{zoom:h})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Ne(s);var h=te(l.paddingTopLeft||l.padding||[0,0]),p=te(l.paddingBottomRight||l.padding||[0,0]),g=this.getBoundsZoom(s,!1,h.add(p));if(g=typeof l.maxZoom=="number"?Math.min(l.maxZoom,g):g,g===1/0)return{center:s.getCenter(),zoom:g};var E=p.subtract(h).divideBy(2),D=this.project(s.getSouthWest(),g),B=this.project(s.getNorthEast(),g),W=this.unproject(D.add(B).divideBy(2).add(E),g);return{center:W,zoom:g}},fitBounds:function(s,l){if(s=Ne(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=te(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Pe(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,h){if(h=h||{},h.animate===!1||!he.any3d)return this.setView(s,l,h);this._stop();var p=this.project(this.getCenter()),g=this.project(s),E=this.getSize(),D=this._zoom;s=ne(s),l=l===void 0?D:l;var B=Math.max(E.x,E.y),W=B*this.getZoomScale(D,l),$=g.distanceTo(p)||1,se=1.42,ve=se*se;function xe(bt){var hc=bt?-1:1,LI=bt?W:B,bI=W*W-B*B+hc*ve*ve*$*$,OI=2*LI*ve*$,Dd=bI/OI,g_=Math.sqrt(Dd*Dd+1)-Dd,NI=g_<1e-9?-18:Math.log(g_);return NI}function un(bt){return(Math.exp(bt)-Math.exp(-bt))/2}function Bt(bt){return(Math.exp(bt)+Math.exp(-bt))/2}function qn(bt){return un(bt)/Bt(bt)}var _n=xe(0);function Mo(bt){return B*(Bt(_n)/Bt(_n+se*bt))}function PI(bt){return B*(Bt(_n)*qn(_n+se*bt)-un(_n))/ve}function AI(bt){return 1-Math.pow(1-bt,1.5)}var xI=Date.now(),p_=(xe(1)-_n)/se,RI=h.duration?1e3*h.duration:1e3*p_*.8;function m_(){var bt=(Date.now()-xI)/RI,hc=AI(bt)*p_;bt<=1?(this._flyToFrame=V(m_,this),this._move(this.unproject(p.add(g.subtract(p).multiplyBy(PI(hc)/$)),D),this.getScaleZoom(B/Mo(hc),D),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),m_.call(this),this},flyToBounds:function(s,l){var h=this._getBoundsCenterZoom(s,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(s){return s=Ne(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,Ne(s));return h.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var h=te(l.paddingTopLeft||l.padding||[0,0]),p=te(l.paddingBottomRight||l.padding||[0,0]),g=this.project(this.getCenter()),E=this.project(s),D=this.getPixelBounds(),B=we([D.min.add(h),D.max.subtract(p)]),W=B.getSize();if(!B.contains(E)){this._enforcingBounds=!0;var $=E.subtract(B.getCenter()),se=B.extend(E).getSize().subtract(W);g.x+=$.x<0?-se.x:se.x,g.y+=$.y<0?-se.y:se.y,this.panTo(this.unproject(g),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=l.divideBy(2).round(),g=h.divideBy(2).round(),E=p.subtract(g);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),h=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,s):navigator.geolocation.getCurrentPosition(l,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,h=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,h=s.coords.longitude,p=new U(l,h),g=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var D=this.getBoundsZoom(g);this.setView(p,E.maxZoom?Math.min(D,E.maxZoom):D)}var B={latlng:p,bounds:g,timestamp:s.timestamp};for(var W in s.coords)typeof s.coords[W]=="number"&&(B[W]=s.coords[W]);this.fire("locationfound",B)}},addHandler:function(s,l){if(!l)return this;var h=this[s]=new l(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),it(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)it(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ve("div",h,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new Ae(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,h){s=Ne(s),h=te(h||[0,0]);var p=this.getZoom()||0,g=this.getMinZoom(),E=this.getMaxZoom(),D=s.getNorthWest(),B=s.getSouthEast(),W=this.getSize().subtract(h),$=we(this.project(B,p),this.project(D,p)).getSize(),se=he.any3d?this.options.zoomSnap:1,ve=W.x/$.x,xe=W.y/$.y,un=l?Math.max(ve,xe):Math.min(ve,xe);return p=this.getScaleZoom(un,p),se&&(p=Math.round(p/(se/100))*(se/100),p=l?Math.ceil(p/se)*se:Math.floor(p/se)*se),Math.max(g,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var h=this._getTopLeftPoint(s,l);return new fe(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(s)/h.scale(l)},getScaleZoom:function(s,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var p=h.zoom(s*h.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ne(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(te(s),l)},layerPointToLatLng:function(s){var l=te(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ne(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ne(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Ne(s))},distance:function(s,l){return this.options.crs.distance(ne(s),ne(l))},containerPointToLayerPoint:function(s){return te(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return te(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(te(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ne(s)))},mouseEventToContainerPoint:function(s){return To(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Ha(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_e(l,"scroll",this._onScroll,this),this._containerId=d(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&he.any3d,Pe(s,"leaflet-container"+(he.touch?" leaflet-touch":"")+(he.retina?" leaflet-retina":"")+(he.ielt9?" leaflet-oldie":"")+(he.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=_r(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ee(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Pe(s.markerPane,"leaflet-zoom-hide"),Pe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,h){Ee(this._mapPane,new G(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var g=this._zoom!==l;this._moveStart(g,h)._move(s,l)._moveEnd(g),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,h,p){l===void 0&&(l=this._zoom);var g=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((g||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Ee(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var l=s?Ye:_e;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),he.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var h=[],p,g=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,D=!1;E;){if(p=this._targets[d(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){D=!0;break}if(p&&p.listens(l,!0)&&(g&&!el(E,s)||(h.push(p),g))||E===this._container)break;E=E.parentNode}return!h.length&&!D&&!g&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var h=s.type;h==="mousedown"&&Wi(l),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,h){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var g=this._findEventTargets(s,l);if(h){for(var E=[],D=0;D<h.length;D++)h[D].listens(l,!0)&&E.push(h[D]);g=E.concat(g)}if(g.length){l==="contextmenu"&&_t(s);var B=g[0],W={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var $=B.getLatLng&&(!B._radius||B._radius<=10);W.containerPoint=$?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(s),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=$?B.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(D=0;D<g.length;D++)if(g[D].fire(l,W,!0),W.originalEvent._stopped||g[D].options.bubblingMouseEvents===!1&&H(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Fn(this._mapPane)||new G(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var h=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var h=this.getSize()._divideBy(2);return this.project(s,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return we([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,h){if(!h)return s;var p=this.project(s,l),g=this.getSize().divideBy(2),E=new fe(p.subtract(g),p.add(g)),D=this._getBoundsOffset(E,h,l);return Math.abs(D.x)<=1&&Math.abs(D.y)<=1?s:this.unproject(p.add(D),l)},_limitOffset:function(s,l){if(!l)return s;var h=this.getPixelBounds(),p=new fe(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,h){var p=we(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),g=p.min.subtract(s.min),E=p.max.subtract(s.max),D=this._rebound(g.x,-E.x),B=this._rebound(g.y,-E.y);return new G(D,B)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),h=this.getMaxZoom(),p=he.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ct(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var h=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ve("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var h=ws,p=this._proxy.style[h];vi(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){it(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();vi(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),g=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(g)?!1:(V(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,Pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ct(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function So(s,l){return new be(s,l)}var gn=Ke.extend({options:{position:"topright"},initialize:function(s){N(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Pe(l,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(it(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ln=function(s){return new gn(s)};be.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",h=this._controlContainer=Ve("div",l+"control-container",this._container);function p(g,E){var D=l+g+" "+l+E;s[g+E]=Ve("div",D,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)it(this._controlCorners[s]);it(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var nl=gn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,l,h){N(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return gn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(d(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):ct(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ct(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ve("div",s),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Er(l),wr(l);var p=this._section=Ve("section",s+"-list");h&&(this._map.on("click",this.collapse,this),_e(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Ve("a",s+"-toggle",l);g.href="#",g.title="Layers",g.setAttribute("role","button"),_e(g,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){_t(E),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Ve("div",s+"-base",p),this._separator=Ve("div",s+"-separator",p),this._overlaysList=Ve("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&d(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(a(function(p,g){return this.options.sortFunction(p.layer,g.layer,p.name,g.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ts(this._baseLayersList),Ts(this._overlaysList),this._layerControlInputs=[];var s,l,h,p,g=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,g+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&g>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(d(s.target)),h=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(s,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var l=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+d(this),h),this._layerControlInputs.push(p),p.layerId=d(s.layer),_e(p,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(g);var D=s.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,h,p=[],g=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],h=this._getLayer(l.layerId).layer,l.checked?p.push(h):l.checked||g.push(h);for(E=0;E<g.length;E++)this._map.hasLayer(g[E])&&this._map.removeLayer(g[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,h,p=this._map.getZoom(),g=s.length-1;g>=0;g--)l=s[g],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,_e(s,"click",_t),this.expand();var l=this;setTimeout(function(){Ye(s,"click",_t),l._preventClick=!1})}}),Rd=function(s,l,h){return new nl(s,l,h)},qi=gn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",h=Ve("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,h,p,g){var E=Ve("a",h,p);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),Er(E),_e(E,"click",Pn),_e(E,"click",g,this),_e(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";ct(this._zoomInButton,l),ct(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Pe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Pe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});be.mergeOptions({zoomControl:!0}),be.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new qi,this.addControl(this.zoomControl))});var Qu=function(s){return new qi(s)},Io=gn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",h=Ve("div",l),p=this.options;return this._addScales(p,l+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,h){s.metric&&(this._mScale=Ve("div",l,h)),s.imperial&&(this._iScale=Ve("div",l,h))},_update:function(){var s=this._map,l=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/s)},_updateImperial:function(s){var l=s*3.2808399,h,p,g;l>5280?(h=l/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(g=this._getRoundNum(l),this._updateScale(this._iScale,g+" ft",g/l))},_updateScale:function(s,l,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),h=s/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),Co=function(s){return new Io(s)},Xu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Tr=gn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(he.inlineSvg?Xu+" ":"")+"Leaflet</a>"},initialize:function(s){N(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ve("div","leaflet-control-attribution"),Er(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});be.mergeOptions({attributionControl:!0}),be.addInitHook(function(){this.options.attributionControl&&new Tr().addTo(this)});var Ld=function(s){return new Tr(s)};gn.Layers=nl,gn.Zoom=qi,gn.Scale=Io,gn.Attribution=Tr,ln.layers=Rd,ln.zoom=Qu,ln.scale=Co,ln.attribution=Ld;var An=Ke.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});An.addTo=function(s,l){return s.addHandler(l,this),this};var Ss={Events:Ue},il=he.touch?"touchstart mousedown":"mousedown",ai=Mt.extend({options:{clickTolerance:3},initialize:function(s,l,h,p){N(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=h},enable:function(){this._enabled||(_e(this._dragStartTarget,il,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ai._dragging===this&&this.finishDrag(!0),Ye(this._dragStartTarget,il,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Wa(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){ai._dragging===this&&this.finishDrag();return}if(!(ai._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(ai._dragging=this,this._preventOutline&&Wi(this._element),Za(),si(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,h=Qa(this._element);this._startPoint=new G(l.clientX,l.clientY),this._startPos=Fn(this._element),this._parentScale=Eo(h);var p=s.type==="mousedown";_e(document,p?"mousemove":"touchmove",this._onMove,this),_e(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,h=new G(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,_t(s),this._moved||(this.fire("dragstart"),this._moved=!0,Pe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Ee(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){ct(document.body,"leaflet-dragging"),this._lastTarget&&(ct(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ye(document,"mousemove touchmove",this._onMove,this),Ye(document,"mouseup touchend touchcancel",this._onUp,this),Ka(),oi();var l=this._moved&&this._moving;this._moving=!1,ai._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function ko(s,l,h){var p,g=[1,4,2,8],E,D,B,W,$,se,ve,xe;for(E=0,se=s.length;E<se;E++)s[E]._code=yi(s[E],l);for(B=0;B<4;B++){for(ve=g[B],p=[],E=0,se=s.length,D=se-1;E<se;D=E++)W=s[E],$=s[D],W._code&ve?$._code&ve||(xe=Ft($,W,ve,l,h),xe._code=yi(xe,l),p.push(xe)):($._code&ve&&(xe=Ft($,W,ve,l,h),xe._code=yi(xe,l),p.push(xe)),p.push(W));s=p}return s}function Po(s,l){var h,p,g,E,D,B,W,$,se;if(!s||s.length===0)throw new Error("latlngs not passed");c(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ve=ne([0,0]),xe=Ne(s),un=xe.getNorthWest().distanceTo(xe.getSouthWest())*xe.getNorthEast().distanceTo(xe.getNorthWest());un<1700&&(ve=Ao(s));var Bt=s.length,qn=[];for(h=0;h<Bt;h++){var _n=ne(s[h]);qn.push(l.project(ne([_n.lat-ve.lat,_n.lng-ve.lng])))}for(B=W=$=0,h=0,p=Bt-1;h<Bt;p=h++)g=qn[h],E=qn[p],D=g.y*E.x-E.y*g.x,W+=(g.x+E.x)*D,$+=(g.y+E.y)*D,B+=D*3;B===0?se=qn[0]:se=[W/B,$/B];var Mo=l.unproject(te(se));return ne([Mo.lat+ve.lat,Mo.lng+ve.lng])}function Ao(s){for(var l=0,h=0,p=0,g=0;g<s.length;g++){var E=ne(s[g]);l+=E.lat,h+=E.lng,p++}return ne([l/p,h/p])}var xo={__proto__:null,clipPolygon:ko,polygonCenter:Po,centroid:Ao};function rl(s,l){if(!l||!s.length)return s.slice();var h=l*l;return s=Yu(s,h),s=Ju(s,h),s}function sl(s,l,h){return Math.sqrt(Wn(s,l,h,!0))}function Gi(s,l,h){return Wn(s,l,h)}function Ju(s,l){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,g=new p(h);g[0]=g[h-1]=1,Ro(s,g,l,0,h-1);var E,D=[];for(E=0;E<h;E++)g[E]&&D.push(s[E]);return D}function Ro(s,l,h,p,g){var E=0,D,B,W;for(B=p+1;B<=g-1;B++)W=Wn(s[B],s[p],s[g],!0),W>E&&(D=B,E=W);E>h&&(l[D]=1,Ro(s,l,h,p,D),Ro(s,l,h,D,g))}function Yu(s,l){for(var h=[s[0]],p=1,g=0,E=s.length;p<E;p++)ec(s[p],s[g])>l&&(h.push(s[p]),g=p);return g<E-1&&h.push(s[E-1]),h}var ol;function Is(s,l,h,p,g){var E=p?ol:yi(s,h),D=yi(l,h),B,W,$;for(ol=D;;){if(!(E|D))return[s,l];if(E&D)return!1;B=E||D,W=Ft(s,l,B,h,g),$=yi(W,h),B===E?(s=W,E=$):(l=W,D=$)}}function Ft(s,l,h,p,g){var E=l.x-s.x,D=l.y-s.y,B=p.min,W=p.max,$,se;return h&8?($=s.x+E*(W.y-s.y)/D,se=W.y):h&4?($=s.x+E*(B.y-s.y)/D,se=B.y):h&2?($=W.x,se=s.y+D*(W.x-s.x)/E):h&1&&($=B.x,se=s.y+D*(B.x-s.x)/E),new G($,se,g)}function yi(s,l){var h=0;return s.x<l.min.x?h|=1:s.x>l.max.x&&(h|=2),s.y<l.min.y?h|=4:s.y>l.max.y&&(h|=8),h}function ec(s,l){var h=l.x-s.x,p=l.y-s.y;return h*h+p*p}function Wn(s,l,h,p){var g=l.x,E=l.y,D=h.x-g,B=h.y-E,W=D*D+B*B,$;return W>0&&($=((s.x-g)*D+(s.y-E)*B)/W,$>1?(g=h.x,E=h.y):$>0&&(g+=D*$,E+=B*$)),D=s.x-g,B=s.y-E,p?D*D+B*B:new G(g,E)}function c(s){return!b(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function m(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),c(s)}function y(s,l){var h,p,g,E,D,B,W,$;if(!s||s.length===0)throw new Error("latlngs not passed");c(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=ne([0,0]),ve=Ne(s),xe=ve.getNorthWest().distanceTo(ve.getSouthWest())*ve.getNorthEast().distanceTo(ve.getNorthWest());xe<1700&&(se=Ao(s));var un=s.length,Bt=[];for(h=0;h<un;h++){var qn=ne(s[h]);Bt.push(l.project(ne([qn.lat-se.lat,qn.lng-se.lng])))}for(h=0,p=0;h<un-1;h++)p+=Bt[h].distanceTo(Bt[h+1])/2;if(p===0)$=Bt[0];else for(h=0,E=0;h<un-1;h++)if(D=Bt[h],B=Bt[h+1],g=D.distanceTo(B),E+=g,E>p){W=(E-p)/g,$=[B.x-W*(B.x-D.x),B.y-W*(B.y-D.y)];break}var _n=l.unproject(te($));return ne([_n.lat+se.lat,_n.lng+se.lng])}var S={__proto__:null,simplify:rl,pointToSegmentDistance:sl,closestPointOnSegment:Gi,clipSegment:Is,_getEdgeIntersection:Ft,_getBitCode:yi,_sqClosestPointOnSegment:Wn,isFlat:c,_flat:m,polylineCenter:y},F={project:function(s){return new G(s.lng,s.lat)},unproject:function(s){return new U(s.y,s.x)},bounds:new fe([-180,-90],[180,90])},q={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,h=this.R,p=s.lat*l,g=this.R_MINOR/h,E=Math.sqrt(1-g*g),D=E*Math.sin(p),B=Math.tan(Math.PI/4-p/2)/Math.pow((1-D)/(1+D),E/2);return p=-h*Math.log(Math.max(B,1e-10)),new G(s.lng*l*h,p)},unproject:function(s){for(var l=180/Math.PI,h=this.R,p=this.R_MINOR/h,g=Math.sqrt(1-p*p),E=Math.exp(-s.y/h),D=Math.PI/2-2*Math.atan(E),B=0,W=.1,$;B<15&&Math.abs(W)>1e-7;B++)$=g*Math.sin(D),$=Math.pow((1-$)/(1+$),g/2),W=Math.PI/2-2*Math.atan(E*$)-D,D+=W;return new U(D*l,s.x*l/h)}},ie={__proto__:null,LonLat:F,Mercator:q,SphericalMercator:st},$e=r({},Re,{code:"EPSG:3395",projection:q,transformation:function(){var s=.5/(Math.PI*q.R);return Le(s,.5,-s,.5)}()}),Lt=r({},Re,{code:"EPSG:4326",projection:F,transformation:Le(1/180,1,-1/180,.5)}),Be=r({},ue,{projection:F,transformation:Le(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var h=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});ue.Earth=Re,ue.EPSG3395=$e,ue.EPSG3857=Me,ue.EPSG900913=Ce,ue.EPSG4326=Lt,ue.Simple=Be;var et=Mt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});be.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=d(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=d(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},_addLayers:function(s){s=s?b(s)?s:[s]:[];for(var l=0,h=s.length;l<h;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=d(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var g=this._zoomBoundLayers[p].options;s=g.minZoom===void 0?s:Math.min(s,g.minZoom),l=g.maxZoom===void 0?l:Math.max(l,g.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var vt=et.extend({initialize:function(s,l){N(this,l),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),Sr=function(s,l){return new vt(s,l)},kt=vt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),vt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),vt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ae;for(var l in this._layers){var h=this._layers[l];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),Lo=function(s,l){return new kt(s,l)},wi=Ke.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){N(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var h=this.options,p=h[l+"Size"];typeof p=="number"&&(p=[p,p]);var g=te(p),E=te(l==="shadow"&&h.shadowAnchor||h.iconAnchor||g&&g.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(h.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),g&&(s.style.width=g.x+"px",s.style.height=g.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return he.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function lI(s){return new wi(s)}var al=wi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof al.imagePath!="string"&&(al.imagePath=this._detectIconPath()),(this.options.imagePath||al.imagePath)+wi.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(h,p,g){var E=p.exec(h);return E&&E[g]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ve("div","leaflet-default-icon-path",document.body),l=_r(s,"background-image")||_r(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),$g=An.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new ai(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Pe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ct(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,h=l._map,p=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,E=Fn(l._icon),D=h.getPixelBounds(),B=h.getPixelOrigin(),W=we(D.min._subtract(B).add(g),D.max._subtract(B).subtract(g));if(!W.contains(E)){var $=te((Math.max(W.max.x,E.x)-W.max.x)/(D.max.x-W.max.x)-(Math.min(W.min.x,E.x)-W.min.x)/(D.min.x-W.min.x),(Math.max(W.max.y,E.y)-W.max.y)/(D.max.y-W.max.y)-(Math.min(W.min.y,E.y)-W.min.y)/(D.min.y-W.min.y)).multiplyBy(p);h.panBy($,{animate:!1}),this._draggable._newPos._add($),this._draggable._startPos._add($),Ee(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=V(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,h=l._shadow,p=Fn(l._icon),g=l._map.layerPointToLatLng(p);h&&Ee(h,p),l._latlng=g,s.latlng=g,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),tc=et.extend({options:{icon:new al,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){N(this,l),this._latlng=ne(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ne(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Pe(h,l),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_e(h,"focus",this._panOnFocus,this);var g=s.icon.createShadow(this._shadow),E=!1;g!==this._shadow&&(this._removeShadow(),E=!0),g&&(Pe(g,l),g.alt=""),this._shadow=g,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ye(this._icon,"focus",this._panOnFocus,this),it(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&it(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Ee(this._icon,s),this._shadow&&Ee(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$g)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $g(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&It(this._icon,s),this._shadow&&It(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,h=l.iconSize?te(l.iconSize):te(0,0),p=l.iconAnchor?te(l.iconAnchor):te(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function uI(s,l){return new tc(s,l)}var Ir=et.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return N(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),nc=Ir.extend({options:{fill:!0,radius:10},initialize:function(s,l){N(this,l),this._latlng=ne(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ne(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Ir.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,h=this._clickTolerance(),p=[s+h,l+h];this._pxBounds=new fe(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function cI(s,l){return new nc(s,l)}var bd=nc.extend({initialize:function(s,l,h){if(typeof l=="number"&&(l=r({},h,{radius:l})),N(this,l),this._latlng=ne(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ae(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Ir.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===Re.distance){var g=Math.PI/180,E=this._mRadius/Re.R/g,D=h.project([l+E,s]),B=h.project([l-E,s]),W=D.add(B).divideBy(2),$=h.unproject(W).lat,se=Math.acos((Math.cos(E*g)-Math.sin(l*g)*Math.sin($*g))/(Math.cos(l*g)*Math.cos($*g)))/g;(isNaN(se)||se===0)&&(se=E/Math.cos(Math.PI/180*l)),this._point=W.subtract(h.getPixelOrigin()),this._radius=isNaN(se)?0:W.x-h.project([$,s-se]).x,this._radiusY=W.y-D.y}else{var ve=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(ve).x}this._updateBounds()}});function hI(s,l,h){return new bd(s,l,h)}var Zi=Ir.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){N(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,h=null,p=Wn,g,E,D=0,B=this._parts.length;D<B;D++)for(var W=this._parts[D],$=1,se=W.length;$<se;$++){g=W[$-1],E=W[$];var ve=p(s,g,E,!0);ve<l&&(l=ve,h=p(s,g,E))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return y(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ne(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ae,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return c(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],h=c(s),p=0,g=s.length;p<g;p++)h?(l[p]=ne(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new G(s,s);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,h){var p=s[0]instanceof U,g=s.length,E,D;if(p){for(D=[],E=0;E<g;E++)D[E]=this._map.latLngToLayerPoint(s[E]),h.extend(D[E]);l.push(D)}else for(E=0;E<g;E++)this._projectLatlngs(s[E],l,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,p,g,E,D,B,W;for(h=0,g=0,E=this._rings.length;h<E;h++)for(W=this._rings[h],p=0,D=W.length;p<D-1;p++)B=Is(W[p],W[p+1],s,p,!0),B&&(l[g]=l[g]||[],l[g].push(B[0]),(B[1]!==W[p+1]||p===D-2)&&(l[g].push(B[1]),g++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=rl(s[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var h,p,g,E,D,B,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,E=this._parts.length;h<E;h++)for(B=this._parts[h],p=0,D=B.length,g=D-1;p<D;g=p++)if(!(!l&&p===0)&&sl(s,B[g],B[p])<=W)return!0;return!1}});function dI(s,l){return new Zi(s,l)}Zi._flat=m;var bo=Zi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Po(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Zi.prototype._convertLatLngs.call(this,s),h=l.length;return h>=2&&l[0]instanceof U&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(s){Zi.prototype._setLatLngs.call(this,s),c(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return c(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,h=new G(l,l);if(s=new fe(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,g=this._rings.length,E;p<g;p++)E=ko(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,h,p,g,E,D,B,W,$;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,W=this._parts.length;E<W;E++)for(h=this._parts[E],D=0,$=h.length,B=$-1;D<$;B=D++)p=h[D],g=h[B],p.y>s.y!=g.y>s.y&&s.x<(g.x-p.x)*(s.y-p.y)/(g.y-p.y)+p.x&&(l=!l);return l||Zi.prototype._containsPoint.call(this,s,!0)}});function fI(s,l){return new bo(s,l)}var Ki=kt.extend({initialize:function(s,l){N(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=b(s)?s:s.features,h,p,g;if(l){for(h=0,p=l.length;h<p;h++)g=l[h],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var D=ic(s,E);return D?(D.feature=oc(s),D.defaultOptions=D.options,this.resetStyle(D),E.onEachFeature&&E.onEachFeature(s,D),this.addLayer(D)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function ic(s,l){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,g=[],E=l&&l.pointToLayer,D=l&&l.coordsToLatLng||Od,B,W,$,se;if(!p&&!h)return null;switch(h.type){case"Point":return B=D(p),Qg(E,s,B,l);case"MultiPoint":for($=0,se=p.length;$<se;$++)B=D(p[$]),g.push(Qg(E,s,B,l));return new kt(g);case"LineString":case"MultiLineString":return W=rc(p,h.type==="LineString"?0:1,D),new Zi(W,l);case"Polygon":case"MultiPolygon":return W=rc(p,h.type==="Polygon"?1:2,D),new bo(W,l);case"GeometryCollection":for($=0,se=h.geometries.length;$<se;$++){var ve=ic({geometry:h.geometries[$],type:"Feature",properties:s.properties},l);ve&&g.push(ve)}return new kt(g);case"FeatureCollection":for($=0,se=h.features.length;$<se;$++){var xe=ic(h.features[$],l);xe&&g.push(xe)}return new kt(g);default:throw new Error("Invalid GeoJSON object.")}}function Qg(s,l,h,p){return s?s(l,h):new tc(h,p&&p.markersInheritOptions&&p)}function Od(s){return new U(s[1],s[0],s[2])}function rc(s,l,h){for(var p=[],g=0,E=s.length,D;g<E;g++)D=l?rc(s[g],l-1,h):(h||Od)(s[g]),p.push(D);return p}function Nd(s,l){return s=ne(s),s.alt!==void 0?[w(s.lng,l),w(s.lat,l),w(s.alt,l)]:[w(s.lng,l),w(s.lat,l)]}function sc(s,l,h,p){for(var g=[],E=0,D=s.length;E<D;E++)g.push(l?sc(s[E],c(s[E])?0:l-1,h,p):Nd(s[E],p));return!l&&h&&g.length>0&&g.push(g[0].slice()),g}function Oo(s,l){return s.feature?r({},s.feature,{geometry:l}):oc(l)}function oc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Md={toGeoJSON:function(s){return Oo(this,{type:"Point",coordinates:Nd(this.getLatLng(),s)})}};tc.include(Md),bd.include(Md),nc.include(Md),Zi.include({toGeoJSON:function(s){var l=!c(this._latlngs),h=sc(this._latlngs,l?1:0,!1,s);return Oo(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),bo.include({toGeoJSON:function(s){var l=!c(this._latlngs),h=l&&!c(this._latlngs[0]),p=sc(this._latlngs,h?2:l?1:0,!0,s);return l||(p=[p]),Oo(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),vt.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(s).geometry.coordinates)}),Oo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var h=l==="GeometryCollection",p=[];return this.eachLayer(function(g){if(g.toGeoJSON){var E=g.toGeoJSON(s);if(h)p.push(E.geometry);else{var D=oc(E);D.type==="FeatureCollection"?p.push.apply(p,D.features):p.push(D)}}}),h?Oo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Xg(s,l){return new Ki(s,l)}var pI=Xg,ac=et.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,h){this._url=s,this._bounds=Ne(l),N(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){it(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&ji(this._image),this},bringToBack:function(){return this._map&&vr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Ne(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ve("img");if(Pe(l,"leaflet-image-layer"),this._zoomAnimated&&Pe(l,"leaflet-zoom-animated"),this.options.className&&Pe(l,this.options.className),l.onselectstart=v,l.onmousemove=v,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;vi(this._image,h,l)},_reset:function(){var s=this._image,l=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();Ee(s,l.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){It(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),mI=function(s,l,h){return new ac(s,l,h)},Jg=ac.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ve("video");if(Pe(l,"leaflet-image-layer"),this._zoomAnimated&&Pe(l,"leaflet-zoom-animated"),this.options.className&&Pe(l,this.options.className),l.onselectstart=v,l.onmousemove=v,l.onloadeddata=a(this.fire,this,"load"),s){for(var h=l.getElementsByTagName("source"),p=[],g=0;g<h.length;g++)p.push(h[g].src);this._url=h.length>0?p:[l.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var D=Ve("source");D.src=this._url[E],l.appendChild(D)}}});function gI(s,l,h){return new Jg(s,l,h)}var Yg=ac.extend({_initImage:function(){var s=this._image=this._url;Pe(s,"leaflet-image-layer"),this._zoomAnimated&&Pe(s,"leaflet-zoom-animated"),this.options.className&&Pe(s,this.options.className),s.onselectstart=v,s.onmousemove=v}});function _I(s,l,h){return new Yg(s,l,h)}var Ei=et.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof U||b(s))?(this._latlng=ne(s),N(this,l)):(N(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&It(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&It(this._container,1),this.bringToFront(),this.options.interactive&&(Pe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(It(this._container,0),this._removeTimeout=setTimeout(a(it,void 0,this._container),200)):it(this._container),this.options.interactive&&(ct(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ne(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ji(this._container),this},bringToBack:function(){return this._map&&vr(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof kt){l=null;var h=this._source._layers;for(var p in h)if(h[p]._map){l=h[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=te(this.options.offset),h=this._getAnchor();this._zoomAnimated?Ee(this._container,s.add(h)):l=l.add(s).add(h);var p=this._containerBottom=-l.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});be.include({_initOverlay:function(s,l,h,p){var g=l;return g instanceof s||(g=new s(p).setContent(l)),h&&g.setLatLng(h),g}}),et.include({_initOverlay:function(s,l,h,p){var g=h;return g instanceof s?(N(g,p),g._source=this):(g=l&&!p?l:new s(p,this),g.setContent(h)),g}});var lc=Ei.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Ei.prototype.openOn.call(this,s)},onAdd:function(s){Ei.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ir||this._source.on("preclick",Hn))},onRemove:function(s){Ei.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ir||this._source.off("preclick",Hn))},getEvents:function(){var s=Ei.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ve("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Ve("div",s+"-content-wrapper",l);if(this._contentNode=Ve("div",s+"-content",h),Er(l),wr(this._contentNode),_e(l,"contextmenu",Hn),this._tipContainer=Ve("div",s+"-tip-container",l),this._tip=Ve("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ve("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',_e(p,"click",function(g){_t(g),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,g=this.options.maxHeight,E="leaflet-popup-scrolled";g&&p>g?(l.height=g+"px",Pe(s,E)):ct(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();Ee(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(_r(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,p=this._containerWidth,g=new G(this._containerLeft,-h-this._containerBottom);g._add(Fn(this._container));var E=s.layerPointToContainerPoint(g),D=te(this.options.autoPanPadding),B=te(this.options.autoPanPaddingTopLeft||D),W=te(this.options.autoPanPaddingBottomRight||D),$=s.getSize(),se=0,ve=0;E.x+p+W.x>$.x&&(se=E.x+p-$.x+W.x),E.x-se-B.x<0&&(se=E.x-B.x),E.y+h+W.y>$.y&&(ve=E.y+h-$.y+W.y),E.y-ve-B.y<0&&(ve=E.y-B.y),(se||ve)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([se,ve]))}},_getAnchor:function(){return te(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),vI=function(s,l){return new lc(s,l)};be.mergeOptions({closePopupOnClick:!0}),be.include({openPopup:function(s,l,h){return this._initOverlay(lc,s,l,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),et.include({bindPopup:function(s,l){return this._popup=this._initOverlay(lc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof kt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Pn(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Ir)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var uc=Ei.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Ei.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Ei.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Ei.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ve("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,h,p=this._map,g=this._container,E=p.latLngToContainerPoint(p.getCenter()),D=p.layerPointToContainerPoint(s),B=this.options.direction,W=g.offsetWidth,$=g.offsetHeight,se=te(this.options.offset),ve=this._getAnchor();B==="top"?(l=W/2,h=$):B==="bottom"?(l=W/2,h=0):B==="center"?(l=W/2,h=$/2):B==="right"?(l=0,h=$/2):B==="left"?(l=W,h=$/2):D.x<E.x?(B="right",l=0,h=$/2):(B="left",l=W+(se.x+ve.x)*2,h=$/2),s=s.subtract(te(l,h,!0)).add(se).add(ve),ct(g,"leaflet-tooltip-right"),ct(g,"leaflet-tooltip-left"),ct(g,"leaflet-tooltip-top"),ct(g,"leaflet-tooltip-bottom"),Pe(g,"leaflet-tooltip-"+B),Ee(g,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&It(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return te(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),yI=function(s,l){return new uc(s,l)};be.include({openTooltip:function(s,l,h){return this._initOverlay(uc,s,l,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),et.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(uc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof kt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(_e(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),_e(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var e_=wi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Ts(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=te(h.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function wI(s){return new e_(s)}wi.Default=al;var ll=et.extend({options:{tileSize:256,opacity:1,updateWhenIdle:he.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){N(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),it(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ji(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof G?s:new G(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,h=-s(-1/0,1/0),p=0,g=l.length,E;p<g;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(h=s(h,+E));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!he.ielt9){It(this._container,this.options.opacity);var s=+new Date,l=!1,h=!1;for(var p in this._tiles){var g=this._tiles[p];if(!(!g.current||!g.loaded)){var E=Math.min(1,(s-g.loaded)/200);It(g.el,E),E<1?l=!0:(g.active?h=!0:this._onOpaqueTile(g),g.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(z(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Ve("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=l-Math.abs(s-h),this._onUpdateLevel(h)):(it(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],g=this._map;return p||(p=this._levels[s]={},p.el=Ve("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=g.project(g.unproject(g.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,g.getCenter(),g.getZoom()),v(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var s,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)it(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,h,p){var g=Math.floor(s/2),E=Math.floor(l/2),D=h-1,B=new G(+g,+E);B.z=+D;var W=this._tileCoordsToKey(B),$=this._tiles[W];return $&&$.active?($.retain=!0,!0):($&&$.loaded&&($.retain=!0),D>p?this._retainParent(g,E,D,p):!1)},_retainChildren:function(s,l,h,p){for(var g=2*s;g<2*s+2;g++)for(var E=2*l;E<2*l+2;E++){var D=new G(g,E);D.z=h+1;var B=this._tileCoordsToKey(D),W=this._tiles[B];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);h+1<p&&this._retainChildren(g,E,h+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,h,p){var g=Math.round(l);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var E=this.options.updateWhenZooming&&g!==this._tileZoom;(!p||E)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,l)},_setZoomTransform:function(s,l,h){var p=this._map.getZoomScale(h,s.zoom),g=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,h)).round();he.any3d?vi(s.el,g,p):Ee(s.el,g)},_resetGrid:function(){var s=this._map,l=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(h,this._tileZoom),g=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new fe(g.subtract(E),g.add(E))},_update:function(s){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),g=this._pxBoundsToTileRange(p),E=g.getCenter(),D=[],B=this.options.keepBuffer,W=new fe(g.getBottomLeft().subtract([B,-B]),g.getTopRight().add([B,-B]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var $ in this._tiles){var se=this._tiles[$].coords;(se.z!==this._tileZoom||!W.contains(new G(se.x,se.y)))&&(this._tiles[$].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var ve=g.min.y;ve<=g.max.y;ve++)for(var xe=g.min.x;xe<=g.max.x;xe++){var un=new G(xe,ve);if(un.z=this._tileZoom,!!this._isValidTile(un)){var Bt=this._tiles[this._tileCoordsToKey(un)];Bt?Bt.current=!0:D.push(un)}}if(D.sort(function(_n,Mo){return _n.distanceTo(E)-Mo.distanceTo(E)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var qn=document.createDocumentFragment();for(xe=0;xe<D.length;xe++)this._addTile(D[xe],qn);this._level.el.appendChild(qn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!l.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Ne(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,h=this.getTileSize(),p=s.scaleBy(h),g=p.add(h),E=l.unproject(p,s.z),D=l.unproject(g,s.z);return[E,D]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),h=new Ae(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),h=new G(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(s){var l=this._tiles[s];l&&(it(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Pe(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=v,s.onmousemove=v,he.ielt9&&this.options.opacity<1&&It(s,this.options.opacity)},_addTile:function(s,l){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),g=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(g),this.createTile.length<2&&V(a(this._tileReady,this,s,null,g)),Ee(g,h),this._tiles[p]={el:g,coords:s,current:!0},l.appendChild(g),this.fire("tileloadstart",{tile:g,coords:s})},_tileReady:function(s,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(It(h.el,0),z(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(Pe(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),he.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new G(this._wrapX?_(s.x,this._wrapX):s.x,this._wrapY?_(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new fe(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function EI(s){return new ll(s)}var No=ll.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=N(this,l),l.detectRetina&&he.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var h=document.createElement("img");return _e(h,"load",a(this._tileOnLoad,this,l,h)),_e(h,"error",a(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var l={r:he.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=h),l["-y"]=h}return k(this._url,r(l,this.options))},_tileOnLoad:function(s,l){he.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,h){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(h,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=v,l.onerror=v,!l.complete)){l.src=K;var h=this._tiles[s].coords;it(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",K),ll.prototype._removeTile.call(this,s)},_tileReady:function(s,l,h){if(!(!this._map||h&&h.getAttribute("src")===K))return ll.prototype._tileReady.call(this,s,l,h)}});function t_(s,l){return new No(s,l)}var n_=No.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var h=r({},this.defaultWmsParams);for(var p in l)p in this.options||(h[p]=l[p]);l=N(this,l);var g=l.detectRetina&&he.retina?2:1,E=this.getTileSize();h.width=E.x*g,h.height=E.y*g,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,No.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),h=this._crs,p=we(h.project(l[0]),h.project(l[1])),g=p.min,E=p.max,D=(this._wmsVersion>=1.3&&this._crs===Lt?[g.y,g.x,E.y,E.x]:[g.x,g.y,E.x,E.y]).join(","),B=No.prototype.getTileUrl.call(this,s);return B+j(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function TI(s,l){return new n_(s,l)}No.WMS=n_,t_.wms=TI;var $i=et.extend({options:{padding:.1},initialize:function(s){N(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var h=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,l),E=p.multiplyBy(-h).add(g).subtract(this._map._getNewPixelOrigin(s,l));he.any3d?vi(this._container,E,h):Ee(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new fe(h,h.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),i_=$i.extend({options:{tolerance:0},getEvents:function(){var s=$i.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$i.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");_e(s,"mousemove",this._onMouseMove,this),_e(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_e(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,it(this._container),Ye(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$i.prototype._update.call(this);var s=this._bounds,l=this._container,h=s.getSize(),p=he.retina?2:1;Ee(l,s.min),l.width=p*h.x,l.height=p*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",he.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){$i.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,h=l.next,p=l.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),h=[],p,g;for(g=0;g<l.length;g++){if(p=Number(l[g]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var h,p,g,E,D=s._parts,B=D.length,W=this._ctx;if(B){for(W.beginPath(),h=0;h<B;h++){for(p=0,g=D[h].length;p<g;p++)E=D[h][p],W[p?"lineTo":"moveTo"](E.x,E.y);l&&W.closePath()}this._fillStroke(W,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),g=(Math.max(Math.round(s._radiusY),1)||p)/p;g!==1&&(h.save(),h.scale(1,g)),h.beginPath(),h.arc(l.x,l.y/g,p,0,Math.PI*2,!1),g!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,l){var h=l.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),h,p,g=this._drawFirst;g;g=g.next)h=g.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(ct(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var h,p,g=this._drawFirst;g;g=g.next)h=g.layer,h.options.interactive&&h._containsPoint(l)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Pe(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,h){this._map._fireDOMEvent(l,h||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function r_(s){return he.canvas?new i_(s):null}var ul=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),SI={_initContainer:function(){this._container=Ve("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($i.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=ul("shape");Pe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=ul("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;it(l),s.removeInteractiveTarget(l),delete this._layers[d(s)]},_updateStyle:function(s){var l=s._stroke,h=s._fill,p=s.options,g=s._container;g.stroked=!!p.stroke,g.filled=!!p.fill,p.stroke?(l||(l=s._stroke=ul("stroke")),g.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=b(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(g.removeChild(l),s._stroke=null),p.fill?(h||(h=s._fill=ul("fill")),g.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(g.removeChild(h),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){ji(s._container)},_bringToBack:function(s){vr(s._container)}},cc=he.vml?ul:ot,cl=$i.extend({_initContainer:function(){this._container=cc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=cc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){it(this._container),Ye(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$i.prototype._update.call(this);var s=this._bounds,l=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),Ee(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=cc("path");s.options.className&&Pe(l,s.options.className),s.options.interactive&&Pe(l,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){it(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,h=s.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,ke(s._parts,l))},_updateCircle:function(s){var l=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,g="a"+h+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-h)+","+l.y+g+h*2+",0 "+g+-h*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){ji(s._path)},_bringToBack:function(s){vr(s._path)}});he.vml&&cl.include(SI);function s_(s){return he.svg||he.vml?new cl(s):null}be.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&r_(s)||s_(s)}});var o_=bo.extend({initialize:function(s,l){bo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Ne(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function II(s,l){return new o_(s,l)}cl.create=cc,cl.pointsToPath=ke,Ki.geometryToLayer=ic,Ki.coordsToLatLng=Od,Ki.coordsToLatLngs=rc,Ki.latLngToCoords=Nd,Ki.latLngsToCoords=sc,Ki.getFeature=Oo,Ki.asFeature=oc,be.mergeOptions({boxZoom:!0});var a_=An.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){_e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ye(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){it(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),si(),Za(),this._startPoint=this._map.mouseEventToContainerPoint(s),_e(document,{contextmenu:Pn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ve("div","leaflet-zoom-box",this._container),Pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new fe(this._point,this._startPoint),h=l.getSize();Ee(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(it(this._box),ct(this._container,"leaflet-crosshair")),oi(),Ka(),Ye(document,{contextmenu:Pn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});be.addInitHook("addHandler","boxZoom",a_),be.mergeOptions({doubleClickZoom:!0});var l_=An.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,h=l.getZoom(),p=l.options.zoomDelta,g=s.originalEvent.shiftKey?h-p:h+p;l.options.doubleClickZoom==="center"?l.setZoom(g):l.setZoomAround(s.containerPoint,g)}});be.addInitHook("addHandler","doubleClickZoom",l_),be.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var u_=An.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new ai(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ct(this._map._container,"leaflet-grab"),ct(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ne(this._map.options.maxBounds);this._offsetLimit=we(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,g=(p-l+h)%s+l-h,E=(p+l+h)%s-l-h,D=Math.abs(g+h)<Math.abs(E+h)?g:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(s){var l=this._map,h=l.options,p=!h.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,D=h.easeLinearity,B=g.multiplyBy(D/E),W=B.distanceTo([0,0]),$=Math.min(h.inertiaMaxSpeed,W),se=B.multiplyBy($/W),ve=$/(h.inertiaDeceleration*D),xe=se.multiplyBy(-ve/2).round();!xe.x&&!xe.y?l.fire("moveend"):(xe=l._limitOffset(xe,l.options.maxBounds),V(function(){l.panBy(xe,{duration:ve,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});be.addInitHook("addHandler","dragging",u_),be.mergeOptions({keyboard:!0,keyboardPanDelta:80});var c_=An.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),_e(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ye(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,h=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},h=this.keyCodes,p,g;for(p=0,g=h.left.length;p<g;p++)l[h.left[p]]=[-1*s,0];for(p=0,g=h.right.length;p<g;p++)l[h.right[p]]=[s,0];for(p=0,g=h.down.length;p<g;p++)l[h.down[p]]=[0,s];for(p=0,g=h.up.length;p<g;p++)l[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},h=this.keyCodes,p,g;for(p=0,g=h.zoomIn.length;p<g;p++)l[h.zoomIn[p]]=s;for(p=0,g=h.zoomOut.length;p<g;p++)l[h.zoomOut[p]]=-s},_addHooks:function(){_e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ye(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,h=this._map,p;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=te(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(te(p),h.options.maxBounds)),h.options.worldCopyJump){var g=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(g)}else h.panBy(p)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Pn(s)}}});be.addInitHook("addHandler","keyboard",c_),be.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var h_=An.extend({addHooks:function(){_e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ye(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Ku(s),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),Pn(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=h?Math.ceil(g/h)*h:g,D=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,D&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+D):s.setZoomAround(this._lastMousePos,l+D))}});be.addInitHook("addHandler","scrollWheelZoom",h_);var CI=600;be.mergeOptions({tapHold:he.touchNative&&he.safari&&he.mobile,tapTolerance:15});var d_=An.extend({addHooks:function(){_e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ye(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new G(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(_e(document,"touchend",_t),_e(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),CI),_e(document,"touchend touchcancel contextmenu",this._cancel,this),_e(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ye(document,"touchend",_t),Ye(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ye(document,"touchend touchcancel contextmenu",this._cancel,this),Ye(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new G(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});be.addInitHook("addHandler","tapHold",d_),be.mergeOptions({touchZoom:he.touch,bounceAtZoomLimits:!0});var f_=An.extend({addHooks:function(){Pe(this._map._container,"leaflet-touch-zoom"),_e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ct(this._map._container,"leaflet-touch-zoom"),Ye(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),_e(document,"touchmove",this._onTouchMove,this),_e(document,"touchend touchcancel",this._onTouchEnd,this),_t(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),g=h.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(g,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&g<1||this._zoom>l.getMaxZoom()&&g>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var E=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(g===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var D=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(D,this,!0),_t(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Ye(document,"touchmove",this._onTouchMove,this),Ye(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});be.addInitHook("addHandler","touchZoom",f_),be.BoxZoom=a_,be.DoubleClickZoom=l_,be.Drag=u_,be.Keyboard=c_,be.ScrollWheelZoom=h_,be.TapHold=d_,be.TouchZoom=f_,n.Bounds=fe,n.Browser=he,n.CRS=ue,n.Canvas=i_,n.Circle=bd,n.CircleMarker=nc,n.Class=Ke,n.Control=gn,n.DivIcon=e_,n.DivOverlay=Ei,n.DomEvent=$u,n.DomUtil=Gu,n.Draggable=ai,n.Evented=Mt,n.FeatureGroup=kt,n.GeoJSON=Ki,n.GridLayer=ll,n.Handler=An,n.Icon=wi,n.ImageOverlay=ac,n.LatLng=U,n.LatLngBounds=Ae,n.Layer=et,n.LayerGroup=vt,n.LineUtil=S,n.Map=be,n.Marker=tc,n.Mixin=Ss,n.Path=Ir,n.Point=G,n.PolyUtil=xo,n.Polygon=bo,n.Polyline=Zi,n.Popup=lc,n.PosAnimation=tl,n.Projection=ie,n.Rectangle=o_,n.Renderer=$i,n.SVG=cl,n.SVGOverlay=Yg,n.TileLayer=No,n.Tooltip=uc,n.Transformation=qe,n.Util=M,n.VideoOverlay=Jg,n.bind=a,n.bounds=we,n.canvas=r_,n.circle=hI,n.circleMarker=cI,n.control=ln,n.divIcon=wI,n.extend=r,n.featureGroup=Lo,n.geoJSON=Xg,n.geoJson=pI,n.gridLayer=EI,n.icon=lI,n.imageOverlay=mI,n.latLng=ne,n.latLngBounds=Ne,n.layerGroup=Sr,n.map=So,n.marker=uI,n.point=te,n.polygon=fI,n.polyline=dI,n.popup=vI,n.rectangle=II,n.setOptions=N,n.stamp=d,n.svg=s_,n.svgOverlay=_I,n.tileLayer=t_,n.tooltip=yI,n.transformation=Le,n.version=i,n.videoOverlay=gI;var kI=window.L;n.noConflict=function(){return window.L=kI,this},window.L=n})})(_p,_p.exports);var Yn=_p.exports;const xs=Qy(Yn);function gE(t){return t.split(" ").filter(Boolean)}function _E(t,e){gE(e).forEach(n=>{Yn.DomUtil.addClass(t,n)})}function vE(t,e){gE(e).forEach(n=>{Yn.DomUtil.removeClass(t,n)})}function oP(t,e,n){t!=null&&n!==e&&(e!=null&&e.length>0&&vE(t,e),n!=null&&n.length>0&&_E(t,n))}function as(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Ra(t,e){return e==null?function(i,r){const o=Z.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=Z.useRef();o.current||(o.current=t(i,r));const a=Z.useRef(i),{instance:u}=o.current;return Z.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function Wm(t,e){Z.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function qm(t){return function(n){const i=xa(),r=t(Cu(n,i),i);return Um(i.map,n.attribution),cd(r.current,n.eventHandlers),Wm(r.current,i),r}}function yE(t,e){const n=Z.useRef();Z.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function wE(t){return function(n){const i=xa(),r=t(Cu(n,i),i);return cd(r.current,n.eventHandlers),Wm(r.current,i),yE(r.current,n),r}}function aP(t){function e(r,o){return as(t(r),o)}const n=Ra(e),i=pE(n);return Hm(i)}function EE(t,e){const n=Ra(t,e),i=qm(n);return jm(i)}function Gm(t,e){const n=Ra(t),i=mE(n,e);return fE(i)}function Zm(t,e){const n=Ra(t,e),i=wE(n);return jm(i)}function TE(t,e){const n=Ra(t,e),i=qm(n);return Hm(i)}function SE(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function lP(t,e,n){e.bounds instanceof Yn.LatLngBounds&&e.bounds!==n.bounds&&t.setBounds(e.bounds),e.opacity!=null&&e.opacity!==n.opacity&&t.setOpacity(e.opacity),e.zIndex!=null&&e.zIndex!==n.zIndex&&t.setZIndex(e.zIndex)}const uP=Object.freeze(Object.defineProperty({__proto__:null,CONTEXT_VERSION:hE,LeafletContext:Fm,LeafletProvider:Bm,addClassName:_E,createContainerComponent:jm,createControlComponent:aP,createControlHook:pE,createDivOverlayComponent:fE,createDivOverlayHook:mE,createElementHook:Ra,createElementObject:as,createLayerComponent:EE,createLayerHook:qm,createLeafComponent:Hm,createLeafletContext:dE,createOverlayComponent:Gm,createPathComponent:Zm,createPathHook:wE,createTileLayerComponent:TE,extendContext:ud,removeClassName:vE,updateCircle:cE,updateClassName:oP,updateGridLayer:SE,updateMediaOverlay:lP,useAttribution:Um,useEventHandlers:cd,useLayerLifecycle:Wm,useLeafletContext:xa,usePathOptions:yE,withPane:Cu},Symbol.toStringTag,{value:"Module"}));function Km(){return xa().map}function IE(t){const e=Km();return Z.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const cP=Zm(function({center:e,children:n,...i},r){const o=new Yn.CircleMarker(e,i);return as(o,ud(r,{overlayContainer:o}))},cE);function vp(){return vp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vp.apply(this,arguments)}function hP({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:d,zoom:f,..._},v){const[w]=Z.useState({className:r,id:o,style:u}),[T,A]=Z.useState(null);Z.useImperativeHandle(v,()=>(T==null?void 0:T.map)??null,[T]);const N=Z.useCallback(P=>{if(P!==null&&T===null){const k=new Yn.Map(P,_);n!=null&&f!=null?k.setView(n,f):t!=null&&k.fitBounds(t,e),d!=null&&k.whenReady(d),A(dE(k))}},[]);Z.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const j=T?ir.createElement(Bm,{value:T},i):a??null;return ir.createElement("div",vp({},w,{ref:N}),j)}const dP=Z.forwardRef(hP),Cs=EE(function({position:e,...n},i){const r=new Yn.Marker(e,n);return as(r,ud(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),fP=Zm(function({positions:e,...n},i){const r=new Yn.Polyline(e,n);return as(r,ud(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),ks=Gm(function(e,n){const i=new Yn.Popup(e,n.overlayContainer);return as(i,n)},function(e,n,{position:i},r){Z.useEffect(function(){const{instance:a}=e;function u(f){f.popup===a&&(a.update(),r(!0))}function d(f){f.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:d}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var _;n.map.off({popupopen:u,popupclose:d}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),pP=TE(function({url:e,...n},i){const r=new Yn.TileLayer(e,Cu(n,i));return as(r,i)},function(e,n,i){SE(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),mP=Gm(function(e,n){const i=new Yn.Tooltip(e,n.overlayContainer);return as(i,n)},function(e,n,{position:i},r){Z.useEffect(function(){const a=n.overlayContainer;if(a==null)return;const{instance:u}=e,d=_=>{_.tooltip===u&&(i!=null&&u.setLatLng(i),u.update(),r(!0))},f=_=>{_.tooltip===u&&r(!1)};return a.on({tooltipopen:d,tooltipclose:f}),a.bindTooltip(u),function(){a.off({tooltipopen:d,tooltipclose:f}),a._map!=null&&a.unbindTooltip()}},[e,n,r,i])});var CE={};const gP=Gh(uP);var kv={exports:{}};(function(t,e){(function(n,i){i(e)})(Xr,function(n){var i=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(o){L.Util.setOptions(this,o),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var a=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,a?this._withAnimation:this._noAnimation),this._markerCluster=a?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(o){if(o instanceof L.LayerGroup)return this.addLayers([o]);if(!o.getLatLng)return this._nonPointGroup.addLayer(o),this.fire("layeradd",{layer:o}),this;if(!this._map)return this._needsClustering.push(o),this.fire("layeradd",{layer:o}),this;if(this.hasLayer(o))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(o,this._maxZoom),this.fire("layeradd",{layer:o}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var a=o,u=this._zoom;if(o.__parent)for(;a.__parent._zoom>=u;)a=a.__parent;return this._currentShownBounds.contains(a.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(o,a):this._animationAddLayerNonAnimated(o,a)),this},removeLayer:function(o){return o instanceof L.LayerGroup?this.removeLayers([o]):o.getLatLng?this._map?o.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(o)),this._removeLayer(o,!0),this.fire("layerremove",{layer:o}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),o.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(o)&&(this._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,o)&&this.hasLayer(o)&&this._needsRemoving.push({layer:o,latlng:o._latlng}),this.fire("layerremove",{layer:o}),this):(this._nonPointGroup.removeLayer(o),this.fire("layerremove",{layer:o}),this)},addLayers:function(o,a){if(!L.Util.isArray(o))return this.addLayer(o);var u=this._featureGroup,d=this._nonPointGroup,f=this.options.chunkedLoading,_=this.options.chunkInterval,v=this.options.chunkProgress,w=o.length,T=0,A=!0,N;if(this._map){var j=new Date().getTime(),P=L.bind(function(){var b=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();T<w;T++){if(f&&T%200===0){var H=new Date().getTime()-b;if(H>_)break}if(N=o[T],N instanceof L.LayerGroup){A&&(o=o.slice(),A=!1),this._extractNonGroupLayers(N,o),w=o.length;continue}if(!N.getLatLng){d.addLayer(N),a||this.fire("layeradd",{layer:N});continue}if(!this.hasLayer(N)&&(this._addLayer(N,this._maxZoom),a||this.fire("layeradd",{layer:N}),N.__parent&&N.__parent.getChildCount()===2)){var K=N.__parent.getAllChildMarkers(),X=K[0]===N?K[1]:K[0];u.removeLayer(X)}}v&&v(T,w,new Date().getTime()-j),T===w?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(P,this.options.chunkDelay)},this);P()}else for(var k=this._needsClustering;T<w;T++){if(N=o[T],N instanceof L.LayerGroup){A&&(o=o.slice(),A=!1),this._extractNonGroupLayers(N,o),w=o.length;continue}if(!N.getLatLng){d.addLayer(N);continue}this.hasLayer(N)||k.push(N)}return this},removeLayers:function(o){var a,u,d=o.length,f=this._featureGroup,_=this._nonPointGroup,v=!0;if(!this._map){for(a=0;a<d;a++){if(u=o[a],u instanceof L.LayerGroup){v&&(o=o.slice(),v=!1),this._extractNonGroupLayers(u,o),d=o.length;continue}this._arraySplice(this._needsClustering,u),_.removeLayer(u),this.hasLayer(u)&&this._needsRemoving.push({layer:u,latlng:u._latlng}),this.fire("layerremove",{layer:u})}return this}if(this._unspiderfy){this._unspiderfy();var w=o.slice(),T=d;for(a=0;a<T;a++){if(u=w[a],u instanceof L.LayerGroup){this._extractNonGroupLayers(u,w),T=w.length;continue}this._unspiderfyLayer(u)}}for(a=0;a<d;a++){if(u=o[a],u instanceof L.LayerGroup){v&&(o=o.slice(),v=!1),this._extractNonGroupLayers(u,o),d=o.length;continue}if(!u.__parent){_.removeLayer(u),this.fire("layerremove",{layer:u});continue}this._removeLayer(u,!0,!0),this.fire("layerremove",{layer:u}),f.hasLayer(u)&&(f.removeLayer(u),u.clusterShow&&u.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(o){o.off(this._childMarkerEventHandlers,this),delete o.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var o=new L.LatLngBounds;this._topClusterLevel&&o.extend(this._topClusterLevel._bounds);for(var a=this._needsClustering.length-1;a>=0;a--)o.extend(this._needsClustering[a].getLatLng());return o.extend(this._nonPointGroup.getBounds()),o},eachLayer:function(o,a){var u=this._needsClustering.slice(),d=this._needsRemoving,f,_,v;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(u),_=u.length-1;_>=0;_--){for(f=!0,v=d.length-1;v>=0;v--)if(d[v].layer===u[_]){f=!1;break}f&&o.call(a,u[_])}this._nonPointGroup.eachLayer(o,a)},getLayers:function(){var o=[];return this.eachLayer(function(a){o.push(a)}),o},getLayer:function(o){var a=null;return o=parseInt(o,10),this.eachLayer(function(u){L.stamp(u)===o&&(a=u)}),a},hasLayer:function(o){if(!o)return!1;var a,u=this._needsClustering;for(a=u.length-1;a>=0;a--)if(u[a]===o)return!0;for(u=this._needsRemoving,a=u.length-1;a>=0;a--)if(u[a].layer===o)return!1;return!!(o.__parent&&o.__parent._group===this)||this._nonPointGroup.hasLayer(o)},zoomToShowLayer:function(o,a){var u=this._map;typeof a!="function"&&(a=function(){});var d=function(){(u.hasLayer(o)||u.hasLayer(o.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",d,this),this.off("animationend",d,this),u.hasLayer(o)?a():o.__parent._icon&&(this.once("spiderfied",a,this),o.__parent.spiderfy()))};o._icon&&this._map.getBounds().contains(o.getLatLng())?a():o.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",d,this),this._map.panTo(o.getLatLng())):(this._map.on("moveend",d,this),this.on("animationend",d,this),o.__parent.zoomToBounds())},onAdd:function(o){this._map=o;var a,u,d;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(o),this._nonPointGroup.addTo(o),this._gridClusters||this._generateInitialClusters(),this._maxLat=o.options.crs.projection.MAX_LATITUDE,a=0,u=this._needsRemoving.length;a<u;a++)d=this._needsRemoving[a],d.newlatlng=d.layer._latlng,d.layer._latlng=d.latlng;for(a=0,u=this._needsRemoving.length;a<u;a++)d=this._needsRemoving[a],this._removeLayer(d.layer,!0),d.layer._latlng=d.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),u=this._needsClustering,this._needsClustering=[],this.addLayers(u,!0)},onRemove:function(o){o.off("zoomend",this._zoomEnd,this),o.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(o){for(var a=o;a&&!a._icon;)a=a.__parent;return a||null},_arraySplice:function(o,a){for(var u=o.length-1;u>=0;u--)if(o[u]===a)return o.splice(u,1),!0},_removeFromGridUnclustered:function(o,a){for(var u=this._map,d=this._gridUnclustered,f=Math.floor(this._map.getMinZoom());a>=f&&d[a].removeObject(o,u.project(o.getLatLng(),a));a--);},_childMarkerDragStart:function(o){o.target.__dragStart=o.target._latlng},_childMarkerMoved:function(o){if(!this._ignoreMove&&!o.target.__dragStart){var a=o.target._popup&&o.target._popup.isOpen();this._moveChild(o.target,o.oldLatLng,o.latlng),a&&o.target.openPopup()}},_moveChild:function(o,a,u){o._latlng=a,this.removeLayer(o),o._latlng=u,this.addLayer(o)},_childMarkerDragEnd:function(o){var a=o.target.__dragStart;delete o.target.__dragStart,a&&this._moveChild(o.target,a,o.target._latlng)},_removeLayer:function(o,a,u){var d=this._gridClusters,f=this._gridUnclustered,_=this._featureGroup,v=this._map,w=Math.floor(this._map.getMinZoom());a&&this._removeFromGridUnclustered(o,this._maxZoom);var T=o.__parent,A=T._markers,N;for(this._arraySplice(A,o);T&&(T._childCount--,T._boundsNeedUpdate=!0,!(T._zoom<w));)a&&T._childCount<=1?(N=T._markers[0]===o?T._markers[1]:T._markers[0],d[T._zoom].removeObject(T,v.project(T._cLatLng,T._zoom)),f[T._zoom].addObject(N,v.project(N.getLatLng(),T._zoom)),this._arraySplice(T.__parent._childClusters,T),T.__parent._markers.push(N),N.__parent=T.__parent,T._icon&&(_.removeLayer(T),u||_.addLayer(N))):T._iconNeedsUpdate=!0,T=T.__parent;delete o.__parent},_isOrIsParent:function(o,a){for(;a;){if(o===a)return!0;a=a.parentNode}return!1},fire:function(o,a,u){if(a&&a.layer instanceof L.MarkerCluster){if(a.originalEvent&&this._isOrIsParent(a.layer._icon,a.originalEvent.relatedTarget))return;o="cluster"+o}L.FeatureGroup.prototype.fire.call(this,o,a,u)},listens:function(o,a){return L.FeatureGroup.prototype.listens.call(this,o,a)||L.FeatureGroup.prototype.listens.call(this,"cluster"+o,a)},_defaultIconCreateFunction:function(o){var a=o.getChildCount(),u=" marker-cluster-";return a<10?u+="small":a<100?u+="medium":u+="large",new L.DivIcon({html:"<div><span>"+a+"</span></div>",className:"marker-cluster"+u,iconSize:new L.Point(40,40)})},_bindEvents:function(){var o=this._map,a=this.options.spiderfyOnMaxZoom,u=this.options.showCoverageOnHover,d=this.options.zoomToBoundsOnClick,f=this.options.spiderfyOnEveryZoom;(a||d||f)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),u&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),o.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(o){var a=o.layer,u=a;if(!(o.type==="clusterkeypress"&&o.originalEvent&&o.originalEvent.keyCode!==13)){for(;u._childClusters.length===1;)u=u._childClusters[0];u._zoom===this._maxZoom&&u._childCount===a._childCount&&this.options.spiderfyOnMaxZoom?a.spiderfy():this.options.zoomToBoundsOnClick&&a.zoomToBounds(),this.options.spiderfyOnEveryZoom&&a.spiderfy(),o.originalEvent&&o.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(o){var a=this._map;this._inZoomAnimation||(this._shownPolygon&&a.removeLayer(this._shownPolygon),o.layer.getChildCount()>2&&o.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(o.layer.getConvexHull(),this.options.polygonOptions),a.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var o=this.options.spiderfyOnMaxZoom,a=this.options.showCoverageOnHover,u=this.options.zoomToBoundsOnClick,d=this.options.spiderfyOnEveryZoom,f=this._map;(o||u||d)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),a&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),f.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var o=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,o),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),o),this._currentShownBounds=o}},_generateInitialClusters:function(){var o=Math.ceil(this._map.getMaxZoom()),a=Math.floor(this._map.getMinZoom()),u=this.options.maxClusterRadius,d=u;typeof u!="function"&&(d=function(){return u}),this.options.disableClusteringAtZoom!==null&&(o=this.options.disableClusteringAtZoom-1),this._maxZoom=o,this._gridClusters={},this._gridUnclustered={};for(var f=o;f>=a;f--)this._gridClusters[f]=new L.DistanceGrid(d(f)),this._gridUnclustered[f]=new L.DistanceGrid(d(f));this._topClusterLevel=new this._markerCluster(this,a-1)},_addLayer:function(o,a){var u=this._gridClusters,d=this._gridUnclustered,f=Math.floor(this._map.getMinZoom()),_,v;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(o),o.on(this._childMarkerEventHandlers,this);a>=f;a--){_=this._map.project(o.getLatLng(),a);var w=u[a].getNearObject(_);if(w){w._addChild(o),o.__parent=w;return}if(w=d[a].getNearObject(_),w){var T=w.__parent;T&&this._removeLayer(w,!1);var A=new this._markerCluster(this,a,w,o);u[a].addObject(A,this._map.project(A._cLatLng,a)),w.__parent=A,o.__parent=A;var N=A;for(v=a-1;v>T._zoom;v--)N=new this._markerCluster(this,v,N),u[v].addObject(N,this._map.project(w.getLatLng(),v));T._addChild(N),this._removeFromGridUnclustered(w,a);return}d[a].addObject(o,_)}this._topClusterLevel._addChild(o),o.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(o){o instanceof L.MarkerCluster&&o._iconNeedsUpdate&&o._updateIcon()})},_enqueue:function(o){this._queue.push(o),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var o=0;o<this._queue.length;o++)this._queue[o].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var o=Math.round(this._map._zoom);this._processQueue(),this._zoom<o&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,o)):this._zoom>o?(this._animationStart(),this._animationZoomOut(this._zoom,o)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(o){var a=this._maxLat;return a!==void 0&&(o.getNorth()>=a&&(o._northEast.lat=1/0),o.getSouth()<=-a&&(o._southWest.lat=-1/0)),o},_animationAddLayerNonAnimated:function(o,a){if(a===o)this._featureGroup.addLayer(o);else if(a._childCount===2){a._addToMap();var u=a.getAllChildMarkers();this._featureGroup.removeLayer(u[0]),this._featureGroup.removeLayer(u[1])}else a._updateIcon()},_extractNonGroupLayers:function(o,a){var u=o.getLayers(),d=0,f;for(a=a||[];d<u.length;d++){if(f=u[d],f instanceof L.LayerGroup){this._extractNonGroupLayers(f,a);continue}a.push(f)}return a},_overrideMarkerIcon:function(o){var a=o.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[o]}});return a}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(o,a){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),o),this._topClusterLevel._recursivelyAddChildrenToMap(null,a,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(o,a){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),o),this._topClusterLevel._recursivelyAddChildrenToMap(null,a,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(o,a){this._animationAddLayerNonAnimated(o,a)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(o,a){var u=this._getExpandedVisibleBounds(),d=this._featureGroup,f=Math.floor(this._map.getMinZoom()),_;this._ignoreMove=!0,this._topClusterLevel._recursively(u,o,f,function(v){var w=v._latlng,T=v._markers,A;for(u.contains(w)||(w=null),v._isSingleParent()&&o+1===a?(d.removeLayer(v),v._recursivelyAddChildrenToMap(null,a,u)):(v.clusterHide(),v._recursivelyAddChildrenToMap(w,a,u)),_=T.length-1;_>=0;_--)A=T[_],u.contains(A._latlng)||d.removeLayer(A)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(u,a),d.eachLayer(function(v){!(v instanceof L.MarkerCluster)&&v._icon&&v.clusterShow()}),this._topClusterLevel._recursively(u,o,a,function(v){v._recursivelyRestoreChildPositions(a)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(u,o,f,function(v){d.removeLayer(v),v.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(o,a){this._animationZoomOutSingle(this._topClusterLevel,o-1,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,a,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),o,this._getExpandedVisibleBounds())},_animationAddLayer:function(o,a){var u=this,d=this._featureGroup;d.addLayer(o),a!==o&&(a._childCount>2?(a._updateIcon(),this._forceLayout(),this._animationStart(),o._setPos(this._map.latLngToLayerPoint(a.getLatLng())),o.clusterHide(),this._enqueue(function(){d.removeLayer(o),o.clusterShow(),u._animationEnd()})):(this._forceLayout(),u._animationStart(),u._animationZoomOutSingle(a,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(o,a,u){var d=this._getExpandedVisibleBounds(),f=Math.floor(this._map.getMinZoom());o._recursivelyAnimateChildrenInAndAddSelfToMap(d,f,a+1,u);var _=this;this._forceLayout(),o._recursivelyBecomeVisible(d,u),this._enqueue(function(){if(o._childCount===1){var v=o._markers[0];this._ignoreMove=!0,v.setLatLng(v.getLatLng()),this._ignoreMove=!1,v.clusterShow&&v.clusterShow()}else o._recursively(d,u,f,function(w){w._recursivelyRemoveChildrenFromMap(d,f,a+1)});_._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(o){return new L.MarkerClusterGroup(o)};var r=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(o,a,u,d){L.Marker.prototype.initialize.call(this,u?u._cLatLng||u.getLatLng():new L.LatLng(0,0),{icon:this,pane:o.options.clusterPane}),this._group=o,this._zoom=a,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,u&&this._addChild(u),d&&this._addChild(d)},getAllChildMarkers:function(o,a){o=o||[];for(var u=this._childClusters.length-1;u>=0;u--)this._childClusters[u].getAllChildMarkers(o,a);for(var d=this._markers.length-1;d>=0;d--)a&&this._markers[d].__dragStart||o.push(this._markers[d]);return o},getChildCount:function(){return this._childCount},zoomToBounds:function(o){for(var a=this._childClusters.slice(),u=this._group._map,d=u.getBoundsZoom(this._bounds),f=this._zoom+1,_=u.getZoom(),v;a.length>0&&d>f;){f++;var w=[];for(v=0;v<a.length;v++)w=w.concat(a[v]._childClusters);a=w}d>f?this._group._map.setView(this._latlng,f):d<=_?this._group._map.setView(this._latlng,_+1):this._group._map.fitBounds(this._bounds,o)},getBounds:function(){var o=new L.LatLngBounds;return o.extend(this._bounds),o},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(o,a){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(o),o instanceof L.MarkerCluster?(a||(this._childClusters.push(o),o.__parent=this),this._childCount+=o._childCount):(a||this._markers.push(o),this._childCount++),this.__parent&&this.__parent._addChild(o,!0)},_setClusterCenter:function(o){this._cLatLng||(this._cLatLng=o._cLatLng||o._latlng)},_resetBounds:function(){var o=this._bounds;o._southWest&&(o._southWest.lat=1/0,o._southWest.lng=1/0),o._northEast&&(o._northEast.lat=-1/0,o._northEast.lng=-1/0)},_recalculateBounds:function(){var o=this._markers,a=this._childClusters,u=0,d=0,f=this._childCount,_,v,w,T;if(f!==0){for(this._resetBounds(),_=0;_<o.length;_++)w=o[_]._latlng,this._bounds.extend(w),u+=w.lat,d+=w.lng;for(_=0;_<a.length;_++)v=a[_],v._boundsNeedUpdate&&v._recalculateBounds(),this._bounds.extend(v._bounds),w=v._wLatLng,T=v._childCount,u+=w.lat*T,d+=w.lng*T;this._latlng=this._wLatLng=new L.LatLng(u/f,d/f),this._boundsNeedUpdate=!1}},_addToMap:function(o){o&&(this._backupLatlng=this._latlng,this.setLatLng(o)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(o,a,u){this._recursively(o,this._group._map.getMinZoom(),u-1,function(d){var f=d._markers,_,v;for(_=f.length-1;_>=0;_--)v=f[_],v._icon&&(v._setPos(a),v.clusterHide())},function(d){var f=d._childClusters,_,v;for(_=f.length-1;_>=0;_--)v=f[_],v._icon&&(v._setPos(a),v.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(o,a,u,d){this._recursively(o,d,a,function(f){f._recursivelyAnimateChildrenIn(o,f._group._map.latLngToLayerPoint(f.getLatLng()).round(),u),f._isSingleParent()&&u-1===d?(f.clusterShow(),f._recursivelyRemoveChildrenFromMap(o,a,u)):f.clusterHide(),f._addToMap()})},_recursivelyBecomeVisible:function(o,a){this._recursively(o,this._group._map.getMinZoom(),a,null,function(u){u.clusterShow()})},_recursivelyAddChildrenToMap:function(o,a,u){this._recursively(u,this._group._map.getMinZoom()-1,a,function(d){if(a!==d._zoom)for(var f=d._markers.length-1;f>=0;f--){var _=d._markers[f];u.contains(_._latlng)&&(o&&(_._backupLatlng=_.getLatLng(),_.setLatLng(o),_.clusterHide&&_.clusterHide()),d._group._featureGroup.addLayer(_))}},function(d){d._addToMap(o)})},_recursivelyRestoreChildPositions:function(o){for(var a=this._markers.length-1;a>=0;a--){var u=this._markers[a];u._backupLatlng&&(u.setLatLng(u._backupLatlng),delete u._backupLatlng)}if(o-1===this._zoom)for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._restorePosition();else for(var f=this._childClusters.length-1;f>=0;f--)this._childClusters[f]._recursivelyRestoreChildPositions(o)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(o,a,u,d){var f,_;this._recursively(o,a-1,u-1,function(v){for(_=v._markers.length-1;_>=0;_--)f=v._markers[_],(!d||!d.contains(f._latlng))&&(v._group._featureGroup.removeLayer(f),f.clusterShow&&f.clusterShow())},function(v){for(_=v._childClusters.length-1;_>=0;_--)f=v._childClusters[_],(!d||!d.contains(f._latlng))&&(v._group._featureGroup.removeLayer(f),f.clusterShow&&f.clusterShow())})},_recursively:function(o,a,u,d,f){var _=this._childClusters,v=this._zoom,w,T;if(a<=v&&(d&&d(this),f&&v===u&&f(this)),v<a||v<u)for(w=_.length-1;w>=0;w--)T=_[w],T._boundsNeedUpdate&&T._recalculateBounds(),o.intersects(T._bounds)&&T._recursively(o,a,u,d,f)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var o=this.options.opacity;return this.setOpacity(0),this.options.opacity=o,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(o){this._cellSize=o,this._sqCellSize=o*o,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(o,a){var u=this._getCoord(a.x),d=this._getCoord(a.y),f=this._grid,_=f[d]=f[d]||{},v=_[u]=_[u]||[],w=L.Util.stamp(o);this._objectPoint[w]=a,v.push(o)},updateObject:function(o,a){this.removeObject(o),this.addObject(o,a)},removeObject:function(o,a){var u=this._getCoord(a.x),d=this._getCoord(a.y),f=this._grid,_=f[d]=f[d]||{},v=_[u]=_[u]||[],w,T;for(delete this._objectPoint[L.Util.stamp(o)],w=0,T=v.length;w<T;w++)if(v[w]===o)return v.splice(w,1),T===1&&delete _[u],!0},eachObject:function(o,a){var u,d,f,_,v,w,T,A=this._grid;for(u in A){v=A[u];for(d in v)for(w=v[d],f=0,_=w.length;f<_;f++)T=o.call(a,w[f]),T&&(f--,_--)}},getNearObject:function(o){var a=this._getCoord(o.x),u=this._getCoord(o.y),d,f,_,v,w,T,A,N,j=this._objectPoint,P=this._sqCellSize,k=null;for(d=u-1;d<=u+1;d++)if(v=this._grid[d],v){for(f=a-1;f<=a+1;f++)if(w=v[f],w)for(_=0,T=w.length;_<T;_++)A=w[_],N=this._sqDist(j[L.Util.stamp(A)],o),(N<P||N<=P&&k===null)&&(P=N,k=A)}return k},_getCoord:function(o){var a=Math.floor(o/this._cellSize);return isFinite(a)?a:o},_sqDist:function(o,a){var u=a.x-o.x,d=a.y-o.y;return u*u+d*d}},function(){L.QuickHull={getDistant:function(o,a){var u=a[1].lat-a[0].lat,d=a[0].lng-a[1].lng;return d*(o.lat-a[0].lat)+u*(o.lng-a[0].lng)},findMostDistantPointFromBaseLine:function(o,a){var u=0,d=null,f=[],_,v,w;for(_=a.length-1;_>=0;_--){if(v=a[_],w=this.getDistant(v,o),w>0)f.push(v);else continue;w>u&&(u=w,d=v)}return{maxPoint:d,newPoints:f}},buildConvexHull:function(o,a){var u=[],d=this.findMostDistantPointFromBaseLine(o,a);return d.maxPoint?(u=u.concat(this.buildConvexHull([o[0],d.maxPoint],d.newPoints)),u=u.concat(this.buildConvexHull([d.maxPoint,o[1]],d.newPoints)),u):[o[0]]},getConvexHull:function(o){var a=!1,u=!1,d=!1,f=!1,_=null,v=null,w=null,T=null,A=null,N=null,j;for(j=o.length-1;j>=0;j--){var P=o[j];(a===!1||P.lat>a)&&(_=P,a=P.lat),(u===!1||P.lat<u)&&(v=P,u=P.lat),(d===!1||P.lng>d)&&(w=P,d=P.lng),(f===!1||P.lng<f)&&(T=P,f=P.lng)}u!==a?(N=v,A=_):(N=T,A=w);var k=[].concat(this.buildConvexHull([N,A],o),this.buildConvexHull([A,N],o));return k}}}(),L.MarkerCluster.include({getConvexHull:function(){var o=this.getAllChildMarkers(),a=[],u,d;for(d=o.length-1;d>=0;d--)u=o[d].getLatLng(),a.push(u);return L.QuickHull.getConvexHull(a)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var o=this.getAllChildMarkers(null,!0),a=this._group,u=a._map,d=u.latLngToLayerPoint(this._latlng),f;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?f=this._group.options.spiderfyShapePositions(o.length,d):o.length>=this._circleSpiralSwitchover?f=this._generatePointsSpiral(o.length,d):(d.y+=10,f=this._generatePointsCircle(o.length,d)),this._animationSpiderfy(o,f)}},unspiderfy:function(o){this._group._inZoomAnimation||(this._animationUnspiderfy(o),this._group._spiderfied=null)},_generatePointsCircle:function(o,a){var u=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+o),d=u/this._2PI,f=this._2PI/o,_=[],v,w;for(d=Math.max(d,35),_.length=o,v=0;v<o;v++)w=this._circleStartAngle+v*f,_[v]=new L.Point(a.x+d*Math.cos(w),a.y+d*Math.sin(w))._round();return _},_generatePointsSpiral:function(o,a){var u=this._group.options.spiderfyDistanceMultiplier,d=u*this._spiralLengthStart,f=u*this._spiralFootSeparation,_=u*this._spiralLengthFactor*this._2PI,v=0,w=[],T;for(w.length=o,T=o;T>=0;T--)T<o&&(w[T]=new L.Point(a.x+d*Math.cos(v),a.y+d*Math.sin(v))._round()),v+=f/d+T*5e-4,d+=_/v;return w},_noanimationUnspiderfy:function(){var o=this._group,a=o._map,u=o._featureGroup,d=this.getAllChildMarkers(null,!0),f,_;for(o._ignoreMove=!0,this.setOpacity(1),_=d.length-1;_>=0;_--)f=d[_],u.removeLayer(f),f._preSpiderfyLatlng&&(f.setLatLng(f._preSpiderfyLatlng),delete f._preSpiderfyLatlng),f.setZIndexOffset&&f.setZIndexOffset(0),f._spiderLeg&&(a.removeLayer(f._spiderLeg),delete f._spiderLeg);o.fire("unspiderfied",{cluster:this,markers:d}),o._ignoreMove=!1,o._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(o,a){var u=this._group,d=u._map,f=u._featureGroup,_=this._group.options.spiderLegPolylineOptions,v,w,T,A;for(u._ignoreMove=!0,v=0;v<o.length;v++)A=d.layerPointToLatLng(a[v]),w=o[v],T=new L.Polyline([this._latlng,A],_),d.addLayer(T),w._spiderLeg=T,w._preSpiderfyLatlng=w._latlng,w.setLatLng(A),w.setZIndexOffset&&w.setZIndexOffset(1e6),f.addLayer(w);this.setOpacity(.3),u._ignoreMove=!1,u.fire("spiderfied",{cluster:this,markers:o})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(o,a){var u=this,d=this._group,f=d._map,_=d._featureGroup,v=this._latlng,w=f.latLngToLayerPoint(v),T=L.Path.SVG,A=L.extend({},this._group.options.spiderLegPolylineOptions),N=A.opacity,j,P,k,b,H,K;for(N===void 0&&(N=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),T?(A.opacity=0,A.className=(A.className||"")+" leaflet-cluster-spider-leg"):A.opacity=N,d._ignoreMove=!0,j=0;j<o.length;j++)P=o[j],K=f.layerPointToLatLng(a[j]),k=new L.Polyline([v,K],A),f.addLayer(k),P._spiderLeg=k,T&&(b=k._path,H=b.getTotalLength()+.1,b.style.strokeDasharray=H,b.style.strokeDashoffset=H),P.setZIndexOffset&&P.setZIndexOffset(1e6),P.clusterHide&&P.clusterHide(),_.addLayer(P),P._setPos&&P._setPos(w);for(d._forceLayout(),d._animationStart(),j=o.length-1;j>=0;j--)K=f.layerPointToLatLng(a[j]),P=o[j],P._preSpiderfyLatlng=P._latlng,P.setLatLng(K),P.clusterShow&&P.clusterShow(),T&&(k=P._spiderLeg,b=k._path,b.style.strokeDashoffset=0,k.setStyle({opacity:N}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:u,markers:o})},200)},_animationUnspiderfy:function(o){var a=this,u=this._group,d=u._map,f=u._featureGroup,_=o?d._latLngToNewLayerPoint(this._latlng,o.zoom,o.center):d.latLngToLayerPoint(this._latlng),v=this.getAllChildMarkers(null,!0),w=L.Path.SVG,T,A,N,j,P,k;for(u._ignoreMove=!0,u._animationStart(),this.setOpacity(1),A=v.length-1;A>=0;A--)T=v[A],T._preSpiderfyLatlng&&(T.closePopup(),T.setLatLng(T._preSpiderfyLatlng),delete T._preSpiderfyLatlng,k=!0,T._setPos&&(T._setPos(_),k=!1),T.clusterHide&&(T.clusterHide(),k=!1),k&&f.removeLayer(T),w&&(N=T._spiderLeg,j=N._path,P=j.getTotalLength()+.1,j.style.strokeDashoffset=P,N.setStyle({opacity:0})));u._ignoreMove=!1,setTimeout(function(){var b=0;for(A=v.length-1;A>=0;A--)T=v[A],T._spiderLeg&&b++;for(A=v.length-1;A>=0;A--)T=v[A],T._spiderLeg&&(T.clusterShow&&T.clusterShow(),T.setZIndexOffset&&T.setZIndexOffset(0),b>1&&f.removeLayer(T),d.removeLayer(T._spiderLeg),delete T._spiderLeg);u._animationEnd(),u.fire("unspiderfied",{cluster:a,markers:v})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(o){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(o))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(o){this._spiderfied&&this._spiderfied.unspiderfy(o)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(o){o._spiderLeg&&(this._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow(),o.setZIndexOffset&&o.setZIndexOffset(0),this._map.removeLayer(o._spiderLeg),delete o._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(o){return o?o instanceof L.MarkerClusterGroup?o=o._topClusterLevel.getAllChildMarkers():o instanceof L.LayerGroup?o=o._layers:o instanceof L.MarkerCluster?o=o.getAllChildMarkers():o instanceof L.Marker&&(o=[o]):o=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(o),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(o),this},_flagParentsIconsNeedUpdate:function(o){var a,u;for(a in o)for(u=o[a].__parent;u;)u._iconNeedsUpdate=!0,u=u.__parent},_refreshSingleMarkerModeMarkers:function(o){var a,u;for(a in o)u=o[a],this.hasLayer(u)&&u.setIcon(this._overrideMarkerIcon(u))}}),L.Marker.include({refreshIconOptions:function(o,a){var u=this.options.icon;return L.setOptions(u,o),this.setIcon(u),a&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),n.MarkerClusterGroup=i,n.MarkerCluster=r,Object.defineProperty(n,"__esModule",{value:!0})})})(kv,kv.exports);const _P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",vP=Object.freeze(Object.defineProperty({__proto__:null,default:_P},Symbol.toStringTag,{value:"Module"})),yP=Gh(vP),wP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",EP=Object.freeze(Object.defineProperty({__proto__:null,default:wP},Symbol.toStringTag,{value:"Module"})),TP=Gh(EP),SP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",IP=Object.freeze(Object.defineProperty({__proto__:null,default:SP},Symbol.toStringTag,{value:"Module"})),CP=Gh(IP);var ea=Xr&&Xr.__assign||function(){return ea=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ea.apply(this,arguments)},kP=Xr&&Xr.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n},PP=Xr&&Xr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(CE,"__esModule",{value:!0});var yp=gP,$m=PP(Yn);delete $m.default.Icon.Default.prototype._getIconUrl;$m.default.Icon.Default.mergeOptions({iconRetinaUrl:yP.default,iconUrl:TP.default,shadowUrl:CP.default});function AP(t){var e={},n={};t.children;var i=kP(t,["children"]);return Object.entries(i).forEach(function(r){var o,a,u=r[0],d=r[1];u.startsWith("on")?n=ea(ea({},n),(o={},o[u]=d,o)):e=ea(ea({},e),(a={},a[u]=d,a))}),{clusterProps:e,clusterEvents:n}}function xP(t,e){var n=AP(t),i=n.clusterProps,r=n.clusterEvents,o=new $m.default.MarkerClusterGroup(i);return Object.entries(r).forEach(function(a){var u=a[0],d=a[1],f="cluster".concat(u.substring(2).toLowerCase());o.on(f,d)}),(0,yp.createElementObject)(o,(0,yp.extendContext)(e,{layerContainer:o}))}var RP=function(t,e,n){},LP=(0,yp.createPathComponent)(xP,RP),Vo=CE.default=LP;const Rs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",Ls="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",bs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";xs.Icon.Default.mergeOptions({iconRetinaUrl:Rs,iconUrl:Ls,shadowUrl:bs});function bP({onChange:t}){return IE({moveend:e=>{const n=e.target,i=n.getBounds(),r=n.getZoom();t({south:i.getSouth(),west:i.getWest(),north:i.getNorth(),east:i.getEast(),zoom:r})},load:e=>{const n=e.target,i=n.getBounds(),r=n.getZoom();t({south:i.getSouth(),west:i.getWest(),north:i.getNorth(),east:i.getEast(),zoom:r})}}),null}function OP({selectingStart:t,onStartSelected:e}){return IE({click:n=>{t&&e&&e(n.latlng.lat,n.latlng.lng)}}),null}function NP(t){return`https://en.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(t)}`}function MP({startLocation:t}){const e=Km();return ir.useEffect(()=>{if(t)try{const n=e.getZoom(),i=Math.max(n,12);e.flyTo([t.lat,t.lon],i,{duration:.8})}catch{}},[t]),null}function DP({onMapReady:t}){const e=Km();return ir.useEffect(()=>{t&&t(e)},[e,t]),null}function VP({onAddPlace:t,selectedIds:e,route:n,startLocation:i,selectingStart:r,onStartSelected:o,showFuelStations:a,showDumpPoints:u,showWaterPoints:d,showSmallTownsOnly:f,showCampsites:_,favorites:v=[],toggleFavorite:w,itinerary:T,onMapReady:A,visitedPlaces:N=[]}){const[j,P]=Z.useState([]),[k,b]=Z.useState([]),[H,K]=Z.useState([]),[X,R]=Z.useState([]),[I,x]=Z.useState([]),[O,V]=Z.useState([]),z=Z.useRef(null),M=Z.useRef(null),Ke=Z.useMemo(()=>[-25.2744,133.7751],[]),In=Z.useMemo(()=>new xs.Icon({iconRetinaUrl:Rs,iconUrl:Ls,shadowUrl:bs,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:"green-marker"}),[]),Ue=Z.useMemo(()=>new xs.Icon({iconRetinaUrl:Rs,iconUrl:Ls,shadowUrl:bs,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:"purple-marker"}),[]),Mt=Z.useMemo(()=>new xs.Icon({iconRetinaUrl:Rs,iconUrl:Ls,shadowUrl:bs,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:"orange-marker"}),[]),G=Z.useMemo(()=>new xs.Icon({iconRetinaUrl:Rs,iconUrl:Ls,shadowUrl:bs,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:"blue-marker"}),[]),me=Z.useMemo(()=>new xs.Icon({iconRetinaUrl:Rs,iconUrl:Ls,shadowUrl:bs,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:"cyan-marker"}),[]),te=Z.useMemo(()=>new xs.Icon({iconRetinaUrl:Rs,iconUrl:Ls,shadowUrl:bs,iconSize:[30,49],iconAnchor:[15,49],popupAnchor:[1,-40],shadowSize:[41,41],className:"start-marker"}),[]),fe=async(U,ne=!1)=>{var qe;const ue=`(${U.south},${U.west},${U.north},${U.east})`,Re=[];if(U.zoom<4)return;U.zoom<6?Re.push(`node["place"="city"]["population"~"[0-9]{6,}"]${ue};`):U.zoom<8?(Re.push(`node["place"="city"]${ue};`),Re.push(`node["place"="town"]${ue};`),ne&&Re.push(`node["place"~"village|hamlet"]${ue};`)):(Re.push(`node["place"~"city|town|village"]${ue};`),ne&&Re.push(`node["place"~"hamlet|locality"]${ue};`),U.zoom>=12&&(Re.push(`node["tourism"="attraction"]${ue};`),Re.push(`way["tourism"="attraction"]${ue};`),Re.push(`relation["tourism"="attraction"]${ue};`)));const tt=`[out:json][timeout:25];(
      ${Re.join(`
      `)}
    );out center;`;console.log("Fetching places with query:",tt),(qe=z.current)==null||qe.abort();const st=new AbortController;z.current=st;try{const Le=["https://overpass-api.de/api/interpreter","https://lz4.overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter"];let Me=null,Ce=null;for(const ke of Le)try{const Ze=await fetch(ke,{method:"POST",body:tt,headers:{"Content-Type":"text/plain"},signal:st.signal});if(!Ze.ok)throw new Error(`Overpass error (${ke}): ${Ze.status}`);Me=await Ze.json(),Ce=null;break}catch(Ze){Ce=Ze}if(!Me)throw Ce||new Error("Overpass: no response from endpoints");const ot=[];for(const ke of Me.elements){const Ze=ke.tags||{},nt=Ze.name||Ze["name:en"]||null;if(!nt)continue;let pt,Cn;if(ke.type==="node"?(pt=ke.lat,Cn=ke.lon):(ke.type==="way"||ke.type==="relation")&&ke.center&&(pt=ke.center.lat,Cn=ke.center.lon),pt===void 0||Cn===void 0)continue;let Dn="locality";Ze.tourism==="attraction"?Dn="attraction":Ze.place&&(Dn=Ze.place);const Ui=Ze.population?parseInt(Ze.population,10):void 0;ot.push({id:`${ke.type}/${ke.id}`,name:nt,type:Dn,lat:pt,lon:Cn,population:Ui})}console.log(`Fetched ${ot.length} places:`,ot.slice(0,10)),P(ot)}catch(Le){if(Le.name==="AbortError")return;console.error(Le)}},we=async U=>{if(U.zoom<8){b([]),K([]);return}const ne=`(${U.south},${U.west},${U.north},${U.east})`,ue=`[out:json][timeout:25];
      (
        node["tourism"="camp_site"]${ne};
        node["tourism"="caravan_site"]${ne};
      );
      out body;`,Re=new AbortController;z.current&&z.current.abort(),z.current=Re;try{const tt=["https://overpass-api.de/api/interpreter","https://lz4.overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter"];let st=null;for(const Me of tt)try{const Ce=await fetch(Me,{method:"POST",body:ue,headers:{"Content-Type":"text/plain"},signal:Re.signal});if(!Ce.ok)throw new Error(`Overpass error: ${Ce.status}`);st=await Ce.json();break}catch(Ce){if(Ce.name==="AbortError")return;continue}if(!st)return;const qe=[],Le=[];for(const Me of st.elements){if(Me.type!=="node")continue;const{lat:Ce,lon:ot,tags:ke}=Me;if(!Ce||!ot||!ke)continue;const Ze=ke.name||ke.alt_name||"Campsite",nt=ke.fee==="no",pt={id:`node/${Me.id}`,name:Ze,type:"attraction",lat:Ce,lon:ot};nt?qe.push(pt):Le.push(pt)}b(qe),K(Le)}catch(tt){if(tt.name==="AbortError")return;console.error("Campsite fetch error:",tt)}};Z.useEffect(()=>{if(!a||!T||T.length===0){R([]);return}(async()=>{const ue=[],Re=new Set;for(const tt of T){const st=`[out:json][timeout:25];
          (
            node["amenity"="fuel"](around:10000,${tt.lat},${tt.lon});
          );
          out body;`;try{const qe=["https://overpass-api.de/api/interpreter","https://lz4.overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter"];let Le=null;for(const Me of qe)try{const Ce=await fetch(Me,{method:"POST",body:st,headers:{"Content-Type":"text/plain"}});if(!Ce.ok)continue;Le=await Ce.json();break}catch{continue}if(!Le)continue;for(const Me of Le.elements){if(Me.type!=="node")continue;const{lat:Ce,lon:ot,tags:ke,id:Ze}=Me;if(!Ce||!ot)continue;const nt=`fuel/${Ze}`;if(Re.has(nt))continue;Re.add(nt);const pt=(ke==null?void 0:ke.name)||(ke==null?void 0:ke.brand)||"Fuel Station";ue.push({id:nt,name:pt,type:"attraction",lat:Ce,lon:ot})}}catch(qe){console.error("Fuel station fetch error:",qe)}}R(ue)})()},[a,T]),Z.useEffect(()=>{if(!u||!T||T.length===0){x([]);return}(async()=>{const ue=[],Re=new Set;for(const tt of T){const st=`[out:json][timeout:25];
          (
            node["amenity"="sanitary_dump_station"](around:10000,${tt.lat},${tt.lon});
          );
          out body;`;try{const qe=["https://overpass-api.de/api/interpreter","https://lz4.overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter"];let Le=null;for(const Me of qe)try{const Ce=await fetch(Me,{method:"POST",body:st,headers:{"Content-Type":"text/plain"}});if(!Ce.ok)continue;Le=await Ce.json();break}catch{continue}if(!Le)continue;for(const Me of Le.elements){if(Me.type!=="node")continue;const{lat:Ce,lon:ot,tags:ke,id:Ze}=Me;if(!Ce||!ot)continue;const nt=`dump/${Ze}`;if(Re.has(nt))continue;Re.add(nt);const pt=(ke==null?void 0:ke.name)||"RV Dump Point";ue.push({id:nt,name:pt,type:"attraction",lat:Ce,lon:ot})}}catch(qe){console.error("Dump point fetch error:",qe)}}x(ue)})()},[u,T]),Z.useEffect(()=>{if(!d||!(T!=null&&T.length)){V([]);return}(async()=>{const ue=[],Re=new Set;for(const tt of T){const st=`[out:json][timeout:25];
          (
            node["amenity"="drinking_water"](around:10000,${tt.lat},${tt.lon});
            node["amenity"="water_point"](around:10000,${tt.lat},${tt.lon});
          );
          out body;`;try{const qe=["https://overpass-api.de/api/interpreter","https://lz4.overpass-api.de/api/interpreter","https://overpass.kumi.systems/api/interpreter"];let Le=null;for(const Me of qe)try{const Ce=await fetch(Me,{method:"POST",body:st,headers:{"Content-Type":"text/plain"}});if(!Ce.ok)continue;Le=await Ce.json();break}catch{continue}if(!Le)continue;for(const Me of Le.elements){if(Me.type!=="node")continue;const{lat:Ce,lon:ot,tags:ke,id:Ze}=Me;if(!Ce||!ot)continue;const nt=`water/${Ze}`;if(Re.has(nt))continue;Re.add(nt);const pt=(ke==null?void 0:ke.name)||"Water Point";ue.push({id:nt,name:pt,type:"attraction",lat:Ce,lon:ot})}}catch(qe){console.error("Water point fetch error:",qe)}}V(ue)})()},[d,T]);const Ae=U=>{M.current&&window.clearTimeout(M.current),M.current=window.setTimeout(()=>{fe(U,f),we(U)},1e3)},Ne=Z.useMemo(()=>f?j.filter(U=>U.type==="attraction"?!0:U.population!==void 0&&!isNaN(U.population)?U.population>=500&&U.population<=1e4:U.type==="village"||U.type==="hamlet"||U.type==="locality"):j,[j,f]);return C.jsxs(dP,{center:Ke,zoom:4,minZoom:3,maxZoom:15,style:{height:"100%",width:"100%"},children:[C.jsx(pP,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),C.jsx(bP,{onChange:Ae}),C.jsx(OP,{selectingStart:r,onStartSelected:o}),C.jsx(MP,{startLocation:i}),C.jsx(DP,{onMapReady:A}),!a&&!u&&!d&&C.jsx(Vo,{chunkedLoading:!0,children:Ne.map(U=>C.jsx(Cs,{position:[U.lat,U.lon],children:C.jsx(ks,{children:C.jsxs("div",{style:{minWidth:180},children:[(()=>{const ne=N.some(ue=>ue.id===U.id);return C.jsxs("div",{style:{fontWeight:600,textDecoration:ne?"line-through":"none",opacity:ne?.6:1},children:[ne?" ":"",U.name]})})(),C.jsxs("div",{style:{color:"#475569",marginBottom:8},children:[U.type," \\u00b7 ",U.lat.toFixed(3),", ",U.lon.toFixed(3)]}),C.jsxs("div",{style:{marginBottom:8,display:"flex",flexDirection:"column",gap:4},children:[C.jsx("a",{href:NP(U.name),target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:" Wikipedia "}),C.jsx("a",{href:`https://www.meteoblue.com/en/weather/forecast/week/${U.lat.toFixed(4)}N${U.lon.toFixed(4)}E`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:" Weather forecast "})]}),C.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[C.jsx("button",{className:"button",onClick:()=>t(U),disabled:e.has(U.id),children:e.has(U.id)?"Added":"Add to itinerary"}),w&&(()=>{const ne=v.some(ue=>ue.id===U.id);return C.jsx("button",{className:"button",onClick:async()=>{try{await w(U)}catch(ue){console.error("Error toggling favorite:",ue)}},style:{background:ne?"#ec4899":void 0},title:ne?"Remove from favorites":"Add to favorites",children:ne?"":""})})(),o&&!i&&C.jsx("button",{className:"button",onClick:()=>o(U.lat,U.lon,U.name),children:"Set as start"})]})]})})},U.id))}),!a&&!u&&!d&&_&&C.jsx(Vo,{chunkedLoading:!0,children:k.map(U=>C.jsx(Cs,{position:[U.lat,U.lon],icon:Ue,children:C.jsx(ks,{children:C.jsxs("div",{style:{minWidth:180},children:[(()=>{const ne=N.some(ue=>ue.id===U.id);return C.jsxs("div",{style:{fontWeight:600,textDecoration:ne?"line-through":"none",opacity:ne?.6:1},children:[ne?" ":"","\\ud83c\\udfd5\\ufe0f ",U.name]})})(),C.jsxs("div",{style:{color:"#475569",marginBottom:8},children:["Free campsite \\u00b7 ",U.lat.toFixed(3),", ",U.lon.toFixed(3)]}),C.jsxs("div",{style:{marginBottom:8,display:"flex",flexDirection:"column",gap:4},children:[C.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(U.name+" campsite")}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"View on Google Maps "}),C.jsx("a",{href:`https://www.meteoblue.com/en/weather/forecast/week/${U.lat.toFixed(4)}N${U.lon.toFixed(4)}E`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"Weather forecast "})]}),C.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[C.jsx("button",{className:"button",onClick:()=>t(U),disabled:e.has(U.id),children:e.has(U.id)?"Added":"Add to itinerary"}),w&&(()=>{const ne=v.some(ue=>ue.id===U.id);return C.jsx("button",{className:"button",onClick:async()=>{try{await w(U)}catch(ue){console.error("Error toggling favorite:",ue)}},style:{background:ne?"#ec4899":void 0},title:ne?"Remove from favorites":"Add to favorites",children:ne?"":""})})(),o&&!i&&C.jsx("button",{className:"button",onClick:()=>o(U.lat,U.lon,U.name),children:"Set as start"})]})]})})},U.id))}),!a&&!u&&!d&&_&&C.jsx(Vo,{chunkedLoading:!0,children:H.map(U=>C.jsx(Cs,{position:[U.lat,U.lon],icon:In,children:C.jsx(ks,{children:C.jsxs("div",{style:{minWidth:180},children:[(()=>{const ne=N.some(ue=>ue.id===U.id);return C.jsxs("div",{style:{fontWeight:600,textDecoration:ne?"line-through":"none",opacity:ne?.6:1},children:[ne?" ":"","\\ud83c\\udfd5\\ufe0f\\ud83d\\udcb0 ",U.name]})})(),C.jsxs("div",{style:{color:"#475569",marginBottom:8},children:["Paid campsite \\u00b7 ",U.lat.toFixed(3),", ",U.lon.toFixed(3)]}),C.jsxs("div",{style:{marginBottom:8,display:"flex",flexDirection:"column",gap:4},children:[C.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(U.name+" campsite")}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"View on Google Maps "}),C.jsx("a",{href:`https://www.meteoblue.com/en/weather/forecast/week/${U.lat.toFixed(4)}N${U.lon.toFixed(4)}E`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"Weather forecast "})]}),C.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[C.jsx("button",{className:"button",onClick:()=>t(U),disabled:e.has(U.id),children:e.has(U.id)?"Added":"Add to itinerary"}),w&&(()=>{const ne=v.some(ue=>ue.id===U.id);return C.jsx("button",{className:"button",onClick:async()=>{try{await w(U)}catch(ue){console.error("Error toggling favorite:",ue)}},style:{background:ne?"#ec4899":void 0},title:ne?"Remove from favorites":"Add to favorites",children:ne?"":""})})(),o&&!i&&C.jsx("button",{className:"button",onClick:()=>o(U.lat,U.lon,U.name),children:"Set as start"})]})]})})},U.id))}),a&&C.jsx(Vo,{chunkedLoading:!0,children:X.map(U=>C.jsx(Cs,{position:[U.lat,U.lon],icon:Mt,children:C.jsx(ks,{children:C.jsxs("div",{style:{minWidth:180},children:[C.jsxs("div",{style:{fontWeight:600},children:[" ",U.name]}),C.jsxs("div",{style:{color:"#475569",marginBottom:8},children:["Fuel station  ",U.lat.toFixed(3),", ",U.lon.toFixed(3)]}),C.jsx("div",{style:{marginBottom:8},children:C.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(U.name+" fuel station")}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"View on Google Maps "})}),C.jsx("button",{className:"button",onClick:()=>t(U),disabled:e.has(U.id),children:e.has(U.id)?"Added":"Add to itinerary"}),o&&!i&&C.jsx("button",{className:"button",style:{marginLeft:8},onClick:()=>o(U.lat,U.lon,U.name),children:"Set as start"})]})})},U.id))}),u&&C.jsx(Vo,{chunkedLoading:!0,children:I.map(U=>C.jsx(Cs,{position:[U.lat,U.lon],icon:G,children:C.jsx(ks,{children:C.jsxs("div",{style:{minWidth:180},children:[C.jsxs("div",{style:{fontWeight:600},children:[" ",U.name]}),C.jsxs("div",{style:{color:"#475569",marginBottom:8},children:["RV Dump Point  ",U.lat.toFixed(3),", ",U.lon.toFixed(3)]}),C.jsx("div",{style:{marginBottom:8},children:C.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(U.name+" dump station")}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"View on Google Maps "})}),C.jsx("button",{className:"button",onClick:()=>t(U),disabled:e.has(U.id),children:e.has(U.id)?"Added":"Add to itinerary"}),o&&!i&&C.jsx("button",{className:"button",style:{marginLeft:8},onClick:()=>o(U.lat,U.lon,U.name),children:"Set as start"})]})})},U.id))}),d&&C.jsx(Vo,{chunkedLoading:!0,children:O.map(U=>C.jsx(Cs,{position:[U.lat,U.lon],icon:me,children:C.jsx(ks,{children:C.jsxs("div",{style:{minWidth:180},children:[C.jsxs("div",{style:{fontWeight:600},children:[" ",U.name]}),C.jsxs("div",{style:{color:"#475569",marginBottom:8},children:["Drinking Water  ",U.lat.toFixed(3),", ",U.lon.toFixed(3)]}),C.jsx("div",{style:{marginBottom:8},children:C.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(U.name+" water point")}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:12,color:"#2563eb"},children:"View on Google Maps "})}),C.jsx("button",{className:"button",onClick:()=>t(U),disabled:e.has(U.id),children:e.has(U.id)?"Added":"Add to itinerary"}),o&&!i&&C.jsx("button",{className:"button",style:{marginLeft:8},onClick:()=>o(U.lat,U.lon,U.name),children:"Set as start"})]})})},U.id))}),i&&C.jsx(Cs,{position:[i.lat,i.lon],icon:te,children:C.jsx(ks,{children:C.jsxs("div",{style:{minWidth:140},children:[C.jsxs("div",{style:{fontWeight:600},children:[" ",i.name||"Start"]}),C.jsxs("div",{style:{color:"#475569"},children:[i.lat.toFixed(4),", ",i.lon.toFixed(4)]})]})})}),n&&n.coordinates&&C.jsxs(C.Fragment,{children:[C.jsx(fP,{positions:n.coordinates,pathOptions:{color:"dodgerblue",weight:4,opacity:.85}}),n.waypoints&&n.legs&&n.waypoints.map((U,ne)=>{if(ne>=n.waypoints.length-1)return null;const ue=n.waypoints[ne+1],Re=[(U[0]+ue[0])/2,(U[1]+ue[1])/2],tt=n.legs[ne].duration,st=qe=>{const Le=Math.round(qe/60);if(Le<60)return`${Le} min`;const Me=Math.floor(Le/60),Ce=Le%60;return`${Me}h ${Ce}m`};return C.jsx(cP,{center:Re,radius:8,pathOptions:{color:"#fff",fillColor:"dodgerblue",fillOpacity:1},children:C.jsx(mP,{direction:"top",offset:[0,-8],permanent:!0,children:st(tt)})},`seg-${ne}`)})]})]})}var Pv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},zP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],d=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},PE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,d=r+2<t.length,f=d?t[r+2]:0,_=o>>2,v=(o&3)<<4|u>>4;let w=(u&15)<<2|f>>6,T=f&63;d||(T=64,a||(w=64)),i.push(n[_],n[v],n[w],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const v=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||v==null)throw new UP;const w=o<<2|u>>4;if(i.push(w),f!==64){const T=u<<4&240|f>>2;if(i.push(T),v!==64){const A=f<<6&192|v;i.push(A)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FP=function(t){const e=kE(t);return PE.encodeByteArray(e,!0)},Ph=function(t){return FP(t).replace(/\./g,"")},AE=function(t){try{return PE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=()=>BP().__FIREBASE_DEFAULTS__,HP=()=>{if(typeof process>"u"||typeof Pv>"u")return;const t=Pv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&AE(t[1]);return e&&JSON.parse(e)},hd=()=>{try{return jP()||HP()||WP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xE=t=>{var e,n;return(n=(e=hd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},RE=t=>{const e=xE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},LE=()=>{var t;return(t=hd())===null||t===void 0?void 0:t.config},bE=t=>{var e;return(e=hd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ph(JSON.stringify(n)),Ph(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function ZP(){var t;const e=(t=hd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $P(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XP(){const t=an();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JP(){return!ZP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YP(){try{return typeof indexedDB=="object"}catch{return!1}}function eA(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="FirebaseError";class zi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=tA,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ku.prototype.create)}}class ku{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?nA(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new zi(r,u,i)}}function nA(t,e){return t.replace(iA,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const iA=/\{\$([^}]+)}/g;function rA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ah(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(Av(o)&&Av(a)){if(!Ah(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Av(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function kl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Pl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sA(t,e){const n=new oA(t,e);return n.subscribe.bind(n)}class oA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");aA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=cf),r.error===void 0&&(r.error=cf),r.complete===void 0&&(r.complete=cf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){return t&&t._delegate?t._delegate:t}class es{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new qP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cA(e))try{this.getOrInitializeService({instanceIdentifier:Os})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Os){return this.instances.has(e)}getOptions(e=Os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Os){return this.component?this.component.multipleInstances?e:Os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uA(t){return t===Os?void 0:t}function cA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Fe||(Fe={}));const dA={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},fA=Fe.INFO,pA={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},mA=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=pA[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qm{constructor(e){this.name=e,this._logLevel=fA,this._logHandler=mA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const gA=(t,e)=>e.some(n=>t instanceof n);let xv,Rv;function _A(){return xv||(xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vA(){return Rv||(Rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NE=new WeakMap,wp=new WeakMap,ME=new WeakMap,hf=new WeakMap,Xm=new WeakMap;function yA(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Kr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&NE.set(n,t)}).catch(()=>{}),Xm.set(e,t),e}function wA(t){if(wp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});wp.set(t,e)}let Ep={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ME.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EA(t){Ep=t(Ep)}function TA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(df(this),e,...n);return ME.set(i,e.sort?e.sort():[e]),Kr(i)}:vA().includes(t)?function(...e){return t.apply(df(this),e),Kr(NE.get(this))}:function(...e){return Kr(t.apply(df(this),e))}}function SA(t){return typeof t=="function"?TA(t):(t instanceof IDBTransaction&&wA(t),gA(t,_A())?new Proxy(t,Ep):t)}function Kr(t){if(t instanceof IDBRequest)return yA(t);if(hf.has(t))return hf.get(t);const e=SA(t);return e!==t&&(hf.set(t,e),Xm.set(e,t)),e}const df=t=>Xm.get(t);function IA(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=Kr(a);return i&&a.addEventListener("upgradeneeded",d=>{i(Kr(a.result),d.oldVersion,d.newVersion,Kr(a.transaction),d)}),n&&a.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const CA=["get","getKey","getAll","getAllKeys","count"],kA=["put","add","delete","clear"],ff=new Map;function Lv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ff.get(e))return ff.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=kA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||CA.includes(n)))return;const o=async function(a,...u){const d=this.transaction(a,r?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&d.done]))[0]};return ff.set(e,o),o}EA(t=>({...t,get:(e,n,i)=>Lv(e,n)||t.get(e,n,i),has:(e,n)=>!!Lv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function AA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tp="@firebase/app",bv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new Qm("@firebase/app"),xA="@firebase/app-compat",RA="@firebase/analytics-compat",LA="@firebase/analytics",bA="@firebase/app-check-compat",OA="@firebase/app-check",NA="@firebase/auth",MA="@firebase/auth-compat",DA="@firebase/database",VA="@firebase/data-connect",zA="@firebase/database-compat",UA="@firebase/functions",FA="@firebase/functions-compat",BA="@firebase/installations",jA="@firebase/installations-compat",HA="@firebase/messaging",WA="@firebase/messaging-compat",qA="@firebase/performance",GA="@firebase/performance-compat",ZA="@firebase/remote-config",KA="@firebase/remote-config-compat",$A="@firebase/storage",QA="@firebase/storage-compat",XA="@firebase/firestore",JA="@firebase/vertexai-preview",YA="@firebase/firestore-compat",ex="firebase",tx="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="[DEFAULT]",nx={[Tp]:"fire-core",[xA]:"fire-core-compat",[LA]:"fire-analytics",[RA]:"fire-analytics-compat",[OA]:"fire-app-check",[bA]:"fire-app-check-compat",[NA]:"fire-auth",[MA]:"fire-auth-compat",[DA]:"fire-rtdb",[VA]:"fire-data-connect",[zA]:"fire-rtdb-compat",[UA]:"fire-fn",[FA]:"fire-fn-compat",[BA]:"fire-iid",[jA]:"fire-iid-compat",[HA]:"fire-fcm",[WA]:"fire-fcm-compat",[qA]:"fire-perf",[GA]:"fire-perf-compat",[ZA]:"fire-rc",[KA]:"fire-rc-compat",[$A]:"fire-gcs",[QA]:"fire-gcs-compat",[XA]:"fire-fst",[YA]:"fire-fst-compat",[JA]:"fire-vertex","fire-js":"fire-js",[ex]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Map,ix=new Map,Ip=new Map;function Ov(t,e){try{t.container.addComponent(e)}catch(n){cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qs(t){const e=t.name;if(Ip.has(e))return cr.debug(`There were multiple attempts to register component ${e}.`),!1;Ip.set(e,t);for(const n of xh.values())Ov(n,t);for(const n of ix.values())Ov(n,t);return!0}function dd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ci(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new ku("app","Firebase",rx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=tx;function DE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Sp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw $r.create("bad-app-name",{appName:String(r)});if(n||(n=LE()),!n)throw $r.create("no-options");const o=xh.get(r);if(o){if(Ah(n,o.options)&&Ah(i,o.config))return o;throw $r.create("duplicate-app",{appName:r})}const a=new hA(r);for(const d of Ip.values())a.addComponent(d);const u=new sx(n,i,a);return xh.set(r,u),u}function Jm(t=Sp){const e=xh.get(t);if(!e&&t===Sp&&LE())return DE();if(!e)throw $r.create("no-app",{appName:t});return e}function xi(t,e,n){var i;let r=(i=nx[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cr.warn(u.join(" "));return}Qs(new es(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="firebase-heartbeat-database",ax=1,cu="firebase-heartbeat-store";let pf=null;function VE(){return pf||(pf=IA(ox,ax,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cu)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),pf}async function lx(t){try{const n=(await VE()).transaction(cu),i=await n.objectStore(cu).get(zE(t));return await n.done,i}catch(e){if(e instanceof zi)cr.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cr.warn(n.message)}}}async function Nv(t,e){try{const i=(await VE()).transaction(cu,"readwrite");await i.objectStore(cu).put(e,zE(t)),await i.done}catch(n){if(n instanceof zi)cr.warn(n.message);else{const i=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cr.warn(i.message)}}}function zE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=1024,cx=30*24*60*60*1e3;class hx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fx(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Mv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=cx}),this._storage.overwrite(this._heartbeatsCache))}catch(i){cr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mv(),{heartbeatsToSend:i,unsentEntries:r}=dx(this._heartbeatsCache.heartbeats),o=Ph(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return cr.warn(n),""}}}function Mv(){return new Date().toISOString().substring(0,10)}function dx(t,e=ux){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),Dv(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Dv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class fx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YP()?eA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Nv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Nv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Dv(t){return Ph(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t){Qs(new es("platform-logger",e=>new PA(e),"PRIVATE")),Qs(new es("heartbeat",e=>new hx(e),"PRIVATE")),xi(Tp,bv,t),xi(Tp,bv,"esm2017"),xi("fire-js","")}px("");var mx="firebase",gx="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi(mx,gx,"app");function Ym(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function UE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _x=UE,FE=new ku("auth","Firebase",UE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Qm("@firebase/auth");function vx(t,...e){Rh.logLevel<=Fe.WARN&&Rh.warn(`Auth (${so}): ${t}`,...e)}function Kc(t,...e){Rh.logLevel<=Fe.ERROR&&Rh.error(`Auth (${so}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t,...e){throw eg(t,...e)}function Ri(t,...e){return eg(t,...e)}function BE(t,e,n){const i=Object.assign(Object.assign({},_x()),{[e]:n});return new ku("auth","Firebase",i).create(e,{appName:t.name})}function sr(t){return BE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return FE.create(t,...e)}function ye(t,e,...n){if(!t)throw eg(e,...n)}function er(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kc(e),new Error(e)}function hr(t,e){t||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yx(){return Vv()==="http:"||Vv()==="https:"}function Vv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yx()||$P()||"connection"in navigator)?navigator.onLine:!0}function Ex(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n){this.shortDelay=e,this.longDelay=n,hr(n>e,"Short delay should be less than long delay!"),this.isMobile=GP()||QP()}get(){return wx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t,e){hr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=new Au(3e4,6e4);function ls(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function us(t,e,n,i,r={}){return HE(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=Pu(Object.assign({key:t.config.apiKey},a)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return KP()||(f.referrerPolicy="no-referrer"),jE.fetch()(WE(t,t.config.apiHost,n,u),f)})}async function HE(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Tx),e);try{const r=new Cx(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw xc(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw xc(t,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw xc(t,"email-already-in-use",a);if(d==="USER_DISABLED")throw xc(t,"user-disabled",a);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw BE(t,_,f);gi(t,_)}}catch(r){if(r instanceof zi)throw r;gi(t,"network-request-failed",{message:String(r)})}}async function xu(t,e,n,i,r={}){const o=await us(t,e,n,i,r);return"mfaPendingCredential"in o&&gi(t,"multi-factor-auth-required",{_serverResponse:o}),o}function WE(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?tg(t.config,r):`${t.config.apiScheme}://${r}`}function Ix(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Cx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ri(this.auth,"network-request-failed")),Sx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ri(t,e,i);return r.customData._tokenResponse=n,r}function zv(t){return t!==void 0&&t.enterprise!==void 0}class kx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Ix(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Px(t,e){return us(t,"GET","/v2/recaptchaConfig",ls(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(t,e){return us(t,"POST","/v1/accounts:delete",e)}async function qE(t,e){return us(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xx(t,e=!1){const n=xt(t),i=await n.getIdToken(e),r=ng(i);ye(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Bl(mf(r.auth_time)),issuedAtTime:Bl(mf(r.iat)),expirationTime:Bl(mf(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function mf(t){return Number(t)*1e3}function ng(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Kc("JWT malformed, contained fewer than 3 sections"),null;try{const r=AE(n);return r?JSON.parse(r):(Kc("Failed to decode base64 JWT payload"),null)}catch(r){return Kc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Uv(t){const e=ng(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof zi&&Rx(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Rx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bl(this.lastLoginAt),this.creationTime=Bl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lh(t){var e;const n=t.auth,i=await t.getIdToken(),r=await hu(t,qE(n,{idToken:i}));ye(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?GE(o.providerUserInfo):[],u=Ox(t.providerData,a),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),_=d?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new kp(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(t,v)}async function bx(t){const e=xt(t);await Lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ox(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function GE(t){return t.map(e=>{var{providerId:n}=e,i=Ym(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(t,e){const n=await HE(t,{},async()=>{const i=Pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=WE(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",jE.fetch()(a,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Mx(t,e){return us(t,"POST","/v2/accounts:revokeToken",ls(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Uv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Uv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await Nx(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new la;return i&&(ye(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ye(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(ye(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new la,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class tr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=Ym(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new kp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await hu(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xx(this,e)}reload(){return bx(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Lh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ci(this.auth.app))return Promise.reject(sr(this.auth));const e=await this.getIdToken();return await hu(this,Ax(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,a,u,d,f,_;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,w=(r=n.email)!==null&&r!==void 0?r:void 0,T=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,A=(a=n.photoURL)!==null&&a!==void 0?a:void 0,N=(u=n.tenantId)!==null&&u!==void 0?u:void 0,j=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,P=(f=n.createdAt)!==null&&f!==void 0?f:void 0,k=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:b,emailVerified:H,isAnonymous:K,providerData:X,stsTokenManager:R}=n;ye(b&&R,e,"internal-error");const I=la.fromJSON(this.name,R);ye(typeof b=="string",e,"internal-error"),kr(v,e.name),kr(w,e.name),ye(typeof H=="boolean",e,"internal-error"),ye(typeof K=="boolean",e,"internal-error"),kr(T,e.name),kr(A,e.name),kr(N,e.name),kr(j,e.name),kr(P,e.name),kr(k,e.name);const x=new tr({uid:b,auth:e,email:w,emailVerified:H,displayName:v,isAnonymous:K,photoURL:A,phoneNumber:T,tenantId:N,stsTokenManager:I,createdAt:P,lastLoginAt:k});return X&&Array.isArray(X)&&(x.providerData=X.map(O=>Object.assign({},O))),j&&(x._redirectEventId=j),x}static async _fromIdTokenResponse(e,n,i=!1){const r=new la;r.updateFromServerResponse(n);const o=new tr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Lh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ye(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?GE(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new la;u.updateFromIdToken(i);const d=new tr({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new kp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new Map;function nr(t){hr(t instanceof Function,"Expected a class definition");let e=Fv.get(t);return e?(hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZE.type="NONE";const Bv=ZE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t,e,n){return`firebase:${t}:${e}:${n}`}class ua{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=$c(this.userKey,r.apiKey,o),this.fullPersistenceKey=$c("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?tr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ua(nr(Bv),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||nr(Bv);const a=$c(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const _=await f._get(a);if(_){const v=tr._fromJSON(e,_);f!==o&&(u=v),o=f;break}}catch{}const d=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new ua(o,e,i):(o=d[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new ua(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YE(e))return"Blackberry";if(eT(e))return"Webos";if($E(e))return"Safari";if((e.includes("chrome/")||QE(e))&&!e.includes("edge/"))return"Chrome";if(JE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function KE(t=an()){return/firefox\//i.test(t)}function $E(t=an()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QE(t=an()){return/crios\//i.test(t)}function XE(t=an()){return/iemobile/i.test(t)}function JE(t=an()){return/android/i.test(t)}function YE(t=an()){return/blackberry/i.test(t)}function eT(t=an()){return/webos/i.test(t)}function ig(t=an()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Dx(t=an()){var e;return ig(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Vx(){return XP()&&document.documentMode===10}function tT(t=an()){return ig(t)||JE(t)||eT(t)||YE(t)||/windows phone/i.test(t)||XE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t,e=[]){let n;switch(t){case"Browser":n=jv(an());break;case"Worker":n=`${jv(an())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${so}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const d=e(o);a(d)}catch(d){u(d)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ux(t,e={}){return us(t,"GET","/v2/passwordPolicy",ls(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=6;class Bx{constructor(e){var n,i,r,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:Fx,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,a,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hv(this),this.idTokenSubscription=new Hv(this),this.beforeStateQueue=new zx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nr(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await ua.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qE(this,{idToken:e}),i=await tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ci(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===u)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ex()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ci(this.app))return Promise.reject(sr(this));const n=e?xt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ci(this.app)?Promise.reject(sr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ci(this.app)?Promise.reject(sr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ux(this),n=new Bx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ku("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Mx(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&nr(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await ua.create(this,[nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,r);return()=>{a=!0,d()}}else{const d=e.addObserver(n);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&vx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function oo(t){return xt(t)}class Hv{constructor(e){this.auth=e,this.observer=null,this.addObserver=sA(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hx(t){fd=t}function iT(t){return fd.loadJS(t)}function Wx(){return fd.recaptchaEnterpriseScript}function qx(){return fd.gapiScript}function Gx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Zx="recaptcha-enterprise",Kx="NO_RECAPTCHA";class $x{constructor(e){this.type=Zx,this.auth=oo(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,u)=>{Px(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new kx(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(d=>{u(d)})})}function r(o,a,u){const d=window.grecaptcha;zv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(Kx)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{i(this.auth).then(u=>{if(!n&&zv(window.grecaptcha))r(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=Wx();d.length!==0&&(d+=u),iT(d).then(()=>{r(u,o,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function Wv(t,e,n,i=!1){const r=new $x(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Pp(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Wv(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Wv(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(t,e){const n=dd(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Ah(o,e??{}))return r;gi(r,"already-initialized")}return n.initialize({options:e})}function Xx(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(nr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Jx(t,e,n){const i=oo(t);ye(i._canInitEmulator,i,"emulator-config-failed"),ye(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=rT(e),{host:a,port:u}=Yx(e),d=u===null?"":`:${u}`;i.config.emulator={url:`${o}//${a}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),eR()}function rT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Yx(t){const e=rT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:qv(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:qv(a)}}}function qv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}async function tR(t,e){return us(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(t,e){return xu(t,"POST","/v1/accounts:signInWithPassword",ls(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(t,e){return xu(t,"POST","/v1/accounts:signInWithEmailLink",ls(t,e))}async function rR(t,e){return xu(t,"POST","/v1/accounts:signInWithEmailLink",ls(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends rg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new du(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new du(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pp(e,n,"signInWithPassword",nR);case"emailLink":return iR(e,{email:this._email,oobCode:this._password});default:gi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pp(e,i,"signUpPassword",tR);case"emailLink":return rR(e,{idToken:n,email:this._email,oobCode:this._password});default:gi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(t,e){return xu(t,"POST","/v1/accounts:signInWithIdp",ls(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="http://localhost";class Xs extends rg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):gi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=Ym(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new Xs(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ca(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ca(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ca(e,n)}buildRequest(){const e={requestUri:sR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Pu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aR(t){const e=kl(Pl(t)).link,n=e?kl(Pl(e)).deep_link_id:null,i=kl(Pl(t)).deep_link_id;return(i?kl(Pl(i)).link:null)||i||n||e||t}class sg{constructor(e){var n,i,r,o,a,u;const d=kl(Pl(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,_=(i=d.oobCode)!==null&&i!==void 0?i:null,v=oR((r=d.mode)!==null&&r!==void 0?r:null);ye(f&&_&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=_,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=d.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=aR(e);try{return new sg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.providerId=La.PROVIDER_ID}static credential(e,n){return du._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=sg.parseLink(n);return ye(i,"argument-error"),du._fromEmailAndCode(e,i.code,i.tenantId)}}La.PROVIDER_ID="password";La.EMAIL_PASSWORD_SIGN_IN_METHOD="password";La.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends sT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Ru{constructor(){super("facebook.com")}static credential(e){return Xs._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xs._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return br.credential(n,i)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Ru{constructor(){super("github.com")}static credential(e){return Xs._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Ru{constructor(){super("twitter.com")}static credential(e,n){return Xs._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Nr.credential(n,i)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(t,e){return xu(t,"POST","/v1/accounts:signUp",ls(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await tr._fromIdTokenResponse(e,i,r),a=Gv(i);return new Js({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Gv(i);return new Js({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Gv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends zi{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,bh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new bh(e,n,i,r)}}function oT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?bh._fromErrorAndOperation(t,o,e,i):o})}async function uR(t,e,n=!1){const i=await hu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Js._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(t,e,n=!1){const{auth:i}=t;if(Ci(i.app))return Promise.reject(sr(i));const r="reauthenticate";try{const o=await hu(t,oT(i,r,e,t),n);ye(o.idToken,i,"internal-error");const a=ng(o.idToken);ye(a,i,"internal-error");const{sub:u}=a;return ye(t.uid===u,i,"user-mismatch"),Js._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&gi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(t,e,n=!1){if(Ci(t.app))return Promise.reject(sr(t));const i="signIn",r=await oT(t,i,e),o=await Js._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function hR(t,e){return aT(oo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lT(t){const e=oo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dR(t,e,n){if(Ci(t.app))return Promise.reject(sr(t));const i=oo(t),a=await Pp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lR).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&lT(t),d}),u=await Js._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(u.user),u}function fR(t,e,n){return Ci(t.app)?Promise.reject(sr(t)):hR(xt(t),La.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&lT(t),i})}function pR(t,e,n,i){return xt(t).onIdTokenChanged(e,n,i)}function mR(t,e,n){return xt(t).beforeAuthStateChanged(e,n)}function gR(t,e,n,i){return xt(t).onAuthStateChanged(e,n,i)}function _R(t){return xt(t).signOut()}const Oh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Oh,"1"),this.storage.removeItem(Oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=1e3,yR=10;class cT extends uT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,d)=>{this.notifyListeners(a,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Vx()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,yR):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},vR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cT.type="LOCAL";const wR=cT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT extends uT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hT.type="SESSION";const dT=hT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new pd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),d=await ER(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,d)=>{const f=og("",20);r.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(v){const w=v;if(w.data.eventId===f)switch(w.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(w.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(){return window}function SR(t){Li().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function IR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kR(){return fT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="firebaseLocalStorageDb",PR=1,Nh="firebaseLocalStorage",mT="fbase_key";class Lu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function md(t,e){return t.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function AR(){const t=indexedDB.deleteDatabase(pT);return new Lu(t).toPromise()}function Ap(){const t=indexedDB.open(pT,PR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Nh,{keyPath:mT})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Nh)?e(i):(i.close(),await AR(),e(await Ap()))})})}async function Zv(t,e,n){const i=md(t,!0).put({[mT]:e,value:n});return new Lu(i).toPromise()}async function xR(t,e){const n=md(t,!1).get(e),i=await new Lu(n).toPromise();return i===void 0?null:i.value}function Kv(t,e){const n=md(t,!0).delete(e);return new Lu(n).toPromise()}const RR=800,LR=3;class gT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ap(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>LR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pd._getInstance(kR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await IR(),!this.activeServiceWorker)return;this.sender=new TR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ap();return await Zv(e,Oh,"1"),await Kv(e,Oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Zv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>xR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=md(r,!1).getAll();return new Lu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gT.type="LOCAL";const bR=gT;new Au(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t,e){return e?nr(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag extends rg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ca(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ca(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function NR(t){return aT(t.auth,new ag(t),t.bypassAuthState)}function MR(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),cR(n,new ag(t),t.bypassAuthState)}async function DR(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),uR(n,new ag(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NR;case"linkViaPopup":case"linkViaRedirect":return DR;case"reauthViaPopup":case"reauthViaRedirect":return MR;default:gi(this.auth,"internal-error")}}resolve(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new Au(2e3,1e4);class ta extends _T{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,ta.currentPopupAction&&ta.currentPopupAction.cancel(),ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){hr(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VR.get())};e()}}ta.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="pendingRedirect",Qc=new Map;class UR extends _T{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Qc.get(this.auth._key());if(!e){try{const i=await FR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Qc.set(this.auth._key(),e)}return this.bypassAuthState||Qc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FR(t,e){const n=HR(e),i=jR(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function BR(t,e){Qc.set(t._key(),e)}function jR(t){return nr(t._redirectPersistence)}function HR(t){return $c(zR,t.config.apiKey,t.name)}async function WR(t,e,n=!1){if(Ci(t.app))return Promise.reject(sr(t));const i=oo(t),r=OR(i,e),a=await new UR(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=10*60*1e3;class GR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!vT(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ri(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qR&&this.cachedEventUids.clear(),this.cachedEventUids.has($v(e))}saveEventToCache(e){this.cachedEventUids.add($v(e)),this.lastProcessedEventTime=Date.now()}}function $v(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(t,e={}){return us(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QR=/^https?/;async function XR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KR(t);for(const n of e)try{if(JR(n))return}catch{}gi(t,"unauthorized-domain")}function JR(t){const e=Cp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!QR.test(n))return!1;if($R.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new Au(3e4,6e4);function Qv(){const t=Li().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eL(t){return new Promise((e,n)=>{var i,r,o;function a(){Qv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qv(),n(Ri(t,"network-request-failed"))},timeout:YR.get()})}if(!((r=(i=Li().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Li().gapi)===null||o===void 0)&&o.load)a();else{const u=Gx("iframefcb");return Li()[u]=()=>{gapi.load?a():n(Ri(t,"network-request-failed"))},iT(`${qx()}?onload=${u}`).catch(d=>n(d))}}).catch(e=>{throw Xc=null,e})}let Xc=null;function tL(t){return Xc=Xc||eL(t),Xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=new Au(5e3,15e3),iL="__/auth/iframe",rL="emulator/auth/iframe",sL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aL(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?tg(e,rL):`https://${t.config.authDomain}/${iL}`,i={apiKey:e.apiKey,appName:t.name,v:so},r=oL.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Pu(i).slice(1)}`}async function lL(t){const e=await tL(t),n=Li().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:aL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sL,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Ri(t,"network-request-failed"),u=Li().setTimeout(()=>{o(a)},nL.get());function d(){Li().clearTimeout(u),r(i)}i.ping(d).then(d,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cL=500,hL=600,dL="_blank",fL="http://localhost";class Xv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pL(t,e,n,i=cL,r=hL){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const d=Object.assign(Object.assign({},uL),{width:i.toString(),height:r.toString(),top:o,left:a}),f=an().toLowerCase();n&&(u=QE(f)?dL:n),KE(f)&&(e=e||fL,d.scrollbars="yes");const _=Object.entries(d).reduce((w,[T,A])=>`${w}${T}=${A},`,"");if(Dx(f)&&u!=="_self")return mL(e||"",u),new Xv(null);const v=window.open(e||"",u,_);ye(v,t,"popup-blocked");try{v.focus()}catch{}return new Xv(v)}function mL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="__/auth/handler",_L="emulator/auth/handler",vL=encodeURIComponent("fac");async function Jv(t,e,n,i,r,o){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:so,eventId:r};if(e instanceof sT){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",rA(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))a[_]=v}if(e instanceof Ru){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(a.scopes=_.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const _ of Object.keys(u))u[_]===void 0&&delete u[_];const d=await t._getAppCheckToken(),f=d?`#${vL}=${encodeURIComponent(d)}`:"";return`${yL(t)}?${Pu(u).slice(1)}${f}`}function yL({config:t}){return t.emulator?tg(t,_L):`https://${t.authDomain}/${gL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="webStorageSupport";class wL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dT,this._completeRedirectFn=WR,this._overrideRedirectResult=BR}async _openPopup(e,n,i,r){var o;hr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await Jv(e,n,i,Cp(),r);return pL(e,a,og())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await Jv(e,n,i,Cp(),r);return SR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(hr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await lL(e),i=new GR(e);return n.register("authEvent",r=>(ye(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gf,{type:gf},r=>{var o;const a=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[gf];a!==void 0&&n(!!a),gi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tT()||$E()||ig()}}const EL=wL;var Yv="@firebase/auth",ey="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IL(t){Qs(new es("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;ye(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nT(t)},f=new jx(i,r,o,d);return Xx(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Qs(new es("auth-internal",e=>{const n=oo(e.getProvider("auth").getImmediate());return(i=>new TL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xi(Yv,ey,SL(t)),xi(Yv,ey,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=5*60,kL=bE("authIdTokenMaxAge")||CL;let ty=null;const PL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>kL)return;const r=n==null?void 0:n.token;ty!==r&&(ty=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function AL(t=Jm()){const e=dd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Qx(t,{popupRedirectResolver:EL,persistence:[bR,wR,dT]}),i=bE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=PL(o.toString());mR(n,a,()=>a(n.currentUser)),pR(n,u=>a(u))}}const r=xE("auth");return r&&Jx(n,`http://${r}`),n}function xL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Hx({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Ri("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",xL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IL("Browser");var ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bs,yT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function x(){}x.prototype=I.prototype,R.D=I.prototype,R.prototype=new x,R.prototype.constructor=R,R.C=function(O,V,z){for(var M=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)M[Ke-2]=arguments[Ke];return I.prototype[V].apply(O,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,I,x){x||(x=0);var O=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)O[V]=I.charCodeAt(x++)|I.charCodeAt(x++)<<8|I.charCodeAt(x++)<<16|I.charCodeAt(x++)<<24;else for(V=0;16>V;++V)O[V]=I[x++]|I[x++]<<8|I[x++]<<16|I[x++]<<24;I=R.g[0],x=R.g[1],V=R.g[2];var z=R.g[3],M=I+(z^x&(V^z))+O[0]+3614090360&4294967295;I=x+(M<<7&4294967295|M>>>25),M=z+(V^I&(x^V))+O[1]+3905402710&4294967295,z=I+(M<<12&4294967295|M>>>20),M=V+(x^z&(I^x))+O[2]+606105819&4294967295,V=z+(M<<17&4294967295|M>>>15),M=x+(I^V&(z^I))+O[3]+3250441966&4294967295,x=V+(M<<22&4294967295|M>>>10),M=I+(z^x&(V^z))+O[4]+4118548399&4294967295,I=x+(M<<7&4294967295|M>>>25),M=z+(V^I&(x^V))+O[5]+1200080426&4294967295,z=I+(M<<12&4294967295|M>>>20),M=V+(x^z&(I^x))+O[6]+2821735955&4294967295,V=z+(M<<17&4294967295|M>>>15),M=x+(I^V&(z^I))+O[7]+4249261313&4294967295,x=V+(M<<22&4294967295|M>>>10),M=I+(z^x&(V^z))+O[8]+1770035416&4294967295,I=x+(M<<7&4294967295|M>>>25),M=z+(V^I&(x^V))+O[9]+2336552879&4294967295,z=I+(M<<12&4294967295|M>>>20),M=V+(x^z&(I^x))+O[10]+4294925233&4294967295,V=z+(M<<17&4294967295|M>>>15),M=x+(I^V&(z^I))+O[11]+2304563134&4294967295,x=V+(M<<22&4294967295|M>>>10),M=I+(z^x&(V^z))+O[12]+1804603682&4294967295,I=x+(M<<7&4294967295|M>>>25),M=z+(V^I&(x^V))+O[13]+4254626195&4294967295,z=I+(M<<12&4294967295|M>>>20),M=V+(x^z&(I^x))+O[14]+2792965006&4294967295,V=z+(M<<17&4294967295|M>>>15),M=x+(I^V&(z^I))+O[15]+1236535329&4294967295,x=V+(M<<22&4294967295|M>>>10),M=I+(V^z&(x^V))+O[1]+4129170786&4294967295,I=x+(M<<5&4294967295|M>>>27),M=z+(x^V&(I^x))+O[6]+3225465664&4294967295,z=I+(M<<9&4294967295|M>>>23),M=V+(I^x&(z^I))+O[11]+643717713&4294967295,V=z+(M<<14&4294967295|M>>>18),M=x+(z^I&(V^z))+O[0]+3921069994&4294967295,x=V+(M<<20&4294967295|M>>>12),M=I+(V^z&(x^V))+O[5]+3593408605&4294967295,I=x+(M<<5&4294967295|M>>>27),M=z+(x^V&(I^x))+O[10]+38016083&4294967295,z=I+(M<<9&4294967295|M>>>23),M=V+(I^x&(z^I))+O[15]+3634488961&4294967295,V=z+(M<<14&4294967295|M>>>18),M=x+(z^I&(V^z))+O[4]+3889429448&4294967295,x=V+(M<<20&4294967295|M>>>12),M=I+(V^z&(x^V))+O[9]+568446438&4294967295,I=x+(M<<5&4294967295|M>>>27),M=z+(x^V&(I^x))+O[14]+3275163606&4294967295,z=I+(M<<9&4294967295|M>>>23),M=V+(I^x&(z^I))+O[3]+4107603335&4294967295,V=z+(M<<14&4294967295|M>>>18),M=x+(z^I&(V^z))+O[8]+1163531501&4294967295,x=V+(M<<20&4294967295|M>>>12),M=I+(V^z&(x^V))+O[13]+2850285829&4294967295,I=x+(M<<5&4294967295|M>>>27),M=z+(x^V&(I^x))+O[2]+4243563512&4294967295,z=I+(M<<9&4294967295|M>>>23),M=V+(I^x&(z^I))+O[7]+1735328473&4294967295,V=z+(M<<14&4294967295|M>>>18),M=x+(z^I&(V^z))+O[12]+2368359562&4294967295,x=V+(M<<20&4294967295|M>>>12),M=I+(x^V^z)+O[5]+4294588738&4294967295,I=x+(M<<4&4294967295|M>>>28),M=z+(I^x^V)+O[8]+2272392833&4294967295,z=I+(M<<11&4294967295|M>>>21),M=V+(z^I^x)+O[11]+1839030562&4294967295,V=z+(M<<16&4294967295|M>>>16),M=x+(V^z^I)+O[14]+4259657740&4294967295,x=V+(M<<23&4294967295|M>>>9),M=I+(x^V^z)+O[1]+2763975236&4294967295,I=x+(M<<4&4294967295|M>>>28),M=z+(I^x^V)+O[4]+1272893353&4294967295,z=I+(M<<11&4294967295|M>>>21),M=V+(z^I^x)+O[7]+4139469664&4294967295,V=z+(M<<16&4294967295|M>>>16),M=x+(V^z^I)+O[10]+3200236656&4294967295,x=V+(M<<23&4294967295|M>>>9),M=I+(x^V^z)+O[13]+681279174&4294967295,I=x+(M<<4&4294967295|M>>>28),M=z+(I^x^V)+O[0]+3936430074&4294967295,z=I+(M<<11&4294967295|M>>>21),M=V+(z^I^x)+O[3]+3572445317&4294967295,V=z+(M<<16&4294967295|M>>>16),M=x+(V^z^I)+O[6]+76029189&4294967295,x=V+(M<<23&4294967295|M>>>9),M=I+(x^V^z)+O[9]+3654602809&4294967295,I=x+(M<<4&4294967295|M>>>28),M=z+(I^x^V)+O[12]+3873151461&4294967295,z=I+(M<<11&4294967295|M>>>21),M=V+(z^I^x)+O[15]+530742520&4294967295,V=z+(M<<16&4294967295|M>>>16),M=x+(V^z^I)+O[2]+3299628645&4294967295,x=V+(M<<23&4294967295|M>>>9),M=I+(V^(x|~z))+O[0]+4096336452&4294967295,I=x+(M<<6&4294967295|M>>>26),M=z+(x^(I|~V))+O[7]+1126891415&4294967295,z=I+(M<<10&4294967295|M>>>22),M=V+(I^(z|~x))+O[14]+2878612391&4294967295,V=z+(M<<15&4294967295|M>>>17),M=x+(z^(V|~I))+O[5]+4237533241&4294967295,x=V+(M<<21&4294967295|M>>>11),M=I+(V^(x|~z))+O[12]+1700485571&4294967295,I=x+(M<<6&4294967295|M>>>26),M=z+(x^(I|~V))+O[3]+2399980690&4294967295,z=I+(M<<10&4294967295|M>>>22),M=V+(I^(z|~x))+O[10]+4293915773&4294967295,V=z+(M<<15&4294967295|M>>>17),M=x+(z^(V|~I))+O[1]+2240044497&4294967295,x=V+(M<<21&4294967295|M>>>11),M=I+(V^(x|~z))+O[8]+1873313359&4294967295,I=x+(M<<6&4294967295|M>>>26),M=z+(x^(I|~V))+O[15]+4264355552&4294967295,z=I+(M<<10&4294967295|M>>>22),M=V+(I^(z|~x))+O[6]+2734768916&4294967295,V=z+(M<<15&4294967295|M>>>17),M=x+(z^(V|~I))+O[13]+1309151649&4294967295,x=V+(M<<21&4294967295|M>>>11),M=I+(V^(x|~z))+O[4]+4149444226&4294967295,I=x+(M<<6&4294967295|M>>>26),M=z+(x^(I|~V))+O[11]+3174756917&4294967295,z=I+(M<<10&4294967295|M>>>22),M=V+(I^(z|~x))+O[2]+718787259&4294967295,V=z+(M<<15&4294967295|M>>>17),M=x+(z^(V|~I))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+z&4294967295}i.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var x=I-this.blockSize,O=this.B,V=this.h,z=0;z<I;){if(V==0)for(;z<=x;)r(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<I;)if(O[V++]=R.charCodeAt(z++),V==this.blockSize){r(this,O),V=0;break}}else for(;z<I;)if(O[V++]=R[z++],V==this.blockSize){r(this,O),V=0;break}}this.h=V,this.o+=I},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var x=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=x&255,x/=256;for(this.u(R),R=Array(16),I=x=0;4>I;++I)for(var O=0;32>O;O+=8)R[x++]=this.g[I]>>>O&255;return R};function o(R,I){var x=u;return Object.prototype.hasOwnProperty.call(x,R)?x[R]:x[R]=I(R)}function a(R,I){this.h=I;for(var x=[],O=!0,V=R.length-1;0<=V;V--){var z=R[V]|0;O&&z==I||(x[V]=z,O=!1)}this.g=x}var u={};function d(R){return-128<=R&&128>R?o(R,function(I){return new a([I|0],0>I?-1:0)}):new a([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return v;if(0>R)return j(f(-R));for(var I=[],x=1,O=0;R>=x;O++)I[O]=R/x|0,x*=4294967296;return new a(I,0)}function _(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return j(_(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=f(Math.pow(I,8)),O=v,V=0;V<R.length;V+=8){var z=Math.min(8,R.length-V),M=parseInt(R.substring(V,V+z),I);8>z?(z=f(Math.pow(I,z)),O=O.j(z).add(f(M))):(O=O.j(x),O=O.add(f(M)))}return O}var v=d(0),w=d(1),T=d(16777216);t=a.prototype,t.m=function(){if(N(this))return-j(this).m();for(var R=0,I=1,x=0;x<this.g.length;x++){var O=this.i(x);R+=(0<=O?O:4294967296+O)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(A(this))return"0";if(N(this))return"-"+j(this).toString(R);for(var I=f(Math.pow(R,6)),x=this,O="";;){var V=H(x,I).g;x=P(x,V.j(I));var z=((0<x.g.length?x.g[0]:x.h)>>>0).toString(R);if(x=V,A(x))return z+O;for(;6>z.length;)z="0"+z;O=z+O}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function A(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function N(R){return R.h==-1}t.l=function(R){return R=P(this,R),N(R)?-1:A(R)?0:1};function j(R){for(var I=R.g.length,x=[],O=0;O<I;O++)x[O]=~R.g[O];return new a(x,~R.h).add(w)}t.abs=function(){return N(this)?j(this):this},t.add=function(R){for(var I=Math.max(this.g.length,R.g.length),x=[],O=0,V=0;V<=I;V++){var z=O+(this.i(V)&65535)+(R.i(V)&65535),M=(z>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);O=M>>>16,z&=65535,M&=65535,x[V]=M<<16|z}return new a(x,x[x.length-1]&-2147483648?-1:0)};function P(R,I){return R.add(j(I))}t.j=function(R){if(A(this)||A(R))return v;if(N(this))return N(R)?j(this).j(j(R)):j(j(this).j(R));if(N(R))return j(this.j(j(R)));if(0>this.l(T)&&0>R.l(T))return f(this.m()*R.m());for(var I=this.g.length+R.g.length,x=[],O=0;O<2*I;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<R.g.length;V++){var z=this.i(O)>>>16,M=this.i(O)&65535,Ke=R.i(V)>>>16,In=R.i(V)&65535;x[2*O+2*V]+=M*In,k(x,2*O+2*V),x[2*O+2*V+1]+=z*In,k(x,2*O+2*V+1),x[2*O+2*V+1]+=M*Ke,k(x,2*O+2*V+1),x[2*O+2*V+2]+=z*Ke,k(x,2*O+2*V+2)}for(O=0;O<I;O++)x[O]=x[2*O+1]<<16|x[2*O];for(O=I;O<2*I;O++)x[O]=0;return new a(x,0)};function k(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function b(R,I){this.g=R,this.h=I}function H(R,I){if(A(I))throw Error("division by zero");if(A(R))return new b(v,v);if(N(R))return I=H(j(R),I),new b(j(I.g),j(I.h));if(N(I))return I=H(R,j(I)),new b(j(I.g),I.h);if(30<R.g.length){if(N(R)||N(I))throw Error("slowDivide_ only works with positive integers.");for(var x=w,O=I;0>=O.l(R);)x=K(x),O=K(O);var V=X(x,1),z=X(O,1);for(O=X(O,2),x=X(x,2);!A(O);){var M=z.add(O);0>=M.l(R)&&(V=V.add(x),z=M),O=X(O,1),x=X(x,1)}return I=P(R,V.j(I)),new b(V,I)}for(V=v;0<=R.l(I);){for(x=Math.max(1,Math.floor(R.m()/I.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),z=f(x),M=z.j(I);N(M)||0<M.l(R);)x-=O,z=f(x),M=z.j(I);A(z)&&(z=w),V=V.add(z),R=P(R,M)}return new b(V,R)}t.A=function(R){return H(this,R).h},t.and=function(R){for(var I=Math.max(this.g.length,R.g.length),x=[],O=0;O<I;O++)x[O]=this.i(O)&R.i(O);return new a(x,this.h&R.h)},t.or=function(R){for(var I=Math.max(this.g.length,R.g.length),x=[],O=0;O<I;O++)x[O]=this.i(O)|R.i(O);return new a(x,this.h|R.h)},t.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),x=[],O=0;O<I;O++)x[O]=this.i(O)^R.i(O);return new a(x,this.h^R.h)};function K(R){for(var I=R.g.length+1,x=[],O=0;O<I;O++)x[O]=R.i(O)<<1|R.i(O-1)>>>31;return new a(x,R.h)}function X(R,I){var x=I>>5;I%=32;for(var O=R.g.length-x,V=[],z=0;z<O;z++)V[z]=0<I?R.i(z+x)>>>I|R.i(z+x+1)<<32-I:R.i(z+x);return new a(V,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,yT=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=_,Bs=a}).apply(typeof ny<"u"?ny:typeof self<"u"?self:typeof window<"u"?window:{});var Rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wT,Al,ET,Jc,xp,TT,ST,IT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,y){return c==Array.prototype||c==Object.prototype||(c[m]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rc=="object"&&Rc];for(var m=0;m<c.length;++m){var y=c[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(c,m){if(m)e:{var y=i;c=c.split(".");for(var S=0;S<c.length-1;S++){var F=c[S];if(!(F in y))break e;y=y[F]}c=c[c.length-1],S=y[c],m=m(S),m!=S&&m!=null&&e(y,c,{configurable:!0,writable:!0,value:m})}}function o(c,m){c instanceof String&&(c+="");var y=0,S=!1,F={next:function(){if(!S&&y<c.length){var q=y++;return{value:m(q,c[q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}r("Array.prototype.values",function(c){return c||function(){return o(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function f(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function _(c,m,y){return c.call.apply(c.bind,arguments)}function v(c,m,y){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,S),c.apply(m,F)}}return function(){return c.apply(m,arguments)}}function w(c,m,y){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,w.apply(null,arguments)}function T(c,m){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function A(c,m){function y(){}y.prototype=m.prototype,c.aa=m.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(S,F,q){for(var ie=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ie[$e-2]=arguments[$e];return m.prototype[F].apply(S,ie)}}function N(c){const m=c.length;if(0<m){const y=Array(m);for(let S=0;S<m;S++)y[S]=c[S];return y}return[]}function j(c,m){for(let y=1;y<arguments.length;y++){const S=arguments[y];if(d(S)){const F=c.length||0,q=S.length||0;c.length=F+q;for(let ie=0;ie<q;ie++)c[F+ie]=S[ie]}else c.push(S)}}class P{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function k(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=u.navigator;return c&&(c=c.userAgent)?c:""}function H(c){return H[" "](c),c}H[" "]=function(){};var K=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function X(c,m,y){for(const S in c)m.call(y,c[S],S,c)}function R(c,m){for(const y in c)m.call(void 0,c[y],y,c)}function I(c){const m={};for(const y in c)m[y]=c[y];return m}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,m){let y,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(y in S)c[y]=S[y];for(let q=0;q<x.length;q++)y=x[q],Object.prototype.hasOwnProperty.call(S,y)&&(c[y]=S[y])}}function V(c){var m=1;c=c.split(":");const y=[];for(;0<m&&c.length;)y.push(c.shift()),m--;return c.length&&y.push(c.join(":")),y}function z(c){u.setTimeout(()=>{throw c},0)}function M(){var c=me;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class Ke{constructor(){this.h=this.g=null}add(m,y){const S=In.get();S.set(m,y),this.h?this.h.next=S:this.g=S,this.h=S}}var In=new P(()=>new Ue,c=>c.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Mt,G=!1,me=new Ke,te=()=>{const c=u.Promise.resolve(void 0);Mt=()=>{c.then(fe)}};var fe=()=>{for(var c;c=M();){try{c.h.call(c.g)}catch(y){z(y)}var m=In;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}G=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};u.addEventListener("test",y,m),u.removeEventListener("test",y,m)}catch{}return c}();function U(c,m){if(Ae.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(K){e:{try{H(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else y=="mouseover"?m=c.fromElement:y=="mouseout"&&(m=c.toElement);this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ne[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&U.aa.h.call(this)}}A(U,Ae);var ne={2:"touch",3:"pen",4:"mouse"};U.prototype.h=function(){U.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),Re=0;function tt(c,m,y,S,F){this.listener=c,this.proxy=null,this.src=m,this.type=y,this.capture=!!S,this.ha=F,this.key=++Re,this.da=this.fa=!1}function st(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function qe(c){this.src=c,this.g={},this.h=0}qe.prototype.add=function(c,m,y,S,F){var q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);var ie=Me(c,m,S,F);return-1<ie?(m=c[ie],y||(m.fa=!1)):(m=new tt(m,this.src,q,!!S,F),m.fa=y,c.push(m)),m};function Le(c,m){var y=m.type;if(y in c.g){var S=c.g[y],F=Array.prototype.indexOf.call(S,m,void 0),q;(q=0<=F)&&Array.prototype.splice.call(S,F,1),q&&(st(m),c.g[y].length==0&&(delete c.g[y],c.h--))}}function Me(c,m,y,S){for(var F=0;F<c.length;++F){var q=c[F];if(!q.da&&q.listener==m&&q.capture==!!y&&q.ha==S)return F}return-1}var Ce="closure_lm_"+(1e6*Math.random()|0),ot={};function ke(c,m,y,S,F){if(Array.isArray(m)){for(var q=0;q<m.length;q++)ke(c,m[q],y,S,F);return null}return y=co(y),c&&c[ue]?c.K(m,y,f(S)?!!S.capture:!1,F):Ze(c,m,y,!1,S,F)}function Ze(c,m,y,S,F,q){if(!m)throw Error("Invalid event type");var ie=f(F)?!!F.capture:!!F,$e=mr(c);if($e||(c[Ce]=$e=new qe(c)),y=$e.add(m,y,S,ie,q),y.proxy)return y;if(S=nt(),y.proxy=S,S.src=c,S.listener=y,c.addEventListener)Ne||(F=ie),F===void 0&&(F=!1),c.addEventListener(m.toString(),S,F);else if(c.attachEvent)c.attachEvent(Dn(m.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function nt(){function c(y){return m.call(c.src,c.listener,y)}const m=Ui;return c}function pt(c,m,y,S,F){if(Array.isArray(m))for(var q=0;q<m.length;q++)pt(c,m[q],y,S,F);else S=f(S)?!!S.capture:!!S,y=co(y),c&&c[ue]?(c=c.i,m=String(m).toString(),m in c.g&&(q=c.g[m],y=Me(q,y,S,F),-1<y&&(st(q[y]),Array.prototype.splice.call(q,y,1),q.length==0&&(delete c.g[m],c.h--)))):c&&(c=mr(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Me(m,y,S,F)),(y=-1<c?m[c]:null)&&Cn(y))}function Cn(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[ue])Le(m.i,c);else{var y=c.type,S=c.proxy;m.removeEventListener?m.removeEventListener(y,S,c.capture):m.detachEvent?m.detachEvent(Dn(y),S):m.addListener&&m.removeListener&&m.removeListener(S),(y=mr(m))?(Le(y,c),y.h==0&&(y.src=null,m[Ce]=null)):st(c)}}}function Dn(c){return c in ot?ot[c]:ot[c]="on"+c}function Ui(c,m){if(c.da)c=!0;else{m=new U(m,this);var y=c.listener,S=c.ha||c.src;c.fa&&Cn(c),c=y.call(S,m)}return c}function mr(c){return c=c[Ce],c instanceof qe?c:null}var ds="__closure_events_fn_"+(1e9*Math.random()>>>0);function co(c){return typeof c=="function"?c:(c[ds]||(c[ds]=function(m){return c.handleEvent(m)}),c[ds])}function mt(){we.call(this),this.i=new qe(this),this.M=this,this.F=null}A(mt,we),mt.prototype[ue]=!0,mt.prototype.removeEventListener=function(c,m,y,S){pt(this,c,m,y,S)};function Rt(c,m){var y,S=c.F;if(S)for(y=[];S;S=S.F)y.push(S);if(c=c.M,S=m.type||m,typeof m=="string")m=new Ae(m,c);else if(m instanceof Ae)m.target=m.target||c;else{var F=m;m=new Ae(S,c),O(m,F)}if(F=!0,y)for(var q=y.length-1;0<=q;q--){var ie=m.g=y[q];F=_i(ie,S,!0,m)&&F}if(ie=m.g=c,F=_i(ie,S,!0,m)&&F,F=_i(ie,S,!1,m)&&F,y)for(q=0;q<y.length;q++)ie=m.g=y[q],F=_i(ie,S,!1,m)&&F}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var y=c.g[m],S=0;S<y.length;S++)st(y[S]);delete c.g[m],c.h--}}this.F=null},mt.prototype.K=function(c,m,y,S){return this.i.add(String(c),m,!1,y,S)},mt.prototype.L=function(c,m,y,S){return this.i.add(String(c),m,!0,y,S)};function _i(c,m,y,S){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,q=0;q<m.length;++q){var ie=m[q];if(ie&&!ie.da&&ie.capture==y){var $e=ie.listener,Lt=ie.ha||ie.src;ie.fa&&Le(c.i,ie),F=$e.call(Lt,S)!==!1&&F}}return F&&!S.defaultPrevented}function ho(c,m,y){if(typeof c=="function")y&&(c=w(c,y));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:u.setTimeout(c,m||0)}function fs(c){c.g=ho(()=>{c.g=null,c.i&&(c.i=!1,fs(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Q extends we{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:fs(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function re(c){we.call(this),this.h=c,this.g={}}A(re,we);var ae=[];function le(c){X(c.g,function(m,y){this.g.hasOwnProperty(y)&&Cn(m)},c),c.g={}}re.prototype.N=function(){re.aa.N.call(this),le(this)},re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=u.JSON.stringify,De=u.JSON.parse,Je=class{stringify(c){return u.JSON.stringify(c,void 0)}parse(c){return u.JSON.parse(c,void 0)}};function Ge(){}Ge.prototype.h=null;function Vn(c){return c.h||(c.h=c.i())}function ei(){}var ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gr(){Ae.call(this,"d")}A(gr,Ae);function ps(){Ae.call(this,"c")}A(ps,Ae);var gt={},ni=null;function fo(){return ni=ni||new mt}gt.La="serverreachability";function zu(c){Ae.call(this,gt.La,c)}A(zu,Ae);function ms(c){const m=fo();Rt(m,new zu(m))}gt.STAT_EVENT="statevent";function po(c,m){Ae.call(this,gt.STAT_EVENT,c),this.stat=m}A(po,Ae);function qt(c){const m=fo();Rt(m,new po(m,c))}gt.Ma="timingevent";function Uu(c,m){Ae.call(this,gt.Ma,c),this.size=m}A(Uu,Ae);function gs(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){c()},m)}function _s(){this.g=!0}_s.prototype.xa=function(){this.g=!1};function zn(c,m,y,S,F,q){c.info(function(){if(c.g)if(q)for(var ie="",$e=q.split("&"),Lt=0;Lt<$e.length;Lt++){var Be=$e[Lt].split("=");if(1<Be.length){var et=Be[0];Be=Be[1];var vt=et.split("_");ie=2<=vt.length&&vt[1]=="type"?ie+(et+"="+Be+"&"):ie+(et+"=redacted&")}}else ie=null;else ie=q;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+m+`
`+y+`
`+ie})}function he(c,m,y,S,F,q,ie){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+m+`
`+y+`
`+q+" "+ie})}function Fi(c,m,y,S){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Bu(c,y)+(S?" "+S:"")})}function Fu(c,m){c.info(function(){return"TIMEOUT: "+m})}_s.prototype.info=function(){};function Bu(c,m){if(!c.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var S=y[c];if(!(2>S.length)){var F=S[1];if(Array.isArray(F)&&!(1>F.length)){var q=F[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ie=1;ie<F.length;ie++)F[ie]=""}}}}return de(y)}catch{return m}}var vs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},go;function ii(){}A(ii,Ge),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},go=new ii;function ri(c,m,y,S){this.j=c,this.i=m,this.l=y,this.R=S||1,this.U=new re(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ju}function ju(){this.i=null,this.g="",this.h=!1}var Hu={},za={};function Ua(c,m,y){c.L=1,c.v=Fn(It(m)),c.m=y,c.P=!0,Fa(c,null)}function Fa(c,m){c.F=Date.now(),vo(c),c.A=It(c.v);var y=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),Gu(y.i,"t",S),c.C=0,y=c.j.J,c.h=new ju,c.g=Yu(c.j,y?m:null,!c.m),0<c.O&&(c.M=new Q(w(c.Y,c,c.g),c.O)),m=c.U,y=c.g,S=c.ca;var F="readystatechange";Array.isArray(F)||(F&&(ae[0]=F.toString()),F=ae);for(var q=0;q<F.length;q++){var ie=ke(y,F[q],S||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),ms(),zn(c.i,c.u,c.A,c.l,c.R,c.m)}ri.prototype.ca=function(c){c=c.target;const m=this.M;m&&ln(c)==3?m.j():this.Y(c)},ri.prototype.Y=function(c){try{if(c==this.g)e:{const vt=ln(this.g);var m=this.g.Ba();const Sr=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||nl(this.g)))){this.J||vt!=4||m==7||(m==8||0>=Sr?ms(3):ms(2)),Ba(this);var y=this.g.Z();this.X=y;t:if(Wu(this)){var S=nl(this.g);c="";var F=S.length,q=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bi(this),ys(this);var ie="";break t}this.h.i=new u.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,c+=this.h.i.decode(S[m],{stream:!(q&&m==F-1)});S.length=0,this.h.g+=c,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=y==200,he(this.i,this.u,this.A,this.l,this.R,vt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Lt=this.g;if(($e=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k($e)){var Be=$e;break t}}Be=null}if(y=Be)Fi(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ws(this,y);else{this.o=!1,this.s=3,qt(12),Bi(this),ys(this);break e}}if(this.P){y=!0;let kt;for(;!this.J&&this.C<ie.length;)if(kt=_o(this,ie),kt==za){vt==4&&(this.s=4,qt(14),y=!1),Fi(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==Hu){this.s=4,qt(15),Fi(this.i,this.l,ie,"[Invalid Chunk]"),y=!1;break}else Fi(this.i,this.l,kt,null),ws(this,kt);if(Wu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||ie.length!=0||this.h.h||(this.s=1,qt(16),y=!1),this.o=this.o&&y,!y)Fi(this.i,this.l,ie,"[Invalid Chunked Response]"),Bi(this),ys(this);else if(0<ie.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Po(et),et.M=!0,qt(11))}}else Fi(this.i,this.l,ie,null),ws(this,ie);vt==4&&Bi(this),this.o&&!this.J&&(vt==4?rl(this.j,this):(this.o=!1,vo(this)))}else Rd(this.g),y==400&&0<ie.indexOf("Unknown SID")?(this.s=3,qt(12)):(this.s=0,qt(13)),Bi(this),ys(this)}}}catch{}finally{}};function Wu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function _o(c,m){var y=c.C,S=m.indexOf(`
`,y);return S==-1?za:(y=Number(m.substring(y,S)),isNaN(y)?Hu:(S+=1,S+y>m.length?za:(m=m.slice(S,S+y),c.C=S+y,m)))}ri.prototype.cancel=function(){this.J=!0,Bi(this)};function vo(c){c.S=Date.now()+c.I,qu(c,c.I)}function qu(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=gs(w(c.ba,c),m)}function Ba(c){c.B&&(u.clearTimeout(c.B),c.B=null)}ri.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Fu(this.i,this.A),this.L!=2&&(ms(),qt(17)),Bi(this),this.s=2,ys(this)):qu(this,this.S-c)};function ys(c){c.j.G==0||c.J||rl(c.j,c)}function Bi(c){Ba(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,le(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function ws(c,m){try{var y=c.j;if(y.G!=0&&(y.g==c||Ve(y.h,c))){if(!c.K&&Ve(y.h,c)&&y.G==3){try{var S=y.Da.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)xo(y),Co(y);else break e;ko(y),qt(18)}}else y.za=F[1],0<y.za-y.T&&37500>F[2]&&y.F&&y.v==0&&!y.C&&(y.C=gs(w(y.Za,y),6e3));if(1>=_r(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Gi(y,11)}else if((c.K||y.g==c)&&xo(y),!k(m))for(F=y.Da.g.parse(m),m=0;m<F.length;m++){let Be=F[m];if(y.T=Be[0],Be=Be[1],y.G==2)if(Be[0]=="c"){y.K=Be[1],y.ia=Be[2];const et=Be[3];et!=null&&(y.la=et,y.j.info("VER="+y.la));const vt=Be[4];vt!=null&&(y.Aa=vt,y.j.info("SVER="+y.Aa));const Sr=Be[5];Sr!=null&&typeof Sr=="number"&&0<Sr&&(S=1.5*Sr,y.L=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;const kt=c.g;if(kt){const Lo=kt.g?kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lo){var q=S.h;q.g||Lo.indexOf("spdy")==-1&&Lo.indexOf("quic")==-1&&Lo.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(it(q,q.h),q.h=null))}if(S.D){const wi=kt.g?kt.g.getResponseHeader("X-HTTP-Session-Id"):null;wi&&(S.ya=wi,Ee(S.I,S.D,wi))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),S=y;var ie=c;if(S.qa=Ro(S,S.J?S.ia:null,S.W),ie.K){Ts(S.h,ie);var $e=ie,Lt=S.L;Lt&&($e.I=Lt),$e.B&&(Ba($e),vo($e)),S.g=ie}else ai(S);0<y.i.length&&Tr(y)}else Be[0]!="stop"&&Be[0]!="close"||Gi(y,7);else y.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Gi(y,7):Io(y):Be[0]!="noop"&&y.l&&y.l.ta(Be),y.v=0)}}ms(4)}catch{}}var Es=class{constructor(c,m){this.g=c,this.map=m}};function ja(c){this.l=c||10,u.PerformanceNavigationTiming?(c=u.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ha(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _r(c){return c.h?1:c.g?c.g.size:0}function Ve(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function it(c,m){c.g?c.g.add(m):c.h=m}function Ts(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}ja.prototype.cancel=function(){if(this.i=ji(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ji(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const y of c.g.values())m=m.concat(y.D);return m}return N(c.i)}function vr(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(d(c)){for(var m=[],y=c.length,S=0;S<y;S++)m.push(c[S]);return m}m=[],y=0;for(S in c)m[y++]=c[S];return m}function Wa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(d(c)||typeof c=="string"){var m=[];c=c.length;for(var y=0;y<c;y++)m.push(y);return m}m=[],y=0;for(const S in c)m[y++]=S;return m}}}function Pe(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(d(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var y=Wa(c),S=vr(c),F=S.length,q=0;q<F;q++)m.call(void 0,S[q],y&&y[q],c)}var ct=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qa(c,m){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var S=c[y].indexOf("="),F=null;if(0<=S){var q=c[y].substring(0,S);F=c[y].substring(S+1)}else q=c[y];m(q,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Un(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Un){this.h=c.h,yo(this,c.j),this.o=c.o,this.g=c.g,Hi(this,c.s),this.l=c.l;var m=c.i,y=new Wi;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),vi(this,y),this.m=c.m}else c&&(m=String(c).match(ct))?(this.h=!1,yo(this,m[1]||"",!0),this.o=si(m[2]||""),this.g=si(m[3]||"",!0),Hi(this,m[4]),this.l=si(m[5]||"",!0),vi(this,m[6]||"",!0),this.m=si(m[7]||"")):(this.h=!1,this.i=new Wi(null,this.h))}Un.prototype.toString=function(){var c=[],m=this.j;m&&c.push(oi(m,yr,!0),":");var y=this.g;return(y||m=="file")&&(c.push("//"),(m=this.o)&&c.push(oi(m,yr,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(oi(y,y.charAt(0)=="/"?Ka:Za,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",oi(y,$a)),c.join("")};function It(c){return new Un(c)}function yo(c,m,y){c.j=y?si(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Hi(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function vi(c,m,y){m instanceof Wi?(c.i=m,Bn(c.i,c.h)):(y||(m=oi(m,wo)),c.i=new Wi(m,c.h))}function Ee(c,m,y){c.i.set(m,y)}function Fn(c){return Ee(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function si(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function oi(c,m,y){return typeof c=="string"?(c=encodeURI(c).replace(m,Ga),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ga(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var yr=/[#\/\?@]/g,Za=/[#\?:]/g,Ka=/[#\?]/g,wo=/[#\?@]/g,$a=/#/g;function Wi(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function kn(c){c.g||(c.g=new Map,c.h=0,c.i&&qa(c.i,function(m,y){c.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Wi.prototype,t.add=function(c,m){kn(this),this.i=null,c=_e(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(m),this.h+=1,this};function Qa(c,m){kn(c),m=_e(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Eo(c,m){return kn(c),m=_e(c,m),c.g.has(m)}t.forEach=function(c,m){kn(this),this.g.forEach(function(y,S){y.forEach(function(F){c.call(m,F,S,this)},this)},this)},t.na=function(){kn(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let S=0;S<m.length;S++){const F=c[S];for(let q=0;q<F.length;q++)y.push(m[S])}return y},t.V=function(c){kn(this);let m=[];if(typeof c=="string")Eo(this,c)&&(m=m.concat(this.g.get(_e(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)m=m.concat(c[y])}return m},t.set=function(c,m){return kn(this),this.i=null,c=_e(this,c),Eo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function Gu(c,m,y){Qa(c,m),0<y.length&&(c.i=null,c.g.set(_e(c,m),N(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var S=m[y];const q=encodeURIComponent(String(S)),ie=this.V(S);for(S=0;S<ie.length;S++){var F=q;ie[S]!==""&&(F+="="+encodeURIComponent(String(ie[S]))),c.push(F)}}return this.i=c.join("&")};function _e(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Bn(c,m){m&&!c.j&&(kn(c),c.i=null,c.g.forEach(function(y,S){var F=S.toLowerCase();S!=F&&(Qa(this,S),Gu(this,F,y))},c)),c.j=m}function Ye(c,m){const y=new _s;if(u.Image){const S=new Image;S.onload=T(jn,y,"TestLoadImage: loaded",!0,m,S),S.onerror=T(jn,y,"TestLoadImage: error",!1,m,S),S.onabort=T(jn,y,"TestLoadImage: abort",!1,m,S),S.ontimeout=T(jn,y,"TestLoadImage: timeout",!1,m,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else m(!1)}function Zu(c,m){const y=new _s,S=new AbortController,F=setTimeout(()=>{S.abort(),jn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:S.signal}).then(q=>{clearTimeout(F),q.ok?jn(y,"TestPingServer: ok",!0,m):jn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),jn(y,"TestPingServer: error",!1,m)})}function jn(c,m,y,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(y)}catch{}}function Xa(){this.g=new Je}function Ja(c,m,y){const S=y||"";try{Pe(c,function(F,q){let ie=F;f(F)&&(ie=de(F)),m.push(S+q+"="+encodeURIComponent(ie))})}catch(F){throw m.push(S+"type="+encodeURIComponent("_badmap")),F}}function Hn(c){this.l=c.Ub||null,this.j=c.eb||!1}A(Hn,Ge),Hn.prototype.g=function(){return new wr(this.l,this.j)},Hn.prototype.i=function(c){return function(){return c}}({});function wr(c,m){mt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(wr,mt),t=wr.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Pn(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||u).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_t(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Er(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Er(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?_t(this):Pn(this),this.readyState==3&&Er(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,_t(this))},t.Qa=function(c){this.g&&(this.response=c,_t(this))},t.ga=function(){this.g&&_t(this)};function _t(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Pn(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=m.next();return c.join(`\r
`)};function Pn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ya(c){let m="";return X(c,function(y,S){m+=S,m+=":",m+=y,m+=`\r
`}),m}function To(c,m,y){e:{for(S in y){var S=!1;break e}S=!0}S||(y=Ya(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Ee(c,m,y))}function ht(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(ht,mt);var Ku=/^https?$/i,el=["POST","PUT"];t=ht.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():go.g(),this.v=this.o?Vn(this.o):Vn(go),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(q){$u(this,q);return}if(c=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)y.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const q of S.keys())y.set(q,S.get(q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(q=>q.toLowerCase()=="content-type"),F=u.FormData&&c instanceof u.FormData,!(0<=Array.prototype.indexOf.call(el,m,void 0))||S||F||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ie]of y)this.g.setRequestHeader(q,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gn(this),this.u=!0,this.g.send(c),this.u=!1}catch(q){$u(this,q)}};function $u(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,tl(c),So(c)}function tl(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Rt(this,"complete"),Rt(this,"abort"),So(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),So(this,!0)),ht.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?be(this):this.bb())},t.bb=function(){be(this)};function be(c){if(c.h&&typeof a<"u"&&(!c.v[1]||ln(c)!=4||c.Z()!=2)){if(c.u&&ln(c)==4)ho(c.Ea,0,c);else if(Rt(c,"readystatechange"),ln(c)==4){c.h=!1;try{const ie=c.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var S;if(S=ie===0){var F=String(c.D).match(ct)[1]||null;!F&&u.self&&u.self.location&&(F=u.self.location.protocol.slice(0,-1)),S=!Ku.test(F?F.toLowerCase():"")}y=S}if(y)Rt(c,"complete"),Rt(c,"success");else{c.m=6;try{var q=2<ln(c)?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.Z()+"]",tl(c)}}finally{So(c)}}}}function So(c,m){if(c.g){gn(c);const y=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||Rt(c,"ready");try{y.onreadystatechange=S}catch{}}}function gn(c){c.I&&(u.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function ln(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),De(m)}};function nl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Rd(c){const m={};c=(c.g&&2<=ln(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(k(c[S]))continue;var y=V(c[S]);const F=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const q=m[F]||[];m[F]=q,q.push(y)}R(m,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qi(c,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||m}function Qu(c){this.Aa=0,this.i=[],this.j=new _s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qi("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qi("baseRetryDelayMs",5e3,c),this.cb=qi("retryDelaySeedMs",1e4,c),this.Wa=qi("forwardChannelMaxRetries",2,c),this.wa=qi("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ja(c&&c.concurrentRequestLimit),this.Da=new Xa,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Qu.prototype,t.la=8,t.G=1,t.connect=function(c,m,y,S){qt(0),this.W=c,this.H=m||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.I=Ro(this,null,this.W),Tr(this)};function Io(c){if(Xu(c),c.G==3){var m=c.U++,y=It(c.I);if(Ee(y,"SID",c.K),Ee(y,"RID",m),Ee(y,"TYPE","terminate"),Ss(c,y),m=new ri(c,c.j,m),m.L=2,m.v=Fn(It(y)),y=!1,u.navigator&&u.navigator.sendBeacon)try{y=u.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&u.Image&&(new Image().src=m.v,y=!0),y||(m.g=Yu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),vo(m)}Ju(c)}function Co(c){c.g&&(Po(c),c.g.cancel(),c.g=null)}function Xu(c){Co(c),c.u&&(u.clearTimeout(c.u),c.u=null),xo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&u.clearTimeout(c.s),c.s=null)}function Tr(c){if(!Ha(c.h)&&!c.s){c.s=!0;var m=c.Ga;Mt||te(),G||(Mt(),G=!0),me.add(m,c),c.B=0}}function Ld(c,m){return _r(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=gs(w(c.Ga,c,m),sl(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const F=new ri(this,this.j,c);let q=this.o;if(this.S&&(q?(q=I(q),O(q,this.S)):q=this.S),this.m!==null||this.O||(F.H=q,q=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=il(this,F,m),y=It(this.I),Ee(y,"RID",c),Ee(y,"CVER",22),this.D&&Ee(y,"X-HTTP-Session-Id",this.D),Ss(this,y),q&&(this.O?m="headers="+encodeURIComponent(String(Ya(q)))+"&"+m:this.m&&To(y,this.m,q)),it(this.h,F),this.Ua&&Ee(y,"TYPE","init"),this.P?(Ee(y,"$req",m),Ee(y,"SID","null"),F.T=!0,Ua(F,y,null)):Ua(F,y,m),this.G=2}}else this.G==3&&(c?An(this,c):this.i.length==0||Ha(this.h)||An(this))};function An(c,m){var y;m?y=m.l:y=c.U++;const S=It(c.I);Ee(S,"SID",c.K),Ee(S,"RID",y),Ee(S,"AID",c.T),Ss(c,S),c.m&&c.o&&To(S,c.m,c.o),y=new ri(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),m&&(c.i=m.D.concat(c.i)),m=il(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),it(c.h,y),Ua(y,S,m)}function Ss(c,m){c.H&&X(c.H,function(y,S){Ee(m,S,y)}),c.l&&Pe({},function(y,S){Ee(m,S,y)})}function il(c,m,y){y=Math.min(c.i.length,y);var S=c.l?w(c.l.Na,c.l,c):null;e:{var F=c.i;let q=-1;for(;;){const ie=["count="+y];q==-1?0<y?(q=F[0].g,ie.push("ofs="+q)):q=0:ie.push("ofs="+q);let $e=!0;for(let Lt=0;Lt<y;Lt++){let Be=F[Lt].g;const et=F[Lt].map;if(Be-=q,0>Be)q=Math.max(0,F[Lt].g-100),$e=!1;else try{Ja(et,ie,"req"+Be+"_")}catch{S&&S(et)}}if($e){S=ie.join("&");break e}}}return c=c.i.splice(0,y),m.D=c,S}function ai(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Mt||te(),G||(Mt(),G=!0),me.add(m,c),c.v=0}}function ko(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=gs(w(c.Fa,c),sl(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Ao(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=gs(w(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qt(10),Co(this),Ao(this))};function Po(c){c.A!=null&&(u.clearTimeout(c.A),c.A=null)}function Ao(c){c.g=new ri(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=It(c.qa);Ee(m,"RID","rpc"),Ee(m,"SID",c.K),Ee(m,"AID",c.T),Ee(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ee(m,"TO",c.ja),Ee(m,"TYPE","xmlhttp"),Ss(c,m),c.m&&c.o&&To(m,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Fn(It(m)),y.m=null,y.P=!0,Fa(y,c)}t.Za=function(){this.C!=null&&(this.C=null,Co(this),ko(this),qt(19))};function xo(c){c.C!=null&&(u.clearTimeout(c.C),c.C=null)}function rl(c,m){var y=null;if(c.g==m){xo(c),Po(c),c.g=null;var S=2}else if(Ve(c.h,m))y=m.D,Ts(c.h,m),S=1;else return;if(c.G!=0){if(m.o)if(S==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var F=c.B;S=fo(),Rt(S,new Uu(S,y)),Tr(c)}else ai(c);else if(F=m.s,F==3||F==0&&0<m.X||!(S==1&&Ld(c,m)||S==2&&ko(c)))switch(y&&0<y.length&&(m=c.h,m.i=m.i.concat(y)),F){case 1:Gi(c,5);break;case 4:Gi(c,10);break;case 3:Gi(c,6);break;default:Gi(c,2)}}}function sl(c,m){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*m}function Gi(c,m){if(c.j.info("Error code "+m),m==2){var y=w(c.fb,c),S=c.Xa;const F=!S;S=new Un(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||yo(S,"https"),Fn(S),F?Ye(S.toString(),y):Zu(S.toString(),y)}else qt(2);c.G=0,c.l&&c.l.sa(m),Ju(c),Xu(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function Ju(c){if(c.G=0,c.ka=[],c.l){const m=ji(c.h);(m.length!=0||c.i.length!=0)&&(j(c.ka,m),j(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function Ro(c,m,y){var S=y instanceof Un?It(y):new Un(y);if(S.g!="")m&&(S.g=m+"."+S.g),Hi(S,S.s);else{var F=u.location;S=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var q=new Un(null);S&&yo(q,S),m&&(q.g=m),F&&Hi(q,F),y&&(q.l=y),S=q}return y=c.D,m=c.ya,y&&m&&Ee(S,y,m),Ee(S,"VER",c.la),Ss(c,S),S}function Yu(c,m,y){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new ht(new Hn({eb:y})):new ht(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ol(){}t=ol.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Is(){}Is.prototype.g=function(c,m){return new Ft(c,m)};function Ft(c,m){mt.call(this),this.g=new Qu(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!k(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!k(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Wn(this)}A(Ft,mt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Io(this.g)},Ft.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=de(c),c=y);m.i.push(new Es(m.Ya++,c)),m.G==3&&Tr(m)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Io(this.g),delete this.g,Ft.aa.N.call(this)};function yi(c){gr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const y in m){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}A(yi,gr);function ec(){ps.call(this),this.status=1}A(ec,ps);function Wn(c){this.g=c}A(Wn,ol),Wn.prototype.ua=function(){Rt(this.g,"a")},Wn.prototype.ta=function(c){Rt(this.g,new yi(c))},Wn.prototype.sa=function(c){Rt(this.g,new ec)},Wn.prototype.ra=function(){Rt(this.g,"b")},Is.prototype.createWebChannel=Is.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,IT=function(){return new Is},ST=function(){return fo()},TT=gt,xp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,Jc=vs,mo.COMPLETE="complete",ET=mo,ei.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Al=ei,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,wT=ht}).apply(typeof Rc<"u"?Rc:typeof self<"u"?self:typeof window<"u"?window:{});const iy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new Qm("@firebase/firestore");function yl(){return Ys.logLevel}function ce(t,...e){if(Ys.logLevel<=Fe.DEBUG){const n=e.map(lg);Ys.debug(`Firestore (${ba}): ${t}`,...n)}}function dr(t,...e){if(Ys.logLevel<=Fe.ERROR){const n=e.map(lg);Ys.error(`Firestore (${ba}): ${t}`,...n)}}function ya(t,...e){if(Ys.logLevel<=Fe.WARN){const n=e.map(lg);Ys.warn(`Firestore (${ba}): ${t}`,...n)}}function lg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t="Unexpected state"){const e=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: `+t;throw dr(e),new Error(e)}function Xe(t,e){t||Te()}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class LL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bL{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new js;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new js,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await r(this.currentUser)})},u=d=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new js)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Xe(typeof i.accessToken=="string"),new CT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new nn(e)}}class OL{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class NL{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new OL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ML{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Xe(this.o===void 0);const i=o=>{o.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,ce("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xe(typeof n.token=="string"),this.R=n.token,new ML(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=VL(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function We(t,e){return t<e?-1:t>e?1:0}function wa(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new pe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ut(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ut(0,0))}static max(){return new Se(new Ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,i){n===void 0?n=0:n>e.length&&Te(),i===void 0?i=e.length-n:i>e.length-n&&Te(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return fu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fu?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ft extends fu{construct(e,n,i){return new ft(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const zL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends fu{construct(e,n,i){return new Kt(e,n,i)}static isValidIdentifier(e){return zL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Kt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new pe(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new pe(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new pe(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new pe(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(n)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(ft.fromString(e))}static fromName(e){return new ge(ft.fromString(e).popFirst(5))}static empty(){return new ge(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new ft(e.slice()))}}function UL(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(i===1e9?new Ut(n+1,0):new Ut(n,i));return new ts(r,ge.empty(),e)}function FL(t){return new ts(t.readTime,t.key,-1)}class ts{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ts(Se.min(),ge.empty(),-1)}static max(){return new ts(Se.max(),ge.empty(),-1)}}function BL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==jL)throw t;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,i)=>{n(e)})}static reject(e){return new J((n,i)=>{i(e)})}static waitFor(e){return new J((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},d=>i(d))}),a=!0,o===r&&n()})}static or(e){let n=J.resolve(!1);for(const i of e)n=n.next(r=>r?J.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new J((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(_=>{a[f]=_,++u,u===o&&i(a)},_=>r(_))}})}static doWhile(e,n){return new J((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function WL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ou(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ug.oe=-1;function gd(t){return t==null}function Mh(t){return t===0&&1/t==-1/0}function qL(t){return typeof t=="number"&&Number.isInteger(t)&&!Mh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Oa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new Tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Zt.RED,this.left=r??Zt.EMPTY,this.right=o??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Zt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Zt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sy(this.data.getIterator())}getIteratorFrom(e){return new sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qt(this.comparator);return n.data=e,n}}class sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new di([])}unionWith(e){let n=new Qt(Kt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new di(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new AT("Invalid base64 string: "+o):o}}(e);return new Jt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const GL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(t){if(Xe(!!t),typeof t=="string"){let e=0;const n=GL.exec(t);if(Xe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pt(t.seconds),nanos:Pt(t.nanos)}}function Pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function eo(t){return typeof t=="string"?Jt.fromBase64String(t):Jt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hg(t){const e=t.mapValue.fields.__previous_value__;return cg(e)?hg(e):e}function pu(t){const e=ns(t.mapValue.fields.__local_write_time__.timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,n,i,r,o,a,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f}}class mu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc={mapValue:{}};function to(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cg(t)?4:$L(t)?9007199254740991:KL(t)?10:11:Te()}function Di(t,e){if(t===e)return!0;const n=to(t);if(n!==to(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pu(t).isEqual(pu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=ns(r.timestampValue),u=ns(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return eo(r.bytesValue).isEqual(eo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Pt(r.geoPointValue.latitude)===Pt(o.geoPointValue.latitude)&&Pt(r.geoPointValue.longitude)===Pt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Pt(r.integerValue)===Pt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=Pt(r.doubleValue),u=Pt(o.doubleValue);return a===u?Mh(a)===Mh(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return wa(t.arrayValue.values||[],e.arrayValue.values||[],Di);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(ry(a)!==ry(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!Di(a[d],u[d])))return!1;return!0}(t,e);default:return Te()}}function gu(t,e){return(t.values||[]).find(n=>Di(n,e))!==void 0}function Ea(t,e){if(t===e)return 0;const n=to(t),i=to(e);if(n!==i)return We(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=Pt(o.integerValue||o.doubleValue),d=Pt(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(t,e);case 3:return oy(t.timestampValue,e.timestampValue);case 4:return oy(pu(t),pu(e));case 5:return We(t.stringValue,e.stringValue);case 6:return function(o,a){const u=eo(o),d=eo(a);return u.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),d=a.split("/");for(let f=0;f<u.length&&f<d.length;f++){const _=We(u[f],d[f]);if(_!==0)return _}return We(u.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=We(Pt(o.latitude),Pt(a.latitude));return u!==0?u:We(Pt(o.longitude),Pt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ay(t.arrayValue,e.arrayValue);case 10:return function(o,a){var u,d,f,_;const v=o.fields||{},w=a.fields||{},T=(u=v.value)===null||u===void 0?void 0:u.arrayValue,A=(d=w.value)===null||d===void 0?void 0:d.arrayValue,N=We(((f=T==null?void 0:T.values)===null||f===void 0?void 0:f.length)||0,((_=A==null?void 0:A.values)===null||_===void 0?void 0:_.length)||0);return N!==0?N:ay(T,A)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===bc.mapValue&&a===bc.mapValue)return 0;if(o===bc.mapValue)return 1;if(a===bc.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=a.fields||{},_=Object.keys(f);d.sort(),_.sort();for(let v=0;v<d.length&&v<_.length;++v){const w=We(d[v],_[v]);if(w!==0)return w;const T=Ea(u[d[v]],f[_[v]]);if(T!==0)return T}return We(d.length,_.length)}(t.mapValue,e.mapValue);default:throw Te()}}function oy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=ns(t),i=ns(e),r=We(n.seconds,i.seconds);return r!==0?r:We(n.nanos,i.nanos)}function ay(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Ea(n[r],i[r]);if(o)return o}return We(n.length,i.length)}function Ta(t){return Rp(t)}function Rp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ns(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return eo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=Rp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Rp(n.fields[a])}`;return r+"}"}(t.mapValue):Te()}function Lp(t){return!!t&&"integerValue"in t}function dg(t){return!!t&&"arrayValue"in t}function ly(t){return!!t&&"nullValue"in t}function uy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yc(t){return!!t&&"mapValue"in t}function KL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function jl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Oa(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=jl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $L(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Yc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(n)}setAll(e){let n=Kt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=jl(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Yc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Di(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Yc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Oa(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Kn(jl(this.value))}}function xT(t){const e=[];return Oa(t.fields,(n,i)=>{const r=new Kt([n]);if(Yc(i)){const o=xT(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new sn(e,0,Se.min(),Se.min(),Se.min(),Kn.empty(),0)}static newFoundDocument(e,n,i,r){return new sn(e,1,n,Se.min(),i,r,0)}static newNoDocument(e,n){return new sn(e,2,n,Se.min(),Se.min(),Kn.empty(),0)}static newUnknownDocument(e,n){return new sn(e,3,n,Se.min(),Se.min(),Kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function cy(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ge.comparator(ge.fromName(a.referenceValue),n.key):i=Ea(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function hy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Di(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n="asc"){this.field=e,this.dir=n}}function QL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{}class Vt extends RT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new JL(e,n,i):n==="array-contains"?new t1(e,i):n==="in"?new n1(e,i):n==="not-in"?new i1(e,i):n==="array-contains-any"?new r1(e,i):new Vt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new YL(e,i):new e1(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ea(n,this.value)):n!==null&&to(this.value)===to(n)&&this.matchesComparison(Ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vi extends RT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Vi(e,n)}matches(e){return LT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function LT(t){return t.op==="and"}function bT(t){return XL(t)&&LT(t)}function XL(t){for(const e of t.filters)if(e instanceof Vi)return!1;return!0}function bp(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+Ta(t.value);if(bT(t))return t.filters.map(e=>bp(e)).join(",");{const e=t.filters.map(n=>bp(n)).join(",");return`${t.op}(${e})`}}function OT(t,e){return t instanceof Vt?function(i,r){return r instanceof Vt&&i.op===r.op&&i.field.isEqual(r.field)&&Di(i.value,r.value)}(t,e):t instanceof Vi?function(i,r){return r instanceof Vi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&OT(a,r.filters[u]),!0):!1}(t,e):void Te()}function NT(t){return t instanceof Vt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ta(n.value)}`}(t):t instanceof Vi?function(n){return n.op.toString()+" {"+n.getFilters().map(NT).join(" ,")+"}"}(t):"Filter"}class JL extends Vt{constructor(e,n,i){super(e,n,i),this.key=ge.fromName(i.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class YL extends Vt{constructor(e,n){super(e,"in",n),this.keys=MT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class e1 extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=MT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function MT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ge.fromName(i.referenceValue))}class t1 extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dg(n)&&gu(n.arrayValue,this.value)}}class n1 extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gu(this.value.arrayValue,n)}}class i1 extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!gu(this.value.arrayValue,n)}}class r1 extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>gu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.ue=null}}function dy(t,e=null,n=[],i=[],r=null,o=null,a=null){return new s1(t,e,n,i,r,o,a)}function fg(t){const e=Ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>bp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),gd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ta(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ta(i)).join(",")),e.ue=n}return e.ue}function pg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hy(t.startAt,e.startAt)&&hy(t.endAt,e.endAt)}function Op(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function o1(t,e,n,i,r,o,a,u){return new _d(t,e,n,i,r,o,a,u)}function mg(t){return new _d(t)}function fy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function a1(t){return t.collectionGroup!==null}function Hl(t){const e=Ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Qt(Kt.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Vh(o,i))}),n.has(Kt.keyField().canonicalString())||e.ce.push(new Vh(Kt.keyField(),i))}return e.ce}function bi(t){const e=Ie(t);return e.le||(e.le=l1(e,Hl(t))),e.le}function l1(t,e){if(t.limitType==="F")return dy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Vh(r.field,o)});const n=t.endAt?new Dh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Dh(t.startAt.position,t.startAt.inclusive):null;return dy(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Np(t,e,n){return new _d(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vd(t,e){return pg(bi(t),bi(e))&&t.limitType===e.limitType}function DT(t){return`${fg(bi(t))}|lt:${t.limitType}`}function Uo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>NT(r)).join(", ")}]`),gd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ta(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ta(r)).join(",")),`Target(${i})`}(bi(t))}; limitType=${t.limitType})`}function yd(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ge.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Hl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,d){const f=cy(a,u,d);return a.inclusive?f<=0:f<0}(i.startAt,Hl(i),r)||i.endAt&&!function(a,u,d){const f=cy(a,u,d);return a.inclusive?f>=0:f>0}(i.endAt,Hl(i),r))}(t,e)}function u1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function VT(t){return(e,n)=>{let i=!1;for(const r of Hl(t)){const o=c1(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function c1(t,e,n){const i=t.field.isKeyField()?ge.comparator(e.key,n.key):function(o,a,u){const d=a.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Ea(d,f):Te()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Oa(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return PT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=new Tt(ge.comparator);function fr(){return h1}const zT=new Tt(ge.comparator);function xl(...t){let e=zT;for(const n of t)e=e.insert(n.key,n);return e}function UT(t){let e=zT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function zs(){return Wl()}function FT(){return Wl()}function Wl(){return new Na(t=>t.toString(),(t,e)=>t.isEqual(e))}const d1=new Tt(ge.comparator),f1=new Qt(ge.comparator);function ze(...t){let e=f1;for(const n of t)e=e.add(n);return e}const p1=new Qt(We);function m1(){return p1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mh(e)?"-0":e}}function BT(t){return{integerValue:""+t}}function g1(t,e){return qL(e)?BT(e):gg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){this._=void 0}}function _1(t,e,n){return t instanceof zh?function(r,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&cg(o)&&(o=hg(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof _u?HT(t,e):t instanceof vu?WT(t,e):function(r,o){const a=jT(r,o),u=py(a)+py(r.Pe);return Lp(a)&&Lp(r.Pe)?BT(u):gg(r.serializer,u)}(t,e)}function v1(t,e,n){return t instanceof _u?HT(t,e):t instanceof vu?WT(t,e):n}function jT(t,e){return t instanceof Uh?function(i){return Lp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class zh extends wd{}class _u extends wd{constructor(e){super(),this.elements=e}}function HT(t,e){const n=qT(e);for(const i of t.elements)n.some(r=>Di(r,i))||n.push(i);return{arrayValue:{values:n}}}class vu extends wd{constructor(e){super(),this.elements=e}}function WT(t,e){let n=qT(e);for(const i of t.elements)n=n.filter(r=>!Di(r,i));return{arrayValue:{values:n}}}class Uh extends wd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function py(t){return Pt(t.integerValue||t.doubleValue)}function qT(t){return dg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function y1(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof _u&&r instanceof _u||i instanceof vu&&r instanceof vu?wa(i.elements,r.elements,Di):i instanceof Uh&&r instanceof Uh?Di(i.Pe,r.Pe):i instanceof zh&&r instanceof zh}(t.transform,e.transform)}class w1{constructor(e,n){this.version=e,this.transformResults=n}}class Oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Oi}static exists(e){return new Oi(void 0,e)}static updateTime(e){return new Oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ed{}function GT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _g(t.key,Oi.none()):new Nu(t.key,t.data,Oi.none());{const n=t.data,i=Kn.empty();let r=new Qt(Kt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new ao(t.key,i,new di(r.toArray()),Oi.none())}}function E1(t,e,n){t instanceof Nu?function(r,o,a){const u=r.value.clone(),d=gy(r.fieldTransforms,o,a.transformResults);u.setAll(d),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ao?function(r,o,a){if(!eh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=gy(r.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(ZT(r)),d.setAll(u),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ql(t,e,n,i){return t instanceof Nu?function(o,a,u,d){if(!eh(o.precondition,a))return u;const f=o.value.clone(),_=_y(o.fieldTransforms,d,a);return f.setAll(_),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof ao?function(o,a,u,d){if(!eh(o.precondition,a))return u;const f=_y(o.fieldTransforms,d,a),_=a.data;return _.setAll(ZT(o)),_.setAll(f),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(o,a,u){return eh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function T1(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=jT(i.transform,r||null);o!=null&&(n===null&&(n=Kn.empty()),n.set(i.field,o))}return n||null}function my(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&wa(i,r,(o,a)=>y1(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nu extends Ed{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ao extends Ed{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ZT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function gy(t,e,n){const i=new Map;Xe(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,v1(a,u,n[r]))}return i}function _y(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,_1(o,a,e))}return i}class _g extends Ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S1 extends Ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&E1(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ql(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ql(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=FT();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const d=GT(a,u);d!==null&&i.set(r.key,d),a.isValidDocument()||a.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&wa(this.mutations,e.mutations,(n,i)=>my(n,i))&&wa(this.baseMutations,e.baseMutations,(n,i)=>my(n,i))}}class vg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Xe(e.mutations.length===i.length);let r=function(){return d1}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new vg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,je;function P1(t){switch(t){default:return Te();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function KT(t){if(t===void 0)return dr("GRPC error has no .code"),Y.UNKNOWN;switch(t){case Ot.OK:return Y.OK;case Ot.CANCELLED:return Y.CANCELLED;case Ot.UNKNOWN:return Y.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return Y.INTERNAL;case Ot.UNAVAILABLE:return Y.UNAVAILABLE;case Ot.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Ot.NOT_FOUND:return Y.NOT_FOUND;case Ot.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Ot.ABORTED:return Y.ABORTED;case Ot.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Ot.DATA_LOSS:return Y.DATA_LOSS;default:return Te()}}(je=Ot||(Ot={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=new Bs([4294967295,4294967295],0);function vy(t){const e=A1().encode(t),n=new yT;return n.update(e),new Uint8Array(n.digest())}function yy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Bs([n,i],0),new Bs([r,o],0)]}class yg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Rl(`Invalid padding: ${n}`);if(i<0)throw new Rl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bs.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Bs.fromNumber(i)));return r.compare(x1)===1&&(r=new Bs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=vy(e),[i,r]=yy(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new yg(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=vy(e),[i,r]=yy(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Td(Se.min(),r,new Tt(We),fr(),ze())}}class Mu{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Mu(i,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class $T{constructor(e,n){this.targetId=e,this.me=n}}class QT{constructor(e,n,i=Jt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class wy{constructor(){this.fe=0,this.ge=Ty(),this.pe=Jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ze(),n=ze(),i=ze();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Te()}}),new Mu(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=Ty()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class R1{constructor(e){this.Le=e,this.Be=new Map,this.ke=fr(),this.qe=Ey(),this.Qe=new Tt(We)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(Op(o))if(i===0){const a=new ge(o.path);this.Ue(n,a,sn.newNoDocument(a,Se.min()))}else Xe(i===1);else{const a=this.Ye(n);if(a!==i){const u=this.Ze(e),d=u?this.Xe(u,e,a):1;if(d!==0){this.je(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=eo(i).toUint8Array()}catch(d){if(d instanceof AT)return ya("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new yg(a,r,o)}catch(d){return ya(d instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ie===0?null:u}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,a)=>{const u=this.Je(a);if(u){if(o.current&&Op(u.target)){const d=new ge(u.target.path);this.ke.get(d)!==null||this.it(a,d)||this.Ue(a,d,sn.newNoDocument(d,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let i=ze();this.qe.forEach((o,a)=>{let u=!0;a.forEachWhile(d=>{const f=this.Je(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const r=new Td(e,n,this.Qe,this.ke,i);return this.ke=fr(),this.qe=Ey(),this.Qe=new Tt(We),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new wy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Qt(We),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new wy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ey(){return new Tt(ge.comparator)}function Ty(){return new Tt(ge.comparator)}const L1={asc:"ASCENDING",desc:"DESCENDING"},b1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},O1={and:"AND",or:"OR"};class N1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mp(t,e){return t.useProto3Json||gd(e)?e:{value:e}}function Fh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function M1(t,e){return Fh(t,e.toTimestamp())}function Ni(t){return Xe(!!t),Se.fromTimestamp(function(n){const i=ns(n);return new Ut(i.seconds,i.nanos)}(t))}function wg(t,e){return Dp(t,e).canonicalString()}function Dp(t,e){const n=function(r){return new ft(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function JT(t){const e=ft.fromString(t);return Xe(iS(e)),e}function Vp(t,e){return wg(t.databaseId,e.path)}function _f(t,e){const n=JT(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(eS(n))}function YT(t,e){return wg(t.databaseId,e)}function D1(t){const e=JT(t);return e.length===4?ft.emptyPath():eS(e)}function zp(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eS(t){return Xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Sy(t,e,n){return{name:Vp(t,e),fields:n.value.mapValue.fields}}function V1(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,_){return f.useProto3Json?(Xe(_===void 0||typeof _=="string"),Jt.fromBase64String(_||"")):(Xe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Jt.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const _=f.code===void 0?Y.UNKNOWN:KT(f.code);return new pe(_,f.message||"")}(a);n=new QT(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=_f(t,i.document.name),o=Ni(i.document.updateTime),a=i.document.createTime?Ni(i.document.createTime):Se.min(),u=new Kn({mapValue:{fields:i.document.fields}}),d=sn.newFoundDocument(r,o,a,u),f=i.targetIds||[],_=i.removedTargetIds||[];n=new th(f,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=_f(t,i.document),o=i.readTime?Ni(i.readTime):Se.min(),a=sn.newNoDocument(r,o),u=i.removedTargetIds||[];n=new th([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=_f(t,i.document),o=i.removedTargetIds||[];n=new th([],o,r,null)}else{if(!("filter"in e))return Te();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new k1(r,o),u=i.targetId;n=new $T(u,a)}}return n}function z1(t,e){let n;if(e instanceof Nu)n={update:Sy(t,e.key,e.value)};else if(e instanceof _g)n={delete:Vp(t,e.key)};else if(e instanceof ao)n={update:Sy(t,e.key,e.data),updateMask:Z1(e.fieldMask)};else{if(!(e instanceof S1))return Te();n={verify:Vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof zh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof _u)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof vu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Uh)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw Te()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:M1(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Te()}(t,e.precondition)),n}function U1(t,e){return t&&t.length>0?(Xe(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?Ni(r.updateTime):Ni(o);return a.isEqual(Se.min())&&(a=Ni(o)),new w1(a,r.transformResults||[])}(n,e))):[]}function F1(t,e){return{documents:[YT(t,e.path)]}}function B1(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=YT(t,r);const o=function(f){if(f.length!==0)return nS(Vi.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(_=>function(w){return{field:Fo(w.field),direction:W1(w.dir)}}(_))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Mp(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function j1(t){let e=D1(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Xe(i===1);const _=n.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let o=[];n.where&&(o=function(v){const w=tS(v);return w instanceof Vi&&bT(w)?w.getFilters():[w]}(n.where));let a=[];n.orderBy&&(a=function(v){return v.map(w=>function(A){return new Vh(Bo(A.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(w))}(n.orderBy));let u=null;n.limit&&(u=function(v){let w;return w=typeof v=="object"?v.value:v,gd(w)?null:w}(n.limit));let d=null;n.startAt&&(d=function(v){const w=!!v.before,T=v.values||[];return new Dh(T,w)}(n.startAt));let f=null;return n.endAt&&(f=function(v){const w=!v.before,T=v.values||[];return new Dh(T,w)}(n.endAt)),o1(e,r,a,o,u,"F",d,f)}function H1(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Bo(n.unaryFilter.field);return Vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Bo(n.unaryFilter.field);return Vt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Bo(n.unaryFilter.field);return Vt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bo(n.unaryFilter.field);return Vt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(t):t.fieldFilter!==void 0?function(n){return Vt.create(Bo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vi.create(n.compositeFilter.filters.map(i=>tS(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Te()}}(n.compositeFilter.op))}(t):Te()}function W1(t){return L1[t]}function q1(t){return b1[t]}function G1(t){return O1[t]}function Fo(t){return{fieldPath:t.canonicalString()}}function Bo(t){return Kt.fromServerFormat(t.fieldPath)}function nS(t){return t instanceof Vt?function(n){if(n.op==="=="){if(uy(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NAN"}};if(ly(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uy(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NAN"}};if(ly(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(n.field),op:q1(n.op),value:n.value}}}(t):t instanceof Vi?function(n){const i=n.getFilters().map(r=>nS(r));return i.length===1?i[0]:{compositeFilter:{op:G1(n.op),filters:i}}}(t):Te()}function Z1(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,i,r,o=Se.min(),a=Se.min(),u=Jt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.ct=e}}function $1(t){const e=j1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Np(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this.un=new X1}addToCollectionParentIndex(e,n){return this.un.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(ts.min())}updateCollectionGroup(e,n,i){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class X1{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Qt(ft.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Qt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Sa(0)}static kn(){return new Sa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.changes=new Na(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?J.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&ql(i.mutation,r,di.empty(),Ut.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ze()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ze()){const r=zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=xl();return o.forEach((u,d)=>{a=a.insert(u,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=zs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ze()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=fr();const a=Wl(),u=function(){return Wl()}();return n.forEach((d,f)=>{const _=i.get(f.key);r.has(f.key)&&(_===void 0||_.mutation instanceof ao)?o=o.insert(f.key,f):_!==void 0?(a.set(f.key,_.mutation.getFieldMask()),ql(_.mutation,f,_.mutation.getFieldMask(),Ut.now())):a.set(f.key,di.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,_)=>a.set(f,_)),n.forEach((f,_)=>{var v;return u.set(f,new Y1(_,(v=a.get(f))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,n){const i=Wl();let r=new Tt((a,u)=>a-u),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let _=i.get(d)||di.empty();_=u.applyToLocalView(f,_),i.set(d,_);const v=(r.get(u.batchId)||ze()).add(d);r=r.insert(u.batchId,v)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,_=d.value,v=FT();_.forEach(w=>{if(!o.has(w)){const T=GT(n.get(w),i.get(w));T!==null&&v.set(w,T),o=o.add(w)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,v))}return J.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ge.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):a1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):J.resolve(zs());let u=-1,d=o;return a.next(f=>J.forEach(f,(_,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(_)?J.resolve():this.remoteDocumentCache.getEntry(e,_).next(w=>{d=d.insert(_,w)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,ze())).next(_=>({batchId:u,changes:UT(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(i=>{let r=xl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=xl();return this.indexManager.getCollectionParents(e,o).next(u=>J.forEach(u,d=>{const f=function(v,w){return new _d(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(_=>{_.forEach((v,w)=>{a=a.insert(v,w)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((d,f)=>{const _=f.getKey();a.get(_)===null&&(a=a.insert(_,sn.newInvalidDocument(_)))});let u=xl();return a.forEach((d,f)=>{const _=o.get(d);_!==void 0&&ql(_.mutation,f,di.empty(),Ut.now()),yd(n,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return J.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ni(r.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:$1(r.bundledQuery),readTime:Ni(r.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.overlays=new Tt(ge.comparator),this.Ir=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const i=zs();return J.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),J.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),J.resolve()}getOverlaysForCollection(e,n,i){const r=zs(),o=n.length+1,a=new ge(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return J.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Tt((f,_)=>f-_);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let _=o.get(f.largestBatchId);_===null&&(_=zs(),o=o.insert(f.largestBatchId,_)),_.set(f.getKey(),f)}}const u=zs(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,_)=>u.set(f,_)),!(u.size()>=r)););return J.resolve(u)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new C1(n,i));let o=this.Ir.get(n);o===void 0&&(o=ze(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(){this.Tr=new Qt(jt.Er),this.dr=new Qt(jt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new jt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new jt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new ge(new ft([])),i=new jt(n,e),r=new jt(n,e+1),o=[];return this.dr.forEachInRange([i,r],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ge(new ft([])),i=new jt(n,e),r=new jt(n,e+1);let o=ze();return this.dr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new jt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class jt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ge.comparator(e.key,n.key)||We(e.wr,n.wr)}static Ar(e,n){return We(e.wr,n.wr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Qt(jt.Er)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new I1(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.br=this.br.add(new jt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return J.resolve(a)}lookupMutationBatch(e,n){return J.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),o=r<0?0:r;return J.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new jt(n,0),r=new jt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],a=>{const u=this.Dr(a.wr);o.push(u)}),J.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Qt(We);return n.forEach(r=>{const o=new jt(r,0),a=new jt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],u=>{i=i.add(u.wr)})}),J.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ge.isDocumentKey(o)||(o=o.child(""));const a=new jt(new ge(o),0);let u=new Qt(We);return this.br.forEachWhile(d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(d.wr)),!0)},a),J.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return J.forEach(n.mutations,r=>{const o=new jt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new jt(n,0),r=this.br.firstAfterOrEqual(i);return J.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.Mr=e,this.docs=function(){return new Tt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return J.resolve(i?i.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let i=fr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():sn.newInvalidDocument(r))}),J.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=fr();const a=n.path,u=new ge(a.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:_}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||BL(FL(_),i)<=0||(r.has(_.key)||yd(n,_))&&(o=o.insert(_.key,_.mutableCopy()))}return J.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Te()}Or(e,n){return J.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new ob(this)}getSize(e){return J.resolve(this.size)}}class ob extends J1{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),J.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.persistence=e,this.Nr=new Na(n=>fg(n),pg),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Eg,this.targetCount=0,this.kr=Sa.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),J.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Sa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Kn(n),J.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),J.waitFor(o).next(()=>r)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return J.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),J.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),J.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return J.resolve(i)}containsKey(e,n){return J.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ug(0),this.Kr=!1,this.Kr=!0,this.$r=new ib,this.referenceDelegate=e(this),this.Ur=new ab(this),this.indexManager=new Q1,this.remoteDocumentCache=function(r){return new sb(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new K1(n),this.Gr=new tb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new rb(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ce("MemoryPersistence","Starting transaction:",e);const r=new ub(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(e,n){return J.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class ub extends HL{constructor(e){super(),this.currentSequenceNumber=e}}class Tg{constructor(e){this.persistence=e,this.Jr=new Eg,this.Yr=null}static Zr(e){return new Tg(e)}get Xr(){if(this.Yr)return this.Yr;throw Te()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),J.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),J.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,i=>{const r=ge.fromPath(i);return this.ei(e,r).next(o=>{o||n.removeEntry(r,Se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return J.or([()=>J.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ze(),r=ze();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Sg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return JP()?8:WL(an())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.Yi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new cb;return this.Xi(e,n,a).next(u=>{if(o.result=u,this.zi)return this.es(e,n,a,u.size)})}).next(()=>o.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(yl()<=Fe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(yl()<=Fe.DEBUG&&ce("QueryEngine","Query:",Uo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(yl()<=Fe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(n))):J.resolve())}Yi(e,n){if(fy(n))return J.resolve(null);let i=bi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Np(n,null,"F"),i=bi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=ze(...o);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(d=>{const f=this.ts(n,u);return this.ns(n,f,a,d.readTime)?this.Yi(e,Np(n,null,"F")):this.rs(e,f,n,d)}))})))}Zi(e,n,i,r){return fy(n)||r.isEqual(Se.min())?J.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const a=this.ts(n,o);return this.ns(n,a,i,r)?J.resolve(null):(yl()<=Fe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Uo(n)),this.rs(e,a,n,UL(r,-1)).next(u=>u))})}ts(e,n){let i=new Qt(VT(e));return n.forEach((r,o)=>{yd(e,o)&&(i=i.add(o))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,n,i){return yl()<=Fe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Uo(n)),this.Ji.getDocumentsMatchingQuery(e,n,ts.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Tt(We),this._s=new Na(o=>fg(o),pg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eb(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function fb(t,e,n,i){return new db(t,e,n,i)}async function rS(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let d=ze();for(const f of r){a.push(f.batchId);for(const _ of f.mutations)d=d.add(_.key)}for(const f of o){u.push(f.batchId);for(const _ of f.mutations)d=d.add(_.key)}return n.localDocuments.getDocuments(i,d).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:u}))})})}function pb(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,d,f,_){const v=f.batch,w=v.keys();let T=J.resolve();return w.forEach(A=>{T=T.next(()=>_.getEntry(d,A)).next(N=>{const j=f.docVersions.get(A);Xe(j!==null),N.version.compareTo(j)<0&&(v.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),_.addEntry(N)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(d,v))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let d=ze();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function sS(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function mb(t,e){const n=Ie(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const u=[];e.targetChanges.forEach((_,v)=>{const w=r.get(v);if(!w)return;u.push(n.Ur.removeMatchingKeys(o,_.removedDocuments,v).next(()=>n.Ur.addMatchingKeys(o,_.addedDocuments,v)));let T=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(Jt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):_.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(_.resumeToken,i)),r=r.insert(v,T),function(N,j,P){return N.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(w,T,_)&&u.push(n.Ur.updateTargetData(o,T))});let d=fr(),f=ze();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),u.push(gb(o,a,e.documentUpdates).next(_=>{d=_.Ps,f=_.Is})),!i.isEqual(Se.min())){const _=n.Ur.getLastRemoteSnapshotVersion(o).next(v=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(_)}return J.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.os=r,o))}function gb(t,e,n){let i=ze(),r=ze();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=fr();return n.forEach((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),d.isNoDocument()&&d.version.isEqual(Se.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):ce("LocalStore","Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{Ps:a,Is:r}})}function _b(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function vb(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(o=>o?(r=o,J.resolve(r)):n.Ur.allocateTargetId(i).next(a=>(r=new Ur(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Up(t,e,n){const i=Ie(t),r=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Ou(a))throw a;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function Iy(t,e,n){const i=Ie(t);let r=Se.min(),o=ze();return i.persistence.runTransaction("Execute query","readwrite",a=>function(d,f,_){const v=Ie(d),w=v._s.get(_);return w!==void 0?J.resolve(v.os.get(w)):v.Ur.getTargetData(f,_)}(i,a,bi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(a,u.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(a,e,n?r:Se.min(),n?o:ze())).next(u=>(yb(i,u1(e),u),{documents:u,Ts:o})))}function yb(t,e,n){let i=t.us.get(e)||Se.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class Cy{constructor(){this.activeTargetIds=m1()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wb{constructor(){this.so=new Cy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Cy,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc=null;function vf(){return Oc===null?Oc=function(){return 268435456+Math.round(2147483648*Math.random())}():Oc++,"0x"+Oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class Ib extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,a){const u=vf(),d=this.xo(n,i.toUriEncodedString());ce("RestConnection",`Sending RPC '${n}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,a),this.No(n,d,f,r).then(_=>(ce("RestConnection",`Received RPC '${n}' ${u}: `,_),_),_=>{throw ya("RestConnection",`RPC '${n}' ${u} failed with error: `,_,"url: ",d,"request:",r),_})}Lo(n,i,r,o,a,u){return this.Mo(n,i,r,o,a)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}xo(n,i){const r=Tb[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const o=vf();return new Promise((a,u)=>{const d=new wT;d.setWithCredentials(!0),d.listenOnce(ET.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Jc.NO_ERROR:const _=d.getResponseJson();ce(tn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),a(_);break;case Jc.TIMEOUT:ce(tn,`RPC '${e}' ${o} timed out`),u(new pe(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:const v=d.getStatus();if(ce(tn,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const T=w==null?void 0:w.error;if(T&&T.status&&T.message){const A=function(j){const P=j.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(P)>=0?P:Y.UNKNOWN}(T.status);u(new pe(A,T.message))}else u(new pe(Y.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new pe(Y.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{ce(tn,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);ce(tn,`RPC '${e}' ${o} sending request:`,r),d.send(n,"POST",f,i,15)})}Bo(e,n,i){const r=vf(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=IT(),u=ST(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const _=o.join("");ce(tn,`Creating RPC '${e}' stream ${r}: ${_}`,d);const v=a.createWebChannel(_,d);let w=!1,T=!1;const A=new Sb({Io:j=>{T?ce(tn,`Not sending because RPC '${e}' stream ${r} is closed:`,j):(w||(ce(tn,`Opening RPC '${e}' stream ${r} transport.`),v.open(),w=!0),ce(tn,`RPC '${e}' stream ${r} sending:`,j),v.send(j))},To:()=>v.close()}),N=(j,P,k)=>{j.listen(P,b=>{try{k(b)}catch(H){setTimeout(()=>{throw H},0)}})};return N(v,Al.EventType.OPEN,()=>{T||(ce(tn,`RPC '${e}' stream ${r} transport opened.`),A.yo())}),N(v,Al.EventType.CLOSE,()=>{T||(T=!0,ce(tn,`RPC '${e}' stream ${r} transport closed`),A.So())}),N(v,Al.EventType.ERROR,j=>{T||(T=!0,ya(tn,`RPC '${e}' stream ${r} transport errored:`,j),A.So(new pe(Y.UNAVAILABLE,"The operation could not be completed")))}),N(v,Al.EventType.MESSAGE,j=>{var P;if(!T){const k=j.data[0];Xe(!!k);const b=k,H=b.error||((P=b[0])===null||P===void 0?void 0:P.error);if(H){ce(tn,`RPC '${e}' stream ${r} received error:`,H);const K=H.status;let X=function(x){const O=Ot[x];if(O!==void 0)return KT(O)}(K),R=H.message;X===void 0&&(X=Y.INTERNAL,R="Unknown error status: "+K+" with message "+H.message),T=!0,A.So(new pe(X,R)),v.close()}else ce(tn,`RPC '${e}' stream ${r} received:`,k),A.bo(k)}}),N(u,TT.STAT_EVENT,j=>{j.stat===xp.PROXY?ce(tn,`RPC '${e}' stream ${r} detected buffering proxy`):j.stat===xp.NOPROXY&&ce(tn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function yf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(t){return new N1(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&ce("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n,i,r,o,a,u,d){this.ui=e,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new oS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(dr(n.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new pe(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Cb extends aS{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=V1(this.serializer,e),i=function(o){if(!("targetChange"in o))return Se.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Se.min():a.readTime?Ni(a.readTime):Se.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=zp(this.serializer),n.addTarget=function(o,a){let u;const d=a.target;if(u=Op(d)?{documents:F1(o,d)}:{query:B1(o,d)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=XT(o,a.resumeToken);const f=Mp(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Se.min())>0){u.readTime=Fh(o,a.snapshotVersion.toTimestamp());const f=Mp(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=H1(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=zp(this.serializer),n.removeTarget=e,this.a_(n)}}class kb extends aS{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=U1(e.writeResults,e.commitTime),i=Ni(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=zp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>z1(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new pe(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Dp(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(Y.UNKNOWN,o.toString())})}Lo(e,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,Dp(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new pe(Y.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ab{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(dr(n),this.D_=!1):ce("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{i.enqueueAndForget(async()=>{lo(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await async function(d){const f=Ie(d);f.L_.add(4),await Du(f),f.q_.set("Unknown"),f.L_.delete(4),await Id(f)}(this))})}),this.q_=new Ab(i,r)}}async function Id(t){if(lo(t))for(const e of t.B_)await e(!0)}async function Du(t){for(const e of t.B_)await e(!1)}function lS(t,e){const n=Ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Pg(n)?kg(n):Ma(n).r_()&&Cg(n,e))}function Ig(t,e){const n=Ie(t),i=Ma(n);n.N_.delete(e),i.r_()&&uS(n,e),n.N_.size===0&&(i.r_()?i.o_():lo(n)&&n.q_.set("Unknown"))}function Cg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ma(t).A_(e)}function uS(t,e){t.Q_.xe(e),Ma(t).R_(e)}function kg(t){t.Q_=new R1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ma(t).start(),t.q_.v_()}function Pg(t){return lo(t)&&!Ma(t).n_()&&t.N_.size>0}function lo(t){return Ie(t).L_.size===0}function cS(t){t.Q_=void 0}async function Rb(t){t.q_.set("Online")}async function Lb(t){t.N_.forEach((e,n)=>{Cg(t,e)})}async function bb(t,e){cS(t),Pg(t)?(t.q_.M_(e),kg(t)):t.q_.set("Unknown")}async function Ob(t,e,n){if(t.q_.set("Online"),e instanceof QT&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.N_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.N_.delete(u),r.Q_.removeTarget(u))}(t,e)}catch(i){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Bh(t,i)}else if(e instanceof th?t.Q_.Ke(e):e instanceof $T?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Se.min()))try{const i=await sS(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Q_.rt(a);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.N_.get(f);_&&o.N_.set(f,_.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach((d,f)=>{const _=o.N_.get(d);if(!_)return;o.N_.set(d,_.withResumeToken(Jt.EMPTY_BYTE_STRING,_.snapshotVersion)),uS(o,d);const v=new Ur(_.target,d,f,_.sequenceNumber);Cg(o,v)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){ce("RemoteStore","Failed to raise snapshot:",i),await Bh(t,i)}}async function Bh(t,e,n){if(!Ou(e))throw e;t.L_.add(1),await Du(t),t.q_.set("Offline"),n||(n=()=>sS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ce("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Id(t)})}function hS(t,e){return e().catch(n=>Bh(t,n,e))}async function Cd(t){const e=Ie(t),n=is(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Nb(e);)try{const r=await _b(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,Mb(e,r)}catch(r){await Bh(e,r)}dS(e)&&fS(e)}function Nb(t){return lo(t)&&t.O_.length<10}function Mb(t,e){t.O_.push(e);const n=is(t);n.r_()&&n.V_&&n.m_(e.mutations)}function dS(t){return lo(t)&&!is(t).n_()&&t.O_.length>0}function fS(t){is(t).start()}async function Db(t){is(t).p_()}async function Vb(t){const e=is(t);for(const n of t.O_)e.m_(n.mutations)}async function zb(t,e,n){const i=t.O_.shift(),r=vg.from(i,e,n);await hS(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Cd(t)}async function Ub(t,e){e&&is(t).V_&&await async function(i,r){if(function(a){return P1(a)&&a!==Y.ABORTED}(r.code)){const o=i.O_.shift();is(i).s_(),await hS(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Cd(i)}}(t,e),dS(t)&&fS(t)}async function Py(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const i=lo(n);n.L_.add(3),await Du(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Id(n)}async function Fb(t,e){const n=Ie(t);e?(n.L_.delete(2),await Id(n)):e||(n.L_.add(2),await Du(n),n.q_.set("Unknown"))}function Ma(t){return t.K_||(t.K_=function(n,i,r){const o=Ie(n);return o.w_(),new Cb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:Rb.bind(null,t),Ro:Lb.bind(null,t),mo:bb.bind(null,t),d_:Ob.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Pg(t)?kg(t):t.q_.set("Unknown")):(await t.K_.stop(),cS(t))})),t.K_}function is(t){return t.U_||(t.U_=function(n,i,r){const o=Ie(n);return o.w_(),new kb(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Db.bind(null,t),mo:Ub.bind(null,t),f_:Vb.bind(null,t),g_:zb.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Cd(t)):(await t.U_.stop(),t.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new Ag(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xg(t,e){if(dr("AsyncQueue",`${e}: ${t}`),Ou(t))return new pe(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ge.comparator(n.key,i.key):(n,i)=>ge.comparator(n.key,i.key),this.keyedMap=xl(),this.sortedSet=new Tt(this.comparator)}static emptySet(e){return new ha(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ha)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ha;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this.W_=new Tt(ge.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ia{constructor(e,n,i,r,o,a,u,d,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ia(e,n,ha.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class jb{constructor(){this.queries=xy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Ie(n),o=r.queries;r.queries=xy(),o.forEach((a,u)=>{for(const d of u.j_)d.onError(i)})})(this,new pe(Y.ABORTED,"Firestore shutting down"))}}function xy(){return new Na(t=>DT(t),vd)}async function Hb(t,e){const n=Ie(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.H_()&&e.J_()&&(i=2):(o=new Bb,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(r,!0);break;case 1:o.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=xg(a,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Rg(n)}async function Wb(t,e){const n=Ie(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?r=e.J_()?0:1:!o.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function qb(t,e){const n=Ie(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.j_)u.X_(r)&&(i=!0);a.z_=r}}i&&Rg(n)}function Gb(t,e,n){const i=Ie(t),r=i.queries.get(e);if(r)for(const o of r.j_)o.onError(n);i.queries.delete(e)}function Rg(t){t.Y_.forEach(e=>{e.next()})}var Fp,Ry;(Ry=Fp||(Fp={})).ea="default",Ry.Cache="cache";class Zb{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ia(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.key=e}}class mS{constructor(e){this.key=e}}class Kb{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ze(),this.mutatedKeys=ze(),this.Aa=VT(e),this.Ra=new ha(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new Ay,r=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((_,v)=>{const w=r.get(_),T=yd(this.query,v)?v:null,A=!!w&&this.mutatedKeys.has(w.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let j=!1;w&&T?w.data.isEqual(T.data)?A!==N&&(i.track({type:3,doc:T}),j=!0):this.ga(w,T)||(i.track({type:2,doc:T}),j=!0,(d&&this.Aa(T,d)>0||f&&this.Aa(T,f)<0)&&(u=!0)):!w&&T?(i.track({type:0,doc:T}),j=!0):w&&!T&&(i.track({type:1,doc:w}),j=!0,(d||f)&&(u=!0)),j&&(T?(a=a.add(T),o=N?o.add(_):o.delete(_)):(a=a.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const _=this.query.limitType==="F"?a.last():a.first();a=a.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{Ra:a,fa:i,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((_,v)=>function(T,A){const N=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return N(T)-N(A)}(_.type,v.type)||this.Aa(_.doc,v.doc)),this.pa(i),r=r!=null&&r;const u=n&&!r?this.ya():[],d=this.da.size===0&&this.current&&!r?1:0,f=d!==this.Ea;return this.Ea=d,a.length!==0||f?{snapshot:new Ia(this.query,e.Ra,o,a,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ay,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ze(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new mS(i))}),this.da.forEach(i=>{e.has(i)||n.push(new pS(i))}),n}ba(e){this.Ta=e.Ts,this.da=ze();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ia.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class $b{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Qb{constructor(e){this.key=e,this.va=!1}}class Xb{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Na(u=>DT(u),vd),this.Ma=new Map,this.xa=new Set,this.Oa=new Tt(ge.comparator),this.Na=new Map,this.La=new Eg,this.Ba={},this.ka=new Map,this.qa=Sa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Jb(t,e,n=!0){const i=ES(t);let r;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=await gS(i,e,n,!0),r}async function Yb(t,e){const n=ES(t);await gS(n,e,!0,!1)}async function gS(t,e,n,i){const r=await vb(t.localStore,bi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await eO(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&lS(t.remoteStore,r),u}async function eO(t,e,n,i,r){t.Ka=(v,w,T)=>async function(N,j,P,k){let b=j.view.ma(P);b.ns&&(b=await Iy(N.localStore,j.query,!1).then(({documents:R})=>j.view.ma(R,b)));const H=k&&k.targetChanges.get(j.targetId),K=k&&k.targetMismatches.get(j.targetId)!=null,X=j.view.applyChanges(b,N.isPrimaryClient,H,K);return by(N,j.targetId,X.wa),X.snapshot}(t,v,w,T);const o=await Iy(t.localStore,e,!0),a=new Kb(e,o.Ts),u=a.ma(o.documents),d=Mu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,d);by(t,n,f.wa);const _=new $b(e,n,a);return t.Fa.set(e,_),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function tO(t,e,n){const i=Ie(t),r=i.Fa.get(e),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(a=>!vd(a,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Up(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ig(i.remoteStore,r.targetId),Bp(i,r.targetId)}).catch(bu)):(Bp(i,r.targetId),await Up(i.localStore,r.targetId,!0))}async function nO(t,e){const n=Ie(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ig(n.remoteStore,i.targetId))}async function iO(t,e,n){const i=cO(t);try{const r=await function(a,u){const d=Ie(a),f=Ut.now(),_=u.reduce((T,A)=>T.add(A.key),ze());let v,w;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let A=fr(),N=ze();return d.cs.getEntries(T,_).next(j=>{A=j,A.forEach((P,k)=>{k.isValidDocument()||(N=N.add(P))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,A)).next(j=>{v=j;const P=[];for(const k of u){const b=T1(k,v.get(k.key).overlayedDocument);b!=null&&P.push(new ao(k.key,b,xT(b.value.mapValue),Oi.exists(!0)))}return d.mutationQueue.addMutationBatch(T,f,P,u)}).next(j=>{w=j;const P=j.applyToLocalDocumentSet(v,N);return d.documentOverlayCache.saveOverlays(T,j.batchId,P)})}).then(()=>({batchId:w.batchId,changes:UT(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,d){let f=a.Ba[a.currentUser.toKey()];f||(f=new Tt(We)),f=f.insert(u,d),a.Ba[a.currentUser.toKey()]=f}(i,r.batchId,n),await Vu(i,r.changes),await Cd(i.remoteStore)}catch(r){const o=xg(r,"Failed to persist write");n.reject(o)}}async function _S(t,e){const n=Ie(t);try{const i=await mb(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Na.get(o);a&&(Xe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?Xe(a.va):r.removedDocuments.size>0&&(Xe(a.va),a.va=!1))}),await Vu(n,i,e)}catch(i){await bu(i)}}function Ly(t,e,n){const i=Ie(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((o,a)=>{const u=a.view.Z_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const d=Ie(a);d.onlineState=u;let f=!1;d.queries.forEach((_,v)=>{for(const w of v.j_)w.Z_(u)&&(f=!0)}),f&&Rg(d)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function rO(t,e,n){const i=Ie(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),o=r&&r.key;if(o){let a=new Tt(ge.comparator);a=a.insert(o,sn.newNoDocument(o,Se.min()));const u=ze().add(o),d=new Td(Se.min(),new Map,new Tt(We),a,u);await _S(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),Lg(i)}else await Up(i.localStore,e,!1).then(()=>Bp(i,e,n)).catch(bu)}async function sO(t,e){const n=Ie(t),i=e.batch.batchId;try{const r=await pb(n.localStore,e);yS(n,i,null),vS(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Vu(n,r)}catch(r){await bu(r)}}async function oO(t,e,n){const i=Ie(t);try{const r=await function(a,u){const d=Ie(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let _;return d.mutationQueue.lookupMutationBatch(f,u).next(v=>(Xe(v!==null),_=v.keys(),d.mutationQueue.removeMutationBatch(f,v))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,_,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,_)).next(()=>d.localDocuments.getDocuments(f,_))})}(i.localStore,e);yS(i,e,n),vS(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Vu(i,r)}catch(r){await bu(r)}}function vS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function yS(t,e,n){const i=Ie(t);let r=i.Ba[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Bp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||wS(t,i)})}function wS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ig(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Lg(t))}function by(t,e,n){for(const i of n)i instanceof pS?(t.La.addReference(i.key,e),aO(t,i)):i instanceof mS?(ce("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||wS(t,i.key)):Te()}function aO(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ce("SyncEngine","New document in limbo: "+n),t.xa.add(i),Lg(t))}function Lg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ge(ft.fromString(e)),i=t.qa.next();t.Na.set(i,new Qb(n)),t.Oa=t.Oa.insert(n,i),lS(t.remoteStore,new Ur(bi(mg(n.path)),i,"TargetPurposeLimboResolution",ug.oe))}}async function Vu(t,e,n){const i=Ie(t),r=[],o=[],a=[];i.Fa.isEmpty()||(i.Fa.forEach((u,d)=>{a.push(i.Ka(d,e,n).then(f=>{var _;if((f||n)&&i.isPrimaryClient){const v=f?!f.fromCache:(_=n==null?void 0:n.targetChanges.get(d.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(f){r.push(f);const v=Sg.Wi(d.targetId,f);o.push(v)}}))}),await Promise.all(a),i.Ca.d_(r),await async function(d,f){const _=Ie(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>J.forEach(f,w=>J.forEach(w.$i,T=>_.persistence.referenceDelegate.addReference(v,w.targetId,T)).next(()=>J.forEach(w.Ui,T=>_.persistence.referenceDelegate.removeReference(v,w.targetId,T)))))}catch(v){if(!Ou(v))throw v;ce("LocalStore","Failed to update sequence numbers: "+v)}for(const v of f){const w=v.targetId;if(!v.fromCache){const T=_.os.get(w),A=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(A);_.os=_.os.insert(w,N)}}}(i.localStore,o))}async function lO(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const i=await rS(n.localStore,e);n.currentUser=e,function(o,a){o.ka.forEach(u=>{u.forEach(d=>{d.reject(new pe(Y.CANCELLED,a))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vu(n,i.hs)}}function uO(t,e){const n=Ie(t),i=n.Na.get(e);if(i&&i.va)return ze().add(i.key);{let r=ze();const o=n.Ma.get(e);if(!o)return r;for(const a of o){const u=n.Fa.get(a);r=r.unionWith(u.view.Va)}return r}}function ES(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rO.bind(null,e),e.Ca.d_=qb.bind(null,e.eventManager),e.Ca.$a=Gb.bind(null,e.eventManager),e}function cO(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oO.bind(null,e),e}class jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return fb(this.persistence,new hb,e.initialUser,this.serializer)}Ga(e){return new lb(Tg.Zr,this.serializer)}Wa(e){return new wb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jh.provider={build:()=>new jh};class jp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ly(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lO.bind(null,this.syncEngine),await Fb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new jb}()}createDatastore(e){const n=Sd(e.databaseInfo.databaseId),i=function(o){return new Ib(o)}(e.databaseInfo);return function(o,a,u,d){return new Pb(o,a,u,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new xb(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Ly(this.syncEngine,n,0),function(){return ky.D()?new ky:new Eb}())}createSyncEngine(e,n){return function(r,o,a,u,d,f,_){const v=new Xb(r,o,a,u,d,f);return _&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=Ie(r);ce("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Du(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jp.provider={build:()=>new jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=nn.UNAUTHENTICATED,this.clientId=kT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{ce("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(ce("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=xg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function wf(t,e){t.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await rS(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Oy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fO(t);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Py(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Py(e.remoteStore,r)),t._onlineComponents=e}async function fO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await wf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Y.FAILED_PRECONDITION||r.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ya("Error using user provided cache. Falling back to memory cache: "+n),await wf(t,new jh)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await wf(t,new jh);return t._offlineComponents}async function TS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await Oy(t,t._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await Oy(t,new jp))),t._onlineComponents}function pO(t){return TS(t).then(e=>e.syncEngine)}async function Ny(t){const e=await TS(t),n=e.eventManager;return n.onListen=Jb.bind(null,e.syncEngine),n.onUnlisten=tO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Yb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nO.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t,e,n){if(!n)throw new pe(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mO(t,e,n,i){if(e===!0&&i===!0)throw new pe(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dy(t){if(!ge.isDocumentKey(t))throw new pe(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Vy(t){if(ge.isDocumentKey(t))throw new pe(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te()}function Hs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bg(t);throw new pe(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pe(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new pe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new pe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new pe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zy(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new RL;switch(i.type){case"firstParty":return new NL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=My.get(n);i&&(ce("ComponentProvider","Removing Datastore"),My.delete(n),i.terminate())}(this),Promise.resolve()}}function gO(t,e,n,i={}){var r;const o=(t=Hs(t,kd))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let u,d;if(typeof i.mockUserToken=="string")u=i.mockUserToken,d=nn.MOCK_USER;else{u=OE(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new pe(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new nn(f)}t._authCredentials=new LL(new CT(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Pd(this.firestore,e,this._query)}}class bn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bn(this.firestore,e,this._key)}}class Qr extends Pd{constructor(e,n,i){super(e,n,mg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bn(this.firestore,null,new ge(e))}withConverter(e){return new Qr(this.firestore,e,this._path)}}function CS(t,e,...n){if(t=xt(t),IS("collection","path",e),t instanceof kd){const i=ft.fromString(e,...n);return Vy(i),new Qr(t,null,i)}{if(!(t instanceof bn||t instanceof Qr))throw new pe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ft.fromString(e,...n));return Vy(i),new Qr(t.firestore,null,i)}}function Da(t,e,...n){if(t=xt(t),arguments.length===1&&(e=kT.newId()),IS("doc","path",e),t instanceof kd){const i=ft.fromString(e,...n);return Dy(i),new bn(t,null,new ge(i))}{if(!(t instanceof bn||t instanceof Qr))throw new pe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ft.fromString(e,...n));return Dy(i),new bn(t.firestore,t instanceof Qr?t.converter:null,new ge(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new oS(this,"async_queue_retry"),this.Vu=()=>{const i=yf();i&&ce("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=yf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=yf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new js;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ou(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(i);throw dr("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Ag.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&Te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Fy(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class yu extends kd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Uy,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uy(e),this._firestoreClient=void 0,await e}}}function _O(t,e){const n=typeof t=="object"?t:Jm(),i=typeof t=="string"?t:"(default)",r=dd(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=RE("firestore");o&&gO(r,...o)}return r}function kS(t){if(t._terminated)throw new pe(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vO(t),t._firestoreClient}function vO(t){var e,n,i;const r=t._freezeSettings(),o=function(u,d,f,_){return new ZL(u,d,f,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,SS(_.experimentalLongPollingOptions),_.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new dO(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ca(Jt.fromBase64String(e))}catch(n){throw new pe(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ca(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=/^__.*__$/;class wO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nu(e,this.data,n,this.fieldTransforms)}}function AS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class Dg{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(AS(this.Cu)&&yO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class EO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Sd(e)}Qu(e,n,i,r=!1){return new Dg({Cu:e,methodName:n,qu:i,path:Kt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function TO(t){const e=t._freezeSettings(),n=Sd(t._databaseId);return new EO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SO(t,e,n,i,r,o={}){const a=t.Qu(o.merge||o.mergeFields?2:0,e,n,r);bS("Data must be an object, but it was:",a,i);const u=RS(i,a);let d,f;if(o.merge)d=new di(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const w=IO(e,v,n);if(!a.contains(w))throw new pe(Y.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);kO(_,w)||_.push(w)}d=new di(_),f=a.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,f=a.fieldTransforms;return new wO(new Kn(u),d,f)}function xS(t,e){if(LS(t=xt(t)))return bS("Unsupported field value:",e,t),RS(t,e);if(t instanceof PS)return function(i,r){if(!AS(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let d=xS(u,r.Lu(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=xt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return g1(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ut.fromDate(i);return{timestampValue:Fh(r.serializer,o)}}if(i instanceof Ut){const o=new Ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Fh(r.serializer,o)}}if(i instanceof Ng)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ca)return{bytesValue:XT(r.serializer,i._byteString)};if(i instanceof bn){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Mg)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw u.Bu("VectorValues must only contain numeric values.");return gg(u.serializer,d)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${bg(i)}`)}(t,e)}function RS(t,e){const n={};return PT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oa(t,(i,r)=>{const o=xS(r,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function LS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ut||t instanceof Ng||t instanceof Ca||t instanceof bn||t instanceof PS||t instanceof Mg)}function bS(t,e,n){if(!LS(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=bg(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function IO(t,e,n){if((e=xt(e))instanceof Og)return e._internalPath;if(typeof e=="string")return OS(t,e);throw Hh("Field path arguments must be of type string or ",t,!1,void 0,n)}const CO=new RegExp("[~\\*/\\[\\]]");function OS(t,e,n){if(e.search(CO)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Og(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hh(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${i}`),a&&(d+=` in document ${r}`),d+=")"),new pe(Y.INVALID_ARGUMENT,u+t+d)}function kO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(MS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PO extends NS{data(){return super.data()}}function MS(t,e){return typeof e=="string"?OS(t,e):e instanceof Og?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xO{convertValue(e,n="none"){switch(to(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Oa(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>Pt(a.doubleValue));return new Mg(o)}convertGeoPoint(e){return new Ng(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=hg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const n=ns(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ft.fromString(e);Xe(iS(i));const r=new mu(i.get(1),i.get(3)),o=new ge(i.popFirst(5));return r.isEqual(n)||dr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DS extends NS{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(MS("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class nh extends DS{data(e={}){return super.data(e)}}class LO{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ll(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new nh(this._firestore,this._userDataWriter,i.key,i,new Ll(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const d=new nh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ll(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const d=new nh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ll(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,_=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),_=a.indexOf(u.doc.key)),{type:bO(u.type),doc:d,oldIndex:f,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}class VS extends xO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ca(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,n)}}function Vg(t,e,n){t=Hs(t,bn);const i=Hs(t.firestore,yu),r=RO(t.converter,e);return US(i,[SO(TO(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Oi.none())])}function zS(t){return US(Hs(t.firestore,yu),[new _g(t._key,Oi.none())])}function zg(t,...e){var n,i,r;t=xt(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Fy(e[a])||(o=e[a],a++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Fy(e[a])){const v=e[a];e[a]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[a+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[a+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let d,f,_;if(t instanceof bn)f=Hs(t.firestore,yu),_=mg(t._key.path),d={next:v=>{e[a]&&e[a](OO(f,t,v))},error:e[a+1],complete:e[a+2]};else{const v=Hs(t,Pd);f=Hs(v.firestore,yu),_=v._query;const w=new VS(f);d={next:T=>{e[a]&&e[a](new LO(f,w,v,T))},error:e[a+1],complete:e[a+2]},AO(t._query)}return function(w,T,A,N){const j=new hO(N),P=new Zb(T,j,A);return w.asyncQueue.enqueueAndForget(async()=>Hb(await Ny(w),P)),()=>{j.Za(),w.asyncQueue.enqueueAndForget(async()=>Wb(await Ny(w),P))}}(kS(f),_,u,d)}function US(t,e){return function(i,r){const o=new js;return i.asyncQueue.enqueueAndForget(async()=>iO(await pO(i),r,o)),o.promise}(kS(t),e)}function OO(t,e,n){const i=n.docs.get(e._key),r=new VS(t);return new DS(t,r,e._key,i,new Ll(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){ba=r})(so),Qs(new es("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new yu(new bL(i.getProvider("auth-internal")),new DL(i.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new pe(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(f.options.projectId,_)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),xi(iy,"4.7.3",e),xi(iy,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebasestorage.googleapis.com",BS="storageBucket",NO=2*60*1e3,MO=10*60*1e3,DO=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St extends zi{constructor(e,n,i=0){super(Ef(e),`Firebase Storage: ${n} (${Ef(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ef(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ut;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ut||(ut={}));function Ef(t){return"storage/"+t}function Ug(){const t="An unknown error occurred, please check the error payload for server response.";return new St(ut.UNKNOWN,t)}function VO(t){return new St(ut.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function zO(t){return new St(ut.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new St(ut.UNAUTHENTICATED,t)}function FO(){return new St(ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function BO(t){return new St(ut.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function jS(){return new St(ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HS(){return new St(ut.CANCELED,"User canceled the upload/download.")}function jO(t){return new St(ut.INVALID_URL,"Invalid URL '"+t+"'.")}function HO(t){return new St(ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function WO(){return new St(ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+BS+"' property when initializing the app?")}function WS(){return new St(ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qO(){return new St(ut.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function GO(){return new St(ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ZO(t){return new St(ut.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hp(t){return new St(ut.INVALID_ARGUMENT,t)}function qS(){return new St(ut.APP_DELETED,"The Firebase app was deleted.")}function KO(t){return new St(ut.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gl(t,e){return new St(ut.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function wl(t){throw new St(ut.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=dn.makeFromUrl(e,n)}catch{return new dn(e,"")}if(i.path==="")return i;throw HO(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),d={bucket:1,path:3};function f(H){H.path_=decodeURIComponent(H.path)}const _="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",T=new RegExp(`^https?://${v}/${_}/b/${r}/o${w}`,"i"),A={bucket:1,path:3},N=n===FS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",P=new RegExp(`^https?://${N}/${r}/${j}`,"i"),b=[{regex:u,indices:d,postModify:o},{regex:T,indices:A,postModify:f},{regex:P,indices:{bucket:1,path:2},postModify:f}];for(let H=0;H<b.length;H++){const K=b[H],X=K.regex.exec(e);if(X){const R=X[K.indices.bucket];let I=X[K.indices.path];I||(I=""),i=new dn(R,I),K.postModify(i);break}}if(i==null)throw jO(e);return i}}class $O{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t,e,n){let i=1,r=null,o=null,a=!1,u=0;function d(){return u===2}let f=!1;function _(...j){f||(f=!0,e.apply(null,j))}function v(j){r=setTimeout(()=>{r=null,t(T,d())},j)}function w(){o&&clearTimeout(o)}function T(j,...P){if(f){w();return}if(j){w(),_.call(null,j,...P);return}if(d()||a){w(),_.call(null,j,...P);return}i<64&&(i*=2);let b;u===1?(u=2,b=0):b=(i+Math.random())*1e3,v(b)}let A=!1;function N(j){A||(A=!0,w(),!f&&(r!==null?(j||(u=2),clearTimeout(r),v(0)):j||(u=1)))}return v(0),o=setTimeout(()=>{a=!0,N(!0)},n),N}function XO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t){return t!==void 0}function YO(t){return typeof t=="function"}function eN(t){return typeof t=="object"&&!Array.isArray(t)}function Ad(t){return typeof t=="string"||t instanceof String}function By(t){return Fg()&&t instanceof Blob}function Fg(){return typeof Blob<"u"}function Wp(t,e,n,i){if(i<e)throw Hp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Hp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function GS(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ws;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ws||(Ws={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n,i,r,o,a,u,d,f,_,v,w=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=_,this.connectionFactory_=v,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,A)=>{this.resolve_=T,this.reject_=A,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Nc(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const u=o.getErrorCode()===Ws.NO_ERROR,d=o.getStatus();if(!u||ZS(d,this.additionalRetryCodes_)&&this.retry){const _=o.getErrorCode()===Ws.ABORT;i(!1,new Nc(!1,null,_));return}const f=this.successCodes_.indexOf(d)!==-1;i(!0,new Nc(f,o))})},n=(i,r)=>{const o=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());JO(d)?o(d):o()}catch(d){a(d)}else if(u!==null){const d=Ug();d.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,d)):a(d)}else if(r.canceled){const d=this.appDelete_?qS():HS();a(d)}else{const d=jS();a(d)}};this.canceled_?n(!1,new Nc(!1,null,!0)):this.backoffId_=QO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nc{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function nN(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function iN(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rN(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sN(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function oN(t,e,n,i,r,o,a=!0){const u=GS(t.urlParams),d=t.url+u,f=Object.assign({},t.headers);return rN(f,e),nN(f,n),iN(f,o),sN(f,i),new tN(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lN(...t){const e=aN();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(Fg())return new Blob(t);throw new St(ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uN(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t){if(typeof atob>"u")throw ZO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tf{constructor(e,n){this.data=e,this.contentType=n||null}}function hN(t,e){switch(t){case ki.RAW:return new Tf(KS(e));case ki.BASE64:case ki.BASE64URL:return new Tf($S(t,e));case ki.DATA_URL:return new Tf(fN(e),pN(e))}throw Ug()}function KS(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,a=t.charCodeAt(++n);i=65536|(o&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function dN(t){let e;try{e=decodeURIComponent(t)}catch{throw Gl(ki.DATA_URL,"Malformed data URL.")}return KS(e)}function $S(t,e){switch(t){case ki.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw Gl(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ki.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw Gl(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=cN(e)}catch(r){throw r.message.includes("polyfill")?r:Gl(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class QS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Gl(ki.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=mN(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function fN(t){const e=new QS(t);return e.base64?$S(ki.BASE64,e.rest):dN(e.rest)}function pN(t){return new QS(t).contentType}function mN(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n){let i=0,r="";By(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(By(this.data_)){const i=this.data_,r=uN(i,e,n);return r===null?null:new Mr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Mr(i,!0)}}static getBlob(...e){if(Fg()){const n=e.map(i=>i instanceof Mr?i.data_:i);return new Mr(lN.apply(null,n))}else{const n=e.map(a=>Ad(a)?hN(ki.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(a=>{for(let u=0;u<a.length;u++)r[o++]=a[u]}),new Mr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t){let e;try{e=JSON.parse(t)}catch{return null}return eN(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _N(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function XS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t,e){return e}class cn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||vN}}let Mc=null;function yN(t){return!Ad(t)||t.length<2?t:XS(t)}function JS(){if(Mc)return Mc;const t=[];t.push(new cn("bucket")),t.push(new cn("generation")),t.push(new cn("metageneration")),t.push(new cn("name","fullPath",!0));function e(o,a){return yN(a)}const n=new cn("name");n.xform=e,t.push(n);function i(o,a){return a!==void 0?Number(a):a}const r=new cn("size");return r.xform=i,t.push(r),t.push(new cn("timeCreated")),t.push(new cn("updated")),t.push(new cn("md5Hash",null,!0)),t.push(new cn("cacheControl",null,!0)),t.push(new cn("contentDisposition",null,!0)),t.push(new cn("contentEncoding",null,!0)),t.push(new cn("contentLanguage",null,!0)),t.push(new cn("contentType",null,!0)),t.push(new cn("metadata","customMetadata",!0)),Mc=t,Mc}function wN(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new dn(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function EN(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const a=n[o];i[a.local]=a.xform(i,e[a.server])}return wN(i,t),i}function YS(t,e,n){const i=Bg(e);return i===null?null:EN(t,i,n)}function TN(t,e,n,i){const r=Bg(e);if(r===null||!Ad(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(f=>{const _=t.bucket,v=t.fullPath,w="/b/"+a(_)+"/o/"+a(v),T=uo(w,n,i),A=GS({alt:"media",token:f});return T+A})[0]}function eI(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="prefixes",Hy="items";function SN(t,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[jy])for(const r of n[jy]){const o=r.replace(/\/$/,""),a=t._makeStorageReference(new dn(e,o));i.prefixes.push(a)}if(n[Hy])for(const r of n[Hy]){const o=t._makeStorageReference(new dn(e,r.name));i.items.push(o)}return i}function IN(t,e,n){const i=Bg(n);return i===null?null:SN(t,e,i)}class cs{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t){if(!t)throw Ug()}function jg(t,e){function n(i,r){const o=YS(t,r,e);return Mi(o!==null),o}return n}function CN(t,e){function n(i,r){const o=IN(t,e,r);return Mi(o!==null),o}return n}function kN(t,e){function n(i,r){const o=YS(t,r,e);return Mi(o!==null),TN(o,r,t.host,t._protocol)}return n}function Va(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=FO():r=UO():n.getStatus()===402?r=zO(t.bucket):n.getStatus()===403?r=BO(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function Hg(t){const e=Va(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=VO(t.path)),o.serverResponse=r.serverResponse,o}return n}function PN(t,e,n){const i=e.fullServerUrl(),r=uo(i,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,u=new cs(r,o,jg(t,n),a);return u.errorHandler=Hg(e),u}function AN(t,e,n,i,r){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n.length>0&&(o.delimiter=n),i&&(o.pageToken=i),r&&(o.maxResults=r);const a=e.bucketOnlyServerUrl(),u=uo(a,t.host,t._protocol),d="GET",f=t.maxOperationRetryTime,_=new cs(u,d,CN(t,e.bucket),f);return _.urlParams=o,_.errorHandler=Va(e),_}function xN(t,e,n){const i=e.fullServerUrl(),r=uo(i,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,u=new cs(r,o,kN(t,n),a);return u.errorHandler=Hg(e),u}function RN(t,e){const n=e.fullServerUrl(),i=uo(n,t.host,t._protocol),r="DELETE",o=t.maxOperationRetryTime;function a(d,f){}const u=new cs(i,r,a,o);return u.successCodes=[200,204],u.errorHandler=Hg(e),u}function LN(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function tI(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=LN(null,e)),i}function bN(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let b="";for(let H=0;H<2;H++)b=b+Math.random().toString().slice(2);return b}const d=u();a["Content-Type"]="multipart/related; boundary="+d;const f=tI(e,i,r),_=eI(f,n),v="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,w=`\r
--`+d+"--",T=Mr.getBlob(v,i,w);if(T===null)throw WS();const A={name:f.fullPath},N=uo(o,t.host,t._protocol),j="POST",P=t.maxUploadRetryTime,k=new cs(N,j,jg(t,n),P);return k.urlParams=A,k.headers=a,k.body=T.uploadData(),k.errorHandler=Va(e),k}class Wh{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function Wg(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Mi(!1)}return Mi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function ON(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),a=tI(e,i,r),u={name:a.fullPath},d=uo(o,t.host,t._protocol),f="POST",_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},v=eI(a,n),w=t.maxUploadRetryTime;function T(N){Wg(N);let j;try{j=N.getResponseHeader("X-Goog-Upload-URL")}catch{Mi(!1)}return Mi(Ad(j)),j}const A=new cs(d,f,T,w);return A.urlParams=u,A.headers=_,A.body=v,A.errorHandler=Va(e),A}function NN(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function o(f){const _=Wg(f,["active","final"]);let v=null;try{v=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Mi(!1)}v||Mi(!1);const w=Number(v);return Mi(!isNaN(w)),new Wh(w,i.size(),_==="final")}const a="POST",u=t.maxUploadRetryTime,d=new cs(n,a,o,u);return d.headers=r,d.errorHandler=Va(e),d}const Wy=256*1024;function MN(t,e,n,i,r,o,a,u){const d=new Wh(0,0);if(a?(d.current=a.current,d.total=a.total):(d.current=0,d.total=i.size()),i.size()!==d.total)throw qO();const f=d.total-d.current;let _=f;r>0&&(_=Math.min(_,r));const v=d.current,w=v+_;let T="";_===0?T="finalize":f===_?T="upload, finalize":T="upload";const A={"X-Goog-Upload-Command":T,"X-Goog-Upload-Offset":`${d.current}`},N=i.slice(v,w);if(N===null)throw WS();function j(H,K){const X=Wg(H,["active","final"]),R=d.current+_,I=i.size();let x;return X==="final"?x=jg(e,o)(H,K):x=null,new Wh(R,I,X==="final",x)}const P="POST",k=e.maxUploadRetryTime,b=new cs(n,P,j,k);return b.headers=A,b.body=N.uploadData(),b.progressCallback=u||null,b.errorHandler=Va(t),b}const vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Sf(t){switch(t){case"running":case"pausing":case"canceling":return vn.RUNNING;case"paused":return vn.PAUSED;case"success":return vn.SUCCESS;case"canceled":return vn.CANCELED;case"error":return vn.ERROR;default:return vn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,i){if(YO(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class VN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ws.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ws.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ws.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw wl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class zN extends VN{initXhr(){this.xhr_.responseType="text"}}function Dr(){return new zN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=JS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(ut.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(ZS(r.status,[]))if(o)r=jS();else{this.sleepTime=Math.max(this.sleepTime*2,DO),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(ut.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=ON(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Dr,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=NN(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,Dr,n,i);this._request=o,o.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Wy*this._chunkMultiplier,n=new Wh(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let a;try{a=MN(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(d){this._error=d,this._transition("error");return}const u=this._ref.storage._makeRequest(a,Dr,r,o,!1);this._request=u,u.getPromise().then(d=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(d.current),d.finalized?(this._metadata=d.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Wy*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=PN(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Dr,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=bN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Dr,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=HS(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Sf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const o=new DN(n||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Sf(this._state)){case vn.SUCCESS:zo(this._resolve.bind(null,this.snapshot))();break;case vn.CANCELED:case vn.ERROR:const n=this._reject;zo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Sf(this._state)){case vn.RUNNING:case vn.PAUSED:e.next&&zo(e.next.bind(e,this.snapshot))();break;case vn.SUCCESS:e.complete&&zo(e.complete.bind(e))();break;case vn.CANCELED:case vn.ERROR:e.error&&zo(e.error.bind(e,this._error))();break;default:e.error&&zo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n){this._service=e,n instanceof dn?this._location=n:this._location=dn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new no(e,n)}get root(){const e=new dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XS(this._location.path)}get storage(){return this._service}get parent(){const e=gN(this._location.path);if(e===null)return null;const n=new dn(this._location.bucket,e);return new no(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw KO(e)}}function FN(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new UN(t,new Mr(e),n)}function BN(t){const e={prefixes:[],items:[]};return nI(t,e).then(()=>e)}async function nI(t,e,n){const r=await jN(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await nI(t,e,r.nextPageToken)}function jN(t,e){e!=null&&typeof e.maxResults=="number"&&Wp("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=AN(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,Dr)}function HN(t){t._throwIfRoot("getDownloadURL");const e=xN(t.storage,t._location,JS());return t.storage.makeRequestWithTokens(e,Dr).then(n=>{if(n===null)throw GO();return n})}function WN(t){t._throwIfRoot("deleteObject");const e=RN(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Dr)}function qN(t,e){const n=_N(t._location.path,e),i=new dn(t._location.bucket,n);return new no(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t){return/^[A-Za-z]+:\/\//.test(t)}function ZN(t,e){return new no(t,e)}function iI(t,e){if(t instanceof qg){const n=t;if(n._bucket==null)throw WO();const i=new no(n,n._bucket);return e!=null?iI(i,e):i}else return e!==void 0?qN(t,e):t}function KN(t,e){if(e&&GN(e)){if(t instanceof qg)return ZN(t,e);throw Hp("To use ref(service, url), the first argument must be a Storage instance.")}else return iI(t,e)}function qy(t,e){const n=e==null?void 0:e[BS];return n==null?null:dn.makeFromBucketSpec(n,t)}function $N(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:OE(r,t.app.options.projectId))}class qg{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=FS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NO,this._maxUploadRetryTime=MO,this._requests=new Set,r!=null?this._bucket=dn.makeFromBucketSpec(r,this._host):this._bucket=qy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dn.makeFromBucketSpec(this._url,e):this._bucket=qy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Wp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Wp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new no(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new $O(qS());{const a=oN(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const Gy="@firebase/storage",Zy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="storage";function QN(t,e,n){return t=xt(t),FN(t,e,n)}function XN(t){return t=xt(t),BN(t)}function JN(t){return t=xt(t),HN(t)}function sI(t){return t=xt(t),WN(t)}function Gg(t,e){return t=xt(t),KN(t,e)}function YN(t=Jm(),e){t=xt(t);const i=dd(t,rI).getImmediate({identifier:e}),r=RE("storage");return r&&eM(i,...r),i}function eM(t,e,n,i={}){$N(t,e,n,i)}function tM(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new qg(n,i,r,e,so)}function nM(){Qs(new es(rI,tM,"PUBLIC").setMultipleInstances(!0)),xi(Gy,Zy,""),xi(Gy,Zy,"esm2017")}nM();const iM={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},Zg=DE(iM),qh=AL(Zg),hs=_O(Zg),Kg=YN(Zg);async function rM(t,e,n,i){const r=Date.now(),o=n.name.replace(/[^a-zA-Z0-9.-]/g,"_"),a=`users/${t}/places/${e}/${r}_${o}`,u=Gg(Kg,a),d=QN(u,n);await new Promise((_,v)=>{d.on("state_changed",w=>{},v,()=>_())});const f=await JN(d.snapshot.ref);return{id:`${r}_${o}`,name:n.name,url:f,storagePath:a,type:n.type,size:n.size,uploadedAt:r}}async function sM(t){const e=Gg(Kg,t);await sI(e)}async function oM(t,e){const n=Gg(Kg,`users/${t}/places/${e}`);try{const i=await XN(n);await Promise.all(i.items.map(r=>sI(r)))}catch{console.log("No attachments to delete or folder not found")}}function aM(t){if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,i)*100)/100+" "+n[i]}function lM(t){return t.startsWith("image/")}function uM(t){return t.startsWith("image/")?"":t.startsWith("video/")?"":t.includes("pdf")?"":t.includes("word")||t.includes("document")?"":t.includes("sheet")||t.includes("excel")?"":t.includes("presentation")||t.includes("powerpoint")?"":t.startsWith("audio/")?"":t.includes("zip")||t.includes("compressed")?"":""}function oI({attachments:t,onUpload:e,onDelete:n,uploading:i}){const[r,o]=Z.useState(null),[a,u]=Z.useState(0),d=Z.useRef(null),f=async v=>{var T;const w=(T=v.target.files)==null?void 0:T[0];if(w)try{u(0),await e(w),d.current&&(d.current.value="")}catch(A){console.error("Upload failed:",A),alert("Failed to upload file. Please try again.")}finally{u(0)}},_=async v=>{if(confirm(`Delete ${v.name}?`))try{await n(v)}catch(w){console.error("Delete failed:",w),alert("Failed to delete file. Please try again.")}};return C.jsxs("div",{style:{marginTop:12},children:[C.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[C.jsxs("h4",{style:{margin:0,fontSize:14,fontWeight:600},children:[" Attachments (",t.length,")"]}),C.jsxs("label",{style:{cursor:"pointer"},children:[C.jsx("input",{ref:d,type:"file",onChange:f,disabled:i,style:{display:"none"},accept:"image/*,.pdf,.doc,.docx,.txt"}),C.jsx("span",{className:"button",style:{padding:"4px 8px",fontSize:12,opacity:i?.6:1,cursor:i?"not-allowed":"pointer"},children:i?`Uploading... ${a}%`:"+ Add File"})]})]}),t.length===0?C.jsx("div",{style:{padding:8,color:"#94a3b8",fontSize:13,fontStyle:"italic"},children:"No attachments yet. Add booking confirmations, maps, or photos."}):C.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:6},children:t.map(v=>C.jsxs("li",{style:{padding:8,backgroundColor:"#f8fafc",borderRadius:6,border:"1px solid #e2e8f0",display:"flex",alignItems:"center",gap:8},children:[C.jsx("span",{style:{fontSize:20},children:uM(v.type)}),C.jsxs("div",{style:{flex:1,minWidth:0},children:[C.jsx("div",{style:{fontSize:13,fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:v.name}),C.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:[aM(v.size),"  ",new Date(v.uploadedAt).toLocaleDateString()]})]}),C.jsxs("div",{style:{display:"flex",gap:4},children:[lM(v.type)&&C.jsx("button",{className:"button",onClick:()=>o(v.url),style:{padding:"4px 8px",fontSize:12,backgroundColor:"#3b82f6"},children:" View"}),C.jsx("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",className:"button",style:{padding:"4px 8px",fontSize:12,textDecoration:"none",backgroundColor:"#10b981"},children:" Download"}),C.jsx("button",{className:"button",onClick:()=>_(v),style:{padding:"4px 8px",fontSize:12,backgroundColor:"#ef4444"},children:""})]})]},v.id))}),r&&C.jsxs("div",{onClick:()=>o(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:20,cursor:"pointer"},children:[C.jsx("img",{src:r,alt:"Preview",style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain",borderRadius:8}}),C.jsx("button",{className:"button",onClick:v=>{v.stopPropagation(),o(null)},style:{position:"absolute",top:20,right:20,backgroundColor:"#ef4444",padding:"8px 16px"},children:" Close"})]})]})}function cM({items:t,onRemove:e,onSetStart:n,onClearStart:i,onUploadAttachment:r,onDeleteAttachment:o,startLocation:a}){const[u,d]=Z.useState(null);return t.length?C.jsx("ul",{className:"itineraryList",children:t.map(f=>{const _=a&&a.lat===f.lat&&a.lon===f.lon;return C.jsxs("li",{className:"itineraryItem",children:[C.jsxs("div",{children:[C.jsxs("div",{style:{fontWeight:600},children:[_&&" ",f.name]}),C.jsxs("small",{children:[f.type,"  ",f.lat.toFixed(3),", ",f.lon.toFixed(3)]})]}),C.jsxs("div",{style:{display:"flex",gap:"8px"},children:[_?C.jsx("button",{className:"button",onClick:i,children:"Clear From Start"}):!a&&C.jsx("button",{className:"button",onClick:()=>n(f),children:"Make Start"}),C.jsx("button",{className:"button",onClick:()=>e(f.id),children:"Remove From Itinerary"})]}),C.jsx("div",{style:{marginTop:8},children:C.jsx(oI,{attachments:f.attachments||[],uploading:u===f.id,onUpload:async v=>{d(f.id);try{await r(f.id,v)}finally{d(null)}},onDelete:v=>o(f.id,v)})})]},f.id)})}):C.jsx("div",{style:{padding:12,color:"#64748b"},children:"No stops yet. Click places on the map to add them."})}const hM=(t,e)=>e<129?"WA":e>=129&&e<138?t<-26?"SA":"NT":e>=138&&e<141?t<-29?"SA":t<-26?"QLD":"NT":e>=141&&e<153?t>-29?"QLD":t>-34?"NSW":t>-39?"VIC":"SA":t>-29?"QLD":t>-37?"NSW":t>-39.2?"VIC":t>-43.6?"TAS":"NSW",dM={NSW:"New South Wales",VIC:"Victoria",QLD:"Queensland",SA:"South Australia",WA:"Western Australia",TAS:"Tasmania",NT:"Northern Territory",ACT:"Australian Capital Territory"};function fM({favorites:t,onAddToItinerary:e,onRemove:n,onCenterMap:i,onToggleVisited:r,onUploadAttachment:o,onDeleteAttachment:a}){const[u,d]=Z.useState(null),f=Z.useMemo(()=>{const v={};return t.forEach(w=>{const T=hM(w.lat,w.lon);v[T]||(v[T]=[]),v[T].push(w)}),Object.keys(v).forEach(w=>{v[w].sort((T,A)=>T.name.localeCompare(A.name))}),v},[t]),_=Object.keys(f).sort();return t.length===0?C.jsx("div",{style:{padding:12,color:"#64748b",fontSize:14},children:"No favorites yet. Click the heart button in any marker popup to add it to your favorites."}):C.jsx("div",{style:{maxHeight:"100%",overflowY:"auto"},children:_.map(v=>C.jsxs("div",{style:{marginBottom:16},children:[C.jsxs("div",{style:{fontWeight:600,fontSize:14,color:"#0f172a",padding:"8px 12px",background:"#f1f5f9",borderLeft:"3px solid #ec4899"},children:[dM[v]||v," (",f[v].length,")"]}),f[v].map(w=>C.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e2e8f0",opacity:w.visited?.6:1},children:[C.jsxs("div",{style:{marginBottom:8},children:[C.jsxs("div",{style:{fontSize:13,fontWeight:500,cursor:"pointer",color:"#2563eb",textDecoration:w.visited?"line-through":"none"},onClick:()=>i(w.lat,w.lon),title:"Click to center map on this location",children:[w.visited?" ":"",w.name]}),C.jsxs("div",{style:{fontSize:11,color:"#64748b",marginTop:2},children:[w.type,"  ",w.lat.toFixed(3),", ",w.lon.toFixed(3)]}),C.jsxs("div",{style:{display:"flex",gap:8,marginTop:4,flexWrap:"wrap"},children:[C.jsx("a",{href:`https://www.meteoblue.com/en/weather/forecast/week/${w.lat.toFixed(4)}N${w.lon.toFixed(4)}E`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:11,color:"#2563eb",textDecoration:"none"},children:" Weather"}),C.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${w.lat},${w.lon}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:11,color:"#2563eb",textDecoration:"none"},children:" Google Maps"})]})]}),C.jsxs("div",{style:{display:"flex",gap:4},children:[C.jsx("button",{className:"button small",onClick:()=>e(w),title:"Add to itinerary",style:{fontSize:11,padding:"4px 8px"},children:"Add"}),C.jsx("button",{className:"button small",onClick:async()=>{try{await r(w.id)}catch(T){console.error("Error toggling visited status:",T)}},title:w.visited?"Mark as unvisited":"Mark as visited",style:{fontSize:11,padding:"4px 8px",background:w.visited?"#10b981":"#6b7280"},children:w.visited?"":""}),C.jsx("button",{className:"button small",onClick:()=>n(w.id),title:"Remove from favorites",style:{fontSize:11,padding:"4px 8px",background:"#ef4444"},children:""})]}),C.jsx(oI,{attachments:w.attachments||[],onUpload:async T=>{d(w.id);try{await o(w.id,T)}finally{d(null)}},onDelete:T=>a(w.id,T),uploading:u===w.id})]},w.id))]},v))})}function pM(t,e){return t>-29&&e>153||t>-29&&e>149&&e<=153?"QLD":t>-29&&e<=149?"NT":t<=-29&&t>-37&&e>141&&e<=153.5?"NSW":t<=-37&&e>141&&e<=150?"VIC":t<=-26&&t>-29&&e>138&&e<=141||t<=-29&&t>-37&&e<=141?"SA":t<=-37?"TAS":e<=129?"WA":t>-26&&e>129&&e<=138?"NT":t<=-26&&t>-29&&e>138&&e<=141?"SA":t>-35&&e>149?"ACT":"Other"}const mM={NSW:"New South Wales",VIC:"Victoria",QLD:"Queensland",SA:"South Australia",WA:"Western Australia",TAS:"Tasmania",NT:"Northern Territory",ACT:"Australian Capital Territory",Other:"Other"};function gM({visitedPlaces:t,onCenterMap:e,onUnvisit:n,onClose:i}){const r=Z.useMemo(()=>{const a={};return t.forEach(u=>{const d=pM(u.lat,u.lon);a[d]||(a[d]=[]),a[d].push(u)}),Object.keys(a).forEach(u=>{a[u].sort((d,f)=>d.name.localeCompare(f.name))}),a},[t]),o=Object.keys(r).sort();return C.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},children:C.jsxs("div",{style:{backgroundColor:"white",borderRadius:8,padding:24,maxWidth:600,width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[C.jsxs("h2",{style:{margin:0,fontSize:20,fontWeight:600},children:[" Visited Places (",t.length,")"]}),C.jsx("button",{onClick:i,style:{background:"none",border:"none",fontSize:24,cursor:"pointer",padding:4,lineHeight:1},title:"Close",children:""})]}),t.length===0?C.jsxs("div",{style:{textAlign:"center",padding:32,color:"#64748b"},children:[C.jsx("p",{children:"No places visited yet!"}),C.jsx("p",{style:{fontSize:14},children:"Mark favorites as visited to track your journey."})]}):C.jsx("div",{children:o.map(a=>C.jsxs("div",{style:{marginBottom:16},children:[C.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#475569",padding:"8px 12px",backgroundColor:"#f1f5f9",borderRadius:4,marginBottom:4},children:[mM[a]||a," (",r[a].length,")"]}),r[a].map(u=>C.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e2e8f0"},children:[C.jsxs("div",{style:{marginBottom:8},children:[C.jsxs("div",{style:{fontSize:13,fontWeight:500,cursor:"pointer",color:"#2563eb"},onClick:()=>e(u.lat,u.lon),title:"Click to center map on this location",children:[" ",u.name]}),C.jsxs("div",{style:{fontSize:11,color:"#64748b",marginTop:2},children:[u.type,"  ",u.lat.toFixed(3),", ",u.lon.toFixed(3),u.visitedAt&&C.jsxs("span",{children:["  Visited ",new Date(u.visitedAt).toLocaleDateString()]})]})]}),C.jsx("button",{className:"button small",onClick:()=>n(u.id),title:"Mark as not visited",style:{fontSize:11,padding:"4px 8px",background:"#ef4444"},children:"Unvisit"})]},u.id))]},a))})]})})}function _M(t){try{const e=JSON.stringify(t);return btoa(e)}catch(e){throw console.error("Error encoding route:",e),new Error("Failed to encode route")}}function vM(t){try{const e=atob(t);return JSON.parse(e)}catch(e){throw console.error("Error decoding route:",e),new Error("Invalid route data")}}function yM(t){const e=_M(t),n=window.location.origin+window.location.pathname,i=new URLSearchParams;return i.set("sharedRoute",e),`${n}?${i.toString()}`}function wM(){try{const e=new URLSearchParams(window.location.search).get("sharedRoute");if(!e)return null;const n=vM(e);return!n.stops||!Array.isArray(n.stops)||n.stops.length===0?null:n}catch(t){return console.error("Error extracting shared route from URL:",t),null}}function EM(t,e,n){return{title:e,description:n,stops:t.map(i=>({id:i.id,name:i.name,lat:i.lat,lon:i.lon,type:i.type})),createdAt:Date.now()}}function TM({itinerary:t,isOpen:e,onClose:n}){const[i,r]=Z.useState(""),[o,a]=Z.useState(""),[u,d]=Z.useState(""),[f,_]=Z.useState(!1);if(!e)return null;const v=()=>{if(!i.trim()){alert("Please enter a title for your route");return}try{const A=EM(t,i.trim(),o.trim()),N=yM(A);d(N)}catch(A){console.error("Error generating share URL:",A),alert("Failed to generate share link")}},w=async()=>{try{await navigator.clipboard.writeText(u),_(!0),setTimeout(()=>_(!1),2e3)}catch(A){console.error("Error copying to clipboard:",A),alert("Failed to copy link")}},T=()=>{r(""),a(""),d("")};return C.jsx("div",{className:"modalOverlay",onClick:n,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:C.jsxs("div",{onClick:A=>A.stopPropagation(),style:{background:"#fff",borderRadius:8,padding:24,maxWidth:500,width:"90%",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[C.jsx("h3",{style:{margin:0},children:" Share Your Route"}),C.jsx("button",{className:"button small",onClick:n,children:"Close"})]}),u?C.jsxs(C.Fragment,{children:[C.jsx("div",{style:{marginBottom:16,padding:12,background:"#f0fdf4",borderRadius:6,fontSize:13,color:"#16a34a"},children:" Share link generated! Copy and share with others."}),C.jsxs("div",{style:{marginBottom:16},children:[C.jsx("label",{style:{display:"block",fontWeight:600,marginBottom:6,fontSize:13},children:"Share Link"}),C.jsxs("div",{style:{display:"flex",gap:8},children:[C.jsx("input",{type:"text",value:u,readOnly:!0,style:{flex:1,padding:"10px 12px",border:"2px solid #e2e8f0",borderRadius:8,fontSize:12,fontFamily:"monospace",color:"#475569",backgroundColor:"#f8fafc"}}),C.jsx("button",{className:"button",onClick:w,style:{whiteSpace:"nowrap"},title:f?"Copied!":"Copy to clipboard",children:f?" Copied":"Copy"})]})]}),C.jsx("div",{style:{marginBottom:16,padding:12,background:"#fef3c7",borderRadius:6,fontSize:13,color:"#92400e"},children:" Share this link via email, messaging, or social media. Recipients can open it to load your route."}),C.jsxs("div",{style:{display:"flex",gap:8},children:[C.jsx("button",{className:"button",onClick:T,style:{flex:1},children:"Create Another Route"}),C.jsx("button",{className:"button",onClick:n,style:{background:"#10b981"},children:"Done"})]})]}):C.jsxs(C.Fragment,{children:[C.jsx("p",{style:{color:"#475569",marginBottom:16,fontSize:14},children:"Share your itinerary with others. They can load your route and customize it for their own trip."}),C.jsxs("div",{style:{marginBottom:16},children:[C.jsx("label",{style:{display:"block",fontWeight:600,marginBottom:6,fontSize:13},children:"Route Title *"}),C.jsx("input",{type:"text",placeholder:"e.g., Great Ocean Road Adventure",value:i,onChange:A=>r(A.target.value),style:{width:"100%",padding:"10px 12px",border:"2px solid #e2e8f0",borderRadius:8,fontSize:14,fontFamily:"inherit"},onKeyDown:A=>{A.key==="Enter"&&v()}})]}),C.jsxs("div",{style:{marginBottom:16},children:[C.jsx("label",{style:{display:"block",fontWeight:600,marginBottom:6,fontSize:13},children:"Description (optional)"}),C.jsx("textarea",{placeholder:"e.g., A scenic 5-day coastal route with stops at iconic landmarks...",value:o,onChange:A=>a(A.target.value),rows:4,style:{width:"100%",padding:"10px 12px",border:"2px solid #e2e8f0",borderRadius:8,fontSize:14,fontFamily:"inherit",resize:"vertical"}})]}),C.jsxs("div",{style:{marginBottom:16,padding:12,background:"#f0f9ff",borderRadius:6,fontSize:13,color:"#0369a1"},children:[" ",C.jsx("strong",{children:t.length})," stops will be shared (attachments and personal files are not included)"]}),C.jsxs("div",{style:{display:"flex",gap:8},children:[C.jsx("button",{className:"button",onClick:v,style:{flex:1},children:"Generate Share Link"}),C.jsx("button",{className:"button",onClick:n,style:{background:"#94a3b8"},children:"Cancel"})]})]})]})})}function SM({onLoginSuccess:t}){const[e,n]=Z.useState(""),[i,r]=Z.useState(""),[o,a]=Z.useState(!1),[u,d]=Z.useState(""),[f,_]=Z.useState(!1),v=async w=>{w.preventDefault(),d(""),_(!0);try{o?await dR(qh,e,i):await fR(qh,e,i),t()}catch(T){d(T.message||"Authentication failed")}finally{_(!1)}};return C.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#0f172a",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},children:C.jsxs("div",{style:{backgroundColor:"white",borderRadius:12,padding:40,maxWidth:400,width:"90%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[C.jsx("h1",{style:{margin:"0 0 8px 0",fontSize:28,fontWeight:700,color:"#0f172a"},children:" Australia Trip Planner"}),C.jsx("p",{style:{margin:"0 0 24px 0",fontSize:14,color:"#64748b"},children:o?"Create an account to get started":"Sign in to continue"}),C.jsxs("form",{onSubmit:v,children:[C.jsxs("div",{style:{marginBottom:16},children:[C.jsx("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:"#334155"},children:"Email"}),C.jsx("input",{type:"email",value:e,onChange:w=>n(w.target.value),required:!0,placeholder:"your@email.com",style:{width:"100%",padding:"10px 12px",border:"1px solid #cbd5e1",borderRadius:6,fontSize:14,boxSizing:"border-box"}})]}),C.jsxs("div",{style:{marginBottom:20},children:[C.jsx("label",{style:{display:"block",marginBottom:8,fontSize:14,fontWeight:500,color:"#334155"},children:"Password"}),C.jsx("input",{type:"password",value:i,onChange:w=>r(w.target.value),required:!0,placeholder:"",minLength:6,style:{width:"100%",padding:"10px 12px",border:"1px solid #cbd5e1",borderRadius:6,fontSize:14,boxSizing:"border-box"}})]}),u&&C.jsx("div",{style:{padding:12,backgroundColor:"#fee2e2",color:"#991b1b",borderRadius:6,fontSize:14,marginBottom:16},children:u}),C.jsx("button",{type:"submit",disabled:f,style:{width:"100%",padding:"12px",backgroundColor:f?"#94a3b8":"#2563eb",color:"white",border:"none",borderRadius:6,fontSize:16,fontWeight:600,cursor:f?"not-allowed":"pointer",marginBottom:16},children:f?"Please wait...":o?"Create Account":"Sign In"}),C.jsx("button",{type:"button",onClick:()=>{a(!o),d("")},style:{width:"100%",padding:"12px",backgroundColor:"transparent",color:"#2563eb",border:"1px solid #cbd5e1",borderRadius:6,fontSize:14,fontWeight:500,cursor:"pointer"},children:o?"Already have an account? Sign In":"Don't have an account? Sign Up"})]})]})})}function xd(t){return t.replace(/\//g,"_")}async function Ns(t,e){const n=Da(hs,`users/${t}/favorites`,xd(e.id));await Vg(n,{...e,updatedAt:Date.now()})}async function Ky(t,e){const n=Da(hs,`users/${t}/favorites`,xd(e));await zS(n)}function IM(t,e){const n=CS(hs,`users/${t}/favorites`);return zg(n,i=>{const r=i.docs.map(o=>o.data());e(r)})}async function aI(t,e){const n=Da(hs,`users/${t}/visited`,xd(e.id));await Vg(n,{...e,visitedAt:e.visitedAt||Date.now(),updatedAt:Date.now()})}async function $y(t,e){const n=Da(hs,`users/${t}/visited`,xd(e));await zS(n)}function CM(t,e){const n=CS(hs,`users/${t}/visited`);return zg(n,i=>{const r=i.docs.map(o=>o.data());e(r)})}async function El(t,e){const n=Da(hs,`users/${t}/itineraries`,"current");await Vg(n,{items:e,updatedAt:Date.now()})}function kM(t,e){const n=Da(hs,`users/${t}/itineraries`,"current");return zg(n,i=>{i.exists()?e(i.data().items||[]):e([])})}async function PM(t){try{const e=localStorage.getItem("trip-favorites");if(e){const i=JSON.parse(e);for(const r of i)await Ns(t,r);console.log(`Migrated ${i.length} favorites to Firestore`)}const n=localStorage.getItem("trip-visited-places");if(n){const i=JSON.parse(n);for(const r of i)await aI(t,r);console.log(`Migrated ${i.length} visited places to Firestore`)}return localStorage.setItem("firestore-migrated","true"),!0}catch(e){return console.error("Migration failed:",e),!1}}function AM(){return localStorage.getItem("firestore-migrated")==="true"}function xM(){const[t,e]=Z.useState(null),[n,i]=Z.useState(!0),[r,o]=Z.useState([]),[a,u]=Z.useState(null),[d,f]=Z.useState(void 0),[_,v]=Z.useState(!1),[w,T]=Z.useState(!1),[A,N]=Z.useState(""),[j,P]=Z.useState(!1),[k,b]=Z.useState(null),[H,K]=Z.useState(!1),[X,R]=Z.useState(!1),[I,x]=Z.useState(!1),[O,V]=Z.useState(!1),[z,M]=Z.useState(!1),[Ke,In]=Z.useState(!0),[Ue,Mt]=Z.useState([]),[G,me]=Z.useState([]),[te,fe]=Z.useState(!1),[we,Ae]=Z.useState(!1),[Ne,U]=Z.useState(null),ne=Z.useCallback(Q=>{o(re=>{if(re.some(le=>le.id===Q.id))return re;const ae=[...re,{...Q,addedAt:Date.now()}];return t&&El(t.uid,ae).catch(console.error),ae})},[t]),ue=Z.useCallback(Q=>{o(re=>{const ae=re.filter(le=>le.id!==Q);return t&&El(t.uid,ae).catch(console.error),ae})},[t]),Re=Z.useCallback(Q=>{f({lat:Q.lat,lon:Q.lon,name:Q.name})},[]),tt=Z.useCallback(async Q=>{if(!t)return;Ue.some(ae=>ae.id===Q.id)?await Ky(t.uid,Q.id):await Ns(t.uid,Q)},[t,Ue]),st=Z.useCallback(async Q=>{t&&(await oM(t.uid,Q),await Ky(t.uid,Q))},[t]),qe=Z.useCallback(async(Q,re)=>{if(!t)return;const ae=await rM(t.uid,Q,re);let le=Ue.find(De=>De.id===Q);if(!le){const De=r.find(Je=>Je.id===Q);if(!De)return;le={id:De.id,name:De.name,type:De.type,lat:De.lat,lon:De.lon}}const de={...le,attachments:[...le.attachments||[],ae]};await Ns(t.uid,de)},[t,Ue]),Le=Z.useCallback(async(Q,re)=>{if(!t)return;await sM(re.storagePath);const ae=Ue.find(de=>de.id===Q);if(!ae)return;const le={...ae,attachments:(ae.attachments||[]).filter(de=>de.id!==re.id)};await Ns(t.uid,le)},[t,Ue]),Me=Z.useCallback(async Q=>{if(!t)return;const re=Ue.find(le=>le.id===Q);if(!re)return;if(G.some(le=>le.id===Q)){await $y(t.uid,Q);const{visited:le,visitedAt:de,...De}=re;await Ns(t.uid,{...De,visited:!1})}else{const le={...re,visited:!0,visitedAt:Date.now()};await aI(t.uid,le),await Ns(t.uid,le)}},[t,Ue,G]);Z.useEffect(()=>{try{const Q=wM();if(Q&&Q.stops&&Q.stops.length>0){const re=Q.stops.map((ae,le)=>({id:ae.id,name:ae.name,lat:ae.lat,lon:ae.lon,type:ae.type||"locality",addedAt:Date.now()+le}));o(re),t&&El(t.uid,re).catch(console.error)}}catch(Q){console.error("Error loading shared route:",Q)}},[t]),Z.useEffect(()=>{const Q=gR(qh,async re=>{e(re),i(!1),re&&(AM()||(console.log("Migrating localStorage data to Firestore..."),await PM(re.uid)))});return()=>Q()},[]),Z.useEffect(()=>{if(!t)return;const Q=IM(t.uid,le=>{Mt(le)}),re=CM(t.uid,le=>{me(le)}),ae=kM(t.uid,le=>{o(le)});return()=>{Q(),re(),ae()}},[t]);const Ce=async()=>{try{await _R(qh)}catch(Q){console.error("Logout error:",Q)}},ot=Z.useCallback(async Q=>{if(!t)return;await $y(t.uid,Q);const re=Ue.find(ae=>ae.id===Q);if(re){const{visited:ae,visitedAt:le,...de}=re;await Ns(t.uid,{...de,visited:!1})}},[t,Ue]),ke=Z.useCallback((Q,re)=>{Ne&&Ne.setView([Q,re],13,{animate:!0})},[Ne]),Ze=ir.useRef(null),nt=ir.useRef(!1),pt=Z.useCallback(async()=>{if(!r.length)return;if(!d){alert("Please select a start location first (type or pick on the map).");return}T(!0);const Q=d,ae=`https://router.project-osrm.org/trip/v1/driving/${[`${Q.lon},${Q.lat}`,...r.map(le=>`${le.lon},${le.lat}`)].join(";")}?source=first&roundtrip=false&overview=full&geometries=geojson`;try{const le=await fetch(ae);if(!le.ok)throw new Error(`Routing error: ${le.status}`);const de=await le.json();if(!de.trips||!de.trips.length)throw new Error("No trip returned");const De=de.trips[0],Je=De.geometry.coordinates.map(gt=>[gt[1],gt[0]]),Ge=De.legs.map(gt=>({distance:gt.distance,duration:gt.duration})),Vn=de.waypoints.length,ei=new Array(Vn);de.waypoints.forEach((gt,ni)=>{ei[gt.waypoint_index]=ni});const ti=ei.slice(1).map(gt=>r[gt-1].id),gr=ei.map(gt=>{const ni=de.waypoints[gt];return[ni.location[1],ni.location[0]]});u({coordinates:Je,legs:Ge,orderedPlaceIds:ti,waypoints:gr});const ps=ti.map(gt=>r.find(ni=>ni.id===gt)).filter(Boolean);o(ps)}catch(le){console.error(le),alert("Could not compute route. See console for details.")}finally{T(!1)}},[r,d]),Cn=Z.useCallback(()=>{r.length&&window.confirm("Clear all itinerary stops? This cannot be undone.")&&(o([]),u(null),t&&El(t.uid,[]).catch(console.error))},[r,t]);ir.useEffect(()=>{nt.current&&r.length>0&&d&&(nt.current=!1,pt())},[r,d,pt]);const Dn=Z.useCallback(async()=>{const re=JSON.stringify({itinerary:r,startLocation:d},null,2);if("showSaveFilePicker"in window)try{const Je=await(await window.showSaveFilePicker({suggestedName:"Big Lap .json",types:[{description:"JSON File",accept:{"application/json":[".json"]}}]})).createWritable();await Je.write(re),await Je.close();return}catch(De){if(De.name==="AbortError")return}const ae=new Blob([re],{type:"application/json"}),le=URL.createObjectURL(ae),de=document.createElement("a");de.href=le,de.download="Big Lap .json",document.body.appendChild(de),de.click(),de.remove(),setTimeout(()=>URL.revokeObjectURL(le),5e3)},[r,d]),Ui=Z.useCallback(async Q=>{try{if(!Q)return;const re=await Q.text(),ae=JSON.parse(re);if(!ae||!Array.isArray(ae.itinerary)){alert("Invalid itinerary file");return}if(!window.confirm("Load itinerary from file? This will replace your current stops."))return;const le=ae.itinerary.map(de=>({id:de.id,name:de.name,type:de.type,lat:de.lat,lon:de.lon,addedAt:de.addedAt||Date.now()}));o(le),ae.startLocation&&ae.startLocation.lat&&ae.startLocation.lon&&f({lat:ae.startLocation.lat,lon:ae.startLocation.lon,name:ae.startLocation.name}),u(null),le.length>0&&ae.startLocation&&(nt.current=!0)}catch(re){console.error("Import error",re),alert("Could not import itinerary  invalid file")}},[pt]),mr=Z.useCallback(Q=>{const re=Q.target.files&&Q.target.files[0];re&&(Ui(re),Q.currentTarget.value="")},[Ui]),ds=Z.useCallback(()=>{if(!a)return;const re=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="aus-trip-scheduler">
  <metadata>
    <time>${new Date().toISOString()}</time>
  </metadata>
  <trk>
    <name>Planned route</name>
    <trkseg>
`,ae=a.coordinates.map(([Vn,ei])=>`      <trkpt lat="${Vn}" lon="${ei}"></trkpt>
`).join(""),de=re+ae+`    </trkseg>
  </trk>
</gpx>`,De=new Blob([de],{type:"application/gpx+xml"}),Je=URL.createObjectURL(De),Ge=document.createElement("a");Ge.href=Je,Ge.download=`route-${new Date().toISOString().replace(/[:.]/g,"-")}.gpx`,document.body.appendChild(Ge),Ge.click(),Ge.remove(),setTimeout(()=>URL.revokeObjectURL(Je),5e3)},[a]),co=Z.useCallback(()=>{if(!a)return;const re=(a.waypoints||[]).slice(0,25).map(([le,de])=>`${le},${de}`);if(!re.length)return;const ae=`https://www.google.com/maps/dir/${re.join("/")}`;window.open(ae,"_blank")},[a]),mt=Z.useCallback(async()=>{const Q=A.trim();if(Q){P(!0);try{const re=Ge=>`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(Ge)}&limit=8&countrycodes=au&addressdetails=1`,ae=async Ge=>{const Vn=await fetch(re(Ge),{headers:{"Accept-Language":"en"}});if(!Vn.ok)throw new Error(`Geocode ${Vn.status}`);return await Vn.json()},le=await ae(Q);let de=null;if(!Q.toLowerCase().includes("south")&&!Q.toLowerCase().includes("sa"))try{de=await ae(`${Q} South Australia`)}catch{de=null}const De=[],Je=new Set;if(de&&de.length)for(const Ge of de)Je.has(Ge.osm_id)||(De.push(Ge),Je.add(Ge.osm_id));if(le&&le.length)for(const Ge of le)Je.has(Ge.osm_id)||(De.push(Ge),Je.add(Ge.osm_id));if(!De.length){alert("No results found for that place");return}b(De.map(Ge=>({lat:parseFloat(Ge.lat),lon:parseFloat(Ge.lon),name:Ge.display_name,raw:Ge})))}catch(re){console.error("Geocode error",re),alert("Could not find location. Check console for details.")}finally{P(!1)}}},[A]),Rt=Z.useCallback(Q=>{f({lat:Q.lat,lon:Q.lon,name:Q.name}),N(""),b(null),v(!1);const re={id:`start-${Q.lat}-${Q.lon}`,name:Q.name||"Start location",type:"locality",lat:Q.lat,lon:Q.lon,addedAt:Date.now()};o(ae=>ae.some(le=>le.id===re.id)?ae:[re,...ae])},[]),_i=Z.useCallback(()=>{f(void 0),N(""),b(null),u(null)},[]),ho=Z.useMemo(()=>`${r.length} stop${r.length===1?"":"s"}`,[r.length]),fs=null;return n?C.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#0f172a",color:"white",fontSize:18},children:"Loading..."}):t?C.jsxs("div",{className:"app",children:[C.jsx("header",{className:"header",children:C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",width:"100%",gap:16},children:[C.jsxs("div",{children:[C.jsxs("h1",{style:{fontSize:18,margin:0,display:"flex",alignItems:"center",gap:8},children:["Australia Trip Scheduler",C.jsx("span",{style:{fontSize:12,padding:"2px 6px",borderRadius:999,background:"#e2e8f0",color:"#0f172a",border:"1px solid #cbd5e1"},title:"Version",children:"v6.0"})]}),C.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginTop:6},children:[C.jsx("a",{className:"button small",href:"/interactive-Aus-map/user-manual.html",target:"_blank",rel:"noopener noreferrer",title:"Open the latest User Manual",children:" User Manual"}),C.jsx("button",{className:"button small",title:"See what's new in v6.0",onClick:()=>K(!0),children:" What's New"})]}),ho,C.jsxs("div",{style:{fontSize:12,color:"#475569"},children:["Start: ",d?d.name??`${d.lat.toFixed(3)}, ${d.lon.toFixed(3)}`:"None"]}),C.jsxs("div",{style:{fontSize:12,color:"#475569",marginTop:4},children:["User: ",t.email]}),fs]}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,alignItems:"center",flexGrow:1},children:[C.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[C.jsx("input",{className:"startInput",placeholder:"Type start place (e.g. Adelaide)",value:A,onChange:Q=>N(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&mt()},disabled:j||!!d,"aria-label":"Start place input"}),C.jsx("button",{className:"button",onClick:mt,disabled:j||!A.trim()||!!d,children:j?"Searching":"Set Start"})]}),d&&C.jsxs("div",{style:{fontSize:14,fontWeight:500,color:"#1e40af",display:"flex",alignItems:"center",gap:8},children:[C.jsx("span",{children:"Starting from"}),C.jsx("span",{children:""}),C.jsx("span",{children:d.name||"Start location"}),C.jsx("button",{className:"button small",onClick:_i,title:"Clear start location",children:"Clear"})]}),C.jsx("div",{style:{position:"relative"},children:k&&C.jsxs("div",{className:"geocodePickOverlay",children:[C.jsx("div",{style:{display:"flex",justifyContent:"flex-end",padding:6},children:C.jsx("button",{className:"button small",onClick:()=>b(null),children:"Cancel"})}),k.map((Q,re)=>C.jsxs("button",{className:"geocodeItem",onClick:()=>Rt(Q),children:[C.jsx("div",{style:{fontSize:13},children:Q.name}),C.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:[Q.lat.toFixed(4),", ",Q.lon.toFixed(4)]})]},re))]})})]}),C.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap",justifyContent:"flex-end"},children:[C.jsx("button",{className:"button small",onClick:()=>M(!z),title:"Show only towns with population under 10,000",style:{background:z?"#ef4444":"#10b981"},children:C.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[C.jsx("span",{children:"Show Only Small Towns"}),C.jsx("span",{style:{fontSize:10,marginTop:2},children:z?"Enabled":"Disabled"})]})}),C.jsx("button",{className:"button small",onClick:()=>In(!Ke),title:"Show/hide campsite markers",style:{background:Ke?"#10b981":"#ef4444"},children:C.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[C.jsx("span",{children:"Show Campsites"}),C.jsx("span",{style:{fontSize:10,marginTop:2},children:Ke?"Enabled":"Disabled"})]})}),C.jsx("button",{className:"button",onClick:pt,disabled:w||r.length===0,children:w?"Routing":"Update Route"}),w&&C.jsx("span",{className:"spinner","aria-hidden":"true"}),C.jsx("button",{className:"button",onClick:ds,disabled:!a,title:"Download route as GPX",children:"Export GPX"}),C.jsx("button",{className:"button",onClick:co,disabled:!a,title:"Open route in Google Maps",children:"Open in Google Maps"})]})]})}),C.jsxs("main",{className:"main",children:[C.jsx("div",{className:"mapPane",children:C.jsx(VP,{onAddPlace:ne,selectedIds:new Set(r.map(Q=>Q.id)),route:a,startLocation:d,selectingStart:_,showFuelStations:X,showDumpPoints:I,showWaterPoints:O,showSmallTownsOnly:z,showCampsites:Ke,favorites:Ue,toggleFavorite:tt,itinerary:r,onMapReady:U,visitedPlaces:G,onStartSelected:(Q,re,ae)=>{console.log("Start selected:",Q,re,ae),f({lat:Q,lon:re,name:ae}),v(!1);const le={id:`start-${Q}-${re}`,name:ae||"Start location",type:"locality",lat:Q,lon:re,addedAt:Date.now()};o(de=>{if(de.some(Je=>Je.id===le.id))return de;const De=[le,...de];return t&&El(t.uid,De).catch(console.error),De})}})}),C.jsxs("aside",{className:"sidebar",children:[C.jsxs("div",{className:"sidebarHeader",children:[C.jsxs("h2",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[C.jsx("span",{children:"Itinerary"}),a&&a.legs&&a.legs.length>0&&C.jsx("span",{style:{fontSize:14,fontWeight:"normal",color:"#475569"},children:(()=>{const Q=a.legs.reduce((de,De)=>de+De.duration,0),re=Q/3600;if(re>=24){const de=Math.floor(re/24),De=Math.floor(re%24),Je=Math.round(Q%3600/60);return de>0&&De>0?`${de}d ${De}h ${Je}m`:de>0?`${de}d ${Je}m`:`${De}h ${Je}m`}const ae=Math.floor(re),le=Math.round(Q%3600/60);return ae>0?`${ae}h ${le}m`:`${le}m`})()})]}),C.jsx("p",{style:{margin:"0 0 8px 0",fontSize:12,color:"#94a3b8",fontStyle:"italic"},children:"Scroll down to view Favourites"}),C.jsxs("div",{className:"button-grid",children:[C.jsx("button",{className:"button",onClick:()=>R(!X),title:"Show fuel stations near itinerary stops",style:{background:X?"#ef4444":"#10b981"},children:X?"Hide Fuel":"Show Fuel"}),C.jsx("button",{className:"button",onClick:Dn,disabled:r.length===0,title:"Download itinerary as JSON",children:"Save itinerary"}),C.jsxs("button",{className:"button",onClick:()=>fe(!0),title:"View all places you've visited",style:{backgroundColor:G.length>0?"#10b981":void 0},children:[" Show Visits (",G.length,")"]}),C.jsx("button",{className:"button",onClick:()=>x(!I),title:"Show RV dump points near itinerary stops",style:{background:I?"#ef4444":"#10b981"},children:I?"Hide Dumps":"Show Dumps"}),C.jsx("button",{className:"button",onClick:()=>{var Q;return(Q=Ze.current)==null?void 0:Q.click()},title:"Load itinerary from JSON file",children:"Load itinerary"}),C.jsx("button",{className:"button",onClick:Cn,disabled:r.length===0,title:"Remove all stops from itinerary",children:"Clear itinerary"}),C.jsx("button",{className:"button",onClick:()=>V(!O),title:"Show drinking water filling points near itinerary stops",style:{background:O?"#ef4444":"#10b981"},children:O?"Hide Water":"Show Water"}),C.jsx("button",{className:"button",onClick:()=>Ae(!0),disabled:r.length===0,title:"Share your route with others",children:" Share Route"}),C.jsx("button",{className:"button",onClick:Ce,title:"Sign out",style:{backgroundColor:"#ef4444"},children:"Logout"}),C.jsx("input",{ref:Ze,type:"file",accept:"application/json",style:{display:"none"},onChange:mr})]})]}),C.jsxs("div",{className:"sidebarContent",children:[C.jsx(cM,{items:r,onRemove:ue,onSetStart:Re,onClearStart:_i,startLocation:d,onUploadAttachment:qe,onDeleteAttachment:Le}),C.jsxs("div",{style:{marginTop:24},children:[C.jsxs("h2",{style:{margin:"0 0 12px 0",fontSize:18,fontWeight:600},children:[" Favorites (",Ue.length,")"]}),C.jsx(fM,{favorites:Ue,onAddToItinerary:ne,onRemove:st,onCenterMap:ke,onToggleVisited:Me,onUploadAttachment:qe,onDeleteAttachment:Le})]})]})]})]}),te&&C.jsx(gM,{visitedPlaces:G,onCenterMap:(Q,re)=>{ke(Q,re),fe(!1)},onUnvisit:ot,onClose:()=>fe(!1)}),H&&C.jsx("div",{className:"modalOverlay",onClick:()=>K(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:C.jsxs("div",{onClick:Q=>Q.stopPropagation(),style:{background:"#fff",borderRadius:8,padding:16,maxWidth:520,width:"90%",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[C.jsx("h3",{style:{margin:0},children:"What's New in v6.0"}),C.jsx("button",{className:"button small",onClick:()=>K(!1),children:"Close"})]}),C.jsxs("ul",{style:{marginTop:12},children:[C.jsx("li",{children:" Share routes with others via shareable links - no login required to load."}),C.jsx("li",{children:" Routes are encoded in URLs for easy sharing via email, messaging, social media."}),C.jsx("li",{children:" Shared routes can be edited before saving - full flexibility for recipients."}),C.jsx("li",{children:" Wikipedia links on place markers for quick information access."}),C.jsx("li",{children:" File attachments for Favorites and Itinerary stops (photos, PDFs, docs)."}),C.jsx("li",{children:" Professional 3D beveled button styling throughout the app."})]}),C.jsx("div",{style:{marginTop:12},children:C.jsx("a",{href:"/interactive-Aus-map/user-manual.html",target:"_blank",rel:"noopener noreferrer",className:"button",children:"Read the Manual"})})]})}),C.jsx(TM,{itinerary:r,isOpen:we,onClose:()=>Ae(!1)})]}):C.jsx(SM,{onLoginSuccess:()=>{}})}If.createRoot(document.getElementById("root")).render(C.jsx(ir.StrictMode,{children:C.jsx(xM,{})}));
